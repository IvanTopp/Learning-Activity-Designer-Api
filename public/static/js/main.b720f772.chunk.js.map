{"version":3,"sources":["utils/fetch.js","contexts/AuthContext.js","contexts/SocketContext.js","hooks/useSocket.js","types/index.js","types/ui.js","types/design.js","contexts/ui/uiReducer.js","contexts/ui/UiContext.js","pages/LandingPage/LandingPage.js","router/PublicRoute.js","router/PrivateRoute.js","utils/textFormatters.js","services/DesignService.js","components/Design.js","components/DesignsContainer.js","services/FolderService.js","components/RightClickMenu.js","components/DesignsFolder.js","components/FoldersContainer.js","pages/Navigation/LeftPanel.js","pages/Navigation/MyDesigns/DesignsBreadcrumbs.js","components/DesignSkeleton.js","pages/Navigation/MyDesigns/RecentDesigns.js","pages/Navigation/MyDesigns/FolderModal.js","pages/Navigation/MyDesigns/MyDesignsPage.js","services/UserService.js","hooks/useForm.js","pages/User/UserProfile/EditProfileModal.js","components/UserCard.js","pages/User/UserProfile/ShowContactsModal.js","pages/User/UserProfile/UserProfile.js","assets/img/Logo.png","contexts/UserConfigContext.js","theme/theme.js","components/ModalFormWithImage.js","pages/Auth/LoginModal.js","pages/Auth/RegisterModal.js","components/NavBar.js","components/Footer.js","pages/Navigation/SharedWithMe/SharedWithMePage.js","services/CategoryService.js","components/KeywordManager.js","hooks/useHorizontalScroll.js","pages/Navigation/PublicRepository/PublicRepositoryPage.js","pages/User/SearchUsersPage/SearchUsersPage.js","contexts/design/designReducer.js","contexts/design/DesignContext.js","contexts/SharedDocContext.js","components/SharedTextFieldTipTapEditor.js","pages/DesignPage/Workspace/Task.js","components/StackedBar.js","assets/resource/items.js","pages/DesignPage/Workspace/LearningActivity.js","components/PieGraphic.js","components/CustomMenu.js","pages/DesignPage/Workspace/ShareModal.js","pages/DesignPage/PDF/DocumentPDF.js","pages/DesignPage/PDF/ViewAndDownloadPDFModal.js","pages/DesignPage/Workspace/ResourceLink.js","pages/DesignPage/Workspace/ResourceLinksModal.js","pages/DesignPage/Workspace/EvaluationModal.js","pages/DesignPage/Workspace/DesignWorkspace.js","pages/DesignPage/Metadata/LearningResult.js","pages/DesignPage/Metadata/BloomPiramid.js","pages/DesignPage/Metadata/BloomVerbList.js","pages/DesignPage/Metadata/LearningResultModal.js","pages/DesignPage/Metadata/DesignMetadata.js","components/TabPanel.js","services/BloomService.js","pages/DesignPage/DesignPage.js","components/ConfirmationModal.js","pages/DesignPageReader/DesignReader/TaskReader.js","pages/DesignPageReader/DesignReader/LearningActivityReader.js","pages/DesignPageReader/DesignReader/DesignReader.js","pages/DesignPageReader/DesignPageReader.js","pages/SharedLink/SharedLinkPage.js","pages/Auth/ResetPasswordPage.js","router/AppRouter.js","App.js","index.js"],"names":["baseUrl","process","fetchWithoutToken","endpoint","data","a","method","url","fetch","resp","json","headers","body","JSON","stringify","fetchWithToken","token","localStorage","getItem","AuthContext","createContext","useAuthState","context","useContext","undefined","Error","initialState","checking","user","AuthProvider","children","useState","authState","setAuthState","login","email","password","ok","register","userData","verifyToken","useCallback","setItem","useEffect","removeItem","Provider","value","logout","SocketContext","useSocketState","SocketProvider","serverPath","socket","setSocket","online","setOnline","connectSocket","tempSocket","io","connect","transports","autoConnect","forceNew","query","disconnectSocket","disconnect","connected","on","useSocket","types","ui","toggleLoginModal","toggleModal","toggleRegisterModal","toggleLearningResultModal","updateFolderPath","toggleConfirmAction","setFolder","setConfirmData","setPDF","setResourceLink","setEvaluation","design","updateDesign","changeMetadataField","changeTaskField","setCurrentLearningResultField","clearCurrentLearningResult","setCurrentLearningResult","setBloomCategories","setBloomVerbs","setDesignPrivileges","addDesignKeyword","removeDesignKeyword","updateReadOnlyLink","uiReducer","state","action","type","payload","isRegisterModalOpen","folderPath","toggleWitchOpenModal","setWitchOpenModal","folder","confirmModalData","pdf","typeUserPDF","resourceLink","evaluationData","UiContext","useUiState","isLoginModalOpen","isLearningResultModalOpen","isEditProfileModalOpen","isContactsModalOpen","isConfirmationModalOpen","isShareModalOpen","setWichOpenModal","isFolderModalOpen","isPDFModalOpen","isResourceModalOpen","isEvaluationModalOpen","_id","name","args","actionMutation","learningActivityIndex","taskIndex","UiProvider","useReducer","uiState","dispatch","useStyles","makeStyles","theme","root","minHeight","LandingPage","classes","className","PublicRoute","isAuthenticated","Component","component","rest","props","to","PrivateRoute","location","pathname","formatName","lastname","firstName","split","firstLastname","getUserInitials","substring","getRecentDesigns","message","getDesignsByFolder","path","pageParam","from","getPublicDesignsByUser","id","getPublicFilteredDesigns","filter","keywords","categories","getDesignsSharedWithMe","createDesign","isPublic","deleteDesignById","getDesignByLink","link","trim","length","duplicateDesign","position","border","palette","divider","width","minWidth","margin","borderRadius","cursor","userSelect","backgroundColor","background","boxShadow","designHover","ownerInfo","borderTop","paddingLeft","paddingRight","row","display","rowJustified","justifyContent","col","flexDirection","ellipsis","whiteSpace","overflow","textOverflow","designIcon","marginLeft","fontSize","alignSelf","justifySelf","deleteIcon","top","right","closeButton","spacing","color","grey","Design","title","updatedAt","metadata","owner","privileges","canDelete","queryClient","useQueryClient","enqueueSnackbar","useSnackbar","history","useHistory","deleteMutation","useMutation","onMutate","cancelQueries","previousDesigns","getQueryData","previousPublicDesigns","keys","includes","setQueryData","oldData","oldPage","pages","find","page","designs","newDesigns","newPage","Object","assign","newPages","indexOf","previousRecentDesigns","onError","error","console","log","onSettled","invalidateQueries","onSuccess","variant","autoHideDuration","handleDeleteDesign","e","stopPropagation","Card","elevation","CardActionArea","onClick","privilege","uid","push","CardContent","style","Description","Typography","category","workingTime","hours","minutes","marginTop","marginBottom","Date","toLocaleDateString","marginRight","Star","scoreMean","IconButton","Delete","Link","CardActions","Avatar","alt","src","img","occupation","designsContainer","flexGrow","flexWrap","textAlign","alignItems","loadMore","clickHere","textDecoration","DesignsContainer","status","isFetchingNextPage","fetchNextPage","hasNextPage","handleCreateDesign","label","Alert","severity","map","index","i","ownerId","Button","getfolderByPath","createFolder","folderName","renameFolder","deleteFolder","mouseX","mouseY","RightClickMenu","options","setState","ref","useRef","handleClose","onContextMenu","preventDefault","area","current","getBoundingClientRect","clientX","x","clientY","y","height","Menu","keepMounted","open","onClose","anchorReference","anchorPosition","left","option","MenuItem","onSelect","handleSelect","icon","ListItemIcon","Box","fontStyle","paper","content","folderContainer","shape","text","primary","folderBody","padding","paddingTop","more","DesignsFolder","isMenuOpen","setMenuOpen","parentPath","replace","deleteFolderMutation","previousFolders","oldFolders","handleRename","handleDelete","Edit","Folder","currentTarget","MoreVert","onBlur","anchorEl","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","FoldersContainer","LeftPanel","useLocation","createDesignMutation","mutate","List","aria-label","ListItem","button","selected","Home","ListItemText","Divider","Group","Public","default","DesignsBreadcrumbs","Breadcrumbs","newPath","folderList","shift","createBreadcrumbsLinks","DesignSkeleton","Skeleton","animation","recentDesigns","RecentDesigns","n","Math","trunc","useQuery","isLoading","isError","createSkeletons","Array","designList","close","folderNameInput","FolderModal","setError","setName","createFolderMutation","handleCloseModal","renameFolderMutation","handleCreateFolder","toLowerCase","handleRenameFolder","Dialog","fullWidth","aria-labelledby","DialogTitle","Close","DialogContent","TextField","helperText","onChange","target","DialogActions","leftPanel","borderRight","workspace","workSpace","rightPanel","borderLeft","breadCrumbs","designsAndFoldersContainer","sectionTitle","paddingBottom","breakpoints","down","MyDesignsPage","urlparams","useParams","designsRef","setWidth","setHeight","urlPath","designsQuery","useInfiniteQuery","refetchOnWindowFocus","getNextPageParam","lastPage","nPages","foldersQuery","offsetHeight","offsetWidth","handleOpenFolderModal","Grid","container","item","xs","md","lg","ButtonGroup","size","getUser","searchUsers","updateContact","contacts","newData","updateProfileInformation","institution","country","city","description","getUserByEmail","resendVerificationCode","changeUserPassword","newPassword","useForm","values","setValues","reset","handleInputChange","photoProfile","errorContainer","EditProfileModal","React","memo","formData","updateProfileInformationMutation","previousUserProfile","handleSaveInformation","dividers","justify","sm","multiline","rows","zIndex","card","photo","UserCard","handleViewUser","ShowContactsModal","contact","designPanel","spaceFirstDataFirstData","centerGrid","justifyItems","spaceSecondData","spaceData","spaceDesign","spaceIcons","UserProfile","refetch","updateConctactMutation","prevState","handleAddContact","handleDeleteContact","align","spaceFirstData","startIcon","PersonAdd","Apartment","Email","UserConfigContext","useUserConfigState","UserConfigProvider","darkTheme","modeAdvanced","userConfig","setUserConfig","parse","isDarkActive","createMuiTheme","dark","orange","light","lightBlue","main","secondary","deepOrange","deepPurple","navbar","ThemeProvider","header","ModalFormWithImage","isOpen","maxWidth","subtitle","image","actions","disableTypography","CloseRounded","formcontrol","form","logo","footer","initialErrors","emailError","passwordError","LoginModal","formErrors","setFormErrors","errorFromServer","setErrorFromServer","showPassword","setShowPassword","formLoginValues","handleInputFormChange","handleLogin","key","reduce","b","test","Logo","onSubmit","noValidate","InputProps","endAdornment","onMouseDown","event","Visibility","VisibilityOff","href","nameError","lastnameError","confirmPasswordError","RegisterModal","confirmPassword","handleRegister","brand","search","searchForm","userAndOptions","navbarColor","navbarLetter","menuColor","menu","toolbar","up","NavBar","setFilter","handleChangeUserConfig","checked","handleSearchUsers","AppBar","Toolbar","OutlinedInput","placeholder","iconButton","Search","FormControlLabel","control","Switch","clear","pos","Footer","Container","SharedWithMePage","sharedDesignsQuery","getCategories","keywordList","mouseWheel","overflowX","overflowY","listStyle","keyword","searchContainer","input","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","keywordFilter","KeywordManager","onChangeKeywords","setKeyword","keywordError","setKeywordError","scrollRef","node","setRef","useLayoutEffect","onWheel","deltaY","scrollTo","scrollLeft","behavior","addEventListener","removeEventListener","useHorizontalScroll","disableElevation","Chip","onDelete","slice","handleRemoveKeyword","categoriesContainer","PublicRepositoryPage","setSearch","categoriesFilter","setCategoriesFilter","setKeywords","categoriesQuery","c","handleSearch","Checkbox","handleToggleCategory","targetKeyword","usersContainer","SearchUsersPage","q","queryString","redirectTo","users","designReducer","subfield","field","learningActivities","forEach","la","learningActivityID","tasks","t","taskID","currentLearningResult","verb","editing","bloomCategories","bloomVerbs","k","readOnlyLink","DesignContext","useDesignState","DesignProvider","designState","SharedDocContext","useSharedDocContext","SharedDocProvider","doc","setDoc","provider","setProvider","setUser","connectToDesign","colors","yDoc","Y","guid","wsProvider","WebsocketProvider","userWithColor","floor","random","awareness","setLocalStateField","clearDoc","htmlToText","htmlString","span","document","createElement","innerHTML","textContent","innerText","rowMax","focused","inputContainer","borderWidth","borderStyle","borderColor","disabled","editorx","typography","body1","fontFamily","marginBlockStart","marginBlockEnd","outline","float","pointerEvents","SharedTextFieldTipTapEditor","forwardRef","maxLength","initialvalue","max","min","deleteOnRemove","setFocused","synced","setSynced","editor","setEditor","getText","getHTML","toString","setText","commands","first","setContent","useImperativeHandle","clearText","Editor","editorProps","handleTextInput","view","isNaN","dom","firstChild","match","parseInt","handlePaste","childCount","newValue","extensions","Document","extend","Paragraph","Text","CollaborationCursor","configure","Collaboration","CharacterCount","limit","onUpdate","onFocus","once","chain","focus","run","ButtonBase","val","ArrowDropUp","ArrowDropDown","trashIcon","tasksSpacing","taskBody","taskSpacingDescription","taskSpacingDescriptionBD","colorLearningType","timeField","grid","gridContainer","gridTemplateColumns","gridTemplateRows","gridTemplateAreas","firstRow","learningTypeContainer","gridArea","learningType","modality","format","delete","resourceLinkGrid","fab","maxHeight","Task","task","isMounted","hoursRef","minutesRef","descriptionRef","useTheme","isMediumDevice","useMediaQuery","timeHours","duration","timeMinutes","groupSize","clearTexts","handleEditTaskField","emit","designId","handleOpenResourceModal","handleDeleteTask","handleChangeDropdown","Paper","square","FormControl","InputLabel","shrink","Select","labelId","Tooltip","gutterBottom","InputLabelProps","inputComponent","inputProps","colorBox","colorBoxRightPanel","spacingGraphic","legend","StackedBar","items","legends","colorGraphicToPdf","valueTotal","toFixed","arrow","itemsLearningType","itemsLearningTypePie","itemsFormat","itemsModality","unitSpacing","titleUnitSpacing","graphicUnitSpacing","spacingDescriptionlearningActivity","spacingDescription","spacingLinkedResults","buttonPos","gridTask","descriptionContainer","learningResultList","bottom","taskContainer","LearningActivity","learningActivity","isXSDevice","titleRef","taskRefs","handleDeleteUnit","learningResults","handleAddTask","ObjectID","handleEditLearningActivityField","linkedLearningResult","results","result","lr","isSelected","indexLearningResults","r","_indexLearningResults","handleToggleLearningResult","handleOpenMenu","handleOpenModalEvaluation","ListAlt","Fab","Add","PieGraphic","dataSource","argumentField","valueField","verticalAlignment","horizontalAlignment","itemTextPosition","rowCount","enabled","customizeTooltip","arg","argumentText","percent","CustomMenu","Icon","setOpen","titleSectionShare","divSectionShare","ShareModal","inputUser","setInputUser","newPrivileges","setNewPrivileges","handleCopyLinkToClipboard","navigator","clipboard","writeText","handleGenerateLink","wordBreak","FileCopy","Autocomplete","blurOnSelect","v","u","handleAddContactInArray","inputValue","onInputChange","newInputUser","getOptionSelected","renderInput","params","p","handleChange","DocumentPDF","styles","StyleSheet","create","marginVertical","marginHorizontal","box","pageNumber","table","tableRow","tableCol","tableCell","marginTitle","wrap","classSize","priorKnowledge","objective","indexTask","resourceLinks","resource","evaluation","render","totalPages","fixed","spaceInit","ViewAndDownloadPDFModal","imgGraphic","setPdfView","setImg","html2canvas","scrollX","canvas","toDataURL","defineImage","fullScreen","titleMargin","fileName","blob","loading","spaceResource","tooltip","ResourceLink","newResource","setNewResource","newTitle","changeTitle","newLink","changeLink","handleDeleteResourceLink","buttonZone","resourceZone","contentSpace","ResourceLinksModal","resources","EvaluationModal","newEvaluation","setNewEvaluation","newDescription","changeDescription","buttonGroupWorkSpace","textLeftPanel","borderBottom","LeftPanelMetadata","textLeftPanelMetadata","graphicsSpacing","betweenGraphics","workSpaceUnits","DesignWorkspace","openMenuPDF","setOpenMenuPDF","pdfView","showGraphicLearningType","showGraphicFormat","showGraphicModality","handleOpenModalPDF","handleCloseMenu","activities","workingTimeDesign","LearningResult","uiDispatch","designDispatch","_index","clipPath","transition","crear","evaluar","analizar","aplicar","comprender","recordar","active","BloomPiramid","isActive","BloomVerbList","Radio","LearningResultModal","setDescription","activeStep","setActiveStep","steps","Stepper","alternativeLabel","Step","StepLabel","prevActiveStep","learningResult","categoryPopOver","DesignMetadata","nameRef","classSizeRef","priorKnowledgeRef","objectiveRef","workingTimeDesignHours","workingTimeDesignMinutes","workingTimeHours","workingTimeMinutes","clearEditors","handleChangeMetadataField","handleOpenLearningResultmodal","MenuProps","TabPanel","other","role","hidden","getBloomCategories","getBloomVerbs","menuLetters","menuLettersSelected","tabBar","usersConnecteds","a11yProps","DesignPage","metadataRef","setUsersList","tabIndex","setTabIndex","prefetchBloomCategories","prefetchBloomVerbs","metadataComponent","public","res","userInPrivileges","newDesign","off","Tabs","Tab","bodyMargin","ConfirmationModal","setMessage","confirmResult","TaskReader","LearningActivityReader","textLefPanel","textLefPanelMetadata","DesignReader","duplicateDesignMutation","handleDuplicateDesign","DesignPageReader","SharedLinkPage","renderContent","backButton","instructions","codeForm","codeButton","codeInput","backdrop","drawer","emailInitialValue","codeInitialValue","passwordInitialValue","confirm","confirmError","ResetPasswordPage","setLoading","setUid","verificationCode","setVerificationCode","setCodeForm","setEmail","passwordForm","setPasswordForm","Code","VpnKey","Done","handleNext","handleChangeEmail","handleSearchAccount","randomCode","handleResetPassword","handleChangePassword","handleChangeCode","handleResendCode","step","toUpperCase","autoFocus","textTransform","getStepContent","Backdrop","CircularProgress","AppRouter","CssBaseline","maxSnack","TransitionComponent","Grow","exact","QueryClient","LearningActivityDesigner","QueryClientProvider","client","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.b720f772.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_URL;\r\n//const baseUrl = 'http://localhost:4000/api';\r\nconst fetchWithoutToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url);\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nconst fetchWithToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n    const token = localStorage.getItem('token') || '';\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'x-token': token,\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nexport {\r\n    fetchWithoutToken,\r\n    fetchWithToken,\r\n};\r\n","import React, { useState, useEffect, useContext, createContext, useCallback } from 'react';\r\nimport { fetchWithoutToken, fetchWithToken } from 'utils/fetch';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuthState() {\r\n\tconst context = useContext(AuthContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useAuthState must be used within a AuthProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n    checking: true,\r\n\tuser: null,\r\n\ttoken: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [authState, setAuthState] = useState(initialState);\r\n\r\n\tconst login = async ( email, password ) => {\r\n        const resp = await fetchWithoutToken('auth/login', { email, password }, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst register = async (userData) => {\r\n        const resp = await fetchWithoutToken('auth/register', userData, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst logout = () => {\r\n        setAuthState({\r\n            checking: false,\r\n            user: null,\r\n\t\t\ttoken: null,\r\n        });\r\n    };\r\n\r\n\tconst verifyToken = useCallback( async () => {\r\n        const token = localStorage.getItem('token');\r\n        if(!token){\r\n            setAuthState({\r\n\t\t\t\tuser: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n        const resp = await fetchWithToken('auth/renew');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            localStorage.setItem('token', token);\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n            return true;\r\n        } else {\r\n            setAuthState({\r\n                user: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n    }, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState.token === null) {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', authState.token);\r\n\t\t}\r\n\t}, [authState.token]);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ \r\n\t\t\tauthState,\r\n\t\t\tlogin,\r\n\t\t\tregister,\r\n\t\t\tlogout,\r\n\t\t\tverifyToken,\r\n\t\t\tsetAuthState \r\n\t\t}}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n","import { createContext, useContext, useEffect } from \"react\";\r\nimport { useSocket } from \"hooks/useSocket\";\r\nimport { useAuthState } from \"./AuthContext\";\r\n\r\nexport const SocketContext = createContext();\r\n\r\nexport const useSocketState = () => {\r\n\tconst context = useContext(SocketContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useSocketState must be used within a SocketProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n\r\n    const { authState } = useAuthState();\r\n    const { socket, online, connectSocket, disconnectSocket } = useSocket(process.env.REACT_APP_SOCKET_URL);\r\n    \r\n    useEffect(() => {\r\n        const logged = !!authState.token;\r\n        if( logged ) connectSocket();\r\n    }, [ authState.token, connectSocket ]);\r\n\r\n    useEffect(()=>{\r\n        const logged = !!authState.token;\r\n        if( !logged ) disconnectSocket();\r\n    }, [ authState.token, disconnectSocket ]);\r\n\r\n    return (\r\n        <SocketContext.Provider value={{ socket, online }}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    );\r\n};","import { useAuthState } from \"contexts/AuthContext\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport const useSocket = (serverPath) => {\r\n    const [socket, setSocket] = useState(null);\r\n    const [online, setOnline] = useState(false);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectSocket = useCallback(() => {\r\n        const token = authState.token;\r\n        const tempSocket = io.connect( serverPath, {\r\n            transports: ['websocket'],\r\n            autoConnect: true,\r\n            forceNew: true,\r\n            query: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        setSocket(tempSocket);\r\n    }, [serverPath, authState.token]);\r\n\r\n    const disconnectSocket = useCallback(() => {\r\n        socket?.disconnect();\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        setOnline( socket?.connected );\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        socket?.on('connect', () => setOnline(true));\r\n        socket?.on('disconnect', () => setOnline(false));\r\n    }, [socket]);\r\n\r\n\r\n    return {\r\n        socket,\r\n        online,\r\n        connectSocket,\r\n        disconnectSocket\r\n    };\r\n};","import ui from 'types/ui';\r\nimport design from 'types/design';\r\n\r\nconst types = {\r\n    ui,\r\n    design,\r\n};\r\n\r\nexport default types;","const ui = {\r\n    toggleLoginModal: '[UI] toggle login modal',\r\n    toggleModal: '[UI] toggle modal',\r\n    toggleRegisterModal: '[UI] toggle register modal',\r\n    toggleLearningResultModal: '[UI] toggle learning result modal',\r\n    updateFolderPath: '[UI] update folder path',\r\n    toggleConfirmAction: '[UI] confirm action',\r\n    setFolder: '[UI] set folder data',\r\n    setConfirmData: '[UI] set confirm data',\r\n    setPDF: '[UI] set pdf',\r\n    setResourceLink: '[UI] set resource link',\r\n    setEvaluation: '[UI] set evaluation',\r\n};\r\n\r\nexport default ui;","const design = {\r\n    updateDesign: '[DESIGN] toggle login modal',\r\n    changeMetadataField: '[DESIGN] change metadata field',\r\n    changeTaskField: '[DESIGN] change task field',\r\n    setCurrentLearningResultField: '[DESIGN] set learning result field',\r\n    clearCurrentLearningResult: '[DESIGN] clear current learning result',\r\n    setCurrentLearningResult: '[DESIGN] set current learning result',\r\n    setBloomCategories: '[DESIGN] set bloom categories',\r\n    setBloomVerbs: '[DESIGN] set bloom verbs',\r\n    setDesignPrivileges: '[DESIGN] set design privileges',\r\n    addDesignKeyword: '[DESIGN] add design keyword',\r\n    removeDesignKeyword: '[DESIGN] remove design keyword',\r\n    updateReadOnlyLink: '[DESIGN] change read only link',\r\n};\r\n\r\nexport default design;","import types from \"types\";\r\n\r\n\r\nexport const uiReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.ui.toggleModal:\r\n            return {\r\n                ...state,\r\n                ['is' + action.payload + 'ModalOpen']: !state['is' + action.payload + 'ModalOpen'],\r\n            };\r\n        case types.ui.toggleRegisterModal:\r\n            return {\r\n                ...state,\r\n                isRegisterModalOpen: !state.isRegisterModalOpen,\r\n            };\r\n        case types.ui.updateFolderPath:\r\n            if (state.folderPath !== action.payload) {\r\n                return {\r\n                    ...state,\r\n                    folderPath: action.payload,\r\n                };\r\n            } else return state;\r\n        case types.ui.toggleWitchOpenModal:\r\n            return {\r\n                ...state,\r\n                setWitchOpenModal: !state.setWitchOpenModal,\r\n            };\r\n        case types.ui.setFolder:\r\n            return {\r\n                ...state,\r\n                folder: action.payload,\r\n            };\r\n        case types.ui.setConfirmData:\r\n            return{\r\n                ...state,\r\n                confirmModalData: action.payload,\r\n            };\r\n        case types.ui.setPDF:\r\n            return{\r\n                ...state,\r\n                pdf: {\r\n                    ...state.pdf,\r\n                    typeUserPDF: action.payload\r\n                },\r\n            };\r\n        case types.ui.setResourceLink:\r\n            return{\r\n                ...state,\r\n                resourceLink: action.payload,\r\n            };\r\n        case types.ui.setEvaluation:\r\n            return{\r\n                ...state,\r\n                evaluationData: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { uiReducer } from 'contexts/ui/uiReducer';\r\n\r\nconst UiContext = createContext();\r\n\r\nexport function useUiState() {\r\n\tconst context = useContext(UiContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUiState must be used within a UiProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tfolderPath: '/',\r\n\tisLoginModalOpen: false,\r\n\tisRegisterModalOpen: false,\r\n\tisLearningResultModalOpen: false,\r\n\tisEditProfileModalOpen: false,\r\n\tisContactsModalOpen: false,\r\n\tisConfirmationModalOpen: false,\r\n\tisShareModalOpen: false,\r\n\tsetWichOpenModal: false,\r\n\tisFolderModalOpen: false,\r\n\tisPDFModalOpen: false,\r\n\tisResourceModalOpen: false,\r\n\tisEvaluationModalOpen: false,\r\n\tfolder: {\r\n\t\t_id: null,\r\n\t\tname: '',\r\n\t},\r\n\tconfirmModalData: {\r\n\t\ttype: null,\r\n\t\targs: null,\r\n\t\tactionMutation: null,\r\n\t},\r\n\tpdf: {\r\n\t\ttypeUserPDF: null,\r\n\t},\r\n\tresourceLink:{\r\n\t\tlearningActivityIndex: null,\r\n\t\ttaskIndex: null,\r\n\t},\r\n\tevaluationData:{\r\n\t\tlearningActivityIndex: null,\r\n\t}\r\n};\r\n\r\nexport const UiProvider = ({ children }) => {\r\n\r\n\tconst [ uiState, dispatch ] = useReducer(uiReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<UiContext.Provider value={ { uiState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</UiContext.Provider>\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 64px)',\r\n    }\r\n}));\r\n\r\nexport const LandingPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h1>LandingPage</h1>\r\n            <hr/>\r\n            \r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( !isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/my-designs\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    localStorage.setItem('lastPath', rest.location.pathname);\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","export const formatName = (name, lastname) => {\r\n    const firstName = name.split(' ')[0];\r\n    const firstLastname = lastname.split(' ')[0];\r\n    return `${ firstName } ${ firstLastname }`;\r\n};\r\n\r\nexport const getUserInitials = (name, lastname) => {\r\n    return `${ name.substring(0, 1) + lastname.substring(0, 1) }`;\r\n};","import { fetchWithoutToken, fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getRecentDesigns = async () => {\r\n    const resp = await fetchWithToken('design/recent');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsByFolder = async ( path, pageParam ) => {\r\n    const resp = await fetchWithToken('design/user', {\r\n        path,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicDesignsByUser = async ( id, pageParam ) => {\r\n    const resp = await fetchWithToken(`design/public/user/`, {\r\n        id,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicFilteredDesigns = async (filter, keywords, categories, pageParam) => {\r\n    const resp = await fetchWithToken(`design/public-repository`, {\r\n        filter,\r\n        keywords,\r\n        categories,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsSharedWithMe = async ( pageParam ) => {\r\n    const resp = await fetchWithToken(`design/shared-with-user/`, {\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createDesign = async ({ path, isPublic = false }) => {\r\n    const resp = await fetchWithToken(`design`, { path, isPublic }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteDesignById = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/${ id }`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const uptdateUserInDesign = async ({ id, privileges }) =>{\r\n    try {\r\n        const resp = await fetchWithToken(`design/${id}`, { \r\n            newData: { id, privileges }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        };\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const getDesignByLink = async ({ link }) => {\r\n    if(!link || (link && link.trim().length === 0)) return { design: {} };\r\n    const resp = await fetchWithoutToken(`design/shared-link/${link}`, {}, 'GET');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    };\r\n    return resp.data;\r\n};\r\n\r\nexport const duplicateDesign = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/duplicate`, { id }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    };\r\n    return resp.data;\r\n};\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Avatar, Card, CardActionArea, CardActions, CardContent, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Description, Star } from '@material-ui/icons';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { deleteDesignById } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 5,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n    },\r\n    row: {\r\n        display: 'flex',\r\n    },\r\n    rowJustified: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n    },\r\n    col: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    ellipsis: {\r\n        width: 200,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    designIcon: {\r\n        marginLeft: -12,\r\n        fontSize: 50,\r\n        alignSelf: 'center',\r\n        justifySelf: 'start',\r\n        width: '20%',\r\n    },\r\n    deleteIcon: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\n\r\nexport const Design = ({ _id, title, updatedAt, metadata, folder, owner, privileges, canDelete = true }) => {\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n    //const [hours, minutes] = TimeFormatter.toHoursAndMinutes(metadata.workingTime ?? 0);\r\n\r\n    const deleteMutation = useMutation(deleteDesignById, {\r\n        onMutate: async () => {\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', folder.path]);\r\n            await queryClient.cancelQueries([owner._id, 'user-public-designs']);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousDesigns = queryClient.getQueryData(['designs', folder.path]);\r\n            const previousPublicDesigns = queryClient.getQueryData([owner, 'user-public-designs']);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['designs', folder.path];\r\n            if (!history.location.pathname.includes('/my-designs')) keys = [owner._id, 'user-public-designs'];\r\n            queryClient.setQueryData(keys, oldData => {\r\n                const oldPage = oldData.pages.find(page => page.designs.find(design => design._id === _id));\r\n                const newDesigns = oldPage.designs.filter((design) => design._id !== _id);\r\n                const newPage = Object.assign({}, { ...oldPage, designs: newDesigns });\r\n                let newPages = oldData.pages;\r\n                newPages[oldData.pages.indexOf(oldPage)] = newPage;\r\n                return Object.assign({}, { ...oldData, pages: newPages });\r\n            });\r\n            if (folder.path === '/') {\r\n                const previousRecentDesigns = queryClient.getQueryData('recent-designs');\r\n                // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n                queryClient.setQueryData('recent-designs', oldData => oldData.filter((design) => design._id !== _id));\r\n                return { previousDesigns, previousPublicDesigns, previousRecentDesigns };\r\n            }\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousDesigns, previousPublicDesigns };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, design, context) => {\r\n            // TODO: Emitir notificación para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['designs', folder.path], context.previousDesigns);\r\n            queryClient.setQueryData([owner, 'user-public-designs'], context.previousPublicDesigns);\r\n            if (context.previousRecentDesigns) queryClient.setQueryData('recent-designs', context.previousRecentDesigns);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', folder.path]);\r\n            queryClient.invalidateQueries([owner._id, 'user-public-designs']);\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Su diseño se ha eliminado.', { variant: 'success', autoHideDuration: 2000 });\r\n        }\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDeleteDesign = async (e) => {\r\n        e.stopPropagation();\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'diseño',\r\n                args: { id:_id },\r\n                actionMutation: deleteMutation,\r\n            }\r\n        })\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n    \r\n    const handleOpenDesign = () =>{\r\n        const inDesign = privileges.find(privilege => authState.user.uid === privilege.user);\r\n        if (inDesign) {\r\n            const typePrivilegeEditor = privileges.find(privilege => authState.user.uid === privilege.user && privilege.type === 0);\r\n            if (typePrivilegeEditor) {\r\n                history.push(`/designs/${_id}`);\r\n            } else {\r\n                history.push(`/designs/reader/${_id}`);\r\n            }\r\n        } else if(metadata.isPublic){\r\n            history.push(`/designs/reader/${_id}`);\r\n        } else {\r\n            history.push(`/`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.root} elevation={0}>\r\n            <CardActionArea onClick={handleOpenDesign}>\r\n                <CardContent>\r\n                    <div className={classes.row} style={{ width: '100%' }}>\r\n                        <Description className={classes.designIcon} />\r\n                        <div className={classes.col}>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant='h5' component=\"h2\" >{title}</Typography>\r\n                            </div>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant=\"body1\" component=\"p\">{metadata.category ? metadata.category.name : 'Sin categoría'}</Typography>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.rowJustified}>\r\n                        <Typography variant=\"body1\" component=\"p\">Tiempo de diseño: {`${metadata.workingTime.hours ?? 0}:${metadata.workingTime.minutes ?? 0}`} Hrs</Typography>\r\n                    </div>\r\n                    <div className={classes.rowJustified} style={{ marginTop: 10, marginBottom: -5 }}>\r\n                        <Typography color=\"textSecondary\" variant='body2'>Última modificación: {new Date(updatedAt).toLocaleDateString()}</Typography>\r\n                        <div className={classes.row} style={{ marginRight: 4 }}>\r\n                            <Star fontSize='small' />\r\n                            <Typography variant='body2'> { metadata.scoreMean }</Typography>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            {\r\n                canDelete && authState.user.uid === owner._id && (<IconButton className={classes.deleteIcon} onClick={handleDeleteDesign}>\r\n                    <Delete />\r\n                </IconButton>)\r\n            }\r\n            <CardActionArea component={Link} to={`/profile/${owner._id}`}>\r\n\r\n                <CardActions className={classes.ownerInfo}>\r\n                    <Avatar\r\n                        alt={formatName(owner.name, owner.lastname)}\r\n                        src={owner.img ?? ''}\r\n                    >\r\n                        {getUserInitials(owner.name, owner.lastname)}\r\n                    </Avatar>\r\n                    <div>\r\n                        <Typography color='textPrimary'>{formatName(owner.name, owner.lastname)}</Typography>\r\n                        <Typography color=\"textSecondary\">{owner.occupation ?? 'Sin ocupación'}</Typography>\r\n                    </div>\r\n                </CardActions>\r\n            </CardActionArea>    \r\n        </Card>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Button, Link, makeStyles } from '@material-ui/core';\r\nimport { Design } from 'components/Design';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems: 'center',\r\n    },\r\n    loadMore: {\r\n        marginBottom: 50,\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});\r\n\r\nexport const DesignsContainer = ({ data, status, isFetchingNextPage, fetchNextPage, hasNextPage, handleCreateDesign, label }) => {\r\n    const classes = useStyles();\r\n    const { authState } = useAuthState();\r\n\r\n    const designList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.designs.map((design, i) => <Design key={'my-design' + design._id} title={design.metadata.name} {...design} canDelete={label!=='public-repository'} />);\r\n        });\r\n    };\r\n\r\n    const alert = () => {\r\n        if(label === 'shared-with-me'){\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseños compartidos. Cuando otros usuarios compartan diseños contigo aparecerán aquí.\r\n                </Alert>\r\n            );\r\n        } else if (label === 'user-profile'){\r\n            if (data.pages[0].ownerId === authState.user.uid) {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        No cuentas con diseños públicos. Crea tu primer diseño público haciendo click {' '}\r\n                        <Link className={classes.clickHere} onClick={handleCreateDesign}>aquí</Link>\r\n                        !\r\n                    </Alert>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        Este usuario no cuenta con diseños públicos.\r\n                    </Alert>\r\n                );\r\n            }\r\n        } else if(label === 'public-repository'){\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado resultados para tu búsqueda.\r\n                </Alert>\r\n            );\r\n        } else {\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseños en este directorio. Crea tu primer diseño haciendo click {' '}\r\n                    <Link className={classes.clickHere} onClick={handleCreateDesign}>aquí</Link>\r\n                    !\r\n                </Alert>\r\n            );\r\n        }\r\n    };\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            Ha ocurrido un problema al intentar obtener los diseños. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n            Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n        </Alert>\r\n    ) : (\r\n        <div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                {\r\n                    data.pages[0].designs.length > 0\r\n                        ? designList()\r\n                        : alert()\r\n                }\r\n            </div>\r\n            {\r\n                data && data.pages[0].designs.length > 0 && hasNextPage &&\r\n                <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                    {\r\n                        isFetchingNextPage\r\n                            ? 'Cargando más...'\r\n                            : 'Cargar Más'\r\n                    }\r\n            </Button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getfolderByPath = async ( path ) => {\r\n    const resp = await fetchWithToken('folder/user', {\r\n        path,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createFolder = async ({ path, folderName }) => {\r\n    const resp = await fetchWithToken('folder/create', {\r\n        path,\r\n        folderName,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const renameFolder = async ({ id, name }) => {\r\n    const resp = await fetchWithToken(`folder/${id}`, {\r\n        name,\r\n    }, 'PUT');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteFolder = async ({ id }) => {\r\n    const resp = await fetchWithToken(`folder/${id}`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import { Box, ListItemIcon, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport React, { useRef, useState } from 'react';\r\n\r\nconst initialState = {\r\n    mouseX: null,\r\n    mouseY: null,\r\n};\r\n\r\nexport const RightClickMenu = ({ options, children }) => {\r\n\r\n    const [state, setState] = useState(initialState);\r\n    const ref = useRef();\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        //console.log({ x: e.clientX, y: e.clientY });\r\n        const area = ref.current.getBoundingClientRect();\r\n        //console.log();\r\n        if(\r\n            (e.clientX >= area.x && e.clientX <= (area.x + area.width)) &&\r\n            (e.clientY >= area.y && e.clientY <= (area.y + area.height))\r\n        ) {\r\n            setState({\r\n                mouseX: e.clientX - 2,\r\n                mouseY: e.clientY - 4,\r\n            });\r\n        } else handleClose();\r\n    };\r\n\r\n    //console.log(state);\r\n\r\n    const handleSelect = (e, onSelect) => {\r\n        if(onSelect) onSelect(e);\r\n        handleClose();\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setState(initialState);\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if(options && options.length){\r\n            return options.map((option, index) => {\r\n                return (<MenuItem key={`option-${index}-${option}`} onClick={ (e) => handleSelect(e, option.onSelect)}>\r\n                    {\r\n                        option.icon \r\n                            ?   <ListItemIcon>\r\n                                    { option.icon }\r\n                                </ListItemIcon> \r\n                            : <div></div>\r\n                    }\r\n                    <Typography>{ option.label }</Typography>\r\n                </MenuItem>);\r\n            });\r\n        }else {\r\n            return (\r\n                <Typography component='div'>\r\n                    <Box fontStyle=\"italic\">\r\n                        No hay opciones especificadas.\r\n                    </Box>\r\n                </Typography>\r\n            );\r\n      }\r\n    };\r\n\r\n    return (\r\n        <div ref={ref} onContextMenu={handleClick} style={{width: 325}}>\r\n            {children}\r\n            <Menu\r\n                keepMounted\r\n                open={state.mouseY !== null}\r\n                onClose={handleClose}\r\n                anchorReference=\"anchorPosition\"\r\n                anchorPosition={\r\n                state.mouseY !== null && state.mouseX !== null\r\n                    ? { top: state.mouseY, left: state.mouseX }\r\n                    : undefined\r\n                }\r\n            >   \r\n                { renderContent() }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, IconButton, ListItemIcon, makeStyles, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { Delete, Edit, Folder, MoreVert } from '@material-ui/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport { RightClickMenu } from './RightClickMenu';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { deleteFolder } from 'services/FolderService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        borderRadius: 5,\r\n        margin: '10px 10px 10px 0px',\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.paper,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    folderContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        borderRadius: theme.shape.borderRadius,\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        userSelect: 'none',\r\n        \r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n    },\r\n    folderBody: {\r\n        padding: '15px 10px 15px 20px',\r\n        display: 'flex',\r\n        justifyContent: 'start',\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n    folderName: {\r\n        paddingTop: 3,\r\n        fontSize: 20,\r\n        paddingLeft: 20,\r\n    },\r\n    more: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const DesignsFolder = ({ _id, name, path, ...rest }) => {\r\n    const classes = useStyles();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const { dispatch } = useUiState();\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const parentPath = path !== '/' + name ? path.replace('/' + name, '') : path.replace(name, '');\r\n\r\n    const deleteFolderMutation = useMutation(deleteFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', parentPath]);\r\n            const previousFolders = queryClient.getQueryData(['folders', parentPath]);\r\n            queryClient.setQueryData(['folders', parentPath], oldFolders => oldFolders.filter(folder => folder._id !== _id));\r\n            return { previousFolders };\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', parentPath]);\r\n        },\r\n        onError: (error, folder, context) => {\r\n            queryClient.setQueryData(['folders', parentPath], context.previousFolders);\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Carpeta eliminada con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n        }\r\n    });\r\n\r\n    const handleRename = (e) => {\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setFolder,\r\n            payload: {\r\n                _id,\r\n                name,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder',\r\n        });\r\n    };\r\n\r\n    const handleDelete = async (e) => {\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'carpeta',\r\n                args: { id: _id},\r\n                actionMutation: deleteFolderMutation,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n        //await deleteFolderMutation.mutate({ id: _id });\r\n    };\r\n\r\n    const handleOpenMenu = (e) => {\r\n        e.stopPropagation();\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <Box className={classes.root} {...rest} >\r\n            <RightClickMenu options={[\r\n                { icon: <Edit></Edit>, label: 'Cambiar Nombre', onSelect: handleRename },\r\n                { icon: <Delete></Delete>, label: 'Eliminar', onSelect: handleDelete },\r\n            ]}>\r\n                <div className={classes.content}>\r\n                    <Box className={classes.folderContainer} component={Link} to={`/my-designs${path}`} {...rest} >\r\n                        <div className={classes.folderBody}>\r\n                            <Folder fontSize='large' />\r\n                            <Typography className={classes.folderName}>\r\n                                {name}\r\n                            </Typography>\r\n                        </div>\r\n                    </Box>\r\n                    <IconButton className={classes.more} onClick={handleOpenMenu}>\r\n                        <MoreVert />\r\n                    </IconButton>\r\n                    <Menu\r\n                        onBlur={()=>setMenuOpen(null)}\r\n                        anchorEl={isMenuOpen}\r\n                        open={Boolean(isMenuOpen)}\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        keepMounted\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        onClose={()=>setMenuOpen(null)}\r\n                    >\r\n                        <MenuItem onClick={handleRename}>\r\n                            <ListItemIcon>\r\n                                <Edit />\r\n                            </ListItemIcon>\r\n                            <Typography>Cambiar Nombre</Typography>\r\n                        </MenuItem>\r\n                        <MenuItem onClick={handleDelete}>\r\n                            <ListItemIcon>\r\n                                <Delete />\r\n                            </ListItemIcon>\r\n                            <Typography>Eliminar</Typography>\r\n                        </MenuItem>\r\n                    </Menu>\r\n                </div>\r\n            </RightClickMenu>\r\n        </Box>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { DesignsFolder } from 'components/DesignsFolder';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        paddingTop: 15,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    folderContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n    }\r\n});\r\n\r\nexport const FoldersContainer = ({ title, data }) => {\r\n    const classes = useStyles();    \r\n\r\n    const folderList = () => {\r\n        return data.map((folder) => <DesignsFolder key={'my-folder' + folder._id} {...folder} />);\r\n    };\r\n\r\n    return data && data.length > 0 \r\n        ?(<div className={classes.root}>\r\n            <div className={classes.folderContainer}>\r\n                { folderList() }\r\n            </div>\r\n        </div>)\r\n        : (<div></div>);\r\n};\r\n","import React from 'react';\r\nimport { Button, Divider, List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { createDesign } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const LeftPanel = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate( {path:'/'});\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button variant='contained' color='default' style={{ margin: 10 }} onClick={handleCreateDesign}>\r\n                Crear Diseño\r\n            </Button>\r\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                <ListItem button selected={location.pathname.includes('/my-designs')} component={ Link } to='/my-designs'>\r\n                    <Home className={classes.icon} />\r\n                    <ListItemText primary='Mis Diseños'/>\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/shared-with-me')} component={ Link } to='/shared-with-me'>\r\n                    <Group className={classes.icon} />\r\n                    <ListItemText primary='Compartidos Conmigo' />\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/public-repository')} component={ Link } to='/public-repository'>\r\n                    <Public className={classes.icon} />\r\n                    <ListItemText primary='Repositorio Público' />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>\r\n        </>\r\n    )\r\n}\r\n","import { Breadcrumbs, makeStyles, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    link:{\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignsBreadcrumbs = () => {\r\n    const classes = useStyles();\r\n    const { uiState } = useUiState();\r\n    const path = uiState.folderPath;\r\n\r\n    const createBreadcrumbsLinks = () => {\r\n        if (path.length !== 1) {\r\n            let newPath = '';\r\n            const folderList = path.split('/');\r\n            folderList.shift();\r\n            return folderList.map((folderName) => {\r\n                newPath += '/' + folderName;\r\n                const folderPath = newPath;\r\n                return (<div key={folderPath} style={{ display: 'flex' }}>\r\n                    {\r\n                        (path === folderPath)\r\n                            ? <Typography color=\"textPrimary\">{folderName} </Typography>\r\n                            : <Typography className={classes.link} color=\"inherit\" component={Link} to={`/my-designs${folderPath}`} >{folderName} </Typography>\r\n                    }\r\n                </div>);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Breadcrumbs className={classes.root}>\r\n            {\r\n                path.length !== 1\r\n                    ? <Typography className={classes.link} color=\"inherit\" component={Link} to=\"/my-designs\"> Mis Diseños </Typography>\r\n                    : <Typography color=\"textPrimary\"> Mis Diseños </Typography>\r\n            }\r\n            {\r\n                createBreadcrumbsLinks()\r\n            }\r\n        </Breadcrumbs>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Card, CardActions, CardContent, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        //paddingTop: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        width: 325,\r\n        minWidth: 325,\r\n        height: 198,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 10,\r\n        //backgroundColor: theme.palette.divider,\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        paddingTop: 10,\r\n    },\r\n    row: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    col: {\r\n        width: '80%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    }\r\n}));\r\n\r\nexport const DesignSkeleton = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <div className={ classes.row }>\r\n                    <Skeleton variant=\"rect\" width={35} height={43} />\r\n                    <div className={ classes.col }>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={33} width={'80%'}/>\r\n                            <Skeleton variant=\"circle\" width={20} height={20} />\r\n                        </div>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={23} width={'70%'}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={ classes.row }>\r\n                    <Skeleton animation=\"wave\" height={20} width={'70%'}/>  \r\n                </div>\r\n                <div className={ classes.row } >\r\n                    <div className={ classes.row } style={{marginTop:14, marginBottom:-5}}>\r\n                        <Skeleton animation=\"wave\" height={20} width={'70%'} />\r\n                        <Skeleton variant=\"circle\" width={13} height={13} style={{marginTop: 2, marginRight:5}}/>\r\n                    </div>\r\n                    <Skeleton animation=\"wave\" height={20} width={'5%'} style={{marginTop:14, marginBottom:-5}}/>\r\n                </div>\r\n            </CardContent>\r\n            <CardActions className={ classes.ownerInfo } >\r\n                <Skeleton variant=\"circle\" width={40} height={40} style={{marginBottom: 3}}/>\r\n                <div className={ classes.col } style={{marginBottom: 3}}>\r\n                    <Skeleton animation=\"wave\" height={20} width={'100%'}/>\r\n                    <Skeleton animation=\"wave\" height={20} width={'80%'}/>\r\n                </div>\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n}","import React from 'react';\r\nimport { Divider, makeStyles, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { Design } from 'components/Design';\r\nimport { DesignSkeleton } from 'components/DesignSkeleton';\r\nimport { getRecentDesigns } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles({\r\n    root:{\r\n        paddingTop: 15,\r\n        marginBottom: 15,\r\n        //marginLeft: -10,\r\n        //marginRight: -10,\r\n    },\r\n    recentDesigns: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'nowrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop:15,\r\n    },\r\n    title: {\r\n        //paddingLeft:10,\r\n        //paddingRight:10,\r\n    }\r\n});\r\n\r\nexport const RecentDesigns = ({ width, height }) => {\r\n    const classes = useStyles();\r\n    const n = Math.trunc(width / 345);\r\n\r\n    const { isLoading, isError, data } = useQuery(\"recent-designs\", async () => {\r\n        return getRecentDesigns();\r\n    });\r\n    \r\n\r\n    if (isError) {\r\n        return <div></div>;\r\n    }\r\n    \r\n    const createSkeletons = () => {\r\n        return Array.from(Array(n).keys()).map( i => {return(<DesignSkeleton key={`recent-design-skeleton-${ i }`}/>)});\r\n    };\r\n\r\n    const designList = () => {\r\n        return data.map((design) => <Design key={'recent' + design._id} title={design.metadata.name} {...design} canDelete={ false } />);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                data && data.length !== 0 \r\n                    ? <div className={classes.title}>\r\n                    <Typography variant='h4'>\r\n                        Diseños recientes\r\n                    </Typography>\r\n                    <Divider />\r\n                </div>\r\n                    : <div></div>\r\n            }\r\n            {\r\n                data && data.length > 0 \r\n                    ? data.length > n ?\r\n                        <ScrollContainer className={classes.recentDesigns} style={{ cursor: 'grab' }}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </ScrollContainer>\r\n                        :\r\n                        <div className={classes.recentDesigns}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </div>\r\n                    : <div></div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport { createFolder, renameFolder } from 'services/FolderService';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    folderNameInput: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n    }\r\n}));\r\n\r\nexport const FolderModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { folderPath, folder, isFolderModalOpen } = uiState;\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const [error, setError] = useState(null);\r\n    const [name, setName] = useState(folder.name);\r\n\r\n    useEffect(() => {\r\n        setName(folder.name);\r\n    }, [folder.name, setName]);\r\n\r\n    const createFolderMutation = useMutation(createFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', folderPath]);            \r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', folderPath]);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Carpeta creada con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n            handleCloseModal();\r\n        }\r\n    });\r\n\r\n    const renameFolderMutation = useMutation(renameFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', folderPath]);            \r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', folderPath]);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Nombre de carpeta cambiado con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n            handleCloseModal();\r\n        }\r\n    });\r\n\r\n    const handleChangeName = ({target}) => {\r\n        if(!!error) setError(null);\r\n        setName(target.value);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder',\r\n        });\r\n        dispatch({\r\n            type: types.ui.setFolder,\r\n            payload: {\r\n                _id: null,\r\n                name: '',\r\n            }\r\n        });\r\n        setName('');\r\n        setError(null);\r\n    };\r\n\r\n    const handleCreateFolder = async (e) => {\r\n        if (name.trim() === '') return setError('Este campo es obligatorio.');\r\n        if (name.trim() === '/' || name.trim().toLowerCase() === 'mis diseños') return setError('Nombre de carpeta no permitido.');\r\n        await createFolderMutation.mutate({path: folderPath, folderName: name.trim()});\r\n    };\r\n    \r\n    const handleRenameFolder = async (e) => {\r\n        if (name.trim() === '') return setError('Este campo es obligatorio.');\r\n        if (name.trim() === '/' || name.trim().toLowerCase() === 'mis diseños') return setError('Nombre de carpeta no permitido.');\r\n        if (name.trim().toLowerCase() === folder.name.trim().toLowerCase()) return handleCloseModal();\r\n        await renameFolderMutation.mutate({id: folder._id, name});\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isFolderModalOpen} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !folder._id ? 'Nueva Carpeta' : 'Editar Carpeta'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Typography style={{marginBottom: 20}}>\r\n                    Usted está por { !folder._id ? 'crear una nueva carpeta' : 'editar una carpeta' }.\r\n                    Por favor ingrese el { !folder._id ? '' : 'nuevo' } nombre para su carpeta en la siguiente entrada de texto.\r\n                </Typography>\r\n                <Typography variant='caption' >\r\n                    Importante: No puede existir una carpeta en el directorio con el mismo nombre.\r\n                </Typography>\r\n                <TextField \r\n                    className={classes.folderNameInput}\r\n                    error={!!error}\r\n                    helperText={error}\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={handleChangeName}\r\n                    label=\"Nombre Carpeta\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleCloseModal}>\r\n                    Cancelar\r\n                </Button>\r\n                {\r\n                    !folder._id \r\n                        ? <Button variant=\"contained\" color=\"primary\" onClick={handleCreateFolder}>\r\n                            Crear Carpeta\r\n                            </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" onClick={handleRenameFolder}>\r\n                            Editar Carpeta\r\n                        </Button>\r\n                }\r\n                \r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Button, ButtonGroup, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { useInfiniteQuery, useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { createDesign, getDesignsByFolder } from 'services/DesignService';\r\nimport { getfolderByPath } from 'services/FolderService';\r\nimport { FoldersContainer } from 'components/FoldersContainer';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { DesignsBreadcrumbs } from 'pages/Navigation/MyDesigns/DesignsBreadcrumbs';\r\nimport { RecentDesigns } from 'pages/Navigation/MyDesigns/RecentDesigns';\r\nimport { FolderModal } from './FolderModal';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    breadCrumbs: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    designsAndFoldersContainer: {\r\n        paddingTop: 15,\r\n    },\r\n    link: {\r\n        textDecoration: 'none',\r\n    },\r\n    sectionTitle: {\r\n        width: '100%',\r\n        display:'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between', \r\n        alignItems:'flex-end', \r\n        paddingBottom: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            flexDirection: 'column',\r\n            alignItems: 'start',\r\n            justifyContent: 'center',\r\n        },\r\n    },\r\n    button: {\r\n        height: 35,\r\n    }\r\n\r\n}));\r\n\r\nexport const MyDesignsPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const designsRef = useRef(null);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const [width, setWidth] = useState(0);\r\n    const [height, setHeight] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        dispatch({\r\n            type: types.ui.updateFolderPath,\r\n            payload: urlparams.urlPath ? '/' + urlparams.urlPath : '/',\r\n        });\r\n    }, [dispatch, urlparams]);\r\n\r\n    const path = uiState.folderPath;\r\n    const folderName = !urlparams.urlPath ? 'Mis Diseños' : path.split('/')[path.split('/').length - 1];\r\n\r\n    const designsQuery = useInfiniteQuery(['designs', path], async ({ pageParam = 0 }) => {\r\n        return await getDesignsByFolder(path, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const foldersQuery = useQuery(['folders', path], async () => {\r\n        return await getfolderByPath(path);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', path]);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', path]);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (designsRef.current) {\r\n            setHeight(designsRef.current.offsetHeight);\r\n            setWidth(designsRef.current.offsetWidth);\r\n        }\r\n    }, [designsRef]);\r\n\r\n    const handleCreateDesign = async ( e, path = '/' ) => {\r\n        await createDesignMutation.mutate({path});\r\n    };\r\n\r\n    const handleOpenFolderModal = async (e) => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} ref={designsRef} className={classes.workspace}>\r\n                    <DesignsBreadcrumbs />\r\n                    {\r\n                        path === '/' && <RecentDesigns id='recent' width={width} height={height} />\r\n                    }\r\n                    <div className={ classes.designsAndFoldersContainer }>\r\n                        <div className={classes.sectionTitle}>\r\n                            <Typography variant='h4'>\r\n                                {path === '/' ? 'Mis Diseños' : folderName}\r\n                            </Typography>\r\n                            <ButtonGroup className={classes.button}>\r\n                                <Button variant='outlined' fullWidth size='large' color='default' onClick={(e)=>handleCreateDesign(e, path)}> \r\n                                    Crear Diseño\r\n                                </Button>\r\n                                <Button variant='outlined' fullWidth size='large' color='default' onClick={handleOpenFolderModal}> \r\n                                    Crear Carpeta\r\n                                </Button>\r\n                            </ButtonGroup>\r\n                        </div>\r\n                        <Divider />\r\n                        <FoldersContainer {...foldersQuery}/>\r\n                        <DesignsContainer {...designsQuery} handleCreateDesign={(e)=>handleCreateDesign(e, path)}/>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <FolderModal />\r\n        </>\r\n    );\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getUser = async ( id ) => {\r\n    const resp = await fetchWithToken(`user/${id}`);\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const searchUsers = async ( filter, pageParam ) => {\r\n    const resp = await fetchWithToken('user/search/', {\r\n        filter,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const updateContact = async(  {uid, contacts} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n            newData: { contacts }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const updateProfileInformation = async(  {uid, name, lastname, occupation, institution, country, city, description} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n           newData: { uid, name, lastname, occupation, institution, country, city, description }\r\n        }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const getUserByEmail = async( email ) => {\r\n    try {\r\n        return await fetchWithToken(`user/search-by-email/`, { \r\n           email\r\n        }, 'POST');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const resendVerificationCode = async( email ) => {\r\n    try {\r\n        return await fetchWithToken(`user/resend-code/`, { \r\n            email\r\n        }, 'POST');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const changeUserPassword = async( { uid, newPassword } ) => {\r\n    try {\r\n        return await fetchWithToken(`auth/reset-password/${uid}`, { \r\n            newPassword\r\n        }, 'PUT');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};","import { useState } from 'react';\r\n\r\n\r\nexport const useForm = ( initialState = {} ) => {\r\n    \r\n    const [values, setValues] = useState(initialState);\r\n\r\n    const reset = () => {\r\n        setValues( initialState );\r\n    }\r\n\r\n\r\n    const handleInputChange = ({ target }) => {\r\n        setValues({\r\n            ...values,\r\n            [ target.name ]: target.value\r\n        });\r\n\r\n    }\r\n\r\n    return [ values, handleInputChange, reset, setValues ];\r\n\r\n}\r\n","\r\nimport React from 'react'\r\nimport { Avatar, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles, TextField, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateProfileInformation } from 'services/UserService';\r\nimport { useParams } from 'react-router';\r\nimport { useForm } from 'hooks/useForm';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n\r\n}));\r\n\r\nexport const EditProfileModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { authState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    \r\n    const { isLoading, isError, data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const [ formData, handleInputChange, reset] = useForm({\r\n        name: data.name,\r\n        lastname: data.lastname,\r\n        occupation: data.occupation,\r\n        institution: data.institution,\r\n        country: data.country,\r\n        city: data.city,\r\n        description: data.description,\r\n    });\r\n    \r\n    const { name, lastname, occupation, institution, country, city, description } = formData;\r\n\r\n    const updateProfileInformationMutation = useMutation(updateProfileInformation, {\r\n        onMutate: async () =>{\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries(['user-profile', uid]);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousUserProfile = queryClient.getQueryData(['user-profile', uid]);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['user-profile', uid]\r\n            queryClient.setQueryData(keys, oldData =>{\r\n                const newData = Object.assign({}, { ...oldData, uid, name, lastname, occupation, institution, country, city, description});\r\n                return newData;\r\n            });\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousUserProfile };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, context) => {\r\n            // TODO: Emitir notificación para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['user-profile', uid], context.previousUserProfile);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        },\r\n    });\r\n\r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        reset();\r\n    };\r\n    \r\n    const handleSaveInformation = async (e) => {\r\n        e.preventDefault();\r\n        await updateProfileInformationMutation.mutate({uid: authState.user.uid, name, lastname, occupation, institution, country, city, description});\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        enqueueSnackbar('Su perfil se ha guardado correctamente',  {variant: 'success', autoHideDuration: 2000},   );\r\n    };\r\n\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isEditProfileModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Editar perfil\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    <Grid container spacing={1}>\r\n                        \r\n                        <Grid container alignItems='center' justify='center'>\r\n                            <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='name' \r\n                                value={ name } \r\n                                onChange={ handleInputChange } \r\n                                label='Nombres' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='lastname' \r\n                            value={ lastname } \r\n                            onChange={ handleInputChange } \r\n                            label='Apellidos' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='country' \r\n                            value={ country ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='País' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='city' \r\n                            value={ city ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ciudad' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='occupation' \r\n                            value={ occupation ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ocupación' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='institution' \r\n                            value={ institution ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='Institución' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                        <TextField\r\n                            multiline \r\n                            variant='outlined'\r\n                            margin='dense'\r\n                            name='description'\r\n                            rows={4} \r\n                            value={ description ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Descripción' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleSaveInformation}>\r\n                        Guardar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n});\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Avatar, makeStyles, Typography } from '@material-ui/core';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        marginTop: 10,\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            zIndex: 0.5,\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        //backgroundColor: 'grey',\r\n    },\r\n    body: {\r\n        display: 'flex',\r\n        marginLeft: 10,\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    photo: {\r\n        margin: 10,\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n    },\r\n    name: {\r\n\r\n    },\r\n    location: {\r\n\r\n    }\r\n}));\r\n\r\nexport const UserCard = ({ _id, name, lastname, city, country, scoreMean, img, occupation, onClick }) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const handleViewUser = (e, id) => {\r\n        e.stopPropagation();\r\n        if(onClick) onClick();\r\n        history.push(`/profile/${id}`);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root} onClick={ ( e ) => handleViewUser(e, _id) }>\r\n            <div className={classes.card}>\r\n                <Avatar\r\n                    className={ classes.photo }\r\n                    alt={ formatName(name, lastname) }\r\n                    src={ img ?? '' }\r\n                >\r\n                    <Typography variant='h5'>\r\n                        { getUserInitials(name, lastname) }\r\n                    </Typography>\r\n                </Avatar>\r\n                <div className={classes.body} >\r\n                    <div className={classes.name}>\r\n                        <Typography variant='h5' color='textPrimary'>\r\n                            {name + ' ' + lastname}\r\n                        </Typography>\r\n                    </div>\r\n                    <div className={classes.location}>\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                city && country \r\n                                    ? city + ', ' + country\r\n                                    : city ?? country ?? 'Sin locación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                    <div >\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                occupation\r\n                                    ? occupation\r\n                                    : 'Sin ocupación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { getUser } from 'services/UserService';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { UserCard } from 'components/UserCard';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const ShowContactsModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n    \r\n    const contactList = () => {\r\n        return data.contacts.map(( contact ) => {\r\n            return <UserCard key={contact._id} {...contact} onClick={handleClose}/>\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isContactsModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Contactos\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    { contactList() }\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cerrar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Grid, Typography, Avatar, makeStyles, Button, Divider, IconButton, } from '@material-ui/core';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateContact } from 'services/UserService';\r\nimport { useQuery, useMutation, useQueryClient, useInfiniteQuery } from 'react-query';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Star, Apartment, Group, Email, PersonAdd, Edit, Close } from '@material-ui/icons';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\n\r\nimport { EditProfileModal } from 'pages/User/UserProfile/EditProfileModal';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShowContactsModal } from 'pages/User/UserProfile/ShowContactsModal';\r\n\r\nimport { createDesign, getPublicDesignsByUser } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    designPanel:{\r\n        flexDirection: 'column',\r\n        borderLeft:`1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    spaceFirstDataFirstData:{ \r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    centerGrid:{\r\n        display: 'flex',\r\n        alignItems: 'center', \r\n        justifyItems:'center',\r\n    },\r\n    spaceSecondData:{\r\n        marginBottom: theme.spacing(2),   \r\n    },\r\n    spaceData:{\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom: theme.spacing(2),\r\n        marginRight: theme.spacing(5),\r\n    },\r\n    spaceDesign:{\r\n        marginLeft: theme.spacing(7),\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(7) \r\n    },\r\n    spaceIcons:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n}));\r\n\r\nexport const UserProfile = () => {\r\n    \r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { authState, setAuthState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const { isLoading, isError, data, error, refetch } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery([ uid, 'user-public-designs' ], async ({ pageParam = 0 }) => {\r\n        return await getPublicDesignsByUser(uid, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n    \r\n    const updateConctactMutation = useMutation(updateContact, {\r\n        onSuccess: (data, {uid, contacts}, context) => {\r\n            setAuthState((prevState)=>({\r\n                ...prevState, \r\n                user: Object.assign({}, {...prevState.user, contacts})\r\n            }));\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n            enqueueSnackbar('No se ha actualizado su lista de contactos',  {variant: 'error', autoHideDuration: 2000},   );\r\n        },\r\n    });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries('designs');\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries('designs');\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n            enqueueSnackbar('No se han cargado sus diseño',  {variant: 'error', autoHideDuration: 2000},   );\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate({ path: '/', isPublic: true });\r\n    };\r\n\r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleEditProfile = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n    };\r\n\r\n    const handleShowContacts = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n\r\n    const handleAddContact = async (e) => {\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts:[...authState.user.contacts, uid]});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n        await refetch();\r\n    };\r\n\r\n    const handleDeleteContact = async (e) =>{\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts: authState.user.contacts.filter(contact=>contact!==uid)});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n    };\r\n    \r\n    if(isError){\r\n        return (<Typography>Error: {error.message}</Typography>);\r\n    };\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item xs={12} sm={3}>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && <Typography  align='center' variant='h5' component='h2'>{data.name + ' ' + data.lastname}</Typography>}\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && data.occupation && <Typography className={classes.spaceFirstData} color='textSecondary'>{data.occupation}</Typography>}\r\n                </Grid> \r\n                <Grid container alignItems='center' justify='center' className={classes.spaceFirstData}>\r\n                    <Grid item >\r\n                        { data.contacts.length > 0 ? \r\n                            <IconButton onClick={ handleShowContacts }>\r\n                                <Group />\r\n                            </IconButton>\r\n                            :\r\n                            <Group />\r\n                        }\r\n                    </Grid>\r\n                    <Grid item >\r\n                        <Typography style={{ marginLeft: 8 }}> {data.contacts.length}</Typography>\r\n                    </Grid>\r\n                    ・\r\n                    <Grid item >\r\n                    <Star/>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Typography style={{ marginLeft: 8 }}> {data.scoreMean}</Typography>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center' className={classes.spaceSecondData}>\r\n                    {(authState.user.uid===uid) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleEditProfile} startIcon={<Edit />}>Editar perfil</Button> \r\n                        :\r\n                        (authState.user.contacts.includes(uid)) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleDeleteContact} startIcon={<Close />}>Eliminar de mis contactos</Button> \r\n                        : \r\n                        <Button variant ='outlined' size='small' onClick={handleAddContact} startIcon={<PersonAdd />} >Agregar a mis contactos</Button>}  \r\n                </Grid>\r\n                <Divider className={classes.spaceData}/>\r\n                <Grid className={classes.spaceData}>\r\n                    { data && data.institution && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Apartment className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.institution}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && data.city && data.country &&(\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <RoomIcon className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.city + ', ' + data.country}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Email className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.email}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    <Divider className={classes.spaceSecondData}/>\r\n                    { data && data.description &&(\r\n                        <>\r\n                            <Typography color='textSecondary' className={classes.spaceSecondData}>\r\n                                Descripción\r\n                            </Typography>\r\n                            <Typography >\r\n                                {data.description}\r\n                            </Typography> \r\n                        </>\r\n                    )}\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12} sm={9} className={classes.designPanel}>\r\n               \r\n                <Grid className={classes.spaceDesign}>\r\n                    <Typography variant='h4'>\r\n                        Diseños Públicos\r\n                    </Typography>\r\n                    <Divider />\r\n                    {   \r\n                        (authState.user.uid === uid) && \r\n                            <>\r\n                                <EditProfileModal /> \r\n                            </> \r\n                    }\r\n                    <ShowContactsModal/> \r\n                    <DesignsContainer {...designsQuery} label='user-profile' handleCreateDesign={handleCreateDesign}/>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n","export default \"data:image/png;base64,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\"","import { ThemeProvider } from '@material-ui/core';\r\nimport React, { useState, useContext, createContext, useEffect } from 'react';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getTheme } from 'theme/theme';\r\n\r\nconst UserConfigContext = createContext();\r\n\r\nexport function useUserConfigState() {\r\n\tconst context = useContext(UserConfigContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUserConfigState must be used within a UserConfigProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const UserConfigProvider = ({ children })=>{\r\n\tconst { authState } = useAuthState();\r\n    const [userConfig, setUserConfig] = useState({\r\n        darkTheme:false,\r\n        modeAdvanced: false\r\n\t});\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst darkTheme = JSON.parse(localStorage.getItem('darkTheme'));\r\n\t\tif(darkTheme !== null ){\r\n\t\t\tsetUserConfig((prevState)=>({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tdarkTheme,\r\n\t\t\t}));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n        if(authState.user !== null){\r\n            localStorage.setItem('darkTheme', JSON.stringify(userConfig.darkTheme));\r\n        }  \r\n    }, [authState.user, userConfig.darkTheme]);\r\n\r\n\tconst theme = getTheme(userConfig.darkTheme);\r\n\r\n\treturn (\r\n\t\t<UserConfigContext.Provider value={ { userConfig, setUserConfig } }>\r\n\t\t\t<ThemeProvider theme = {theme}>\r\n\t\t\t\t{ children }\r\n\t\t\t</ThemeProvider>\r\n\t\t</UserConfigContext.Provider>\r\n\t);\r\n}","import { createMuiTheme } from '@material-ui/core';\r\nimport {\r\n  orange,\r\n  lightBlue,\r\n  deepPurple,\r\n  deepOrange\r\n} from \"@material-ui/core/colors\";\r\n\r\nexport const getTheme = ( isDarkActive ) =>{\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n          type: isDarkActive ? 'dark': 'light',\r\n          primary: {\r\n            dark: orange[500], \r\n            light: lightBlue[500],\r\n            main: isDarkActive? orange[500] : lightBlue[500],\r\n          },\r\n          secondary: {\r\n            dark: deepOrange[900],\r\n            light: deepPurple[500], \r\n            main: isDarkActive? deepOrange[900]: deepPurple[500], \r\n          },\r\n          text:{\r\n            primary: isDarkActive? '#F4F4F4': '#36393F',\r\n          },\r\n          background:{\r\n            default: isDarkActive? '#36393F': '#F4F4F4', //SidePanels,\r\n            paper: isDarkActive? '#36393F': '#F4F4F4', // Menu, Login and Register Modal\r\n            workSpace: isDarkActive? '#2F3136': '#FEFEFE',\r\n            navbar: isDarkActive? '#202225': '#DCDCDC',\r\n            design: isDarkActive? '#36393F': '#F4F4F4',\r\n            designHover: isDarkActive? '#393D46': '#F6F6F6',\r\n          }\r\n        },\r\n    });\r\n    return theme;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogActions,\r\n    Typography,\r\n    IconButton,\r\n    Grid,\r\n} from '@material-ui/core';\r\nimport { CloseRounded } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    close: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 5,\r\n        padding: 15,\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n}));\r\n\r\nexport const ModalFormWithImage = React.memo(({ isOpen, handleClose, maxWidth = 'sm', title = '', subtitle = '', image, content, actions }) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <Dialog\r\n            fullWidth={true}\r\n            maxWidth={maxWidth}\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <DialogTitle className={classes.header} disableTypography>\r\n                <IconButton className={classes.close} onClick={handleClose} color=\"inherit\" size='small'>\r\n                    <CloseRounded />\r\n                </IconButton>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12}>\r\n                        {image}\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='h5' component='p'>\r\n                            {title}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='subtitle1' component='h1'>\r\n                            {subtitle}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {content}\r\n            </DialogContent>\r\n            {\r\n                (actions) && <DialogActions>\r\n                    {actions}\r\n                </DialogActions>\r\n            }\r\n        </Dialog>\r\n    );\r\n});\r\n\r\nModalFormWithImage.propTypes = {\r\n    isOpen: PropTypes.bool.isRequired,\r\n    handleClose: PropTypes.func.isRequired,\r\n    image: PropTypes.object.isRequired,\r\n    content: PropTypes.object,\r\n    actions: PropTypes.object,\r\n}; ","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Link\r\n} from '@material-ui/core';\r\n\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport types from 'types';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formcontrol: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n        overflow: 'auto',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    link: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    emailError: null,\r\n    passwordError: null,\r\n};\r\n\r\nexport const LoginModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { login } = useAuthState();\r\n    const [formErrors, setFormErrors] = useState(initialErrors);\r\n    const [errorFromServer, setErrorFromServer] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [formLoginValues, handleInputChange, reset] = useForm({\r\n        email: '',\r\n        password: ''\r\n    });\r\n    const { email, password } = formLoginValues;\r\n    const { emailError, passwordError } = formErrors;\r\n\r\n    const isFormComplete = () => {\r\n        return Object.keys(formLoginValues).map((key, index) => {\r\n            if (formLoginValues[key].trim() === '') {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    };\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email)) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                emailError: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const isPasswordValid = () => {\r\n        if (password.length >= 8 && password.length <= 16) return true;\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            passwordError: 'La contraseña debe tener entre 8 y 16 caracteres.',\r\n        }));\r\n        return false;\r\n    };\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            [e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!isEmailValid()) return;\r\n        if (!isPasswordValid()) return;\r\n        const resp = await login(email, password);\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        reset();\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setShowPassword(!showPassword);\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const toRegister = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const toResetPassword = (e) => {\r\n        e.preventDefault();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        history.push('/reset-password');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ModalFormWithImage\r\n                isOpen={uiState.isLoginModalOpen}\r\n                handleClose={handleClose}\r\n                title='¡Bienvenido!'\r\n                subtitle='Completa los campos para ingresar con tu cuenta'\r\n                image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n                content={\r\n                    <form className={classes.form} onSubmit={handleLogin} noValidate>\r\n                        {errorFromServer && <Alert severity=\"error\"> {errorFromServer}</Alert>}\r\n                        <TextField\r\n                            error={!!emailError}\r\n                            helperText={emailError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Email\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            error={!!passwordError}\r\n                            helperText={passwordError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Contraseña\"\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            fullWidth\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    <IconButton\r\n                                        onClick={handleClickShowPassword}\r\n                                        onMouseDown={handleMouseDownPassword}\r\n                                    >\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n\r\n                            }}\r\n                        />\r\n                        <div className={classes.footer}>\r\n                            <Button variant='outlined' type='submit' fullWidth>\r\n                                Iniciar Sesión\r\n                            </Button>\r\n                            <div style={{ paddingTop: 20 }}>\r\n                                <Link href='#' align='center' variant=\"body1\" onClick={toResetPassword}>\r\n                                    ¿Olvidaste tu contraseña?\r\n                                </Link>\r\n                            </div>\r\n                            <div style={{ paddingBottom: 15, paddingTop: 10 }}>\r\n                                <Link href=\"#\" variant=\"body1\" onClick={toRegister}>\r\n                                    ¿No tienes cuenta? Registrate\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                }\r\n            />\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Link,\r\n} from '@material-ui/core';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection:'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    nameError: null,\r\n    lastnameError: null,\r\n    emailError: null,\r\n    passwordError: null,\r\n    confirmPasswordError: null,\r\n};\r\n\r\nexport const RegisterModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { register } = useAuthState();\r\n    const [ errorFromServer, setErrorFromServer ] = useState(null);\r\n    const [ formErrors, setFormErrors ] = useState(initialErrors);\r\n    const [ formData, handleInputChange, reset ] = useForm({\r\n        name: '',\r\n        lastname: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const { name, lastname, email, password, confirmPassword } = formData;\r\n    const { nameError, lastnameError, emailError, passwordError, confirmPasswordError } = formErrors;\r\n    \r\n    const handleClose = () => {\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Register'\r\n        });\r\n        reset();\r\n        setFormErrors(initialErrors);\r\n        setErrorFromServer(null);\r\n    };\r\n    \r\n    const isFormComplete = () => {\r\n        return Object.keys( formData ).map((key, index) => {\r\n            if(formData[key].trim() === ''){\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    }\r\n\r\n    const paswordsMatchs = () => {\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(password)){\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contraseña debe tener al menos un carácter en minúscula, uno en mayúscula, un número y debe tener entre 8 y 16 caractéres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (password.trim() !== confirmPassword.trim()) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseñas no coinciden.',\r\n                confirmPasswordError: 'Las contraseñas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState)=>({\r\n            ...prevState,\r\n            [ e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!paswordsMatchs()) return;\r\n        let resp = await register( formData );\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const toLogin = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Login'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <ModalFormWithImage\r\n            isOpen={ uiState.isRegisterModalOpen }\r\n            handleClose={ handleClose }\r\n            title='¡Bienvenido!'\r\n            subtitle='Completa los campos para registrar tu cuenta'\r\n            image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n            content={\r\n                <form className={classes.form} onSubmit={handleRegister} noValidate>\r\n                    { errorFromServer && <Alert severity=\"error\">{ errorFromServer }</Alert> }\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!nameError}\r\n                        helperText={ nameError } \r\n                        margin=\"dense\" \r\n                        name=\"name\" \r\n                        value={ name } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Nombres\" \r\n                        type=\"text\" \r\n                        fullWidth\r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!lastnameError}\r\n                        helperText={ lastnameError } \r\n                        margin=\"dense\" \r\n                        name=\"lastname\" \r\n                        value={ lastname } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Apellidos\" \r\n                        type=\"text\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!emailError}\r\n                        helperText={ emailError } \r\n                        margin=\"dense\" \r\n                        name=\"email\" \r\n                        value={ email } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Email\" \r\n                        type=\"email\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!passwordError}\r\n                        helperText={ passwordError } \r\n                        margin=\"dense\" \r\n                        name=\"password\" \r\n                        value={ password } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!confirmPasswordError}\r\n                        helperText={ confirmPasswordError } \r\n                        margin=\"dense\" \r\n                        name=\"confirmPassword\" \r\n                        value={ confirmPassword } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Repetir contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    \r\n                    <div className={classes.footer}>\r\n                        <Button color=\"primary\" variant='outlined' type='submit' fullWidth>\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link href='#' style={{paddingTop:20, paddingBottom:15}} variant=\"body1\" onClick={toLogin}>\r\n                            ¿Ya tienes cuenta?\r\n                        </Link>\r\n                    </div>\r\n                    \r\n                </form>\r\n            }\r\n        />\r\n    );\r\n});","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useQueryClient } from 'react-query';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { Avatar, Typography, Toolbar, AppBar, Button, ButtonGroup, IconButton, Menu, MenuItem, Switch, FormControlLabel, OutlinedInput, Box } from '@material-ui/core';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport types from 'types';\r\nimport { LoginModal } from 'pages/Auth/LoginModal';\r\nimport { RegisterModal } from 'pages/Auth/RegisterModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        color: theme.palette.text.primary\r\n    },\r\n    logo: {\r\n        width: theme.spacing(5),\r\n        height: theme.spacing(5),\r\n        //margin: 'auto',\r\n    },\r\n    brand: {\r\n        display: \"flex\",\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 20,\r\n            marginBottom: 10,\r\n        },\r\n    },\r\n    search: {\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 5,\r\n            marginBottom: 5,\r\n        },\r\n    },\r\n    searchForm: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    userAndOptions: {\r\n        marginLeft: 5,\r\n        marginRight: 5,\r\n        [theme.breakpoints.down('xs')]:{\r\n            marginTop: 5,\r\n            marginBottom: 10,\r\n        },\r\n    },\r\n    navbarColor: {\r\n        background: theme.palette.background.navbar,\r\n    },\r\n    navbarLetter: {\r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n        cursor: 'pointer'\r\n    },\r\n    menuColor: {\r\n        background: theme.palette.background.menu\r\n    },\r\n    toolbar: {\r\n        display: 'flex', \r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.down('xs')]:{\r\n            flexDirection: 'column',\r\n            justifyContent: 'center',\r\n        },\r\n        [theme.breakpoints.up('sm')]:{\r\n            flexDirection: 'row',\r\n            justifyContent: 'space-between',\r\n        },\r\n    }\r\n}));\r\n\r\nexport const NavBar = () => {\r\n    const queryClient = useQueryClient();\r\n    const history = useHistory();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const { userConfig, setUserConfig } = useUserConfigState();\r\n    const { dispatch } = useUiState();\r\n    const { authState, logout } = useAuthState();\r\n    const [filter, setFilter] = useState('');\r\n\r\n    const handleLogout = () => {\r\n        queryClient.clear();\r\n        setMenuOpen(null);\r\n        logout();\r\n    };\r\n\r\n    const handleOpenLoginModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleOpenRegisterModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setMenuOpen(null);\r\n    };\r\n\r\n    const handleChangeUserConfig = (event) => {\r\n        setUserConfig({ ...userConfig, [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    const handleInputFormChange = ({ target }) => {\r\n        setFilter(target.value);\r\n    };\r\n\r\n    const handleSearchUsers = async (e) => {\r\n        e.preventDefault();\r\n        if(filter.trim().length > 0) {\r\n            history.push(`/users/search?q=${filter.trim()}`);\r\n            setFilter('');\r\n        }\r\n    };\r\n\r\n    const handleMenu = ( e ) => {\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"static\" className={classes.navbarColor} elevation={0}>\r\n                <Toolbar className={classes.toolbar}>\r\n                    <Box className={classes.brand} component={Link} to='/'>\r\n                        <Avatar className={classes.logo} src={Logo} alt=\"Logo\" />\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            LAD\r\n                        </Typography>\r\n                    </Box>\r\n                    {\r\n                        (!authState.token) ?\r\n                            <ButtonGroup variant=\"text\" aria-label=\"text primary button group\">\r\n                                <Button onClick={handleOpenLoginModal} >\r\n                                    Ingresar\r\n                                    </Button>\r\n                                <Button onClick={handleOpenRegisterModal}>\r\n                                    Registrarme\r\n                                    </Button>\r\n                            </ButtonGroup>\r\n                            :\r\n                            <>\r\n                                <div className={classes.search}>\r\n                                    <form className={classes.searchForm} onSubmit={handleSearchUsers} noValidate>\r\n                                        <OutlinedInput\r\n                                            margin='dense'\r\n                                            variant=\"outlined\"\r\n                                            name=\"filter\"\r\n                                            value={filter}\r\n                                            type=\"text\"\r\n                                            placeholder='Buscar usuario'\r\n                                            onChange={handleInputFormChange}\r\n                                        />\r\n                                        <IconButton type=\"submit\" className={classes.iconButton} aria-label=\"search\">\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </form>\r\n                                </div>\r\n                                <div className={classes.userAndOptions} style={{ display: 'flex', alignItems: 'center' }}>\r\n                                    <Typography className={classes.navbarLetter}  component={Link} to={`/profile/${authState.user.uid}`} >\r\n                                        { authState.user.name }\r\n                                    </Typography>\r\n                                    <IconButton onClick={ handleMenu }>\r\n                                        <SettingsIcon />\r\n                                    </IconButton>\r\n                                </div>\r\n                                <Menu\r\n                                    anchorEl={isMenuOpen}\r\n                                    open={Boolean(isMenuOpen)}\r\n                                    anchorOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    keepMounted\r\n                                    transformOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    onClose={handleClose}\r\n\r\n                                >\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.darkTheme} onChange={handleChangeUserConfig} name=\"darkTheme\" />}\r\n                                            label=\"Tema Oscuro\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.modeAdvanced} onChange={handleChangeUserConfig} name=\"modeAdvanced\" />}\r\n                                            label=\"Modo Avanzado\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <Button color=\"primary\" onClick={handleLogout}>\r\n                                            Cerrar sesión\r\n                                        </Button>\r\n                                    </MenuItem>\r\n\r\n                                </Menu>\r\n                            </>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n            <LoginModal />\r\n            <RegisterModal />\r\n        </div>\r\n    );\r\n}","import {  Typography, Toolbar, AppBar, Container, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    pos:{\r\n        width: 'fit-content',\r\n    }\r\n    \r\n  }));\r\nexport const Footer = () =>{\r\n    const classes = useStyles();\r\n    return (\r\n        <AppBar position=\"static\" color=\"default\"> \r\n          <Container maxWidth=\"md\" className={classes.pos}>\r\n            <Toolbar>\r\n              <Typography variant=\"body1\">\r\n                © 2021 Universidad Católica de Temuco\r\n              </Typography>\r\n            </Toolbar>\r\n          </Container>\r\n        </AppBar>\r\n    )\r\n};","import React from 'react';\r\nimport { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport { getDesignsSharedWithMe } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 20,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const SharedWithMePage = () => {\r\n    const classes = useStyles();\r\n\r\n    const sharedDesignsQuery = useInfiniteQuery(['shared-designs'], async ({ pageParam = 0 }) => {\r\n        return await getDesignsSharedWithMe(pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4' style={{marginBottom: 5}}>Compartidos conmigo</Typography>\r\n                        <Divider />\r\n                        <DesignsContainer {...sharedDesignsQuery} label='shared-with-me'/>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getCategories = async () => {\r\n    const resp = await fetchWithToken('category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React, { useState } from 'react';\r\nimport { Box, Button, Chip, makeStyles, TextField } from '@material-ui/core';\r\nimport { useHorizontalScroll } from 'hooks/useHorizontalScroll';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    keywordList: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        height: 48,\r\n        mouseWheel: 'horizontal',\r\n        overflowX: 'auto',\r\n        overflowY: 'hidden',\r\n        listStyle: 'none',\r\n        padding: theme.spacing(0.5),\r\n        margin: 0,\r\n    },\r\n    keyword: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    searchContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginBottom: 15,\r\n    },\r\n    input: {\r\n        height: 40,\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    button: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n        height: 40,\r\n    },\r\n    keywordFilter: {\r\n        paddingLeft: 0,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: theme.shape.borderRadius,\r\n    }\r\n}));\r\n\r\nexport const KeywordManager = ({ keywords, onChangeKeywords }) => {\r\n    const classes = useStyles();\r\n    const [keyword, setKeyword] = useState('');\r\n    const [keywordError, setKeywordError] = useState(null);\r\n    const scrollRef = useHorizontalScroll();\r\n\r\n    const handleAddKeyword = (e) => {\r\n        e.preventDefault();\r\n        if(keyword.trim().length && !keywords.includes(keyword.toLowerCase())){\r\n            onChangeKeywords([...keywords, keyword.toLowerCase()], 'add', keyword.toLowerCase());\r\n            setKeyword('');\r\n        } else if (keywords.includes(keyword.toLowerCase())){\r\n            setKeywordError('La palabra clave ya se encuentra agregada al filtro.');\r\n        }\r\n    };\r\n\r\n    const handleRemoveKeyword = (index) => {\r\n        if(index === keywords.length - 1) onChangeKeywords([...keywords.slice(0, index)], 'remove', keywords[index]);\r\n        else onChangeKeywords([...keywords.slice(0, index), ...keywords.slice(index + 1, keywords.length)], 'remove', keywords[index]);\r\n    };\r\n\r\n    const handleKeywordInputChange = ({ target }) => {\r\n        setKeyword(target.value);\r\n        if(keywordError) setKeywordError(null);\r\n    };\r\n\r\n    return (\r\n        <Box ref={scrollRef} component='ul' className={classes.keywordFilter}>\r\n            <form onSubmit={handleAddKeyword} className={classes.searchContainer}>\r\n                <TextField\r\n                    className={classes.input}\r\n                    size='small'\r\n                    variant='outlined'\r\n                    value={keyword}\r\n                    onChange={handleKeywordInputChange}\r\n                    label='Palabra Clave'\r\n                    error={!!keywordError}\r\n                    helperText={keywordError}\r\n                    fullWidth\r\n                />\r\n                <Button variant='contained' disableElevation color='primary' type='submit' className={classes.button} >\r\n                    Agregar\r\n                </Button>\r\n            </form>\r\n            <div className={classes.keywordList}>\r\n                {\r\n                    keywords.map((keyword, index) => {\r\n                        return (\r\n                            <li key={`keyword-${index}`}>\r\n                            <Chip\r\n                                label={keyword}\r\n                                onDelete={(e) => handleRemoveKeyword(index)}\r\n                                className={classes.keyword}\r\n                                />\r\n                            </li>\r\n                        );\r\n                    })\r\n                }\r\n            </div>\r\n        </Box>\r\n    )\r\n}\r\n","import { useLayoutEffect, useState } from 'react';\r\n\r\nexport function useHorizontalScroll() {\r\n    const [node, setRef] = useState(null)\r\n    useLayoutEffect(() => {\r\n        if (node) {\r\n            const onWheel = e => {\r\n                if (e.deltaY === 0) return;\r\n                e.preventDefault();\r\n                node.scrollTo({\r\n                    left: node.scrollLeft + e.deltaY,\r\n                    behavior: 'auto',\r\n                });\r\n            };\r\n            node.addEventListener('wheel', onWheel);\r\n            return () => node.removeEventListener('wheel', onWheel);\r\n        }\r\n    }, [node]);\r\n    return setRef;\r\n}","import React, { useState } from 'react';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, IconButton, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { useInfiniteQuery, useQuery } from 'react-query';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { getPublicFilteredDesigns } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { Close } from '@material-ui/icons';\r\nimport { KeywordManager } from 'components/KeywordManager';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'stretch',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n        position: 'relative',\r\n        [theme.breakpoints.up('sm')]: {\r\n            height: 'calc(100vh - 128px)',\r\n        },\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    sectionTitle: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n    },\r\n    category: {\r\n        width: '100%',\r\n        paddingLeft: 20,\r\n    },\r\n    categoriesContainer: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    keywordList: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        height: 48,\r\n        mouseWheel: 'horizontal',\r\n        overflowX: 'auto',\r\n        overflowY: 'hidden',\r\n        listStyle: 'none',\r\n        padding: theme.spacing(0.5),\r\n        margin: 0,\r\n    },\r\n    keyword: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    searchContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: 20,\r\n        marginBottom: 15,\r\n    },\r\n    input: {\r\n        height: 40,\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    button: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n        height: 40,\r\n    },\r\n    keywordFilter: {\r\n        paddingLeft: 0,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: theme.shape.borderRadius,\r\n    }\r\n}));\r\n\r\nexport const PublicRepositoryPage = () => {\r\n    const classes = useStyles();\r\n    const [search, setSearch] = useState('');\r\n    const [filter, setFilter] = useState('');\r\n    const [categoriesFilter, setCategoriesFilter] = useState([]);\r\n    const [keywords, setKeywords] = useState([]);\r\n    const categoriesQuery = useQuery('categories', async () => {\r\n        const resp = await getCategories();\r\n        setCategoriesFilter(resp.categories.map(category => ({ ...category, selected: false })));\r\n        return resp;\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery(['filtered-designs', filter, ...keywords, ...categoriesFilter], async ({ pageParam = 0 }) => {\r\n        const resp = await getPublicFilteredDesigns(search, keywords, categoriesFilter.filter(c => c.selected), pageParam);\r\n        return resp;\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const handleChangeKeywords = (keywords, type, targetKeyword) => {\r\n        setKeywords(keywords);\r\n    };\r\n\r\n    const handleSearch = () => {\r\n        setFilter(search);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        handleSearch();\r\n    };\r\n\r\n    const handleToggleCategory = (index) => {\r\n        const categories = [...categoriesFilter];\r\n        categories[index].selected = !categories[index].selected;\r\n        setCategoriesFilter(categories);\r\n        handleSearch();\r\n    };\r\n\r\n    const handleClearSearch = () => {\r\n        setSearch('');\r\n        setFilter('');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                    <Typography style={{ marginTop: 20, marginLeft: 20 }}>Categorías</Typography>\r\n                    <div className={classes.categoriesContainer}>\r\n                        {\r\n                            categoriesFilter.map((category, index) => (\r\n                                    <FormControlLabel\r\n                                        className={classes.category}\r\n                                        key={category._id}\r\n                                        control={\r\n                                            <Checkbox\r\n                                                checked={category.selected}\r\n                                                onChange={(e) => handleToggleCategory(index)}\r\n                                            />\r\n                                        }\r\n                                        label={category.name}\r\n                                    />\r\n                                )\r\n                            )\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.sectionTitle}>\r\n                        <Typography variant='h4'>Buscar Diseño</Typography>\r\n                        <Divider />\r\n                    </div>\r\n                    <form onSubmit={handleSubmit} className={classes.searchContainer}>\r\n                        <TextField\r\n                            className={classes.input}\r\n                            size='small'\r\n                            variant='outlined'\r\n                            value={search}\r\n                            onChange={({ target }) => setSearch(target.value)}\r\n                            label='Nombre/Propietario'\r\n                            onBlur={handleSearch}\r\n                            placeholder='Ingresa el nombre o propietario para buscar diseños'\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    search.trim().length ?(<IconButton\r\n                                        size='small'\r\n                                        onClick={handleClearSearch}\r\n                                        onMouseDown={(e)=>e.preventDefault()}\r\n                                    >\r\n                                        {<Close /> }\r\n                                    </IconButton>) : (<div></div>)\r\n\r\n                            }}\r\n                            fullWidth\r\n                        />\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant='contained' \r\n                            color='primary'\r\n                            type='submit'\r\n                            disableElevation\r\n                        >\r\n                            Buscar\r\n                        </Button>\r\n                    </form>\r\n                    <KeywordManager keywords={keywords} onChangeKeywords={handleChangeKeywords}/>\r\n                    <div className={classes.sectionTitle}>\r\n                        <Typography variant='h4'>Repositorio Público</Typography>\r\n                        <Divider />\r\n                        {\r\n                            (categoriesQuery.isError) \r\n                                ? <Typography>{categoriesQuery.error.message}</Typography>\r\n                                : (designsQuery.isError) \r\n                                    ? <Typography>{designsQuery.error.message}</Typography>\r\n                                    : (categoriesQuery.isLoading || designsQuery.isLoading)\r\n                                        ? <Typography>Cargando...</Typography>\r\n                                        : <DesignsContainer {...designsQuery} label='public-repository'/>\r\n                        }                        \r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport queryString from 'query-string';\r\nimport { Button, Divider, Grid, List, ListItem, ListItemText, makeStyles, Typography } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { searchUsers } from 'services/UserService';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { UserCard } from 'components/UserCard';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingBottom: 50,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    usersContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        paddingTop: 15,\r\n    },\r\n    errorContainer: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        alignItems:'center',\r\n    },\r\n    loadMore: {\r\n        marginTop: 50,\r\n    }\r\n}));\r\n\r\nexport const SearchUsersPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { q } = queryString.parse(location.search);\r\n    \r\n    const redirectTo = (path) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const { data, status, error, isFetchingNextPage, fetchNextPage, hasNextPage } = useInfiniteQuery('search-users', async ({ pageParam = 0 }) => {\r\n        return await searchUsers(q, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const userList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.users.map((user, i) => <UserCard key={user._id} {...user}/>);\r\n        });\r\n    };\r\n\r\n    if(!q){\r\n        return (\r\n            <div className={ classes.errorContainer }>\r\n                <Alert severity='error' className={classes.error}>\r\n                    No se ha ingresado filtro para la búsqueda de usuarios. Por favor ingrese información en la entrada de texto de la barra de navegación para buscar usuarios\r\n                    y presione 'enter' o el ícono de búsqueda.\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            { error.message }\r\n        </Alert>\r\n    ) : (\r\n            <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                        <ListItem button onClick={() => redirectTo('/my-designs')}>\r\n                            <Home className={classes.icon} />\r\n                            <ListItemText primary=\"Mis Diseños\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/shared-with-me')}>\r\n                            <Group className={classes.icon} />\r\n                            <ListItemText primary=\"Compartidos Conmigo\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/public-repository')}>\r\n                            <Public className={classes.icon} />\r\n                            <ListItemText primary=\"Repositorio Público\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                    </List>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div style={{paddingTop: 15}}>\r\n                        {\r\n                            data.pages[0].users.length > 0 \r\n                                ? (<><Typography variant='h4'>\r\n                                        Usuarios encontrados\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                    <div className={ classes.usersContainer }>\r\n                                        { userList() }\r\n                                        {\r\n                                            data && hasNextPage && <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                                                    {\r\n                                                        isFetchingNextPage\r\n                                                            ? 'Cargando más...'\r\n                                                            : 'Cargar Más'\r\n                                                    }\r\n                                                </Button>\r\n                                        }\r\n                                    </div></>)\r\n                                : <Alert severity='error' className={classes.error}>\r\n                                    No se han encontrado coincidencias.\r\n                                </Alert>\r\n\r\n                        }\r\n                        \r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import types from \"types\";\r\n\r\n\r\nexport const designReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.design.updateDesign:\r\n            return {\r\n                ...state,\r\n                design: action.payload,\r\n            };\r\n        case types.design.changeMetadataField:\r\n            if(action.payload.subfield !== null){\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: {\r\n                                ...state.design.metadata[action.payload.field],\r\n                                [action.payload.subfield]: action.payload.value,\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n            } else{\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: action.payload.value,\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        case types.design.changeTaskField:\r\n            const learningActivities = state.design.data.learningActivities;\r\n            learningActivities.forEach((la, index) => {\r\n                if(la.id === action.payload.learningActivityID){\r\n                    la.tasks.forEach((t, i)=>{\r\n                        if(t.id === action.payload.taskID){\r\n                            if(action.payload.subfield !== null) learningActivities[index].tasks[i][action.payload.field][action.payload.subfield] = action.payload.value;\r\n                            else learningActivities[index].tasks[i][action.payload.field] = action.payload.value;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            //if (action.payload.subfield !== null) learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field][action.payload.subfield] = action.payload.value;\r\n            //else learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field] = action.payload.value;\r\n            // learningActivities: [...learningActivities.slice(0, learningActivityIndex), learningActivities[learningActivityIndex].task[], ...learningActivities.slice(learningActivityIndex)] \r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    data: {\r\n                        ...state.design.data,\r\n                        learningActivities,\r\n                    }\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResultField:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    ...state.currentLearningResult,\r\n                    [action.payload.field]: action.payload.value,\r\n                }\r\n            }\r\n        case types.design.clearCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    category: null,\r\n                    verb: null,\r\n                    description: null,\r\n                    editing: false,\r\n                    index: null,\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: action.payload\r\n            }\r\n        case types.design.setBloomCategories:\r\n            return {\r\n                ...state,\r\n                bloomCategories: action.payload\r\n            }\r\n        case types.design.setBloomVerbs:\r\n            return {\r\n                ...state,\r\n                bloomVerbs: action.payload\r\n            }\r\n        case types.design.setDesignPrivileges:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    privileges: action.payload\r\n                }\r\n            }\r\n        case types.design.addDesignKeyword:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    keywords: [...state.design.keywords, action.payload],\r\n                }\r\n            };\r\n        case types.design.removeDesignKeyword:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    keywords: [...state.design.keywords.filter(k => k !== action.payload)],\r\n                }\r\n            };\r\n\r\n        case types.design.updateReadOnlyLink:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    readOnlyLink: action.payload,\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { designReducer } from 'contexts/design/designReducer';\r\n\r\nconst DesignContext = createContext();\r\n\r\nexport function useDesignState() {\r\n\tconst context = useContext(DesignContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useDesignState must be used within a DesignProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tdesign: null,\r\n\tcurrentLearningResult: {\r\n\t\tcategory: null,\r\n\t\tverb: null,\r\n\t\tdescription: null,\r\n\t\tediting: false,\r\n\t\tindex: null,\r\n\t},\r\n\tbloomCategories: [],\r\n\tbloomVerbs: [],\r\n};\r\n\r\nexport const DesignProvider = ({ children }) => {\r\n\r\n\tconst [ designState, dispatch ] = useReducer(designReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<DesignContext.Provider value={ { designState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</DesignContext.Provider>\r\n\t);\r\n};\r\n","import React, { createContext, useCallback, useContext, useState } from 'react';\r\nimport * as Y from 'yjs';\r\nimport { WebsocketProvider } from 'y-websocket';\r\nimport { useAuthState } from './AuthContext';\r\n\r\nconst SharedDocContext = createContext();\r\n\r\nexport function useSharedDocContext() {\r\n    const context = useContext(SharedDocContext);\r\n    if (context === undefined) {\r\n        throw new Error('SharedDocContext must be used within a SharedDocProvider');\r\n    }\r\n    return context;\r\n}\r\n\r\nexport const SharedDocProvider = ({ children }) => {\r\n    const [doc, setDoc] = useState(null);\r\n    const [provider, setProvider] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectToDesign = useCallback(\r\n        ( id ) => {\r\n            if (provider) return false;\r\n            if (!authState.user) return false;\r\n            const colors = [\r\n                '#30bced',\r\n                '#6eeb83',\r\n                '#ffbc42',\r\n                '#ecd444',\r\n                '#ee6352',\r\n                '#9ac2c9',\r\n                '#8acb88',\r\n                '#1be7ff'\r\n            ];\r\n            const yDoc = new Y.Doc({guid: id});\r\n            setDoc(yDoc);\r\n            const wsProvider = new WebsocketProvider(process.env.REACT_APP_Y_WEBSOCKET_SERVER, id, yDoc);\r\n            const userWithColor = {\r\n                name: authState.user.name,\r\n                color: colors[Math.floor(Math.random() * colors.length)],\r\n            };\r\n            wsProvider.awareness.setLocalStateField('user', userWithColor);\r\n            setProvider(wsProvider);\r\n            setUser(userWithColor);\r\n        },\r\n        [provider, authState.user],\r\n    );\r\n\r\n    const clearDoc = useCallback(\r\n        () => {\r\n            setDoc(null);\r\n            setProvider(null);\r\n            setUser(null);\r\n        },\r\n        [setDoc, setProvider, setUser],\r\n    );\r\n\r\n    return (\r\n        <SharedDocContext.Provider value={{\r\n            doc,\r\n            provider,\r\n            connectToDesign,\r\n            clearDoc,\r\n            user,\r\n        }}>\r\n            {children}\r\n        </SharedDocContext.Provider>\r\n    );\r\n}","import { useEffect, useState, useCallback, forwardRef, useImperativeHandle } from 'react'\r\nimport { Editor } from '@tiptap/core'\r\nimport Collaboration from '@tiptap/extension-collaboration'\r\nimport CollaborationCursor from '@tiptap/extension-collaboration-cursor'\r\nimport { EditorContent } from '@tiptap/react'\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext'\r\nimport './sharedTextField.css';\r\nimport { Box, ButtonBase, Divider, makeStyles } from '@material-ui/core'\r\nimport Document from '@tiptap/extension-document'\r\nimport Paragraph from '@tiptap/extension-paragraph'\r\nimport Text from '@tiptap/extension-text'\r\n//import Placeholder from './PlaceHolder'\r\nimport CharacterCount from '@tiptap/extension-character-count'\r\nimport { ArrowDropUp, ArrowDropDown } from '@material-ui/icons'\r\n\r\nfunction htmlToText(htmlString) {\r\n    var span = document.createElement('span');\r\n    span.innerHTML = htmlString;\r\n    return span.textContent || span.innerText;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: ({ multiline, rowMax, focused }) => ({\r\n        width: '100%',\r\n        display: 'flex',\r\n    }),\r\n    inputContainer: ({ multiline, rowMax, focused, type }) => ({\r\n        width: '100%',\r\n        cursor: 'text',\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 34px)`,\r\n        overflow: 'auto',\r\n    }),\r\n    actions: () => ({\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: 70,\r\n        justifyContent: 'space-between',\r\n        borderWidth: 1,\r\n        borderStyle: 'solid',\r\n        borderColor: theme.palette.action.disabled,\r\n        borderTopRightRadius: 5,\r\n        borderBottomRightRadius: 5,\r\n    }),\r\n    action: () => ({\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n    }),\r\n    editorx: ({ multiline, rowMax }) => ({\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 34px)`,\r\n    }),\r\n    '@global': {\r\n        '.ProseMirror': ({ multiline, rowMax }) => ({\r\n            height: '100%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n            width: '100%',\r\n            fontSize: theme.typography.body1.fontSize,\r\n            fontFamily: theme.typography.fontFamily,\r\n            fontStyle: 'normal',\r\n            paddingTop: '1rem',\r\n            paddingBottom: '1rem',\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n        }),\r\n        '.ProseMirror p': {\r\n            marginBlockStart: 0,\r\n            marginBlockEnd: 0,\r\n        },\r\n        '.ProseMirror:focus': {\r\n            outline: 'none',\r\n        },\r\n        '.ProseMirror p.is-editor-empty:first-child::before': {\r\n            content: 'attr(data-empty-text)',\r\n            float: 'left',\r\n            color: theme.palette.type === 'dark' ? theme.palette.grey[400] : theme.palette.grey[600],\r\n            pointerEvents: 'none',\r\n            height: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const SharedTextFieldTipTapEditor = forwardRef(({name, multiline, rowMax = 1, maxLength, onChange, placeholder = '', initialvalue = '', type = 'text', max, min, deleteOnRemove = false}, ref) => {\r\n    const [focused, setFocused] = useState(false);\r\n    const classes = useStyles({\r\n        multiline,\r\n        rowMax,\r\n        focused,\r\n        type,\r\n    });\r\n    const [synced, setSynced] = useState(false);\r\n    const { doc, provider, user } = useSharedDocContext();\r\n    const [editor, setEditor] = useState(null);\r\n\r\n    const getText = useCallback(\r\n        () => {\r\n            return htmlToText(editor?.getHTML().toString()).trim().toString();\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    const setText = useCallback(\r\n        (value) => {\r\n            editor?.commands.first(({ commands }) => [\r\n                () => commands.setContent(value.toString()),\r\n            ]);\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearText: () => {\r\n                if (!doc || !editor) return;\r\n                setText('');\r\n            },\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (!doc || !editor || !deleteOnRemove) return;\r\n            setText('');\r\n        }\r\n    }, [doc, editor, setText, deleteOnRemove]);\r\n\r\n    if(!editor){\r\n        setEditor(new Editor({\r\n            editorProps: type === 'number' ? {\r\n                handleTextInput: (view, from, to, text) => {\r\n                    if (isNaN(text) && text !== '-') return true;\r\n                    if (text === '0' && view.dom.firstChild.textContent === '00') return true;\r\n                    if (\r\n                        (text === '-' && view.dom.firstChild.textContent.match(/-/g).length > 1) || \r\n                        (text === '-' && min !== null && min >= 0) ||\r\n                        (text === '-' && view.dom.firstChild.textContent.indexOf('-') !== 0) \r\n                    ) return true;\r\n                    if (max !== null && parseInt(view.dom.firstChild.textContent) > max) return true;\r\n                    if (min !== null && parseInt(view.dom.firstChild.textContent) < min) return true;\r\n                    return false;\r\n                },\r\n                handlePaste: (view, event, slice) => {\r\n                    if (slice.content.childCount !== 1) return true;\r\n                    if (isNaN(slice.content.firstChild.textContent)) return true;\r\n                    const prevValue = view.dom.firstChild.textContent;\r\n                    const newValue = prevValue + slice.content.firstChild.textContent;\r\n                    if (\r\n                        (newValue.includes('-') && newValue.match(/-/g)?.length > 1) ||\r\n                        (newValue.includes('-') && newValue.indexOf('-') !== 0)\r\n                    ) return true;                    \r\n                    if (max !== null && parseInt(newValue) > max) return true;\r\n                    if (min !== null && parseInt(newValue) < min) return true;\r\n                    return false;\r\n                },\r\n            } : {},\r\n            extensions: [\r\n                Document.extend({\r\n                    content: multiline ? 'block+' : 'block',\r\n                }),\r\n                Paragraph,\r\n                Text,\r\n                CollaborationCursor.configure({\r\n                    provider: provider,\r\n                    user,\r\n                }),\r\n                Collaboration.configure({\r\n                    document: doc,\r\n                    field: name,\r\n                }),\r\n                CharacterCount.configure({\r\n                    limit: maxLength,\r\n                }),\r\n            ],\r\n            onUpdate: (event) => {\r\n                const text = htmlToText(event.editor.getHTML().toString());\r\n                let value = (type === 'number' && !isNaN(text)) ? parseInt(text) : text;\r\n                if(onChange) onChange({\r\n                    target : {\r\n                        name,\r\n                        type,\r\n                        value: (type === 'number' && isNaN(value)) ? 0 : value,\r\n                    }\r\n                });\r\n            },\r\n            onFocus: ({editor, event}) => {\r\n                setFocused(true);\r\n            },\r\n            onBlur: ({editor, event}) => {\r\n                setFocused(false);\r\n            },\r\n        }));\r\n    }\r\n    useEffect(() => {\r\n        if (provider.synced) {\r\n            if(!synced){\r\n                if (getText() === '') {\r\n                    setText(initialvalue);\r\n                    setSynced(true);\r\n                }\r\n            }\r\n        } else {\r\n            provider.once('synced', () => {\r\n                if(!synced){\r\n                    if (getText() === '') {\r\n                        setText(initialvalue);\r\n                        setSynced(true);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, [provider.synced, getText, initialvalue, provider, setText, synced]);\r\n\r\n    if(!editor){\r\n        return (<div>Conectando...</div>);\r\n    }\r\n\r\n    const handleIncrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (max !== null && (val + 1 > max)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val + 1,\r\n            }\r\n        });\r\n        return setText(val + 1);\r\n    };\r\n\r\n    const handleDecrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (min !== null && (val - 1 < min)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val - 1,\r\n            }\r\n        });\r\n        return setText(val - 1);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.inputContainer} onClick={() => {\r\n                if (!focused) editor.chain().focus('end').run()\r\n            }}>\r\n                <EditorContent editor={editor} className={`${classes.editorx}`} />\r\n            </div>\r\n            {\r\n                type === 'number' && (\r\n                    <div className={classes.actions}>\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleIncrement}>\r\n                            <ArrowDropUp />\r\n                        </Box>\r\n                        <Divider />\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleDecrement}>\r\n                            <ArrowDropDown />\r\n                        </Box>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n})\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { IconButton, makeStyles, Typography, Tooltip, Paper, MenuItem, FormControl, Select, TextField, Box, InputLabel, useTheme, useMediaQuery, Button } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskBody: {\r\n        padding: 10,\r\n        position: 'relative',\r\n        left: '5%',\r\n        width: '95%',\r\n        height: '100%',\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        position: 'absolute',\r\n        width: '5%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n        },\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    gridContainer: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '50% 50%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `\r\n            'learningType modality'\r\n            'workingTime format'\r\n            'description description'`,\r\n        [theme.breakpoints.down('md')]: {\r\n            gridTemplateAreas: `\r\n                'learningType learningType'\r\n                'modality modality'\r\n                'format format'\r\n                'workingTime workingTime'\r\n                'description description'`,\r\n        },\r\n    },\r\n    firstRow: {\r\n        display: 'grid',\r\n        gridTemplateColumns: 'auto auto 10%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `'learningType modality'`,\r\n    },\r\n    learningTypeContainer:{\r\n        gridArea: 'learningType',\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    learningType:{\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    modality: {\r\n        gridArea: 'modality',\r\n        width: '100%',\r\n        display: 'flex',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    format: {\r\n        gridArea: 'format',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignSelf: 'flex-end',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    delete: {\r\n        alignSelf: 'flex-start',\r\n        justifySelf: 'center',\r\n    },\r\n    resourceLinkGrid:{\r\n        display: 'grid',\r\n        gridTemplateColumns: '25% 75%',\r\n    },\r\n    fab: {\r\n        maxHeight: \"20px\",\r\n        minHeight: \"20px\",\r\n        minWidth: \"20px\",\r\n        maxWidth: \"20px\",\r\n    },\r\n    icon:{\r\n        maxHeight: \"15px\",\r\n        minHeight: \"15px\",\r\n        minWidth: \"15px\",\r\n        maxWidth: \"15px\",\r\n    }\r\n}));\r\n\r\nexport const Task = forwardRef(({ learningActivityIndex, index, task, learningActivityID, ...rest }, ref) => {\r\n    const classes = useStyles();\r\n    const { socket } = useSocketState();\r\n    const isMounted = useRef(true);\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isMediumDevice = useMediaQuery(theme.breakpoints.down('md'));\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        description: task.description,\r\n        learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n        modality: task.modality && task.modality.trim() !== '' ? task.modality : 'Seleccionar',\r\n        format: task.format && task.format.trim() !== '' ? task.format : 'Seleccionar',\r\n        timeHours: task.duration.hours ?? 0,\r\n        timeMinutes: task.duration.minutes ?? 0,\r\n        groupSize: task.groupSize && task.groupSize !== 2 ? task.groupSize : 2,\r\n    });\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearTexts: () => {\r\n                hoursRef?.current.clearText();\r\n                minutesRef?.current.clearText();\r\n                descriptionRef?.current.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.description !== task.description) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    description: task.description,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.description, task.description, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.learningType !== task.learningType) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.learningType, task.learningType, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.modality !== task.modality) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    modality: task.modality && task.modality.trim() !== '' ? task.modality : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.modality, task.modality, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.format !== task.format) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    format: task.format && task.format.trim() !== '' ? task.format : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.format, task.format, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.timeHours !== task.duration.hours) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeHours: task.duration.hours ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeHours, task.duration.hours, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.timeMinutes !== task.duration.minutes) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeMinutes: task.duration.minutes ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeMinutes, task.duration.minutes, setValues]);\r\n\r\n    const { description, learningType, modality, format, timeHours, timeMinutes, groupSize,  } = form;\r\n\r\n    const handleEditTaskField = ({ target }) => {\r\n        let { name: field, value } = target;\r\n        let subfield = null;\r\n        if (field.includes('description')) field = 'description';\r\n        else if (field.includes('timeHours')) {\r\n            field = 'duration';\r\n            subfield = 'hours';\r\n            value = isNaN(value) ? 0 : value;\r\n        } else if (field.includes('timeMinutes')) {\r\n            field = 'duration';\r\n            subfield = 'minutes';\r\n            value = isNaN(value) ? 0 : value;\r\n        }\r\n        handleInputChange({ target });\r\n        socket.emit('edit-task-field', { designId: design._id, learningActivityID, taskID: task.id, field, value, subfield });\r\n    };\r\n\r\n    const handleOpenResourceModal = () => {\r\n        dispatch({\r\n            type: types.ui.setResourceLink,\r\n            payload: {\r\n                learningActivityIndex: learningActivityIndex,\r\n                taskIndex: index,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource',\r\n        });\r\n    }\r\n\r\n    const handleDeleteTask = (index) => {\r\n        if (description === \"\" && learningType === 'Seleccionar' && modality === 'Seleccionar' && format === 'Seleccionar' && timeHours === 0 && timeMinutes === 0) {\r\n            hoursRef?.current?.clearText();\r\n            minutesRef?.current?.clearText();\r\n            descriptionRef?.current?.clearText();\r\n            socket.emit('delete-task', { designId: design._id, learningActivityID, taskID: task.id });\r\n            enqueueSnackbar('Su tarea se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'tarea',\r\n                    args: { designId: design._id, learningActivityID, taskID: task.id },\r\n                    actionMutation: null,\r\n                }\r\n            })\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleChangeDropdown = (e) => {\r\n        handleInputChange(e);\r\n        socket.emit('edit-task-field', { designId: design._id, learningActivityID, taskID: task.id, field: e.target.name, value: e.target.value, subfield: null });\r\n    };\r\n\r\n    const listTasksArray = () => {\r\n        return (\r\n            <Box key={index} style={{ height: '100%' }}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Box style={{ display: 'flex', position: 'relative', height: '100%', width: '100%' }}>\r\n                        {(() => {\r\n                            if (task.learningType === 'Investigación') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Adquisición') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Producción') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Discusión') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Colaboración') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Práctica') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></Box>\r\n                                )\r\n                            }\r\n                        })()}\r\n                        <div className={classes.taskBody}>\r\n                            <div className={classes.gridContainer}>\r\n                                <div className={classes.learningTypeContainer}>\r\n                                    <FormControl fullWidth variant='outlined' className={classes.learningType}>\r\n                                        <InputLabel id={`learningType-task-${task.id}-learningActivity-${learningActivityID}`} shrink>Aprendizaje</InputLabel>\r\n                                        <Select\r\n                                            labelId={`learningType-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Aprendizaje'\r\n                                            name='learningType'\r\n                                            value={learningType}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Investigación'}> Investigación </MenuItem>\r\n                                            <MenuItem value={'Adquisición'}> Adquisición </MenuItem>\r\n                                            <MenuItem value={'Producción'}> Producción </MenuItem>\r\n                                            <MenuItem value={'Discusión'}> Discusión </MenuItem>\r\n                                            <MenuItem value={'Colaboración'}> Colaboración </MenuItem>\r\n                                            <MenuItem value={'Práctica'}> Práctica </MenuItem>\r\n\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    {isMediumDevice && (<Tooltip title=\"Eliminar tarea\" className={classes.delete}>\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>)}\r\n                                </div>\r\n                                <div className={classes.modality}>\r\n                                    <FormControl fullWidth variant='outlined'>\r\n                                        <InputLabel id={`modality-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Modalidad </InputLabel>\r\n                                        <Select\r\n                                            labelId={`modality-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Aprendizaje'\r\n                                            name='modality'\r\n                                            value={modality}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Presencial-Asíncrono'}> Presencial-Asíncrono</MenuItem>\r\n                                            <MenuItem value={'Presencial-Síncrono'}> Presencial-Síncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Asíncrono'}> Online-Asíncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Síncrono'}> Online-Síncrono</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    {!isMediumDevice && (<Tooltip title=\"Eliminar tarea\" className={classes.delete}>\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>)}\r\n                                </div>\r\n                                <div style={{ width: '100%', gridArea: 'workingTime', marginTop: 3 }}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom> Tiempo de trabajo </Typography>\r\n                                    <div className={classes.timeField}>\r\n                                        <TextField\r\n                                            label='Horas'\r\n                                            InputLabelProps = {{shrink: true}}\r\n                                            fullWidth\r\n                                            margin='none'\r\n                                            variant='outlined'\r\n                                            color='primary'\r\n                                            InputProps={{\r\n                                                inputComponent: SharedTextFieldTipTapEditor,\r\n                                                inputProps: {\r\n                                                    ref: hoursRef,\r\n                                                    name: `timeHours-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                    placeholder: 'Horas',\r\n                                                    initialvalue: timeHours,\r\n                                                    onChange: handleEditTaskField,\r\n                                                    type: 'number',\r\n                                                    min: 0,\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                        <TextField\r\n                                            label='Minutos'\r\n                                            InputLabelProps = {{shrink: true}}\r\n                                            fullWidth\r\n                                            margin='none'\r\n                                            variant='outlined'\r\n                                            color='primary'\r\n                                            InputProps={{\r\n                                                inputComponent: SharedTextFieldTipTapEditor,\r\n                                                inputProps: {\r\n                                                    ref: minutesRef,\r\n                                                    name: `timeMinutes-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                    placeholder: 'Minutos',\r\n                                                    initialvalue: timeMinutes,\r\n                                                    onChange: handleEditTaskField,\r\n                                                    type: 'number',\r\n                                                    min: 0,\r\n                                                    max: 59,\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                <div style={{marginTop: 20}}>\r\n                                    <Button variant={'outlined'} onClick={handleOpenResourceModal}> Administrar recursos</Button>\r\n                                </div>\r\n                                <div className={classes.format}>\r\n                                    <FormControl fullWidth variant='outlined' >\r\n                                        <InputLabel id={`format-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Formato </InputLabel>\r\n                                        <Select\r\n                                            labelId={`format-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Formato'\r\n                                            name='format'\r\n                                            value={format}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Grupal'}> Grupal</MenuItem>\r\n                                            <MenuItem value={'Individual'}> Individual</MenuItem>\r\n                                            <MenuItem value={'Toda la clase'}> Toda la clase</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    { (format === 'Grupal') &&\r\n                                        <FormControl fullWidth variant='outlined'>\r\n                                            <InputLabel id={`group-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Personas </InputLabel>\r\n                                            <Select\r\n                                                labelId={`group-quantity-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                                label='Cantidad'\r\n                                                name='groupSize'\r\n                                                value={groupSize}\r\n                                                onChange={handleChangeDropdown}\r\n                                                type = 'number'\r\n                                            >\r\n                                            <MenuItem value={2}> 2 </MenuItem>\r\n                                            <MenuItem value={3}> 3</MenuItem>\r\n                                            <MenuItem value={4}> 4</MenuItem>\r\n                                            <MenuItem value={5}> 5</MenuItem>\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    }\r\n                                </div>\r\n                                <TextField\r\n                                    style={{ gridArea: 'description', marginTop: 10, }}\r\n                                    InputLabelProps = {{shrink: true}}\r\n                                    label='Descripción'\r\n                                    fullWidth\r\n                                    margin='none'\r\n                                    variant='outlined'\r\n                                    color='primary'\r\n                                    InputProps={{\r\n                                        inputComponent: SharedTextFieldTipTapEditor,\r\n                                        inputProps: {\r\n                                            ref: descriptionRef,\r\n                                            name: `description-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                            placeholder: 'Descripción',\r\n                                            initialvalue: description,\r\n                                            onChange: handleEditTaskField,\r\n                                            multiline: true,\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </Box>\r\n                </Paper>\r\n            </Box >\r\n        )\r\n    }\r\nreturn (\r\n    <>\r\n        {\r\n            listTasksArray()\r\n        }\r\n    </>\r\n)\r\n})\r\n","import React from 'react';\r\nimport { makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        //borderRadius: '6px',\r\n        height: '100%',\r\n    },\r\n    title:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    colorBox: {\r\n        width: 10,\r\n        height: 10,\r\n        marginRight: 5,\r\n        border: `1px solid #dddddd`,\r\n    },\r\n    colorBoxRightPanel: {\r\n        width: 13,\r\n        height: 13,\r\n        marginRight: 5,\r\n    },\r\n    spacingGraphic:{\r\n        marginTop: theme.spacing(1),\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    legend:{\r\n        marginTop: theme.spacing(0.5),\r\n        marginLeft: theme.spacing(0.5),\r\n        marginRight: theme.spacing(0.5),\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\n/*borderRadius: index === 0 \r\n    ? '5px 0px 0px 5px'\r\n    : index === items.length - 1  && item.value !== 0\r\n        ? '0px 5px 5px 0px'\r\n        : 0,\r\n*/\r\n\r\nexport const StackedBar = ({ height = 25, items, type, legends, colorGraphicToPdf }) => {\r\n    const classes = useStyles();\r\n    const { userConfig } = useUserConfigState();\r\n    let colors = [];\r\n    let valueTotal = 0;\r\n    \r\n    items.map ((item) =>( valueTotal = item.value + valueTotal));\r\n    if( type === 'Activity' ){ (userConfig.darkTheme) ? colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'];}\r\n    else if( type === 'Format'){ (userConfig.darkTheme) ? colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'] : colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'];}\r\n    else if( type === 'Modality' ){ (userConfig.darkTheme) ? colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3'] : colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3']};\r\n    \r\n    return (\r\n        <>  \r\n            <div className={classes.root} style={{height}} >\r\n                {   \r\n                    items.map( (item, index) => (\r\n                        <Tooltip \r\n                            key={`nombreGrafico${index}`} \r\n                            title={\r\n                                <div className={classes.title}>\r\n                                    <div className={classes.colorBox} style={{backgroundColor: colors[index]}}></div>\r\n                                    {`${item.title}: ${((item.value * 100)/valueTotal).toFixed(1)}%`}\r\n                                </div>\r\n                            } \r\n                            arrow\r\n                        >\r\n                            <div\r\n                                style={{\r\n                                    width: `${item.value * 100}%`, \r\n                                    height: '100%', \r\n                                    backgroundColor: colors[index]\r\n                                    }}\r\n                                >\r\n                            </div>\r\n                        </Tooltip>\r\n                    ))\r\n                }\r\n            </div>\r\n            {   \r\n                (legends) && \r\n                <div className={classes.spacingGraphic}>\r\n                    { items.map ((item, index) =>( \r\n                        <div className={classes.legend} key = {`legends-${index}`}  >\r\n                            <div className={classes.colorBoxRightPanel} style={{backgroundColor: colors[index]}}></div>\r\n                            {colorGraphicToPdf ? \r\n                                <Typography variant=\"caption\" > {item.title} </Typography> \r\n                                :\r\n                                <Typography variant=\"caption\" style={{color: \"#000000\"}}> {item.title} </Typography>\r\n                            }\r\n                        </div>)\r\n                    )}\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n};\r\n","export let itemsLearningType = [{\r\n    title: 'Investigación',\r\n    value: 0,\r\n},{\r\n    title: 'Adquisición',\r\n    value: 0,\r\n},{\r\n    title: 'Producción',\r\n    value: 0,\r\n},{\r\n    title: 'Discusión',\r\n    value: 0,\r\n},{\r\n    title: 'Colaboración',\r\n    value: 0,\r\n},{\r\n    title: 'Práctica',\r\n    value: 0,\r\n}];\r\n\r\nexport let itemsLearningTypePie = [{\r\n    title: 'Investigación',\r\n    value: 0,\r\n},{\r\n    title: 'Adquisición',\r\n    value: 0,\r\n},{\r\n    title: 'Producción',\r\n    value: 0,\r\n},{\r\n    title: 'Discusión',\r\n    value: 0,\r\n},{\r\n    title: 'Colaboración',\r\n    value: 0,\r\n},{\r\n    title: 'Práctica',\r\n    value: 0,\r\n}];\r\n\r\nexport let itemsFormat = [{\r\n    title: 'Grupal',\r\n    value: 0\r\n},{\r\n    title: 'Individual',\r\n    value:0\r\n},{\r\n    title: 'Toda la clase',\r\n    value:0\r\n}];\r\n\r\nexport let itemsModality = [{\r\n    title: 'Presencial-Asíncrono',\r\n    value: 0\r\n},{\r\n    title: 'Presencial-Síncrono',\r\n    value: 0\r\n},{\r\n    title: 'Online-Asíncrono',\r\n    value: 0\r\n},{\r\n    title: 'Online-Síncrono',\r\n    value: 0\r\n}];","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Box, Checkbox, Divider, Fab, FormControlLabel, Grid, IconButton, makeStyles, Menu, MenuItem, Paper, TextField, Tooltip, Typography, useMediaQuery, useTheme } from '@material-ui/core'\r\nimport { Task } from 'pages/DesignPage/Workspace/Task';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { itemsLearningType } from 'assets/resource/items'\r\nimport { Add, Delete, ListAlt, MoreVert } from '@material-ui/icons';\r\nimport ObjectID from 'bson-objectid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    descriptionContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    },\r\n    delete: {\r\n        alignSelf: 'center',\r\n        justifySelf: 'center',\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing(-5),\r\n        right: theme.spacing(2),\r\n    },\r\n    taskContainer: {\r\n        position: 'relative', \r\n        marginBottom: theme.spacing(6),\r\n    },\r\n}));\r\n\r\nexport const LearningActivity = ({ index, learningActivity }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket } = useSocketState();\r\n    const { /*uiState,*/ dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isXSDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n\r\n    const titleRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const taskRefs = useRef([]);\r\n    \r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        title: learningActivity.title,\r\n        description: learningActivity.description,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            title: learningActivity.title,\r\n            description: learningActivity.description,\r\n        });\r\n    }, [design, setValues, learningActivity]);\r\n\r\n    const { title, description } = form;\r\n    \r\n    const handleDeleteUnit = () => {\r\n        if (title === \"\" && description === \"\" && learningActivity.learningResults.length === 0 && (learningActivity.tasks === undefined || learningActivity.tasks.length === 0)) {\r\n            taskRefs?.current?.forEach(task => task?.clearTexts());\r\n            titleRef?.current?.clearText();\r\n            descriptionRef?.current?.clearText();\r\n            socket.emit('delete-learningActivity', { designId: design._id, learningActivityID: learningActivity.id });\r\n            enqueueSnackbar('Su actividad se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'actividad',\r\n                    args: { designId: design._id, learningActivityID: learningActivity.id },\r\n                    actionMutation: null,\r\n                }\r\n            });\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n    };\r\n\r\n    const resetItems = () => {\r\n        itemsLearningType.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleAddTask = () => {\r\n        const id = ObjectID().toString();\r\n        socket.emit('new-task', { designId: design._id, learningActivityID: learningActivity.id, id });\r\n    };\r\n\r\n    const handleToggleLearningResult = (e, isSelected, result) => {\r\n        if (isSelected) {\r\n            let indexLearningResults = 0;\r\n            learningActivity.learningResults.forEach((r, _indexLearningResults) => {\r\n                if (r.verb === result.verb && r.description === result.description) indexLearningResults = _indexLearningResults;\r\n            });\r\n            socket.emit('delete-learning-result-from-learningActivity', {\r\n                designId: design._id,\r\n                learningActivityID: learningActivity.id,\r\n                indexLearningResults\r\n            });\r\n        } else {\r\n            socket.emit('add-learning-result-to-learningActivity', {\r\n                designId: design._id,\r\n                learningActivityID: learningActivity.id,\r\n                result\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleEditLearningActivityField = ({ target }) => {\r\n        let field = target.name;\r\n        if (target.name.includes('title')) field = 'title';\r\n        else if (target.name.includes('description')) field = 'description';\r\n        socket.emit('edit-unit-field', { designId: design._id, learningActivityID: learningActivity.id, field, value: target.value });\r\n        handleInputChange({ target: { ...target, name: field } });\r\n    };\r\n\r\n    const linkedLearningResult = () => {\r\n        const learningResults = design.metadata.results.map(result => (\r\n            <FormControlLabel\r\n                style={{ width: '50%' }}\r\n                key={`learning-result-${result.verb}`}\r\n                control={\r\n                    <Checkbox\r\n                        checked={!!learningActivity.learningResults.find(lr => lr.verb === result.verb)}\r\n                        onChange={(e) => handleToggleLearningResult(e,\r\n                            !!learningActivity.learningResults.find(lr => lr.verb === result.verb),\r\n                            result\r\n                        )}\r\n                    />\r\n                }\r\n                label={result.verb}\r\n            />\r\n        ));\r\n        if (learningResults.length === 0) return <Box style={{marginLeft: -15, paddingRight: 10}} fontSize='caption.fontSize' fontStyle='italic' textAlign='justify'>\r\n            No hay resultados de aprendizaje en este diseño. Para agregar resultados de aprendeizaje, por favor ve a la pestaña de metadatos.\r\n        </Box>;\r\n        return learningResults;\r\n    };\r\n\r\n    const handleOpenMenu = (e) => {\r\n        e.stopPropagation();\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n    \r\n    const handleOpenModalEvaluation = () =>{\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setEvaluation,\r\n            payload: {\r\n                learningActivityIndex: index,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Evaluation',\r\n        });\r\n    };\r\n\r\n    const listlearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <TextField\r\n                                label='Título'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: titleRef,\r\n                                        name: `title-learning-activity-${learningActivity.id}`,\r\n                                        placeholder: 'Título',\r\n                                        initialvalue: title,\r\n                                        onChange: handleEditLearningActivityField,\r\n                                    }\r\n                                }}\r\n                            />\r\n                            {isXSDevice && <>\r\n                                    <IconButton onClick={handleOpenMenu}>\r\n                                        <MoreVert />\r\n                                    </IconButton>\r\n                                    <Menu\r\n                                        onBlur={()=>setMenuOpen(null)}\r\n                                        anchorEl={isMenuOpen}\r\n                                        open={Boolean(isMenuOpen)}\r\n                                        anchorOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        keepMounted\r\n                                        transformOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        onClose={()=>setMenuOpen(null)}\r\n                                    >\r\n                                        <MenuItem onClick={handleOpenModalEvaluation}>\r\n                                            <ListAlt fontSize = 'small'/>\r\n                                            <Typography>Definir Evaluación</Typography>\r\n                                        </MenuItem>\r\n                                        <MenuItem onClick={handleDeleteUnit}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                            <Typography>Eliminar</Typography>\r\n                                        </MenuItem>\r\n                                    </Menu>\r\n                                </>}\r\n                        </Grid>\r\n                        {resetItems()}\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            {\r\n                                design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.forEach((task) => {\r\n                                    itemsLearningType.forEach((item) => {\r\n                                        if (item.title === task.learningType) {\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                }\r\n                                )\r\n                            }\r\n                            <StackedBar items={itemsLearningType} type={'Activity'} />\r\n                            {!isXSDevice &&\r\n                                <>\r\n                                    <IconButton onClick={handleOpenMenu}>\r\n                                        <MoreVert />\r\n                                    </IconButton>\r\n                                    <Menu\r\n                                        onBlur={()=>setMenuOpen(null)}\r\n                                        anchorEl={isMenuOpen}\r\n                                        open={Boolean(isMenuOpen)}\r\n                                        anchorOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        keepMounted\r\n                                        transformOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        onClose={()=>setMenuOpen(null)}\r\n                                    >\r\n                                        <MenuItem onClick={handleOpenModalEvaluation}>\r\n                                            <ListAlt fontSize = 'small' style={{marginRight: 8}}/>\r\n                                            <Typography>Definir Evaluación</Typography>\r\n                                        </MenuItem>\r\n                                        <MenuItem onClick={handleDeleteUnit}>\r\n                                            <Delete fontSize=\"small\" style={{marginRight: 8}}/>\r\n                                            <Typography>Eliminar Actividad</Typography>\r\n                                        </MenuItem>\r\n                                    </Menu>\r\n                                </>\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8} className={classes.taskContainer}>\r\n                            <Grid id='tasks' className={classes.gridTask}>\r\n                                {\r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i) => <Task ref={(ref) => taskRefs.current.push(ref)} key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index} learningActivityID={learningActivity.id} />)\r\n                                }\r\n                            </Grid>\r\n                            <Tooltip title='Agregar tarea' arrow>\r\n                                <Fab aria-label='add-task' className={classes.fab} size='small' color='primary' onClick={handleAddTask}>\r\n                                    <Add fontSize='small'/>\r\n                                </Fab>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <div className={classes.descriptionContainer}>\r\n                                <Grid className={classes.spacingDescription}>\r\n                                    <TextField\r\n                                        label='Descripción'\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: descriptionRef,\r\n                                                name: `description-learning-activity-${learningActivity.id}`,\r\n                                                placeholder: 'Descripción',\r\n                                                initialvalue: description,\r\n                                                rowMax: 3,\r\n                                                multiline: true,\r\n                                                onChange: handleEditLearningActivityField,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </Grid>\r\n                                <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                                <div className={classes.learningResultList}>\r\n                                    {\r\n                                        linkedLearningResult()\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listlearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport PieChart, {\r\n    Legend,\r\n    Series,\r\n    Tooltip,\r\n  } from 'devextreme-react/pie-chart';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\n\r\nexport const PieGraphic = ({items, colorGraphicToPdf}) => {\r\n    const { userConfig } = useUserConfigState();\r\n    \r\n    const customizeTooltip = (arg) =>{\r\n        return {\r\n          text: `${arg.argumentText} - ${(arg.percent * 100).toFixed(1)}%`\r\n        };\r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <div >\r\n                <PieChart\r\n                    id='pie'\r\n                    palette = {(userConfig.darkTheme) ? ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD']}\r\n                    dataSource={items}\r\n                    title = 'Análisis'\r\n                    theme = {(userConfig.darkTheme && colorGraphicToPdf) ? 'generic.contrast' : 'generic.light'}\r\n                >   \r\n                    <Series argumentField='title' valueField = 'value'/>\r\n                    <Legend\r\n                        verticalAlignment='bottom'\r\n                        horizontalAlignment='center'\r\n                        itemTextPosition='right'\r\n                        rowCount={2}\r\n                    />\r\n                    <Tooltip enabled={true} customizeTooltip={customizeTooltip} zIndex={2}>\r\n                    </Tooltip>\r\n                </PieChart>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { Box, IconButton, ListItemIcon, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { MoreVert } from '@material-ui/icons';\r\n\r\nexport const CustomMenu = ({ options, Icon=MoreVert }) => {\r\n    const [isOpen, setOpen] = useState(null);\r\n\r\n    const handleOpen = (e) => {\r\n        setOpen(e.currentTarget);\r\n    };\r\n\r\n    const handleSelect = (e, onSelect) => {\r\n        if(onSelect) onSelect(e);\r\n        handleClose();\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(null);\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if(options && options.length){\r\n            return options.map((option, index) => {\r\n                return (<MenuItem key={`option-${index}-${option}`} onClick={ (e) => handleSelect(e, option.onSelect)}>\r\n                    {\r\n                        option.icon \r\n                            ?   <ListItemIcon>\r\n                                    { option.icon }\r\n                                </ListItemIcon> \r\n                            : <div></div>\r\n                    }\r\n                    <Typography>{ option.label }</Typography>\r\n                </MenuItem>);\r\n            });\r\n        }else {\r\n            return (\r\n                <Typography component='div'>\r\n                    <Box fontStyle=\"italic\">\r\n                        No hay opciones especificadas.\r\n                    </Box>\r\n                </Typography>\r\n            );\r\n      }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <IconButton onClick={handleOpen}>\r\n                <Icon />   \r\n            </IconButton>\r\n            <Menu\r\n                anchorEl={isOpen}\r\n                open={Boolean(isOpen)}\r\n                anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                keepMounted\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                onClose={handleClose}\r\n            >   \r\n                { renderContent() }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Avatar, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Divider, FormControl, Grid, IconButton, Link as MaterialLink, makeStyles, MenuItem, Select, TextField, Typography } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport types from 'types';\r\nimport { Alert, Autocomplete } from '@material-ui/lab';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useQuery } from 'react-query';\r\nimport { getUser } from 'services/UserService';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { Link } from 'react-router-dom';\r\nimport { Add, FileCopy } from '@material-ui/icons';\r\nimport { CustomMenu } from 'components/CustomMenu';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleSectionShare: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    divSectionShare: {\r\n        padding: 20,\r\n    },\r\n}));\r\n\r\nexport const ShareModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [user] = useState('');\r\n    const [inputUser, setInputUser] = useState('');\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket } = useSocketState();\r\n    const [newPrivileges, setNewPrivileges] = useState([...design.privileges]);\r\n    const { data, error, isError, isLoading } = useQuery(['user-profile', design.owner], async () => {\r\n        return await getUser(design.owner);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const handleAddContactInArray = (v) => {\r\n        if (!v) return;\r\n        const user = data.contacts.find(u => u.name === v);\r\n        if (!user) return;\r\n        const isInDesignContacts = design.privileges.map(privilege => privilege.user._id === user._id).reduce((a, b) => a || b);\r\n        if (!isInDesignContacts) {\r\n            setNewPrivileges([...newPrivileges, { user, type: 1 }]);\r\n        } else {\r\n            enqueueSnackbar('El usuario ya se encuentra agregado', { variant: 'error', anchorOrigin: { vertical: 'bottom', horizontal: 'center' }, autoHideDuration: 2000 });\r\n        };\r\n        setInputUser('');\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setNewPrivileges([...design.privileges]);\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n    };\r\n\r\n    const handleAddContactInDesign = () => {\r\n        socket.emit('change-design-privileges', { designId: design._id, privileges: [...newPrivileges] });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n        enqueueSnackbar('Se ha compartido su diseño correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n    };\r\n\r\n    const handleCopyLinkToClipboard = () => {\r\n        navigator.clipboard.writeText(process.env.REACT_APP_URL + 'shared-link/' + design.readOnlyLink);\r\n        enqueueSnackbar('Enlace copiado.', { variant: 'success', anchorOrigin: { vertical: 'bottom', horizontal: 'left' }, autoHideDuration: 2000 });\r\n    };\r\n\r\n    const handleGenerateLink = () => {\r\n        socket.emit('generate-new-share-link', { designId: design._id });\r\n    };\r\n\r\n    const handleChange = (e, type, index) => {\r\n        const v = e.target.value;\r\n        if (v === type) return;\r\n        if (v === 'Quitar') {\r\n            if (index === newPrivileges.length - 1) {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                ])\r\n            } else {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ])\r\n            }\r\n        } else {\r\n            const p = { ...newPrivileges[index] };\r\n            p.type = v;\r\n            if (index === newPrivileges.length - 1) {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                ])\r\n            } else {\r\n                setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ])\r\n            }\r\n        };\r\n    };\r\n\r\n    if (error) {\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    {error}\r\n                </Alert>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (!design || !data) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const content = () => {\r\n        if (isLoading) {\r\n            return <Typography>Cargando...</Typography>\r\n        } else if (isError) {\r\n            return (\r\n                <div className={classes.error}>\r\n                    <Alert severity='error'>\r\n                        {error}\r\n                    </Alert>\r\n                </div>)\r\n        } else {\r\n            return (\r\n                <>\r\n\r\n                    <div className={classes.divSectionShare}>\r\n                        <div className={classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir mediante enlace </Typography>\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: 10, paddingLeft: 10, paddingRight: 10 }}>\r\n                            <Typography align='justify'> Mediante el siguiente enlace puedes compartir este diseño en modo solo lectura: </Typography>\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                <MaterialLink\r\n                                    style={{ wordBreak: 'break-word' }}\r\n                                    component={Link}\r\n                                    to={`/shared-link/${design.readOnlyLink}`}\r\n                                    onClick={handleClose}\r\n                                    align='center'\r\n                                >\r\n                                    {process.env.REACT_APP_URL + 'shared-link/' + design.readOnlyLink}\r\n                                </MaterialLink>\r\n                                <CustomMenu options={[\r\n                                    { icon: <FileCopy fontSize='small' />, label: 'Copiar enlace', onSelect: handleCopyLinkToClipboard },\r\n                                    { icon: <Add />, label: 'Generar nuevo enlace', onSelect: handleGenerateLink },\r\n                                ]} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.divSectionShare}>\r\n                        <div className={classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir a contactos </Typography>\r\n                        </div>\r\n                        <div>\r\n                            <Autocomplete\r\n                                value={user}\r\n                                blurOnSelect\r\n                                onChange={(e, v) => {\r\n                                    handleAddContactInArray(v)\r\n                                }}\r\n                                inputValue={inputUser}\r\n                                onInputChange={(event, newInputUser) => {\r\n                                    setInputUser(newInputUser);\r\n                                }}\r\n                                options={data.contacts.map(contact => {\r\n                                    return contact.name\r\n                                })}\r\n                                getOptionSelected={(option, value) => option.id === value.id}\r\n                                renderInput={(params) =>\r\n                                    <TextField\r\n                                        {...params}\r\n                                        label=\"Buscar Contacto\"\r\n                                        margin=\"normal\"\r\n                                        variant=\"outlined\"\r\n                                        InputProps={{ ...params.InputProps }}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <Divider style={{ marginBottom: 10 }} />\r\n                            {newPrivileges.map((privilege, i) => {\r\n                                return (\r\n                                    <Grid container style={{ marginBottom: 10 }} key={`privilege-${i}`}>\r\n                                        <Grid item xs={12} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap' }}>\r\n                                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                                <Box style={{ justifyContent: 'space-between' }}>\r\n                                                    <Avatar style={{ marginRight: 7 }} />\r\n                                                </Box>\r\n                                                <Box style={{ justifyContent: 'space-between' }}>\r\n                                                    <Typography>{privilege.user.name + ' ' + privilege.user.lastname}</Typography>\r\n                                                    <Typography color={'textSecondary'}>{privilege.user.email}</Typography>\r\n                                                </Box>\r\n                                            </div>\r\n                                            <Box >\r\n                                                {(privilege.user._id === design.owner) ?\r\n                                                    <Typography>Propietario</Typography>\r\n                                                    :\r\n                                                    <FormControl variant='outlined' size='small'>\r\n                                                        <Select\r\n                                                            key={`privileges-action-${i}`}\r\n                                                            name='type'\r\n                                                            value={privilege.type}\r\n                                                            onChange={(e) => { handleChange(e, privilege.type, i) }}\r\n                                                        >\r\n                                                            <MenuItem value={0}> Editor </MenuItem>\r\n                                                            <MenuItem value={1}> Lector</MenuItem>\r\n                                                            <MenuItem value={'Quitar'}> Quitar</MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                }\r\n                                            </Box>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                open={uiState.isShareModalOpen}\r\n                onClose={handleClose}\r\n                maxWidth={'sm'}\r\n                fullWidth\r\n            >\r\n                <DialogTitle >\r\n                    Compartir Diseño\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers style={{ padding: 0 }}>\r\n                    {content()}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddContactInDesign}>\r\n                        Listo\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Page, Text, View, Document, StyleSheet, Image, Link } from '@react-pdf/renderer';\r\nimport Logo from 'assets/img/Logo.png';\r\n\r\nexport const DocumentPDF = ({design, img, typeUserPDF}) => {\r\n    const styles = StyleSheet.create({\r\n        logo: {\r\n            width: 100,\r\n            height: 100,\r\n            marginVertical: 15,\r\n            marginHorizontal: 250\r\n        }, title: {\r\n            fontSize: 20,\r\n            textAlign: 'center',\r\n            marginBottom: 25,\r\n        }, box: { \r\n            width: '100%',\r\n        }, pageNumber: {\r\n            position: 'absolute',\r\n            fontSize: 12,\r\n            bottom: 30,\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: 'center',\r\n            color: 'grey',\r\n        }, table: { \r\n            display: \"table\", \r\n            width: \"auto\",\r\n            marginLeft: 50,\r\n            marginBottom: 10,\r\n            marginRight: 50, \r\n        }, tableRow: { \r\n            margin: \"auto\", \r\n            flexDirection: \"row\",\r\n        }, tableCol: { \r\n            width: \"100%\",  \r\n        }, tableCell: { \r\n            margin: \"auto\", \r\n            marginTop: 5, \r\n            fontSize: 12 \r\n        }, marginTitle:{\r\n            fontSize: 15,\r\n            marginLeft: 50,\r\n            marginTop: 15,\r\n            marginBottom: 10\r\n        }, body:{\r\n            paddingTop: 35,\r\n            paddingBottom: 65,\r\n        }\r\n    });\r\n    \r\n    return (\r\n        <>\r\n            <Document >\r\n                <Page size=\"A4\" wrap style={styles.body}>\r\n                    <View style={styles.box} >\r\n                        <Image\r\n                            src={Logo}\r\n                            style = {styles.logo}\r\n                        />\r\n                        {(design.metadata.name === '') ?\r\n                            <Text style={styles.title}> Nombre no definido. </Text>\r\n                            : \r\n                            <Text style={styles.title}> {design.metadata.name}. </Text>\r\n                        }\r\n                        <View style={styles.table}>\r\n                            {(typeUserPDF === 'teacher') && \r\n                                <View style={styles.tableRow}>\r\n                                    <View style={styles.tableCol}>\r\n                                        <Text style={[styles.tableCell,  {color: '#979797'}]}>Nombre</Text>\r\n                                    </View>\r\n                                    <View style={styles.tableCol}>\r\n                                        <Text style={[styles.tableCell,  {color: '#979797', marginLeft: 6}]}>Área disciplinar</Text>\r\n                                    </View>\r\n                                </View>\r\n                            }\r\n                            {(typeUserPDF === 'teacher') && \r\n                                <View style={styles.tableRow}>\r\n                                    <View style={styles.tableCol}>\r\n                                        {(design.metadata.name === '') ?\r\n                                            <Text style={[styles.tableCell, { marginBottom: 10}]}> No especificado. </Text>\r\n                                            : \r\n                                            <Text style={[styles.tableCell, { marginBottom: 10}]}> {design.metadata.name}. </Text>\r\n                                        }\r\n                                    </View>\r\n                                    <View style={styles.tableCol}>\r\n                                        <Text style={[styles.tableCell, {marginBottom: 10, marginLeft: 6}]}>{design.metadata.category.name}</Text>\r\n                                    </View>\r\n                                </View>\r\n                            }\r\n                            <View style={styles.tableRow}>\r\n                                <View style={styles.tableCol}>\r\n                                    <Text style={[styles.tableCell,  {color: '#979797'}]}>Tiempo de trabajo</Text>\r\n                                </View>\r\n                                <View style={styles.tableCol}>\r\n                                    <Text style={[styles.tableCell,  {color: '#979797', marginLeft: 6}]}>Modo de Entrega</Text>\r\n                                </View>\r\n                            </View>\r\n                            <View style={styles.tableRow}> \r\n                                <View style={styles.tableCol}> \r\n                                    <Text style={[styles.tableCell, {marginBottom: 10}]}> {design.metadata.workingTime.hours} hrs : {design.metadata.workingTime.minutes} min</Text>\r\n                                </View>\r\n                                <View style={styles.tableCol}>\r\n                                    {(design.metadata.name === '') ?\r\n                                        <Text style={[styles.tableCell, {marginLeft: 6}]}> No especificado. </Text>\r\n                                        : \r\n                                        <Text style={[styles.tableCell, {marginLeft: 6}]}> {design.metadata.name}. </Text>\r\n                                    }\r\n                                </View>\r\n                            </View>\r\n                            {(typeUserPDF === 'teacher') && \r\n                                <>\r\n                                    <View style={styles.tableRow}>\r\n                                        <View style={styles.tableCol}>\r\n                                            <Text style={[styles.tableCell,  {color: '#979797'}]}>Tamaño de la clase</Text>\r\n                                        </View>\r\n                                        <View style={styles.tableCol}>\r\n                                            <Text style={[styles.tableCell,  {color: '#979797', marginLeft: 6}]}>Conocimiento Previo</Text>\r\n                                        </View>\r\n                                    </View>\r\n                                    <View style={styles.tableRow}>\r\n                                        <View style={styles.tableCol}>\r\n                                            <Text style={[styles.tableCell, {marginBottom: 10}]}>{design.metadata.classSize}</Text>\r\n                                        </View>\r\n                                        <View style={styles.tableCol}>\r\n                                            {(design.metadata.priorKnowledge === '') ?\r\n                                                <Text style={[styles.tableCell, {marginBottom: 10, marginLeft: 6}]}>No especificado.</Text>\r\n                                                :\r\n                                                <Text style={[styles.tableCell, {marginBottom: 10, marginLeft: 6}]}>{design.metadata.priorKnowledge}</Text>\r\n                                            }\r\n                                        </View>\r\n                                    </View>\r\n                                </>\r\n                            }\r\n                            <View style={ styles.tableRow }>\r\n                                <View style={styles.tableCol}>\r\n                                    <Text style={[styles.tableCell,  {color: '#979797'}]}>Descripción</Text>\r\n                                </View>\r\n                                <View style={styles.tableCol}>\r\n                                    <Text style={[styles.tableCell,  {color: '#979797', marginLeft: 6}]}>Objetivos</Text>\r\n                                </View>\r\n                            </View>\r\n                            <View style={styles.tableRow}> \r\n                                <View style={styles.tableCol}> \r\n                                    {(design.metadata.description === '') ?\r\n                                        <Text style={[styles.tableCell, {marginBottom: 10, marginRight: 6}]}> No especificado. </Text>\r\n                                        : \r\n                                        <Text style={[styles.tableCell, {marginBottom: 10, marginRight: 6}]}> {design.metadata.description}. </Text>\r\n                                    } \r\n                                </View>\r\n                                <View style={styles.tableCol}>\r\n                                    {(design.metadata.objective === '') ?\r\n                                      <Text style={[styles.tableCell, {marginBottom: 10, marginLeft: 6}]}> No especificado. </Text>\r\n                                      : \r\n                                      <Text style={[styles.tableCell, {marginBottom: 10, marginLeft: 6}]}> {design.metadata.objective}. </Text>\r\n                                    } \r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                        { design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) =>\r\n                            <View key = {`learning-activity-${index}`}> \r\n                                <Text style={styles.marginTitle}> {learningActivity.title} </Text>\r\n                                { learningActivity.tasks && learningActivity.tasks.map((task, indexTask) =>\r\n                                        <View key = {`task-${indexTask}`} >\r\n                                            <View>\r\n                                                <View style={[styles.table, { marginBottom: 20, borderTop: 1, borderColor: '#808080'} ]}>\r\n                                                    <View style={ styles.tableRow }>\r\n                                                        {(typeUserPDF === 'teacher') && \r\n                                                            <View style={styles.tableCol}>\r\n                                                                <Text style={[styles.tableCell,  {color: '#979797'}]}>Aprendizaje</Text>\r\n                                                            </View>\r\n                                                        }\r\n                                                        <View style={styles.tableCol}>\r\n                                                            <Text style={[styles.tableCell,  {color: '#979797'}]}>Tiempo</Text>\r\n                                                        </View>\r\n                                                        <View style={styles.tableCol}>\r\n                                                            <Text style={[styles.tableCell,  {color: '#979797'}]}>Modalidad</Text>\r\n                                                        </View>\r\n                                                    </View>\r\n                                                    <View style={ styles.tableRow }>\r\n                                                        {(typeUserPDF === 'teacher') && \r\n                                                            <View style={styles.tableCol}>\r\n                                                                { (task.learningType === 'Seleccionar' || task.learningType.trim().length === 0) ?\r\n                                                                    <Text style={styles.tableCell}>No especificado.</Text>\r\n                                                                    :\r\n                                                                    <Text style={styles.tableCell}>{task.learningType}</Text>\r\n                                                                }\r\n                                                            </View>\r\n                                                        }\r\n                                                        <View style={styles.tableCol}>\r\n                                                            <Text style={styles.tableCell}>{task.duration.hours} hrs : {task.duration.minutes} min.</Text>\r\n                                                        </View>\r\n                                                        <View style={styles.tableCol}>\r\n                                                            {(task.modality === 'Seleccionar' || task.modality.trim().length === 0) ? \r\n                                                                <Text style={styles.tableCell}> No especificado. </Text> \r\n                                                                : \r\n                                                                <Text style={styles.tableCell}> {task.modality} </Text>\r\n                                                            }\r\n                                                        </View>\r\n                                                    </View>\r\n                                                    <View style={ styles.tableRow }>\r\n                                                        <View style={styles.tableCol}>\r\n                                                            <Text style={[styles.tableCell,  {color: '#979797'}]}>Formato</Text>\r\n                                                        </View>\r\n                                                        {  (task.format === 'Grupal') &&\r\n                                                            <>\r\n                                                            <View style={styles.tableCol}>\r\n                                                                <Text style={[styles.tableCell,  {color: '#979797'}]}>Número de integrantes</Text>\r\n                                                            </View>\r\n                                                            <View style={styles.tableCol}>\r\n                                                            </View>\r\n                                                            </>\r\n                                                        }  \r\n                                                    </View>\r\n                                                    <View style={ styles.tableRow }>\r\n                                                        <View style={styles.tableCol}>\r\n                                                            {(task.format === 'Seleccionar' || task.format.trim().length === 0) ? \r\n                                                                <Text style={styles.tableCell}> No especificado. </Text> \r\n                                                                : \r\n                                                                <Text style={styles.tableCell}> {task.format} </Text>\r\n                                                            }\r\n                                                        </View>\r\n                                                        {  (task.format === 'Grupal') &&\r\n                                                            <>\r\n                                                                <View style={styles.tableCol}>\r\n                                                                    <Text style={styles.tableCell}> {task.groupSize}</Text> \r\n                                                                </View>\r\n                                                                <View style={styles.tableCol}>\r\n                                                                </View>\r\n                                                            </> \r\n                                                        }\r\n                                                             \r\n                                                    </View>\r\n                                                    <View>\r\n                                                        <Text style={{fontSize: 12, color: '#979797', marginTop: 20, marginBottom: 5}} >Descripción</Text>\r\n                                                        {(task.description === '') ? \r\n                                                            <Text wrap style={{fontSize: 12, justifyContent: 'center'}}> No especificado. </Text> \r\n                                                            : \r\n                                                            <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{task.description}</Text>\r\n                                                        }\r\n                                                    </View>\r\n                                                    <View>\r\n                                                        <Text style={{fontSize: 12, color: '#979797', marginTop: 20, marginBottom: 5}} >Enlaces de recursos</Text>\r\n                                                        { (task.resourceLinks.length === 0) ?\r\n                                                            <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No se han proporcionado recursos</Text>\r\n                                                            : \r\n                                                            (task.resourceLinks.map((resource, i) =>  \r\n                                                                <div key = {`resource-${i}-task-${indexTask}-learningnActivity${index}`}>\r\n                                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 10}} >Titulo</Text>\r\n                                                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{resource.title}</Text>\r\n                                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 10}} >Enlace</Text>\r\n                                                                    <Link wrap style={{fontSize: 12, justifyContent: 'center'}}>{resource.link}</Link>\r\n                                                                </div> \r\n                                                            ))\r\n                                                        }\r\n                                                    </View>\r\n                                                </View>\r\n                                            </View>\r\n                                        </View>\r\n                                )}\r\n                                <View style = {{marginLeft: 50, marginRight: 50}}>\r\n                                    <Text style={{fontSize: 15, color: '#979797', marginTop: 5}} >Evaluación de la actividad.</Text>\r\n                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 10}} >Titulo</Text>\r\n                                    {\r\n                                        (learningActivity.evaluation.title === '') ? \r\n                                        <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                        :\r\n                                        <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{learningActivity.evaluation.title}</Text>\r\n                                    }\r\n                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 10}} >Descripción</Text>\r\n                                    {\r\n                                        (learningActivity.evaluation.description === '') ? \r\n                                        <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                        :\r\n                                        <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{learningActivity.evaluation.description}</Text>\r\n                                    }\r\n                                    \r\n                                </View>\r\n                            </View>\r\n                        )}\r\n                        <View style = {{marginTop: 15}}>\r\n                            {(typeUserPDF === 'teacher' ) &&\r\n                                <Image\r\n                                    src={img}\r\n                                />\r\n                            }\r\n                        </View>\r\n                    </View>\r\n                    <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => (\r\n                            `${pageNumber} / ${totalPages}`\r\n                        )} fixed />\r\n                </Page>\r\n            </Document>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport { PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\r\nimport { DocumentPDF } from './DocumentPDF';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport html2canvas from 'html2canvas';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceInit:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const ViewAndDownloadPDFModal = ({ imgGraphic, setPdfView }) => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { typeUserPDF } = uiState.pdf;\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    \r\n    const [img, setImg] = useState(null);\r\n\r\n    const defineImage = async() =>{\r\n        const canvas = await html2canvas(imgGraphic.current, {\r\n            width: 800,\r\n            height: 700,\r\n            scrollX: 279\r\n        })\r\n        setImg(canvas.toDataURL('image/jpeg'));\r\n    }\r\n    if (!img) {\r\n        defineImage()\r\n    }\r\n    \r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.setPDF,\r\n            payload: null\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'PDF',\r\n        });\r\n        setPdfView(false);\r\n    };\r\n\r\n    if (!img) {\r\n       return <div> Cargando...</div>\r\n    }\r\n    \r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} open={uiState.isPDFModalOpen} fullScreen>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    Exportar diseño \r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <PDFViewer width={'100%'} height ={'100%'} >\r\n                        {(imgGraphic !== undefined ) &&\r\n                            <DocumentPDF design = {design} img = {img} typeUserPDF = {typeUserPDF}/>\r\n                        }\r\n                    </PDFViewer>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <div className = {classes.spaceInit}>\r\n                        <PDFDownloadLink document={<DocumentPDF design = {design} img= {img} typeUserPDF = {typeUserPDF}/>} fileName=\"designdata.pdf\">\r\n                            {({ blob, url, loading, error }) =>\r\n                                loading ? 'Cargando documento...' : <Button variant={'contained'}> Descargar </Button>\r\n                            }\r\n                        </PDFDownloadLink>\r\n                    </div> \r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import { Box, Divider, Grid, IconButton, makeStyles, TextField, Tooltip } from '@material-ui/core'\r\nimport React from 'react'\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceResource:{\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    tooltip: {\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    icon:{\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    resourceLinkGrid:{\r\n        display: 'grid',\r\n        gridTemplateColumns: '95% 5%',\r\n    },\r\n}));\r\n\r\nexport const ResourceLink = ({index, resource, newResource, setNewResource}) => {\r\n    const classes = useStyles();\r\n\r\n    const changeTitle = (event) => {\r\n        const newTitle = event.target.value;\r\n        setNewResource( newResource => newResource.map((resource, i) => {\r\n            if ( i === index ) {\r\n                resource.title = newTitle;\r\n            }\r\n            return resource;\r\n        }));\r\n    };\r\n\r\n    const changeLink = (event) => {\r\n        const newLink = event.target.value;\r\n        setNewResource( newResource => newResource.map((resource, i) => {\r\n            if ( i === index ) {\r\n                resource.link = newLink;\r\n            }\r\n            return resource;\r\n        }));\r\n    };\r\n    \r\n    const handleDeleteResourceLink = (index) =>{\r\n        if (index === newResource.length - 1) {\r\n            setNewResource([\r\n                ...newResource.slice(0, index),\r\n            ])\r\n        } else {\r\n            setNewResource([\r\n                ...newResource.slice(0, index),\r\n                ...newResource.slice(index + 1, newResource.length)\r\n            ])\r\n        };\r\n    };\r\n\r\n    const resourceLink = () =>{\r\n        return (\r\n            <div key={index} className={classes.spaceResource}>\r\n                <Grid >\r\n                    <div className={classes.resourceLinkGrid}>\r\n                        <div >\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='title' \r\n                                value={ resource.title } \r\n                                onChange={ (e) => changeTitle(e) } \r\n                                label='Título' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='link' \r\n                                value={ resource.link } \r\n                                onChange={ (e)=>changeLink(e)} \r\n                                label='Enlace' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                        </div>\r\n                        <div>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n                                    <Box>\r\n                                        <Tooltip title=\"Eliminar recurso\" className= {classes.tooltip}>\r\n                                            <IconButton onClick={() => handleDeleteResourceLink(index)}>\r\n                                                <Delete className={classes.icon} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Box>\r\n                                </Box>\r\n                        </div>\r\n                    </div>\r\n                <Divider style={{marginTop: 10}}/>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                resourceLink()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles } from '@material-ui/core';\r\nimport React, { useState } from 'react'\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { ResourceLink } from './ResourceLink';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceInit:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },buttonZone: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.down('xs')]: {\r\n            flexWrap: 'wrap',\r\n        },\r\n    },resourceZone: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: '90%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },contentSpace:{\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(6),\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: 'calc(100vh - 500px)',\r\n            overflow: 'auto'\r\n        },\r\n    }\r\n}));\r\n\r\nexport const ResourceLinksModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { learningActivityIndex, taskIndex } = uiState.resourceLink;\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [newResource, setNewResource] = useState([...design.data.learningActivities[learningActivityIndex].tasks[taskIndex].resourceLinks]);\r\n    const { socket } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleClose = () => {\r\n        setNewResource([...design.data.learningActivities[learningActivityIndex].tasks[taskIndex].resourceLinks]);\r\n        dispatch({\r\n            type: types.ui.setResourceLink,\r\n            payload: {\r\n                learningActivityIndex: null,\r\n                taskIndex: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource',\r\n        });\r\n    };\r\n    \r\n    const handleAddResource = () =>{\r\n        const newLinks = {\r\n            title: '',\r\n            link: '',\r\n        }\r\n        setNewResource([...newResource, newLinks]);\r\n    };\r\n\r\n    const handleAddResourceInDesign = () =>{\r\n        socket.emit('change-resource-in-task', { designId: design._id, learningActivityIndex, taskIndex, resources: [...newResource] });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource'\r\n        });\r\n        enqueueSnackbar('Se ha agregado su recurso correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Dialog onClose={handleClose} open={uiState.isResourceModalOpen} fullWidth={true} maxWidth={'md'} >\r\n                <DialogTitle >\r\n                    Administrar Recursos\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon/>\r\n                </IconButton>\r\n                <DialogContent dividers >\r\n                    <Grid className={classes.contentSpace}>\r\n                        <div className={classes.buttonZone}>\r\n                            <Button variant={'outlined'} color = {'primary'} onClick = {handleAddResource}>Agregar recurso</Button>\r\n                        </div>\r\n                        <Box className={classes.resourceZone}>\r\n                            <Box >\r\n                            {\r\n                                newResource.map((resource, i) => <ResourceLink key={`resource-${i}-task-${taskIndex}-learningActivity-${learningActivityIndex}`} index={i} resource = {resource} newResource={newResource} setNewResource={setNewResource}/>)\r\n                            }\r\n                            </Box>\r\n                        </Box>\r\n                        \r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions >\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddResourceInDesign}>\r\n                        Guardar recursos\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, TextField, Typography } from '@material-ui/core'\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport React, { useState } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const EvaluationModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { learningActivityIndex } = uiState.evaluationData;\r\n    const [ newEvaluation, setNewEvaluation ] = useState(design.data.learningActivities[learningActivityIndex].evaluation);\r\n\r\n    const handleClose = () => {\r\n        setNewEvaluation(design.data.learningActivities[learningActivityIndex].evaluation);\r\n        dispatch({\r\n            type: types.ui.setEvaluation,\r\n            payload: {\r\n                learningActivityIndex: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Evaluation',\r\n        });\r\n    };\r\n\r\n    const handleAddEvaluationInDesign = () =>{\r\n        socket.emit('add-evaluation-in-activity', { designId: design._id, learningActivityID: design.data.learningActivities[learningActivityIndex].id, evaluation: newEvaluation});\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Evaluation',\r\n        });\r\n        enqueueSnackbar('Se ha agregado su evaluación correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n    };\r\n\r\n    const changeTitle = (e) => {\r\n        const newTitle = e.target.value;\r\n        setNewEvaluation({\r\n            ...newEvaluation,\r\n            title: newTitle,\r\n        });\r\n    };\r\n\r\n    const changeDescription = (e) => {\r\n        const newDescription = e.target.value;\r\n        setNewEvaluation({\r\n            ...newEvaluation,\r\n            description: newDescription,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} open={uiState.isEvaluationModalOpen} fullWidth={true} maxWidth={'md'} >\r\n                <DialogTitle >\r\n                    Evaluación de la actividad.\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon/>\r\n                </IconButton>\r\n                <DialogContent dividers >\r\n                    <Typography color='textSecondary' style={{marginBottom: 10}}> Lorem ipsum dolor sit amet consectetur adipiscing elit dapibus leo pharetra semper, nisl vivamus sodales vitae morbi libero quis et eu. Magna hendrerit congue odio placerat mus auctor donec iaculis, primis feugiat metus et etiam arcu erat, natoque malesuada rhoncus fames ultricies porta montes. Habitant tellus imperdiet eget himenaeos scelerisque tincidunt et habitasse posuere metus, potenti enim diam euismod est nostra magnis inceptos accumsan odio, nisi quis litora fusce montes class orci phasellus curae. Congue facilisi metus ante mattis ad nec inceptos, lacinia arcu tempor enim a suscipit, curabitur dignissim feugiat purus proin habitasse.</Typography>\r\n                    <TextField\r\n                        variant='outlined'\r\n                        margin='dense' \r\n                        name='title' \r\n                        value={ newEvaluation.title } \r\n                        onChange={ (e) => changeTitle(e) } \r\n                        label='Título' \r\n                        type='text' \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        margin='dense' \r\n                        name='description' \r\n                        value={ newEvaluation.description } \r\n                        onChange={(e) => changeDescription (e)} \r\n                        label='Descripción' \r\n                        type='text' \r\n                        fullWidth \r\n                        multiline\r\n                        rows = {4}\r\n                    />\r\n                </DialogContent>\r\n                <DialogActions >\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddEvaluationInDesign}>\r\n                        Guardar evaluación.\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { /*useEffect,*/ useRef, useState } from 'react';\r\nimport { Box, Button, ButtonGroup, Divider, Fab, Grid, makeStyles, Menu, MenuItem, Tooltip, Typography, useMediaQuery } from '@material-ui/core';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LearningActivity } from 'pages/DesignPage/Workspace/LearningActivity';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { PieGraphic } from 'components/PieGraphic';\r\nimport { itemsLearningType, itemsFormat, itemsModality, itemsLearningTypePie } from 'assets/resource/items'\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShareModal } from './ShareModal';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Add } from '@material-ui/icons';\r\nimport ObjectID from 'bson-objectid';\r\nimport { ViewAndDownloadPDFModal } from 'pages/DesignPage/PDF/ViewAndDownloadPDFModal';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport { ResourceLinksModal } from './ResourceLinksModal';\r\nimport { EvaluationModal } from './EvaluationModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        position: 'relative',\r\n        background: theme.palette.background.workSpace,\r\n        paddingBottom: theme.spacing(6),\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: 'calc(100vh - 177px)',\r\n            overflow: 'auto'\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        position: 'relative',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.paper\r\n    },\r\n    buttonGroupWorkSpace: {\r\n        height: 'auto',\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    textLeftPanel: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData: {\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    textLeftPanelMetadata: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    graphicsSpacing: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    betweenGraphics: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    workSpaceUnits: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: '85%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    buttonZone: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 15,\r\n        [theme.breakpoints.down('md')]: {\r\n            flexWrap: 'wrap',\r\n        },\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: 5,\r\n        right: theme.spacing(2),\r\n    }\r\n}));\r\n\r\nexport const DesignWorkspace = () => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { socket } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isMediumDevice = useMediaQuery(theme.breakpoints.down('md'));\r\n    const {uiState, dispatch } = useUiState();\r\n    const [openMenuPDF, setOpenMenuPDF] = useState(null);\r\n    const imgGraphic = useRef();\r\n    const { userConfig } = useUserConfigState();\r\n    const [pdfView, setPdfView] = useState(false);\r\n    let showGraphicLearningType = false;\r\n    let showGraphicFormat = false;\r\n    let showGraphicModality = false;\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n        enqueueSnackbar('Su diseño se ha guardado correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n    };\r\n\r\n    const handleNewUA = () => {\r\n        const id = ObjectID().toString();\r\n        socket.emit('new-learningActivity', { designId: design._id, id });\r\n    };\r\n\r\n    const handleOpenModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        })\r\n    };\r\n\r\n    const handleOpenModalPDF = (type) => {\r\n        setPdfView(true);\r\n        handleCloseMenu();\r\n        dispatch({\r\n            type: types.ui.setPDF,\r\n            payload: type,\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'PDF'\r\n        });\r\n    };\r\n\r\n    const resetItems = () => {\r\n        itemsLearningType.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n        itemsLearningTypePie.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n\r\n        itemsFormat.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n        itemsModality.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleOpenMenu = (event) => {\r\n        setOpenMenuPDF(event.currentTarget);\r\n    };\r\n\r\n    const handleCloseMenu = () => {\r\n        setOpenMenuPDF(null);\r\n    };\r\n\r\n    design.data.learningActivities.forEach((activities) => {\r\n        if (activities.tasks !== undefined) {\r\n            activities.tasks.forEach(task => {\r\n                if (task.learningType !== '' && task.learningType !== 'Seleccionar') {\r\n                    showGraphicLearningType = true;\r\n                }\r\n                if (task.format !== '' && task.format !== 'Seleccionar') {\r\n                    showGraphicFormat = true;\r\n                }\r\n                if (task.modality !== '' && task.modality !== 'Seleccionar') {\r\n                    showGraphicModality = true;\r\n                }\r\n            })\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLeftPanel}> INFORMACIÓN DISEÑO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData} />\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            {metadata && metadata.name && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary'> Nombre </Typography>\r\n                                    <Typography variant='body2'>{metadata.name}</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.category && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}>Tema</Typography>\r\n                                    <Typography variant='body2'> {metadata.category.name} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.workingTime && (\r\n                                <>\r\n                                    <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                    <Typography variant=\"body2\"> {metadata.workingTime.hours} : {metadata.workingTime.minutes}</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.workingTimeDesign && (\r\n                                <>\r\n                                    <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}>Tiempo de trabajo Diseño</Typography>\r\n                                    <Typography variant=\"body2\"> {metadata.workingTimeDesign.hours} : {metadata.workingTimeDesign.minutes}</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.name && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Modo de entrega </Typography>\r\n                                    <Typography variant='body2' > {metadata.name} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Tamaño de la clase </Typography>\r\n                                    <Typography variant='body2'> {metadata.classSize} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.priorKnowledge && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Conocimiento Previo </Typography>\r\n                                    <Typography variant='body2' > {metadata.priorKnowledge} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.description && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Descripción </Typography>\r\n                                    <Typography variant='body2'> {metadata.description} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.objective && (\r\n                                <>\r\n                                    <Typography color='textSecondary' className={classes.textLeftPanelMetadata}> Objetivos </Typography>\r\n                                    <Typography> {metadata.objective} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { /*metadata && metadata.results &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLeftPanelMetadata}> Resultados </Typography>\r\n                                        <Typography>{ metadata.results }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )*/\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.buttonZone}>\r\n                        <Menu\r\n                            variant={'selectedMenu'}\r\n                            anchorEl={openMenuPDF}\r\n                            keepMounted\r\n                            open={Boolean(openMenuPDF)}\r\n                            onClose={handleCloseMenu}\r\n                        >\r\n                            <MenuItem onClick={() => handleOpenModalPDF('teacher')}>PDF Docente</MenuItem>\r\n                            <MenuItem onClick={() => handleOpenModalPDF('student')}>PDF Estudiante</MenuItem>\r\n                        </Menu>\r\n                        <ButtonGroup size='small' fullWidth={isMediumDevice} className={classes.buttonGroupWorkSpace}>\r\n                            <Button onClick={handleOpenMenu}>Exportar</Button>\r\n                            <Button onClick={handleOpenModal}>Compartir</Button>\r\n                            <Button onClick={handleSaveDesign}>Guardar</Button>\r\n                        </ButtonGroup>\r\n                    </div>\r\n                    <Box id='learningActivities' className={classes.workSpaceUnits}>\r\n                        <Box>\r\n                            <Grid className={classes.workSpaceUnits}>\r\n                                <Grid >\r\n                                    {\r\n                                        design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => <LearningActivity key={`learningActivity-${index}`} index={index} learningActivity={learningActivity} />)\r\n                                    }\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Box>\r\n                    </Box>\r\n                    <Tooltip title='Agregar actividad de aprendizaje' arrow>\r\n                        <Fab color=\"primary\" className={classes.fab} onClick={handleNewUA}>\r\n                            <Add />\r\n                        </Fab>\r\n                    </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}>\r\n                    {resetItems()}\r\n                    <div style ={{position: 'absolute', zIndex: 1, width: '100%'}}>\r\n                        <Grid className={classes.graphicsSpacing} >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity) =>\r\n                                    learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                        itemsLearningType.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsLearningTypePie.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsFormat.forEach((item) => {\r\n                                            if (item.title === task.format) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsModality.forEach((item) => {\r\n                                            if (item.title === task.modality) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                    }))\r\n                            }\r\n                            {showGraphicLearningType &&\r\n                                <div className={classes.betweenGraphics} >\r\n                                    <PieGraphic items={itemsLearningTypePie} colorGraphicToPdf={true}></PieGraphic>\r\n                                </div>\r\n                            }\r\n                            {showGraphicFormat &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <Typography>Formato</Typography>\r\n                                    <StackedBar items={itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={true} ></StackedBar>\r\n                                </div>\r\n                            }\r\n                            {showGraphicModality &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <Typography>Modalidad</Typography>\r\n                                    <StackedBar items={itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                                </div>\r\n                            }\r\n                        </Grid>\r\n                    </div>\r\n                    <div style ={{ zIndex: 0, width: '100%'}}>\r\n                        <Grid className={classes.graphicsSpacing} ref={imgGraphic}>\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity) =>\r\n                                    learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                        itemsLearningType.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsLearningTypePie.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsFormat.forEach((item) => {\r\n                                            if (item.title === task.format) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                        itemsModality.forEach((item) => {\r\n                                            if (item.title === task.modality) {\r\n                                                item.value = item.value + 1;\r\n                                            }\r\n                                        });\r\n                                    }))\r\n                            }\r\n                            {showGraphicLearningType &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <PieGraphic items={itemsLearningTypePie} colorGraphicToPdf={false}></PieGraphic>\r\n                                </div>\r\n                            }\r\n                            {showGraphicFormat &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    {\r\n                                        userConfig.darkTheme ? <Typography style={{ color: '#000000' }}>Formato</Typography> : <Typography >Formato</Typography>\r\n                                    }\r\n\r\n                                    <StackedBar items={itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={false}></StackedBar>\r\n                                </div>\r\n                            }\r\n                            {showGraphicModality &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    {\r\n                                        userConfig.darkTheme ? <Typography style={{ color: '#000000' }}>Modalidad</Typography> : <Typography >Modalidad</Typography>\r\n                                    }\r\n                                    <StackedBar items={itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={false} ></StackedBar>\r\n                                </div>\r\n                            }\r\n                        </Grid>\r\n                    </div>\r\n                </Grid>\r\n                <ShareModal />\r\n                {\r\n                    (pdfView) &&\r\n                    <ViewAndDownloadPDFModal imgGraphic={imgGraphic} setPdfView={setPdfView} />\r\n                }\r\n                {\r\n                    (uiState.isResourceModalOpen)  &&\r\n                        <ResourceLinksModal/>\r\n                }\r\n                {\r\n                    (uiState.isEvaluationModalOpen)  &&\r\n                        <EvaluationModal/>\r\n                }\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        padding: 20,\r\n        width: '49%',\r\n        marginBottom: 10,\r\n        borderRadius: 5,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n    },\r\n    description: {\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        textAlign: 'justify',\r\n    },\r\n    actions: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    }\r\n}));\r\n\r\nexport const LearningResult = ({ verb, description, index}) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const handleEdit = () => {\r\n        const { bloomVerbs, bloomCategories } = designState;\r\n        const category = bloomCategories.find((category) => category._id === bloomVerbs.find((v) => v.name === verb).category)._id;\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResult,\r\n            payload: {\r\n                category,\r\n                verb,\r\n                description,\r\n                editing: true,\r\n                index,\r\n            }\r\n        });\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        let index = 0;\r\n        design.metadata.results.forEach((result, _index) => {\r\n            if (result.verb === verb && result.description === description) index = _index;\r\n        });\r\n        socket.emit('delete-learning-result', { designId: design._id, index });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Resultado</Typography>\r\n            <Typography variant='body2'>{verb}</Typography>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Descripción</Typography>\r\n            <Typography className={classes.description} variant='body2'>{description}</Typography>\r\n            <div className={classes.actions}>\r\n                <IconButton className={classes.deleteIcon} onClick={handleEdit}>\r\n                    <Edit />\r\n                </IconButton>\r\n                <IconButton className={classes.deleteIcon} onClick={handleDelete}>\r\n                    <Delete />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: 300,\r\n        clipPath: 'polygon(50% 0, 0 100%, 100% 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    option: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        marginBottom: 10,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        '&:hover': {\r\n            transition: 'box-shadow .3s',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)'\r\n        }\r\n    },\r\n    crear: {\r\n        paddingTop: 30,\r\n        height: '25%'\r\n    },\r\n    evaluar: {\r\n        height: '16.6%'\r\n    },\r\n    analizar: {\r\n        height: '16.6%'\r\n    },\r\n    aplicar: {\r\n        height: '16.6%'\r\n    },\r\n    comprender: {\r\n        height: '16.6%'\r\n    },\r\n    recordar: {\r\n        height: '16.6%'\r\n    },\r\n    active: {\r\n        boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)',\r\n        backgroundColor: theme.palette.secondary.light,\r\n        color: 'white',\r\n    }\r\n}));\r\n\r\nexport const BloomPiramid = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const active = designState.currentLearningResult.category;\r\n    const { bloomCategories } = designState;\r\n\r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'category',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomCategories.map( option => {\r\n            const isActive = active === option._id;\r\n            return (\r\n                <div \r\n                    key={option._id}\r\n                    onClick={()=> handleSelectOption(isActive ? null : option._id)}\r\n                    className={`${classes.option} ${classes[option.name.toLowerCase()]} ${isActive && classes.active}`}\r\n                >\r\n                    { option.name }\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            { createOptionList() }\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { FormControlLabel, makeStyles, Radio } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    option: {\r\n        minWidth: '25%'\r\n    }\r\n}));\r\n\r\nexport const BloomVerbList = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const category = designState.currentLearningResult.category;\r\n    const active = designState.currentLearningResult.verb;\r\n    const { bloomVerbs } = designState;\r\n    \r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'verb',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomVerbs.filter((verb) => verb.category === category).map(option => {\r\n            const isActive = active === option.name;\r\n            return (\r\n            <FormControlLabel \r\n                className={classes.option}\r\n                key={option._id}\r\n                value={option.name}\r\n                control={<Radio\r\n                    checked={isActive}\r\n                    onChange={(e)=> handleSelectOption(option.name)}\r\n                    value={option.name}\r\n                />}\r\n                label={option.name}\r\n            />\r\n        )});\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            {createOptionList()}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Step, StepLabel, Stepper, TextField } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { BloomPiramid } from 'pages/DesignPage/Metadata/BloomPiramid';\r\nimport { BloomVerbList } from 'pages/DesignPage/Metadata/BloomVerbList';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    }\r\n}));\r\n\r\nexport const LearningResultModal = ({ design, isOpen }) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { category, verb, editing, index } = designState.currentLearningResult;\r\n    const [ description, setDescription ] = useState(designState.currentLearningResult.description ?? '');\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const steps = ['Selecciona una categoría de bloom', 'Selecciona un verbo', 'Proporciona una descripción'];\r\n\r\n    useEffect(() => {\r\n        setDescription(designState.currentLearningResult.description);\r\n    }, [setDescription, designState.currentLearningResult.description]);\r\n\r\n    const handleNext = () => {\r\n        if(activeStep === 0 && category === null) return console.log('No ha seleccionado una categoría de bloom.');\r\n        else if (activeStep === 1 && verb === '') return console.log('No ha seleccionado un verbo de bloom.');\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleClose = (e) => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        handleClose();\r\n        setActiveStep(0);\r\n        designDispatch({ type: types.design.clearCurrentLearningResult });\r\n    };\r\n\r\n    const handleFinish = () => {\r\n        if(description.trim() === '') return console.log('No se ha ingresado una descripción.');\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'description',\r\n                value: description,\r\n            }\r\n        });\r\n        if(!editing) socket.emit('add-learning-result', { designId: design._id, learningResult: { verb, description } });\r\n        else if (editing){\r\n            socket.emit('edit-learning-result', { designId: design._id, index, learningResult: { verb, description } });\r\n        }\r\n        handleCloseModal();\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isOpen} onClose={handleCloseModal} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !editing ? 'Nuevo resultado de aprendizaje' : 'Editar resultado de aprendizaje'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Stepper activeStep={activeStep} alternativeLabel>\r\n                    {steps.map((label) => (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                {\r\n                    (activeStep === 0)\r\n                        ? <BloomPiramid />\r\n                        : (activeStep === 1)\r\n                            ? <BloomVerbList />\r\n                            : <TextField\r\n                                multiline\r\n                                rows={6}\r\n                                variant=\"outlined\"\r\n                                name=\"description\"\r\n                                value={description ?? ''}\r\n                                onChange={({target})=> setDescription(target.value)}\r\n                                label=\"Descripción\"\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    disabled={activeStep === 0}\r\n                    onClick={handleBack}\r\n                >\r\n                    Volver\r\n                </Button>\r\n                {\r\n                    (activeStep === steps.length - 1)\r\n                        ? <Button variant=\"contained\" color=\"primary\" onClick={handleFinish}>\r\n                            Finalizar\r\n                        </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\r\n                            Siguiente\r\n                        </Button>\r\n                }\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { Button, Divider, FormControl, FormControlLabel, Grid, InputLabel, Link, makeStyles, MenuItem, Select, Switch, TextField, Typography } from '@material-ui/core'\r\nimport { useQuery } from 'react-query';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { LearningResult } from 'pages/DesignPage/Metadata/LearningResult';\r\nimport { LearningResultModal } from 'pages/DesignPage/Metadata/LearningResultModal';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useSnackbar } from 'notistack';\r\nimport { KeywordManager } from 'components/KeywordManager';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 15,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    category: {\r\n        width: '100%',\r\n    },\r\n    categoryPopOver: {\r\n        maxHeight: 400,\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignMetadata = forwardRef((props, ref) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const isMounted = useRef(true);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const nameRef = useRef();\r\n    const classSizeRef = useRef();\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const priorKnowledgeRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const objectiveRef = useRef();\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        name: metadata.name,\r\n        category: metadata.category.name ?? 'Sin categoría',\r\n        classSize: metadata.classSize,\r\n        workingTimeDesignHours: metadata.workingTimeDesign.hours ?? 0,\r\n        workingTimeDesignMinutes: metadata.workingTimeDesign.minutes ?? 0,\r\n        workingTimeHours: metadata.workingTime.hours ?? 0,\r\n        workingTimeMinutes: metadata.workingTime.minutes ?? 0,\r\n        priorKnowledge: metadata.priorKnowledge,\r\n        description: metadata.description,\r\n        objective: metadata.objective,\r\n        isPublic: metadata.isPublic,\r\n        keywords: design.keywords ?? [],\r\n    });\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearEditors: () => {\r\n                nameRef?.current?.clearText();\r\n                classSizeRef?.current?.clearText();\r\n                hoursRef?.current?.clearText();\r\n                minutesRef?.current?.clearText();\r\n                priorKnowledgeRef?.current?.clearText();\r\n                descriptionRef?.current?.clearText();\r\n                objectiveRef?.current?.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    const setKeywords = useCallback(\r\n        (keywords) => {\r\n            handleInputChange({ target: { name: 'keywords', value: keywords } });\r\n        },\r\n        [handleInputChange],\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (JSON.stringify(form.keywords) !== JSON.stringify(design.keywords)) {\r\n                setKeywords([...design.keywords]);\r\n            }\r\n        }\r\n    }, [design.keywords, form.keywords, setKeywords]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.category !== metadata.category.name) {\r\n                handleInputChange({target: {name: 'category', value: metadata.category.name ?? 'Sin categoría'}});\r\n            }\r\n        }\r\n    }, [metadata.category, form.category, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.name !== metadata.name) {\r\n                handleInputChange({target: {name: 'name', value: metadata.name}});\r\n            }\r\n        }\r\n    }, [metadata.name, form.name, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.classSize !== metadata.classSize) {\r\n                handleInputChange({target: {name: 'classSize', value: metadata.classSize}});\r\n            }\r\n        }\r\n    }, [metadata.classSize, form.classSize, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.description !== metadata.description) {\r\n                handleInputChange({target: {name: 'description', value: metadata.description}});\r\n            }\r\n        }\r\n    }, [metadata.description, form.description, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeDesignHours !== metadata.workingTimeDesign.hours) {\r\n                handleInputChange({target: {name: 'workingTimeDesignHours', value: metadata.workingTimeDesign.hours}});\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignHours, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeDesignMinutes !== metadata.workingTimeDesign.minutes) {\r\n                handleInputChange({target: {name: 'workingTimeDesignMinutes', value: metadata.workingTimeDesign.minutes ?? 0}});\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignMinutes, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeHours !== metadata.workingTime.hours) {\r\n                handleInputChange({target: {name: 'workingTimeHours', value: metadata.workingTime.hours ?? 0}});\r\n            }\r\n        }\r\n    }, [metadata.workingTime.hours, form.workingTimeHours, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeMinutes !== metadata.workingTime.minutes) {\r\n                handleInputChange({target: {name: 'workingTimeMinutes', value: metadata.workingTime.minutes ?? 0}});\r\n            }\r\n        }\r\n    }, [metadata.workingTime.minutes, form.workingTimeMinutes, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.priorKnowledge !== metadata.priorKnowledge) {\r\n                handleInputChange({target: {name: 'priorKnowledge', value: metadata.priorKnowledge}});\r\n            }\r\n        }\r\n    }, [metadata.priorKnowledge, form.priorKnowledge, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.objective !== metadata.objective) {\r\n                handleInputChange({target: {name: 'objective', value: metadata.objective}});\r\n            }\r\n        }\r\n    }, [metadata.objective, form.objective, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.isPublic !== metadata.isPublic) {\r\n                handleInputChange({target: {name: 'isPublic', value: metadata.isPublic}});\r\n            }\r\n        }\r\n    }, [metadata.isPublic, form.isPublic, setValues, handleInputChange]);\r\n\r\n    const { name, category, classSize, workingTimeDesignHours, workingTimeDesignMinutes, workingTimeHours, workingTimeMinutes, priorKnowledge, description, objective, isPublic, keywords } = form;\r\n\r\n    const { isLoading, isError, data, error } = useQuery('categories', async () => {\r\n        return await getCategories();\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    if (isError) {\r\n        return (<Typography>{error.message}</Typography>);\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    const createCategoryList = () => {\r\n        if (data == null || data.categories.length === 0) return (<MenuItem value='Sin categoría'>Sin categoría</MenuItem>);\r\n        return data.categories.map(c => <MenuItem key={c._id} value={c.name}>{c.name}</MenuItem>);\r\n    };\r\n\r\n    const handleChangeMetadataField = ({ target }) => {\r\n        let { name: field, value } = target;\r\n        value = (target.type === 'number' && !isNaN(target.value)) ? parseInt(target.value) : (target.type === 'checkbox') ? target.checked : target.value;\r\n        let e = { target: { name: target.name, value } };\r\n        let subfield = null;\r\n        switch (field) {\r\n            case 'workingTimeHours':\r\n                field = 'workingTime';\r\n                subfield = 'hours';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'workingTimeMinutes':\r\n                field = 'workingTime';\r\n                subfield = 'minutes';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'category':\r\n                value = data.categories.find(c => c.name === value);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        socket.emit('edit-metadata-field', { designId: design._id, field, value, subfield });\r\n        if(subfield){\r\n            if (!design.metadata[field] || !design.metadata[field][subfield] || design.metadata[field][subfield].toString() !== value.toString()) handleInputChange(e);\r\n        } else {\r\n            if (!design.metadata[field] || design.metadata[field].toString() !== value.toString()) handleInputChange(e);\r\n        }\r\n        \r\n    };\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n        enqueueSnackbar('Su diseño se ha guardado correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n    };\r\n\r\n    const handleOpenLearningResultmodal = () => dispatch({\r\n        type: types.ui.toggleModal,\r\n        payload: 'LearningResult',\r\n    });\r\n\r\n    const handleChangeKeywords = (keywords, type, targetKeyword) => {\r\n        if (type === 'add') socket.emit('add-design-keyword', { designId: design._id, keyword: targetKeyword });\r\n        else if (type === 'remove') socket.emit('remove-design-keyword', { designId: design._id, keyword: targetKeyword });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Información Diseño</Typography>\r\n                        <Button variant='outlined' color='default' onClick={handleSaveDesign}>Guardar Información</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <Grid container spacing={3} className={classes.content}>\r\n                        <Grid item className={classes.grid} xs={12} sm={9}  >\r\n                            <TextField\r\n                                label='Nombre'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: nameRef,\r\n                                        name: 'name',\r\n                                        placeholder: 'Nombre',\r\n                                        initialvalue: name,\r\n                                        onChange: handleChangeMetadataField,\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} sm={3}>\r\n                            <div>\r\n                                <Typography variant='body2'>Visibilidad</Typography>\r\n                                <FormControlLabel\r\n                                    control={<Switch\r\n                                        name='isPublic'\r\n                                        checked={isPublic}\r\n                                        onChange={handleChangeMetadataField}\r\n                                        disabled={!(design.owner === authState.user.uid)}\r\n                                    />}\r\n                                    label={isPublic ? 'Público' : 'Privado'}\r\n                                />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <FormControl className={classes.category} variant='outlined' >\r\n                                <InputLabel id=\"category-label\">Categoría</InputLabel>\r\n                                <Select\r\n                                    labelId=\"category-label\"\r\n                                    name='category'\r\n                                    label='Categoría'\r\n                                    value={category}\r\n                                    onChange={handleChangeMetadataField}\r\n                                    MenuProps={{ classes: { paper: classes.categoryPopOver } }}\r\n                                >\r\n                                    {createCategoryList()}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                label='Tamaño de la clase'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: classSizeRef,\r\n                                        name: 'classSize',\r\n                                        placeholder: 'Tamaño de la clase',\r\n                                        initialvalue: classSize ?? 0,\r\n                                        type: \"number\",\r\n                                        min: 0,\r\n                                        onChange: handleChangeMetadataField,\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo de trabajo </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <TextField\r\n                                        label='Horas'\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: hoursRef,\r\n                                                name: 'workingTimeHours',\r\n                                                placeholder: 'Horas',\r\n                                                initialvalue: workingTimeHours,\r\n                                                type: \"number\",\r\n                                                min: 0,\r\n                                                onChange: handleChangeMetadataField,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <TextField\r\n                                        label='Minutos'\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: minutesRef,\r\n                                                name: 'workingTimeMinutes',\r\n                                                placeholder: 'Minutos',\r\n                                                initialvalue: workingTimeMinutes,\r\n                                                type: \"number\",\r\n                                                min: 0,\r\n                                                max: 59,\r\n                                                onChange: handleChangeMetadataField,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo diseñado </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <TextField\r\n                                        //margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        name=\"workingTimeDesignHours\"\r\n                                        value={workingTimeDesignHours}\r\n                                        label=\"Horas\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <TextField\r\n                                        //margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        name=\"workingTimeDesignMinutes\"\r\n                                        value={workingTimeDesignMinutes}\r\n                                        label=\"Minutos\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            <TextField\r\n                                label='Descripción'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: descriptionRef,\r\n                                        name: 'description',\r\n                                        placeholder: 'Descripción',\r\n                                        initialvalue: description ?? '',\r\n                                        rowMax: 5,\r\n                                        onChange: handleChangeMetadataField,\r\n                                        multiline: true,\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                label='Conocimiento previo'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: priorKnowledgeRef,\r\n                                        name: 'priorKnowledge',\r\n                                        placeholder: 'Conocimiento previo',\r\n                                        initialvalue: priorKnowledge ?? '',\r\n                                        rowMax: 5,\r\n                                        onChange: handleChangeMetadataField,\r\n                                        multiline: true,\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                label='Objetivos'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: objectiveRef,\r\n                                        name: 'objective',\r\n                                        placeholder: 'Objetivos',\r\n                                        initialvalue: objective ?? '',\r\n                                        rowMax: 5,\r\n                                        onChange: handleChangeMetadataField,\r\n                                        multiline: true,\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <KeywordManager keywords={keywords} onChangeKeywords={handleChangeKeywords} />\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Resultados de aprendizaje</Typography>\r\n                        <Button variant='outlined' color='default' onClick={handleOpenLearningResultmodal}>Agregar</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.content}>\r\n                        {\r\n                            metadata.results.length === 0\r\n                                ? <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                    Este diseño aún no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click {' '}\r\n                                    {<Link className={classes.clickHere} onClick={handleOpenLearningResultmodal}>aquí</Link>}\r\n                                    !\r\n                                </Alert>\r\n                                : metadata.results.map((result, index) => (\r\n                                    <LearningResult key={`learning-result-${index}`} index={index} {...result} />\r\n                                ))\r\n\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <LearningResultModal design={design} isOpen={uiState.isLearningResultModalOpen} />\r\n        </>\r\n    )\r\n})\r\n","import PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport const TabPanel = ({ children, value, index, ...other }) => {\r\n    return (\r\n      <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`full-width-tabpanel-${index}`}\r\n        aria-labelledby={`full-width-tab-${index}`}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n            <Typography component={'span'}>{children}</Typography>\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired,\r\n};\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getBloomCategories = async () => {\r\n    const resp = await fetchWithToken('bloom/category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getBloomVerbs = async ( category ) => {\r\n    const resp = await fetchWithToken('bloom/verb', { category }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Avatar, Tabs, Tab, Typography } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { DesignWorkspace } from 'pages/DesignPage/Workspace/DesignWorkspace';\r\nimport { DesignMetadata } from 'pages/DesignPage/Metadata/DesignMetadata';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { getBloomCategories, getBloomVerbs } from 'services/BloomService';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menuLetters: {\r\n        marginLeft: theme.spacing(2),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    menuLettersSelected: {\r\n        marginLeft: theme.spacing(2),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    usersConnecteds: {\r\n        display: 'flex',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPage = () => {\r\n    const classes = useStyles();\r\n    const isMounted = useRef(true);\r\n    const metadataRef = useRef();\r\n    const { id } = useParams();\r\n    const { doc, provider, connectToDesign, clearDoc } = useSharedDocContext();\r\n    const { authState } = useAuthState();\r\n    const { socket, online } = useSocketState();\r\n    const [ users, setUsersList ] = useState([]);\r\n    const [ tabIndex, setTabIndex ] = useState(0);\r\n    const { designState, dispatch } = useDesignState();\r\n    const { design } = designState;\r\n    const [error, setError] = useState(null);\r\n    \r\n    const prefetchBloomCategories = useCallback(async () => {\r\n        const data = await getBloomCategories();\r\n        dispatch({\r\n            type: types.design.setBloomCategories,\r\n            payload: data.bloomCategories,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    const prefetchBloomVerbs = useCallback(async () => {\r\n        const data = await getBloomVerbs('');\r\n        dispatch({\r\n            type: types.design.setBloomVerbs,\r\n            payload: data.bloomVerbs,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    useEffect(()=>{\r\n        prefetchBloomCategories();\r\n        prefetchBloomVerbs();\r\n    }, [prefetchBloomCategories, prefetchBloomVerbs]);\r\n    \r\n    useEffect(()=>{\r\n        let metadataComponent = metadataRef.current;\r\n        return () => {\r\n            metadataComponent?.clearEditors();\r\n            clearDoc();\r\n            isMounted.current = false;\r\n        };\r\n    }, [clearDoc]);\r\n\r\n    useEffect(() => {\r\n        if(online){\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id, public: false }, (res) => {\r\n                if(res.data){\r\n                    const userInPrivileges = res.data.design.privileges.find(privilege => privilege.user._id === authState.user.uid );\r\n                    if (res.ok && userInPrivileges && userInPrivileges.type === 0){\r\n                        if(isMounted.current) {\r\n                            dispatch({\r\n                                type: types.design.updateDesign,\r\n                                payload: res.data.design\r\n                            });\r\n                            connectToDesign(id);\r\n                        }\r\n                    }else {\r\n                        setError(res.message)\r\n                    };\r\n                      \r\n                }else {\r\n                    setError(res.message)\r\n                };\r\n            });\r\n        }\r\n    }, [socket, authState.user, authState._id, online, id, dispatch, connectToDesign]);\r\n\r\n    useEffect(() => {\r\n        socket?.on('update-design', (newDesign) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateDesign,\r\n                    payload: newDesign\r\n                });\r\n            }\r\n        });\r\n        socket?.on('add-design-keyword', (keyword) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.addDesignKeyword,\r\n                    payload: keyword,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('remove-design-keyword', (keyword) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.removeDesignKeyword,\r\n                    payload: keyword,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-metadata-field', ({ field, value, subfield }) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeMetadataField,\r\n                    payload: { field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-task-field', ({ learningActivityID, taskID, field, value, subfield }) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeTaskField,\r\n                    payload: { learningActivityID, taskID, field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('users', (users) => {\r\n            if(isMounted.current) setUsersList(users);\r\n        });\r\n        socket?.on('change-design-privileges', (privileges) => {\r\n            dispatch({\r\n                type: types.design.setDesignPrivileges,\r\n                payload: privileges\r\n            });\r\n        });\r\n        socket?.on('change-read-only-link', (newLink) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateReadOnlyLink,\r\n                    payload: newLink\r\n                });\r\n            }\r\n        });\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n            socket?.off('updateDesign');\r\n            socket?.off('edit-metadata-field');\r\n            socket?.off('add-design-keyword');\r\n            socket?.off('remove-design-keyword');\r\n            socket?.off('change-read-only-link');\r\n            socket?.off('edit-task-field');\r\n            socket?.off('users');\r\n        };\r\n    }, [socket, authState.user, id, dispatch]);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n    \r\n    if(error){\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    { error }\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design || !doc || !provider) {\r\n        \r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"METADATOS\" {...a11yProps(0)} />\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                    <div className={classes.usersConnecteds}>\r\n                        {\r\n                            users.map((user, index) =>\r\n                                <Avatar\r\n                                    key={user.uid + index}\r\n                                    alt={formatName(user.name, user.lastname)}\r\n                                    src={user.img ?? ''}\r\n                                >\r\n                                    {getUserInitials(user.name, user.lastname)}\r\n                                </Avatar>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0}>\r\n                <DesignMetadata ref={metadataRef} />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1}>\r\n                <DesignWorkspace/>\r\n            </TabPanel>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleMargin: {\r\n        margin: 'auto',\r\n    },\r\n    bodyMargin: {\r\n        marginLeft: theme.spacing(5),\r\n        marginRight: theme.spacing(5)\r\n    }\r\n}));\r\n\r\nexport const ConfirmationModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { type, args, actionMutation } = uiState.confirmModalData;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket } = useSocketState();\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        if(type === 'carpeta') setMessage(`¿Estás realmente seguro de que deseas eliminar tu carpeta? Recuerda que se eliminarán también las carpetas y diseños de aprendizaje que se encuentren al interior de esta o de sus carpetas hijas y este proceso no se podrá deshacer luego de haber elegido la opción de eliminar.`);\r\n        else setMessage(`¿Estás realmente seguro de que deseas eliminar tu ${type}? Este proceso no se podrá deshacer luego de haber elegido la opción de eliminar.`);\r\n    }, [type]);\r\n    \r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: null,\r\n                args: null,\r\n                actionMutation: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const confirmResult = async () => {\r\n        if (type === 'diseño' || type === 'carpeta') {\r\n            await actionMutation.mutate(args);\r\n        } else if (type === 'actividad') {\r\n            socket.emit('delete-learningActivity', args);\r\n            enqueueSnackbar('Su actividad se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else if (type === 'tarea') {\r\n            socket.emit('delete-task', args);\r\n            enqueueSnackbar('Su tarea se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        } else if (type === 'recurso'){\r\n            socket.emit('delete-resource-link', args);\r\n            enqueueSnackbar('Su recurso se ha eliminado', { variant: 'success', autoHideDuration: 2000 });\r\n        }\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const renderConfirmationModal = () => {\r\n        return (\r\n            <Dialog onClose={handleClose} open={uiState.isConfirmationModalOpen}>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    ¿Estás seguro?\r\n                    </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <Typography>\r\n                        {message}    \r\n                    </Typography>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                        </Button>\r\n                    <Button variant='contained' color='primary' onClick={confirmResult}>\r\n                        Eliminar\r\n                        </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                renderConfirmationModal()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React, { forwardRef, useImperativeHandle, useRef } from 'react';\r\nimport { makeStyles, Typography, Paper, Box, } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskBody: {\r\n        padding: 10,\r\n        position: 'relative',\r\n        left: '5%',\r\n        width: '95%',\r\n        height: '100%',\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        position: 'absolute',\r\n        width: '5%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n        },\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    gridContainer: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '50% 50%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `\r\n            'learningType modality'\r\n            'workingTime format'\r\n            'description description'`,\r\n        [theme.breakpoints.down('md')]: {\r\n            gridTemplateAreas: `\r\n                'learningType learningType'\r\n                'modality modality'\r\n                'format format'\r\n                'workingTime workingTime'\r\n                'description description'`,\r\n        },\r\n    },\r\n    firstRow: {\r\n        display: 'grid',\r\n        gridTemplateColumns: 'auto auto 10%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `'learningType modality'`,\r\n    },\r\n    learningTypeContainer:{\r\n        gridArea: 'learningType',\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    learningType:{\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    modality: {\r\n        gridArea: 'modality',\r\n        width: '100%',\r\n        //display: 'flex',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    format: {\r\n        gridArea: 'format',\r\n        alignSelf: 'flex-end',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    \r\n}));\r\n\r\nexport const TaskReader = forwardRef(({ index, task }, ref) => {\r\n    const classes = useStyles();\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const descriptionRef = useRef();\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearTexts: () => {\r\n                hoursRef?.current.clearText();\r\n                minutesRef?.current.clearText();\r\n                descriptionRef?.current.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    const listTasksArray = () => {\r\n        return (\r\n            <Box key={index} style={{ height: '100%' }}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Box>\r\n                        <Box style={{ display: 'flex', position: 'relative', height: '100%', width: '100%' }}>\r\n                            {(() => {\r\n                                if (task.learningType === 'Investigación') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Adquisición') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Producción') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Discusión') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Colaboración') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Práctica') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></div>\r\n                                    )\r\n                                }\r\n                            })()}\r\n\r\n                            <div className={classes.taskBody}>\r\n                                <div className={classes.gridContainer}>\r\n                                    <div className={classes.learningTypeContainer}>\r\n                                        <Box className={classes.learningType}>\r\n                                            <Typography variant=\"body2\" color=\"textSecondary\" > Aprendizaje </Typography>\r\n                                            <Typography>{task.learningType}</Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.modality}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Modalidad </Typography>\r\n                                        <Typography>{task.modality}</Typography>\r\n                                    </div>\r\n                                    <div style={{ width: '100%', gridArea: 'workingTime', marginTop: 3 }}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom> Tiempo de trabajo </Typography>\r\n                                        <div className={classes.timeField}>\r\n                                            <Typography>{task.duration.hours}</Typography>\r\n                                            <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                            <Typography>{task.duration.minutes} (hrs:mins)</Typography>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Box className={classes.format}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginBottom: 4, marginRight: 5 }}> Formato </Typography>\r\n                                        <Typography>{task.format}</Typography>\r\n                                    </Box>\r\n                                    <Box style={{ gridArea: 'description', marginTop: 10, wordBreak: 'break-word'}}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Descripción </Typography>\r\n                                        <Box className={classes.taskSpacingDescriptionBD}>\r\n                                            <Typography>{task.description}</Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </div>\r\n                            </div>\r\n                        </Box>\r\n                    </Box>\r\n                </Paper>\r\n            </Box>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                listTasksArray()\r\n            }\r\n        </>\r\n    )\r\n})\r\n","import React, {  useRef } from 'react';\r\nimport { Divider, Grid, makeStyles, Paper, Tooltip, Typography } from '@material-ui/core'\r\nimport { TaskReader } from 'pages/DesignPageReader/DesignReader/TaskReader';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { itemsLearningType } from 'assets/resource/items'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    descriptionContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    },\r\n    taskContainer: {\r\n        position: 'relative',\r\n    },\r\n}));\r\n\r\nexport const LearningActivityReader = ({ index, learningActivity }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const taskRefs = useRef([]);\r\n\r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const listLearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <Typography>{learningActivity.title}</Typography>\r\n                        </Grid>\r\n                        {resetItems()}\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            {   \r\n                                design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.forEach((task)=>\r\n                                {   \r\n                                    itemsLearningType.forEach((item) =>{ \r\n                                        if( item.title === task.learningType ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                } \r\n                                )\r\n                            }\r\n                            <StackedBar items = {itemsLearningType} type = {'Activity'}/>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8} className={classes.taskContainer}>\r\n                            <Grid className={classes.gridTask}>\r\n                                {\r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i)=> <TaskReader ref={(ref) => taskRefs.current.push(ref)} key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index}/> ) \r\n                                }\r\n                            </Grid>\r\n                            <Grid container>\r\n                                <Grid item />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <div className={classes.descriptionContainer}>\r\n                                <Typography variant=\"body2\" className={classes.spacingDescriptionlearningActivity} color=\"textSecondary\"> Descripción Unidad de aprendizaje </Typography>\r\n                                <Grid className={classes.spacingDescription}>\r\n                                    <Typography>{learningActivity.description}</Typography>\r\n                                </Grid>\r\n                                <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                                <div className={classes.learningResultList}>\r\n                                    {\r\n                                        design.metadata.results.map(result => {\r\n                                            if(!!learningActivity.learningResults.find(lr=> lr.verb === result.verb)) return (\r\n                                                <Tooltip key={`learning-result-${result.verb}`} title={result.description}>\r\n                                                    <Typography>{result.verb}</Typography>\r\n                                                </Tooltip>\r\n                                            );\r\n                                            else return (<div key={`learning-result-${result.verb}`}></div>);\r\n                                        })\r\n                                    }\r\n                                </div>\r\n\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listLearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, ButtonGroup, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { PieGraphic } from 'components/PieGraphic';\r\nimport { itemsLearningType, itemsFormat, itemsModality, itemsLearningTypePie } from 'assets/resource/items'\r\nimport { LearningActivityReader } from './LearningActivityReader';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { duplicateDesign } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory, useParams } from 'react-router';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        background: theme.palette.background.workSpace,\r\n        paddingBottom: theme.spacing(3),\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: 'calc(100vh - 177px)',\r\n            overflow: 'auto'\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.paper,\r\n    },\r\n    textLefPanel:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData:{\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata:{\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    textLefPanelMetadata:{\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    graphicsSpacing:{\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    betweenGraphics:{\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    workSpaceUnits: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: '90%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    buttonGroupWorkSpace: {\r\n        height: 'auto',\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n      \r\n}));\r\n\r\nexport const DesignReader = ({ type }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { authState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const history = useHistory();\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    \r\n    let showGraphicLearningType = false;\r\n    let showGraphicFormat = false;\r\n    let showGraphicModality = false;\r\n\r\n    const duplicateDesignMutation = useMutation(duplicateDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.newDesign._id}`);\r\n        }\r\n    });\r\n    \r\n    design.data.learningActivities.forEach((activities) => {\r\n        if (activities.tasks !== undefined) {\r\n            activities.tasks.forEach(task=>{\r\n                if (task.learningType !== '' && task.learningType !== 'Seleccionar' ) {\r\n                    showGraphicLearningType  = true;\r\n                }\r\n                if (task.format !== '' && task.format !== 'Seleccionar') {\r\n                    showGraphicFormat = true;\r\n                }\r\n                if (task.modality !== '' && task.modality !== 'Seleccionar') {\r\n                    showGraphicModality = true;\r\n                }\r\n            })\r\n        }\r\n    });    \r\n\r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsLearningTypePie.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        \r\n        itemsFormat.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsModality.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleDuplicateDesign = async (e) => {\r\n        await duplicateDesignMutation.mutate({ id: urlparams.id });\r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLefPanel}> INFORMACIÓN DISEÑO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData}/>\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary'> Nombre </Typography>\r\n                                        <Typography variant='body2'>{ metadata.name }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.category &&(\r\n                                <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}>Tema</Typography>\r\n                                        <Typography variant='body2'> { metadata.category.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTime &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTime.hours } : {metadata.workingTime.minutes}</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTimeDesign &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}>Tiempo de trabajo Diseño</Typography>\r\n                                        <Typography variant=\"body2\"> {metadata.workingTimeDesign.hours} : {metadata.workingTimeDesign.minutes}</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Modo de entrega </Typography>\r\n                                        <Typography variant='body2' > { metadata.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                            { metadata && metadata.classSize &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Tamaño de la clase </Typography>\r\n                                        <Typography variant='body2'> { metadata.classSize } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        <Grid>\r\n                            { metadata && metadata.priorKnowledge &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Conocimiento Previo </Typography>\r\n                                        <Typography variant='body2' > { metadata.priorKnowledge } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.description &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLefPanelMetadata}> Descripción </Typography>\r\n                                        <Typography variant='body2'> { metadata.description } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.objective &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Objetivos </Typography>\r\n                                        <Typography> { metadata.objective } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { /*metadata && metadata.results &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Resultados </Typography>\r\n                                        <Typography>{ metadata.results }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )*/\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    { (!!authState.token) \r\n                        ? <div className={classes.buttonZone}>\r\n                            <ButtonGroup size='small' aria-label='outlined primary button group' className={classes.buttonGroupWorkSpace}>\r\n                                <Button onClick={handleDuplicateDesign}> Duplicar </Button>\r\n                            </ButtonGroup>\r\n                        </div> \r\n                        : <div></div>}\r\n                    <Grid className={classes.workSpaceUnits}>\r\n                        <Grid >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => <LearningActivityReader key={`learningActivity-${index}`} index={index} learningActivity={learningActivity}/> )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}>\r\n                {resetItems()}\r\n                    <Grid className={classes.graphicsSpacing}>\r\n                        {   \r\n                            design.data.learningActivities && design.data.learningActivities.map((learningActivity) => \r\n                                learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                    itemsLearningType.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsLearningTypePie.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsFormat.forEach((item) =>{ \r\n                                        if( item.title === task.format ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsModality.forEach((item) =>{ \r\n                                        if( item.title === task.modality ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                }))\r\n                            }\r\n                        { showGraphicLearningType && \r\n                            <div className={classes.betweenGraphics}>\r\n                                <PieGraphic items = { itemsLearningTypePie} colorGraphicToPdf={true}></PieGraphic>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicFormat &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Formato</Typography>\r\n                                <StackedBar items = {itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicModality &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Modalidad</Typography>\r\n                                <StackedBar items = {itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Tabs, Tab, Typography } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { DesignReader } from './DesignReader/DesignReader';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPageReader = () => {\r\n    const classes = useStyles();\r\n    const isMounted = useRef(true);\r\n    const { id } = useParams();\r\n    const { authState } = useAuthState();\r\n    const { socket, online } = useSocketState();\r\n    const [ tabIndex, setTabIndex ] = useState(0);\r\n    const { designState, dispatch } = useDesignState();\r\n    const { design } = designState;\r\n    const [error, setError] = useState(null);\r\n\r\n    \r\n    useEffect(() => {\r\n        if(online){\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id, public: true }, (res) => {\r\n                if (res.ok){\r\n                    if(isMounted.current) {\r\n                        dispatch({\r\n                            type: types.design.updateDesign,\r\n                            payload: res.data.design\r\n                        });\r\n                    }\r\n                } \r\n                else setError(res.message);\r\n            });\r\n        }\r\n    }, [socket, authState.user, online, id, dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n        }\r\n    }, [socket, authState.user, id])\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n    \r\n    if(error){\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    { error }\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design) {\r\n        \r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0} >\r\n                <DesignReader />\r\n            </TabPanel>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { Grid, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { getDesignByLink } from 'services/DesignService';\r\nimport { DesignReader } from 'pages/DesignPageReader/DesignReader/DesignReader';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    content: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const SharedLinkPage = () => {\r\n    const classes = useStyles();\r\n    const urlparams = useParams();\r\n    const [tabIndex, setTabIndex] = useState(0);\r\n    const { dispatch } = useDesignState();\r\n\r\n    const { isLoading, isError, error, data } = useQuery(['shared-design-by-link', urlparams.link], async () => {\r\n        const resp = await getDesignByLink({ link: urlparams.link });\r\n        dispatch({\r\n            type: types.design.updateDesign,\r\n            payload: resp.design,\r\n        });\r\n        return resp;\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n\r\n    const renderError = () => {\r\n        return <div className={classes.error}>\r\n            <Alert severity='error'>\r\n                {error.message}\r\n            </Alert>\r\n        </div>;\r\n    };\r\n\r\n    const renderContent = () => {\r\n        return <><Grid container className={classes.content} key={data.design._id}>\r\n        <Grid item xs={12} md={3} lg={2} />\r\n        <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n            <Tabs\r\n                value={tabIndex}\r\n                onChange={handleChange}\r\n                aria-label=\"full width tabs example\"\r\n            >\r\n                <Tab label=\"DISEÑO\" {...a11yProps(1)} />\r\n            </Tabs>\r\n        </Grid>\r\n        <Grid item xs={12} md={3} lg={2}></Grid>\r\n    </Grid>\r\n        <TabPanel value={tabIndex} index={0} >\r\n            <DesignReader type='shared-link'/>\r\n        </TabPanel></>;\r\n    };\r\n    \r\n    const renderLoading = () => {\r\n        return <Typography>Cargando...</Typography>;\r\n    };\r\n\r\n    const renderNotFoundMessage = () => {\r\n        return <Typography>No se ha encontrado diseño.</Typography>;\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                isLoading\r\n                    ? renderLoading()\r\n                    : isError\r\n                        ? renderError()\r\n                            : data.design === {}\r\n                                ? renderNotFoundMessage()\r\n                                : renderContent()\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { Backdrop, Box, Button, CircularProgress, Container, makeStyles, Step, StepLabel, Stepper, TextField, Typography } from '@material-ui/core';\r\nimport { Code, Done, Email, VpnKey } from '@material-ui/icons';\r\nimport React, { useState } from 'react';\r\nimport { changeUserPassword, getUserByEmail, resendVerificationCode } from 'services/UserService';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: 'calc(100vh - 128px)',\r\n        height: 'auto',\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        padding: 10,\r\n        borderRadius: theme.shape.borderRadius,\r\n        height: '100%',\r\n        [theme.breakpoints.down('xs')]: {\r\n            borderStyle: 'none',\r\n            padding: 0,\r\n        },\r\n    },\r\n    backButton: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    buttonZone: {\r\n        display: 'flex',\r\n        justifySelf: 'flex-end',\r\n        justifyContent: 'flex-end',\r\n        [theme.breakpoints.down('sm')]: {\r\n            marginTop: 30,\r\n            paddingRight: 20,\r\n        },\r\n    },\r\n    body: {\r\n        maxWidth: 600,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.up('sm')]: {\r\n            height: 450,\r\n        },\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: 20,\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: 40,\r\n        },\r\n    },\r\n    input: {\r\n        marginTop: 30,\r\n    },\r\n    codeForm: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        marginTop: 30,\r\n    },\r\n    codeButton: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n    },\r\n    codeInput: {\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n}));\r\n\r\nconst emailInitialValue = {\r\n    value: '',\r\n    error: null\r\n};\r\n\r\nconst codeInitialValue = {\r\n    value: '',\r\n    error: null\r\n};\r\n\r\nconst passwordInitialValue = {\r\n    password: '',\r\n    confirm: '',\r\n    passwordError: null,\r\n    confirmError: null\r\n};\r\n\r\nexport const ResetPasswordPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [uid, setUid] = useState(null);\r\n    const [verificationCode, setVerificationCode] = useState(null);\r\n    const [codeForm, setCodeForm] = useState(codeInitialValue);\r\n    const [email, setEmail] = useState(emailInitialValue);\r\n    const [passwordForm, setPasswordForm] = useState(passwordInitialValue);\r\n    const steps = [\r\n        { icon: Email, label: 'Buscar cuenta por email' },\r\n        { icon: Code, label: 'Código de verificación' },\r\n        { icon: VpnKey, label: 'Restablecer contraseña' },\r\n        { icon: Done, label: 'Contraseña restablecida' },\r\n    ];\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email.value)) {\r\n            setEmail((prevState) => ({\r\n                ...prevState,\r\n                error: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const paswordsMatchs = () => {\r\n        if (!passwordForm.password.trim().length) return setPasswordForm({\r\n            ...passwordForm,\r\n            passwordError: 'Este campo es obligatorio',\r\n        });\r\n        if (!passwordForm.confirm.trim().length) return setPasswordForm({\r\n            ...passwordForm,\r\n            confirmError: 'Este campo es obligatorio',\r\n        });\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(passwordForm.password)){\r\n            setPasswordForm((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contraseña debe tener al menos un carácter en minúscula, uno en mayúscula, un número y debe tener entre 8 y 16 caractéres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (passwordForm.password !== passwordForm.confirm) {\r\n            setPasswordForm((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseñas no coinciden.',\r\n                confirmError: 'Las contraseñas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleNext = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n        setVerificationCode(null);\r\n        setEmail(emailInitialValue);\r\n    };\r\n\r\n    const handleChangeEmail = ({ target }) => {\r\n        setEmail({\r\n            value: target.value,\r\n            error: null,\r\n        });\r\n    };\r\n\r\n    const handleSearchAccount = async (e) => {\r\n        e.preventDefault();\r\n        if (!email.value.trim().length) return setEmail({\r\n            ...email,\r\n            error: 'Este campo es obligatorio',\r\n        });\r\n        if (!isEmailValid()) return;\r\n        setLoading(true);\r\n        const resp = await getUserByEmail(email.value);\r\n        setLoading(false);\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar('Se ha enviado un código de verificación a su correo electrónico.', { variant: 'success', autoHideDuration: 5000 });\r\n        setVerificationCode(resp.data.randomCode);\r\n        setUid(resp.data.user._id);\r\n        handleNext();\r\n    };\r\n\r\n    const handleVerifyCode = (e) => {\r\n        e.preventDefault();\r\n        if(codeForm.value.trim().toUpperCase() !== verificationCode.trim().toUpperCase()) return setCodeForm({\r\n            ...codeForm,\r\n            error: 'El código ingresado no coincide'\r\n        });\r\n        handleNext();\r\n    };\r\n\r\n    const handleResetPassword = async (e) => {\r\n        e.preventDefault();\r\n        if(!paswordsMatchs()) return;\r\n        const resp = await changeUserPassword({ uid, newPassword: passwordForm.password });\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar(resp.message, { variant: 'success', autoHideDuration: 5000 });\r\n        handleNext();\r\n    };\r\n\r\n    const handleChangePassword = ({target}) => {\r\n        setPasswordForm({\r\n            ...passwordForm,\r\n            [target.name]: target.value,\r\n            passwordError: null,\r\n            confirmError: null,\r\n        });\r\n    }\r\n    \r\n    const handleChangeCode = ({target}) => {\r\n        setCodeForm({\r\n            ...codeForm,\r\n            value: target.value,\r\n            error: null,\r\n        });\r\n    }\r\n\r\n    const handleResendCode = async (e) => {\r\n        setLoading(true);\r\n        setCodeForm(codeInitialValue);\r\n        const resp = await resendVerificationCode(email.value);\r\n        setLoading(false);\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar(resp.message, { variant: 'success', autoHideDuration: 2000 });\r\n        setVerificationCode(resp.data.randomCode);\r\n    }\r\n    \r\n    const handleFinish = (e) => {\r\n        e.preventDefault();\r\n        history.push('/');\r\n    };\r\n\r\n    const emailForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Busca tu cuenta por correo electrónico\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Introduce la dirección de correo electrónico asociada a tu cuenta para poder identificarte.\r\n                </Typography>\r\n                <TextField\r\n                    className={classes.input}\r\n                    label='Email'\r\n                    type='email'\r\n                    value={email.value}\r\n                    error={!!email.error}\r\n                    helperText={email.error}\r\n                    onChange={handleChangeEmail}\r\n                    placeholder='Ingresa correo electrónico'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                    autoFocus\r\n                />\r\n            </Box>\r\n        );\r\n    };\r\n    \r\n    const verificationCodeForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Código de verificación\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Introduce el código de verificación que hemos enviado a tu correo electrónico.\r\n                    Si este no ha llegado a tu correo, puedes reenviar un código haciendo click en el botón \"Reenviar Código\".\r\n                </Typography>\r\n                <div className={classes.codeForm}>\r\n                    <TextField\r\n                        className={classes.codeInput}\r\n                        value={codeForm.value}\r\n                        error={!!codeForm.error}\r\n                        helperText={codeForm.error}\r\n                        onChange={handleChangeCode}\r\n                        label='Código verificación'\r\n                        type='text'\r\n                        placeholder='Ingresa código verificación'\r\n                        variant='outlined'\r\n                        inputProps={{ style: { textTransform: \"uppercase\"} }}\r\n                        fullWidth\r\n                        />\r\n                    <Button\r\n                        className={classes.codeButton}\r\n                        size='small'\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        disableElevation \r\n                        onClick={handleResendCode}\r\n                    >\r\n                        Reenviar Código\r\n                    </Button>\r\n                </div>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const resetPasswordForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Restablecer contraseña\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Complete el siguiente formulario para reestablecer su contraseña.\r\n                </Typography>\r\n                <TextField\r\n                    name='password'\r\n                    className={classes.input}\r\n                    value={passwordForm.password}\r\n                    onChange={handleChangePassword}\r\n                    error={!!passwordForm.passwordError}\r\n                    helperText={passwordForm.passwordError}\r\n                    label='Nueva contraseña'\r\n                    type='password'\r\n                    placeholder='Ingresa la nueva contraseña'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                />\r\n                <TextField\r\n                    name='confirm'\r\n                    className={classes.input}\r\n                    value={passwordForm.confirm}\r\n                    onChange={handleChangePassword}\r\n                    error={!!passwordForm.confirmError}\r\n                    helperText={passwordForm.confirmError}\r\n                    label='Confirmar contraseña'\r\n                    type='password'\r\n                    placeholder='Ingresa nuevamente la nueva contraseña'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                />\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const finishStep = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Contraseña restablecida\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    La contraseña de su cuenta se ha reestablecido con éxito.\r\n                    Por favor haga click en el boton \"Finalizar\" para redirigirlo a la página de inicio.\r\n                </Typography>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const getStepContent = (step) => {\r\n        switch (step) {\r\n            case 0:\r\n                return emailForm();\r\n            case 1:\r\n                return verificationCodeForm();\r\n            case 2:\r\n                return resetPasswordForm();\r\n            case 3:\r\n                return finishStep();\r\n            default:\r\n                return 'Unknown step';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container className={classes.root}>\r\n            <Box className={classes.container}>\r\n                <Stepper style={{width:'100%'}} activeStep={activeStep} alternativeLabel>\r\n                    {steps.map((step) => (\r\n                        <Step key={step.label}>\r\n                            <StepLabel>{step.label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                <form className={classes.body} onSubmit={activeStep === 0 ? handleSearchAccount : activeStep === 1 ? handleVerifyCode : activeStep === 2 ? handleResetPassword : handleFinish } noValidate>\r\n                    {getStepContent(activeStep)}\r\n                        <Box className={classes.buttonZone}>\r\n                            {activeStep === 1 && (<Button\r\n                                disabled={activeStep === 0}\r\n                                onClick={handleBack}\r\n                                className={classes.backButton}\r\n                                >\r\n                                Volver\r\n                            </Button>)}\r\n                            <Button disableElevation variant=\"contained\" type='submit' color=\"primary\">\r\n                                {activeStep === steps.length - 1 ? 'Finalizar': 'Siguiente'}\r\n                            </Button>\r\n                        </Box>\r\n                </form>\r\n            </Box>\r\n            <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n            </Backdrop>\r\n        </Container>\r\n    );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Redirect,\r\n    Route\r\n} from 'react-router-dom';\r\nimport { LandingPage } from 'pages/LandingPage/LandingPage';\r\nimport { PublicRoute } from 'router/PublicRoute';\r\nimport { PrivateRoute } from 'router/PrivateRoute';\r\nimport { MyDesignsPage } from 'pages/Navigation/MyDesigns/MyDesignsPage';\r\nimport { UserProfile } from 'pages/User/UserProfile/UserProfile';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { NavBar } from 'components/NavBar';\r\nimport { UserConfigProvider } from 'contexts/UserConfigContext';\r\nimport { Footer } from 'components/Footer';\r\nimport { CssBaseline, Grow, makeStyles } from '@material-ui/core';\r\nimport { SharedWithMePage } from 'pages/Navigation/SharedWithMe/SharedWithMePage';\r\nimport { PublicRepositoryPage } from 'pages/Navigation/PublicRepository/PublicRepositoryPage';\r\nimport { SearchUsersPage } from 'pages/User/SearchUsersPage/SearchUsersPage';\r\nimport { DesignPage } from 'pages/DesignPage/DesignPage';\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { ConfirmationModal } from 'components/ConfirmationModal';\r\nimport { DesignPageReader } from 'pages/DesignPageReader/DesignPageReader'\r\nimport { SharedLinkPage } from 'pages/SharedLink/SharedLinkPage';\r\nimport { ResetPasswordPage } from 'pages/Auth/ResetPasswordPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    '@global': {\r\n        'html, body':\r\n        {\r\n            height: '100%',\r\n        },\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em',\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n\r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n}));\r\n\r\nexport const AppRouter = () => {\r\n    const { authState, verifyToken } = useAuthState();\r\n    const { token, checking } = authState;\r\n    useStyles();\r\n\r\n    useEffect(() => {\r\n        verifyToken();\r\n    }, [verifyToken]);\r\n\r\n    if (checking) {\r\n        return <h1>Espere...</h1>;\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <div>\r\n                <UserConfigProvider>\r\n                    <CssBaseline />\r\n                    <NavBar />\r\n                    <SnackbarProvider maxSnack={3} anchorOrigin={{ vertical: 'bottom', horizontal: 'left', }} TransitionComponent={Grow}>\r\n                        <Switch>\r\n                            <PublicRoute exact path=\"/\" component={LandingPage} isAuthenticated={!checking && !!token} />\r\n                            <PublicRoute exact path=\"/reset-password\" component={ResetPasswordPage} isAuthenticated={!checking && !!token} />\r\n                            <Route exact path=\"/shared-link/:link\" component={SharedLinkPage} />\r\n                            <PrivateRoute exact path=\"/profile/:uid\" component={UserProfile} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/my-designs\" component={MyDesignsPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute path=\"/my-designs/:urlPath+/\" component={MyDesignsPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/shared-with-me\" component={SharedWithMePage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/public-repository\" component={PublicRepositoryPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/users/search\" component={SearchUsersPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/designs/:id\" component={DesignPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/designs/reader/:id\" component={DesignPageReader} isAuthenticated={!checking && !!token} />\r\n                            <Redirect to=\"/\" />\r\n                        </Switch>\r\n                        <ConfirmationModal />\r\n                    </SnackbarProvider>\r\n                    <Footer />\r\n                </UserConfigProvider>\r\n            </div>\r\n        </Router>\r\n    );\r\n};","import 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\n\r\nimport { AuthProvider } from \"contexts/AuthContext\";\r\nimport { SocketProvider } from \"contexts/SocketContext\";\r\nimport { UiProvider } from \"contexts/ui/UiContext\";\r\nimport { AppRouter } from \"router/AppRouter\";\r\nimport { DesignProvider } from \"contexts/design/DesignContext\";\r\nimport { SharedDocProvider } from \"contexts/SharedDocContext\";\r\n\r\nconst queryClient = new QueryClient()\r\n\r\nfunction LearningActivityDesigner() {\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <UiProvider>\r\n                <AuthProvider>\r\n                    <DesignProvider>\r\n                        <SocketProvider>\r\n                            <SharedDocProvider>\r\n                                <AppRouter />\r\n                            </SharedDocProvider>\r\n                        </SocketProvider>\r\n                    </DesignProvider>\r\n                </AuthProvider>\r\n            </UiProvider>\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n\r\nexport default LearningActivityDesigner;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport LearningActivityDesigner from './App';\r\n\r\nReactDOM.render(\r\n    <LearningActivityDesigner />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}