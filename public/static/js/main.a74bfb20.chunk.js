(this["webpackJsonplearning-activity-designer-app"]=this["webpackJsonplearning-activity-designer-app"]||[]).push([[0],{1003:function(e,t){},1005:function(e,t){},1006:function(e,t){},1011:function(e,t){},1013:function(e,t){},1032:function(e,t){},1044:function(e,t){},1047:function(e,t){},1208:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(2),r=n.n(i),c=n(47),s=n.n(c),o=(n(395),n(396),n(1335)),l=n(287),d=n(7),u=n.n(d),j=n(17),p=n(10),b="http://learning-activity-designer.herokuapp.com/api",g=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,i,r,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:"GET",i="".concat(b,"/").concat(t),"GET"!==a){e.next=11;break}return e.next=5,fetch(i);case 5:return r=e.sent,e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(i,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 13:return c=e.sent,e.next=16,c.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,i,r,c,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:"GET",i="".concat(b,"/").concat(t),r=localStorage.getItem("token")||"","GET"!==a){e.next=12;break}return e.next=6,fetch(i,{method:a,headers:{"x-token":r}});case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,fetch(i,{method:a,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(n)});case 14:return s=e.sent,e.next=17,s.json();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,i,r,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:"POST",i="".concat(b,"/").concat(t),r=localStorage.getItem("token")||"",e.next=5,fetch(i,{method:a,headers:{"x-token":r},body:n});case 5:return c=e.sent,e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=Object(i.createContext)();function x(){var e=Object(i.useContext)(f);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}var O={checking:!0,user:null,token:null},v=function(e){var t=e.children,n=Object(i.useState)(O),r=Object(p.a)(n,2),c=r[0],s=r[1],o=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,i,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",{email:t,password:n},"POST");case 2:return(a=e.sent).ok&&(i=a.data,r=i.user,c=i.token,s({user:r,token:c,checking:!1})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/register",t,"POST");case 2:return(n=e.sent).ok&&(a=n.data,i=a.user,r=a.token,s({user:i,token:r,checking:!1})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=Object(i.useCallback)(Object(j.a)(u.a.mark((function e(){var t,n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return s({user:null,token:null,checking:!1}),e.abrupt("return",!1);case 4:return e.next=6,m("auth/renew");case 6:if(!(t=e.sent).ok){e.next=14;break}return n=t.data,a=n.user,i=n.token,localStorage.setItem("token",i),s({user:a,token:i,checking:!1}),e.abrupt("return",!0);case 14:return s({user:null,token:null,checking:!1}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),[]);return Object(i.useEffect)((function(){null===c.token?localStorage.removeItem("token"):localStorage.setItem("token",c.token)}),[c.token]),Object(a.jsx)(f.Provider,{value:{authState:c,login:o,register:l,logout:function(){s({checking:!1,user:null,token:null})},verifyToken:d,setAuthState:s},children:t})},y=n(593),w=n(38),k=void 0,C=Object(i.createContext)(),S=function(){var e=Object(i.useContext)(C);if(void 0===e)throw new Error("useSocketState must be used within a SocketProvider");return e},T=function(e){var t=e.children,n=x().authState,r=function(e){var t=Object(i.useState)(null),n=Object(p.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(!1),s=Object(p.a)(c,2),o=s[0],l=s[1],d=x().authState,u=Object(i.useCallback)((function(){var t=d.token,n=y.io.connect(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}});r(n)}),[e,d.token]),j=Object(i.useCallback)((function(){null===a||void 0===a||a.disconnect()}),[a]);return Object(i.useEffect)((function(){l(null===a||void 0===a?void 0:a.connected)}),[a]),Object(i.useEffect)((function(){null===a||void 0===a||a.on("connect",(function(){return l(!0)})),null===a||void 0===a||a.on("disconnect",(function(){return l(!1)}))}),[a]),{socket:a,online:o,connectSocket:u,disconnectSocket:j}}("http://learning-activity-designer.herokuapp.com"),c=r.socket,s=r.online,o=r.connectSocket,l=r.disconnectSocket,d=Object(w.b)(),u=d.enqueueSnackbar,j=d.closeSnackbar,b=Object(i.useRef)(null);Object(i.useEffect)((function(){n.checking||!n.user||s?null!==b.current&&(j(b.current),b.current=null):null===b.current&&(b.current=u("Se ha perdido la conexi\xf3n. Intentando reconectar...",{variant:"warning",persist:!0}))}),[s,b,j,u,n.checking,n.user]),Object(i.useEffect)((function(){!!n.token&&o()}),[n.token,o]),Object(i.useEffect)((function(){!!n.token||l()}),[n.token,l]);var g=Object(i.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,a=!1,i=setTimeout((function(){a||(a=!0,t&&t())}),n);return function(){if(!a){a=!0,clearTimeout(i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e&&e.apply(k,n)}}}),[]);return Object(a.jsx)(C.Provider,{value:{socket:c,online:s,emitWithTimeout:g},children:t})},D=n(16),N=n(4),A={ui:{toggleLoginModal:"[UI] toggle login modal",toggleModal:"[UI] toggle modal",toggleRegisterModal:"[UI] toggle register modal",toggleLearningResultModal:"[UI] toggle learning result modal",updateFolderPath:"[UI] update folder path",toggleConfirmAction:"[UI] confirm action",setFolder:"[UI] set folder data",setConfirmData:"[UI] set confirm data",setPDF:"[UI] set pdf",setResourceLink:"[UI] set resource link",setEvaluation:"[UI] set evaluation",setPDFConfig:"[UI] set pdf config",setUserSaveDesign:"[UI] set user save design",setHistoryInCheckSaveDesign:"[UI] set history check save design",setScrollToNewActivity:"[UI] set scroll to new activity",setScrollToNewTask:"[UI] set scroll to new task"},design:{updateDesign:"[DESIGN] toggle login modal",changeMetadataField:"[DESIGN] change metadata field",changeTaskField:"[DESIGN] change task field",setCurrentLearningResultField:"[DESIGN] set learning result field",clearCurrentLearningResult:"[DESIGN] clear current learning result",setCurrentLearningResult:"[DESIGN] set current learning result",setBloomCategories:"[DESIGN] set bloom categories",setBloomVerbs:"[DESIGN] set bloom verbs",setDesignPrivileges:"[DESIGN] set design privileges",addDesignKeyword:"[DESIGN] add design keyword",removeDesignKeyword:"[DESIGN] remove design keyword",updateReadOnlyLink:"[DESIGN] change read only link",setAssessments:"[DESIGN] set assessments",setScoreMean:"[DESIGN] set score mean",commentDesign:"[DESIGN] add a commentary",deleteComment:"[DESIGN] delete a commentary",setConnectedUsers:"[DESIGN] set connected users"}},I=function(e,t){switch(t.type){case A.ui.toggleModal:return Object(N.a)(Object(N.a)({},e),{},Object(D.a)({},"is"+t.payload+"ModalOpen",!e["is"+t.payload+"ModalOpen"]));case A.ui.toggleRegisterModal:return Object(N.a)(Object(N.a)({},e),{},{isRegisterModalOpen:!e.isRegisterModalOpen});case A.ui.updateFolderPath:return e.folderPath!==t.payload?Object(N.a)(Object(N.a)({},e),{},{folderPath:t.payload}):e;case A.ui.toggleWitchOpenModal:return Object(N.a)(Object(N.a)({},e),{},{setWitchOpenModal:!e.setWitchOpenModal});case A.ui.setFolder:return Object(N.a)(Object(N.a)({},e),{},{folder:t.payload});case A.ui.setConfirmData:return Object(N.a)(Object(N.a)({},e),{},{confirmModalData:t.payload});case A.ui.setPDF:return Object(N.a)(Object(N.a)({},e),{},{pdf:Object(N.a)(Object(N.a)({},e.pdf),{},{typeUserPDF:t.payload})});case A.ui.setResourceLink:return Object(N.a)(Object(N.a)({},e),{},{resourceLink:t.payload});case A.ui.setEvaluation:return Object(N.a)(Object(N.a)({},e),{},{evaluationData:t.payload});case A.ui.setPDFConfig:return Object(N.a)(Object(N.a)({},e),{},{pdf:Object(N.a)(Object(N.a)({},e.pdf),{},Object(D.a)({},t.payload.field,t.payload.value))});case A.ui.setUserSaveDesign:return Object(N.a)(Object(N.a)({},e),{},{userSaveDesign:t.payload});case A.ui.setHistoryInCheckSaveDesign:return Object(N.a)(Object(N.a)({},e),{},{historyData:t.payload});case A.ui.setScrollToNewActivity:return Object(N.a)(Object(N.a)({},e),{},{newActivity:t.payload});case A.ui.setScrollToNewTask:return Object(N.a)(Object(N.a)({},e),{},{newTask:t.payload});default:return e}},E=Object(i.createContext)();function P(){var e=Object(i.useContext)(E);if(void 0===e)throw new Error("useUiState must be used within a UiProvider");return e}var L={folderPath:"/",isLoginModalOpen:!1,isRegisterModalOpen:!1,isLearningResultModalOpen:!1,isEditProfileModalOpen:!1,isContactsModalOpen:!1,isConfirmationModalOpen:!1,isShareModalOpen:!1,setWichOpenModal:!1,isFolderModalOpen:!1,isPDFModalOpen:!1,isResourceModalOpen:!1,isEvaluationModalOpen:!1,isImportDesignsModalOpen:!1,isCheckSaveDesignModalOpen:!1,userSaveDesign:!0,isAssessmentModalOpen:!1,folder:{_id:null,name:""},confirmModalData:{type:null,args:null,actionMutation:null},pdf:{typeUserPDF:null},resourceLink:{learningActivityIndex:null,taskIndex:null},evaluationData:{learningActivityIndex:null},historyData:{url:null},newActivity:!1,newTask:!1},R=function(e){var t=e.children,n=Object(i.useReducer)(I,L),r=Object(p.a)(n,2),c=r[0],s=r[1];return Object(a.jsx)(E.Provider,{value:{uiState:c,dispatch:s},children:t})},F=n(63),M=n(48),B=n(1250),z=Object(B.a)((function(e){return{root:{minHeight:"calc(100vh - 64px)"}}})),H=function(){var e=z();return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)("h1",{children:"LandingPage"}),Object(a.jsx)("hr",{})]})},W=n(110),q=function(e){var t=e.isAuthenticated,n=e.component,i=Object(W.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(M.b,Object(N.a)(Object(N.a)({},i),{},{component:function(e){return t?Object(a.jsx)(M.a,{to:"/my-designs"}):Object(a.jsx)(n,Object(N.a)({},e))}}))},V=function(e){var t=e.isAuthenticated,n=e.component,i=Object(W.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",i.location.pathname),Object(a.jsx)(M.b,Object(N.a)(Object(N.a)({},i),{},{component:function(e){return t?Object(a.jsx)(n,Object(N.a)({},e)):Object(a.jsx)(M.a,{to:"/"})}}))},U=n(87),Q=n(1287),G=n(1284),K=n(114),J=n(1270),Z=n(1345),X=n(1275),Y=n(1339),_=n(23),$=n(1260),ee=n(1212),te=n(1328),ne=n(1251),ae=n(1252),ie=n(1253),re=n(1255),ce=n(629),se=n(1258),oe=n(1340),le=n(1254),de=n(1256),ue=n(1257),je=function(e,t){var n=e.split(" ")[0],a=t.split(" ")[0];return"".concat(n," ").concat(a)},pe=function(e,t){return"".concat(e.substring(0,1)+t.substring(0,1))},be=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/recent");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/user",{path:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/public/user/",{id:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(j.a)(u.a.mark((function e(t,n,a,i){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/public-repository",{filter:t,keywords:n,categories:a,from:i},"POST");case 2:if((r=e.sent).ok){e.next=5;break}throw new Error(r.message);case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,i){return e.apply(this,arguments)}}(),fe=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/shared-with-user/",{from:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.isPublic,i=void 0!==a&&a,e.next=3,m("design",{path:n,isPublic:i},"POST");case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r.message);case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("design/".concat(n),{},"DELETE");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.link)&&(!n||0!==n.trim().length)){e.next=3;break}return e.abrupt("return",{design:{}});case 3:return e.next=5,g("design/shared-link/".concat(n),{},"GET");case 5:if((a=e.sent).ok){e.next=8;break}throw new Error(a.message);case 8:return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("design/duplicate",{id:n},"POST");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.filename,i=t.design,t.last,e.next=3,m("design/import",{path:n,filename:a,design:i},"POST");case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r.message);case 6:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=Object(B.a)((function(e){return{root:{position:"relative",border:"1px solid ".concat(e.palette.divider),width:325,minWidth:325,borderRadius:5,cursor:"pointer",userSelect:"none",backgroundColor:e.palette.background.design,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}},ownerInfo:{borderTop:"1px solid ".concat(e.palette.divider),paddingLeft:15,paddingRight:15},row:{display:"flex"},rowJustified:{display:"flex",justifyContent:"space-between"},col:{display:"flex",flexDirection:"column"},ellipsis:{width:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},designIcon:{marginLeft:-12,fontSize:50,alignSelf:"center",justifySelf:"start",width:"20%"},deleteIcon:{position:"absolute",top:8,right:8},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),Ce=function(e){var t,n,i,r=e._id,c=e.title,s=e.updatedAt,o=e.metadata,d=e.folder,p=e.owner,b=e.privileges,g=e.canDelete,m=void 0===g||g,h=Object(l.b)(),f=x().authState,O=P().dispatch,v=Object(w.b)().enqueueSnackbar,y=Object(M.g)(),k=Object(Y.a)(Oe,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries("recent-designs");case 2:return e.next=4,h.cancelQueries(["designs",d.path]);case 4:return e.next=6,h.cancelQueries([p._id,"user-public-designs"]);case 6:if(t=h.getQueryData(["designs",d.path]),n=h.getQueryData([p,"user-public-designs"]),a=["designs",d.path],y.location.pathname.includes("/my-designs")||(a=[p._id,"user-public-designs"]),h.setQueryData(a,(function(e){var t=e.pages.find((function(e){return e.designs.find((function(e){return e._id===r}))})),n=t.designs.filter((function(e){return e._id!==r})),a=Object.assign({},Object(N.a)(Object(N.a)({},t),{},{designs:n})),i=e.pages;return i[e.pages.indexOf(t)]=a,Object.assign({},Object(N.a)(Object(N.a)({},e),{},{pages:i}))})),"/"!==d.path){e.next=15;break}return i=h.getQueryData("recent-designs"),h.setQueryData("recent-designs",(function(e){return e.filter((function(e){return e._id!==r}))})),e.abrupt("return",{previousDesigns:t,previousPublicDesigns:n,previousRecentDesigns:i});case 15:return e.abrupt("return",{previousDesigns:t,previousPublicDesigns:n});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:function(e,t,n){console.log(e),h.setQueryData(["designs",d.path],n.previousDesigns),h.setQueryData([p,"user-public-designs"],n.previousPublicDesigns),n.previousRecentDesigns&&h.setQueryData("recent-designs",n.previousRecentDesigns)},onSettled:function(){h.invalidateQueries("recent-designs"),h.invalidateQueries(["designs",d.path]),h.invalidateQueries([p._id,"user-public-designs"])},onSuccess:function(e){v("Su dise\xf1o se ha eliminado.",{variant:"success",autoHideDuration:2e3})}}),C=ke(),S=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),O({type:A.ui.setConfirmData,payload:{type:"dise\xf1o",args:{id:r},actionMutation:k}}),O({type:A.ui.toggleModal,payload:"Confirmation"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(te.a,{style:{padding:5},children:Object(a.jsxs)(ne.a,{className:C.root,elevation:0,children:[Object(a.jsx)(ae.a,{onClick:function(){b.find((function(e){return f.user.uid===e.user}))?b.find((function(e){return f.user.uid===e.user&&0===e.type}))?y.push("/designs/".concat(r)):y.push("/designs/reader/".concat(r)):o.isPublic?y.push("/designs/reader/".concat(r)):y.push("/")},children:Object(a.jsxs)(ie.a,{children:[Object(a.jsxs)("div",{className:C.row,style:{width:"100%"},children:[Object(a.jsx)(le.a,{className:C.designIcon}),Object(a.jsxs)("div",{className:C.col,children:[Object(a.jsx)("div",{className:C.row,children:Object(a.jsx)(re.a,{title:"".concat(c),arrow:!0,placement:"top",children:Object(a.jsx)(K.a,{className:C.ellipsis,variant:"h5",component:"h2",children:c})})}),Object(a.jsx)("div",{className:C.row,children:Object(a.jsx)(K.a,{className:C.ellipsis,variant:"body1",component:"p",children:o.category?o.category.name:"Sin categor\xeda"})})]})]}),Object(a.jsx)("div",{className:C.rowJustified,children:Object(a.jsxs)(K.a,{variant:"body1",component:"p",children:["Tiempo de dise\xf1o: ","".concat(null!==(t=o.workingTime.hours)&&void 0!==t?t:0,":").concat(null!==(n=o.workingTime.minutes)&&void 0!==n?n:0)," Hrs"]})}),Object(a.jsxs)("div",{className:C.rowJustified,style:{marginTop:10,marginBottom:-5},children:[Object(a.jsxs)(K.a,{color:"textSecondary",variant:"body2",children:["\xdaltima modificaci\xf3n: ",new Date(s).toLocaleDateString()]}),Object(a.jsxs)("div",{className:C.row,style:{marginRight:4},children:[Object(a.jsx)(de.a,{fontSize:"small"}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",o.scoreMean]})]})]})]})}),m&&f.user.uid===p._id&&Object(a.jsx)(ce.a,{className:C.deleteIcon,onClick:S,children:Object(a.jsx)(ue.a,{})}),Object(a.jsx)(ae.a,{component:F.b,to:"/profile/".concat(p._id),children:Object(a.jsxs)(se.a,{className:C.ownerInfo,children:[Object(a.jsx)(oe.a,{alt:je(p.name,p.lastname),src:p.img&&p.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(p.img):"",children:pe(p.name,p.lastname)}),Object(a.jsxs)("div",{children:[Object(a.jsx)(K.a,{color:"textPrimary",children:je(p.name,p.lastname)}),Object(a.jsx)(K.a,{color:"textSecondary",children:null!==(i=p.occupation)&&void 0!==i?i:"Sin ocupaci\xf3n"})]})]})})]})})},Se=n(1332),Te=n(1259),De=Object(B.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:325,minWidth:325,height:198,margin:"10px 10px 10px 0px",borderRadius:10},ownerInfo:{borderTop:"1px solid ".concat(e.palette.divider),paddingLeft:15,paddingRight:15,paddingTop:10},row:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},col:{width:"80%",display:"flex",flexDirection:"column"}}})),Ne=function(){var e=De();return Object(a.jsxs)(ne.a,{className:e.root,children:[Object(a.jsxs)(ie.a,{children:[Object(a.jsxs)("div",{className:e.row,children:[Object(a.jsx)(Te.a,{variant:"rect",width:35,height:43}),Object(a.jsxs)("div",{className:e.col,children:[Object(a.jsx)("div",{className:e.row,style:{marginLeft:-5},children:Object(a.jsx)(Te.a,{style:{marginTop:-3},animation:"wave",height:33,width:"80%"})}),Object(a.jsx)("div",{className:e.row,style:{marginLeft:-5},children:Object(a.jsx)(Te.a,{style:{marginTop:-3},animation:"wave",height:23,width:"70%"})})]})]}),Object(a.jsx)("div",{className:e.row,children:Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"70%"})}),Object(a.jsxs)("div",{className:e.row,children:[Object(a.jsxs)("div",{className:e.row,style:{marginTop:14,marginBottom:-5},children:[Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"70%"}),Object(a.jsx)(Te.a,{variant:"circle",width:13,height:13,style:{marginTop:2,marginRight:5}})]}),Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"5%",style:{marginTop:14,marginBottom:-5}})]})]}),Object(a.jsxs)(se.a,{className:e.ownerInfo,children:[Object(a.jsx)(Te.a,{variant:"circle",width:40,height:40,style:{marginBottom:3}}),Object(a.jsxs)("div",{className:e.col,style:{marginBottom:3},children:[Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"100%"}),Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"80%"})]})]})]})},Ae=Object(B.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center"},designsContainer:{width:"100%",display:"flex",flexGrow:1,flexWrap:"wrap",justifyContent:"flex-start",marginTop:15,marginBottom:15},error:{marginTop:15,width:"100%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"},loadMore:{marginBottom:50},clickHere:{textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}}}),Ie=function(e){var t=e.data,n=e.status,i=e.isFetchingNextPage,r=e.fetchNextPage,c=e.hasNextPage,s=e.handleCreateDesign,o=e.label,l=Ae(),d=x().authState;return"loading"===n?Object(a.jsx)("div",{className:l.root,children:Object(a.jsx)("div",{className:l.designsContainer,children:Object(_.a)(Array(10).keys()).map((function(e){return Object(a.jsx)(Ne,{},"design-skeleton-".concat(e))}))})}):"error"===n?Object(a.jsx)(Se.a,{severity:"error",className:l.error,children:"Ha ocurrido un problema al intentar obtener los dise\xf1os. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."}):Object(a.jsxs)("div",{className:l.root,children:[Object(a.jsx)("div",{className:l.designsContainer,children:t.pages[0].designs.length>0?t.pages.map((function(e,t){return e.designs.map((function(e,t){return Object(a.jsx)(Ce,Object(N.a)(Object(N.a)({title:e.metadata.name},e),{},{canDelete:"public-repository"!==o}),"my-design"+e._id)}))})):"shared-with-me"===o?Object(a.jsx)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"No se han encontrado dise\xf1os compartidos. Cuando otros usuarios compartan dise\xf1os contigo aparecer\xe1n aqu\xed."}):"user-profile"===o?t.pages[0].ownerId===d.user.uid?Object(a.jsxs)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["No cuentas con dise\xf1os p\xfablicos. Crea tu primer dise\xf1o p\xfablico haciendo click "," ",Object(a.jsx)($.a,{className:l.clickHere,onClick:s,children:"aqu\xed"}),"!"]}):Object(a.jsx)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"Este usuario no cuenta con dise\xf1os p\xfablicos."}):"public-repository"===o?Object(a.jsx)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"No se han encontrado resultados para tu b\xfasqueda."}):Object(a.jsxs)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["No se han encontrado dise\xf1os en este directorio. Crea tu primer dise\xf1o haciendo click "," ",Object(a.jsx)($.a,{className:l.clickHere,onClick:s,children:"aqu\xed"}),"!"]})}),t&&t.pages[0].designs.length>0&&c&&Object(a.jsx)(ee.a,{className:l.loadMore,color:"primary",onClick:function(){return r()},children:i?"Cargando m\xe1s...":"Cargar M\xe1s"})]})},Ee=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("folder/user",{path:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.folderName,e.next=3,m("folder/create",{path:n,folderName:a},"POST");case 3:if((i=e.sent).ok){e.next=6;break}throw new Error(i.message);case 6:return e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.name,e.next=3,m("folder/".concat(n),{name:a},"PUT");case 3:if((i=e.sent).ok){e.next=6;break}throw new Error(i.message);case 6:return e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("folder/".concat(n),{},"DELETE");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=n(622),Me=n(1261),Be=n(1262),ze=n(1265),He=n(1266),We=n(1267),qe={mouseX:null,mouseY:null},Ve=function(e){var t=e.options,n=e.children,r=Object(i.useState)(qe),c=Object(p.a)(r,2),s=c[0],o=c[1],l=Object(i.useRef)(),d=function(){o(qe)};return Object(a.jsxs)("div",{ref:l,onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var t=l.current.getBoundingClientRect();e.clientX>=t.x&&e.clientX<=t.x+t.width&&e.clientY>=t.y&&e.clientY<=t.y+t.height?o({mouseX:e.clientX-2,mouseY:e.clientY-4}):d()},style:{width:325},children:[n,Object(a.jsx)(Fe.a,{keepMounted:!0,open:null!==s.mouseY,onClose:d,anchorReference:"anchorPosition",anchorPosition:null!==s.mouseY&&null!==s.mouseX?{top:s.mouseY,left:s.mouseX}:void 0,children:t&&t.length?t.map((function(e,t){return Object(a.jsxs)(Me.a,{onClick:function(t){return function(e,t){t&&t(e),d()}(t,e.onSelect)},children:[e.icon?Object(a.jsx)(Be.a,{children:e.icon}):Object(a.jsx)("div",{}),Object(a.jsx)(K.a,{children:e.label})]},"option-".concat(t,"-").concat(e))})):Object(a.jsx)(K.a,{component:"div",children:Object(a.jsx)(te.a,{fontStyle:"italic",children:"No hay opciones especificadas."})})})]})},Ue=Object(B.a)((function(e){return{root:{display:"flex",alignItems:"center",border:"1px solid ".concat(e.palette.divider),width:325,minWidth:325,borderRadius:5,margin:"10px 10px 10px 0px",cursor:"pointer",backgroundColor:e.palette.background.paper,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}},content:{display:"flex",justifyContent:"space-between",alignItems:"center"},folderContainer:{display:"flex",justifyContent:"space-between",borderRadius:e.shape.borderRadius,alignItems:"center",width:"100%",userSelect:"none",textDecoration:"none",color:e.palette.text.primary},folderBody:{padding:"15px 10px 15px 20px",display:"flex",justifyContent:"start",alignItems:"center",textDecoration:"none"},folderName:{paddingTop:3,fontSize:20,paddingLeft:20},more:{marginRight:10}}})),Qe=function(e){var t=e._id,n=e.name,r=e.path,c=Object(W.a)(e,["_id","name","path"]),s=Ue(),o=Object(i.useState)(null),d=Object(p.a)(o,2),b=d[0],g=d[1],m=P().dispatch,h=Object(l.b)(),f=Object(w.b)().enqueueSnackbar,x=r!=="/"+n?r.replace("/"+n,""):r.replace(n,""),O=Object(Y.a)(Re,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["folders",x]);case 2:return n=h.getQueryData(["folders",x]),h.setQueryData(["folders",x],(function(e){return e.filter((function(e){return e._id!==t}))})),e.abrupt("return",{previousFolders:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){h.invalidateQueries(["folders",x])},onError:function(e,t,n){h.setQueryData(["folders",x],n.previousFolders),f(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){f("Carpeta eliminada con \xe9xito.",{variant:"success",autoHideDuration:2e3})}}),v=function(e){g(null),m({type:A.ui.setFolder,payload:{_id:t,name:n}}),m({type:A.ui.toggleModal,payload:"Folder"})},y=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(null),m({type:A.ui.setConfirmData,payload:{type:"carpeta",args:{id:t},actionMutation:O}}),m({type:A.ui.toggleModal,payload:"Confirmation"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(te.a,Object(N.a)(Object(N.a)({className:s.root},c),{},{children:Object(a.jsx)(Ve,{options:[{icon:Object(a.jsx)(ze.a,{}),label:"Cambiar Nombre",onSelect:v},{icon:Object(a.jsx)(ue.a,{}),label:"Eliminar",onSelect:y}],children:Object(a.jsxs)("div",{className:s.content,children:[Object(a.jsx)(te.a,Object(N.a)(Object(N.a)({className:s.folderContainer,component:F.b,to:"/my-designs".concat(r)},c),{},{children:Object(a.jsxs)("div",{className:s.folderBody,children:[Object(a.jsx)(He.a,{fontSize:"large"}),Object(a.jsx)(K.a,{className:s.folderName,children:n})]})})),Object(a.jsx)(ce.a,{className:s.more,onClick:function(e){e.stopPropagation(),g(e.currentTarget)},children:Object(a.jsx)(We.a,{})}),Object(a.jsxs)(Fe.a,{onBlur:function(){return g(null)},anchorEl:b,open:Boolean(b),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return g(null)},children:[Object(a.jsxs)(Me.a,{onClick:v,children:[Object(a.jsx)(Be.a,{children:Object(a.jsx)(ze.a,{})}),Object(a.jsx)(K.a,{children:"Cambiar Nombre"})]}),Object(a.jsxs)(Me.a,{onClick:y,children:[Object(a.jsx)(Be.a,{children:Object(a.jsx)(ue.a,{})}),Object(a.jsx)(K.a,{children:"Eliminar"})]})]})]})})}))},Ge=Object(B.a)({root:{paddingTop:15,display:"flex",flexDirection:"column",justifyContent:"center"},folderContainer:{width:"100%",display:"flex",flexGrow:1,flexWrap:"wrap",justifyContent:"flex-start"}}),Ke=function(e){e.title;var t=e.data,n=Ge();return t&&t.length>0?Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)("div",{className:n.folderContainer,children:t.map((function(e){return Object(a.jsx)(Qe,Object(N.a)({},e),"my-folder"+e._id)}))})}):Object(a.jsx)("div",{})},Je=n(1264),Ze=n(1213),Xe=n(1269),Ye=n(1268),_e=n(1271),$e=n(1272),et=Object(B.a)((function(e){return{icon:{marginRight:10}}})),tt=function(){var e=et(),t=Object(M.g)(),n=Object(M.h)(),i=Object(l.b)(),r=x().authState,c=Object(Y.a)(xe,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.cancelQueries("recent-designs");case 2:return e.next=4,i.cancelQueries(["designs","/"]);case 4:return e.next=6,i.cancelQueries([r.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){i.invalidateQueries("recent-designs"),i.invalidateQueries(["designs","/"]),i.invalidateQueries([r.user.id,"user-public-designs"])},onError:function(e){console.log(e)},onSuccess:function(e){t.push("/designs/".concat(e.design._id))}}),s=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mutate({path:"/"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a,{variant:"contained",color:"default",style:{margin:10},onClick:s,children:"Crear Dise\xf1o"}),Object(a.jsxs)(Je.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(a.jsxs)(Ze.a,{button:!0,selected:n.pathname.includes("/my-designs"),component:F.b,to:"/my-designs",children:[Object(a.jsx)(Ye.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Mis Dise\xf1os"})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(Ze.a,{button:!0,selected:n.pathname.includes("/shared-with-me"),component:F.b,to:"/shared-with-me",children:[Object(a.jsx)(_e.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Compartidos Conmigo"})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(Ze.a,{button:!0,selected:n.pathname.includes("/public-repository"),component:F.b,to:"/public-repository",children:[Object(a.jsx)($e.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Repositorio P\xfablico"})]}),Object(a.jsx)(J.a,{})]})]})},nt=n(1337),at=Object(B.a)((function(e){return{root:{marginTop:20,marginBottom:20,width:"100%",padding:"10px 15px 10px 15px",borderRadius:3,backgroundColor:e.palette.background.default},link:{textDecoration:"none","&:hover":{textDecoration:"underline"}}}})),it=function(){var e=at(),t=P().uiState.folderPath;return Object(a.jsxs)(nt.a,{className:e.root,children:[1!==t.length?Object(a.jsx)(K.a,{className:e.link,color:"inherit",component:F.b,to:"/my-designs",children:" Mis Dise\xf1os "}):Object(a.jsx)(K.a,{color:"textPrimary",children:" Mis Dise\xf1os "}),function(){if(1!==t.length){var n="",i=t.split("/");return i.shift(),i.map((function(i){var r=n+="/"+i;return Object(a.jsx)("div",{style:{display:"flex"},children:t===r?Object(a.jsxs)(K.a,{color:"textPrimary",children:[i," "]}):Object(a.jsxs)(K.a,{className:e.link,color:"inherit",component:F.b,to:"/my-designs".concat(r),children:[i," "]})},r)}))}}()]})},rt=n(1273),ct=n(1274);function st(){var e=Object(i.useState)(null),t=Object(p.a)(e,2),n=t[0],a=t[1];return Object(i.useLayoutEffect)((function(){if(n){var e=function(e){0!==e.deltaY&&(e.preventDefault(),n.scrollTo({left:n.scrollLeft+e.deltaY,behavior:"auto"}))};return n.addEventListener("wheel",e),function(){return n.removeEventListener("wheel",e)}}}),[n]),a}var ot=Object(B.a)((function(e){return{root:{position:"relative",width:"100%",display:"flex",justifyContent:"flex-start",mouseWheel:"horizontal",overflowX:"auto",overflowY:"hidden",listStyle:"none",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),margin:0},prev:{position:"absolute",height:"calc(100% - 0.6em)",width:50,display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,left:0,background:"linear-gradient(270deg, transparent, ".concat(e.palette.action.disabledBackground," 100%)"),"&:hover":{cursor:"pointer",backgroundColor:e.palette.action.hover}},next:{position:"absolute",height:"calc(100% - 0.6em)",width:50,display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,right:0,background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.disabledBackground," 100%)"),"&:hover":{cursor:"pointer",backgroundColor:e.palette.action.hover}}}})),lt=function(e){var t=e.children,n=ot(),r=st(),c=Object(i.useState)(null),s=Object(p.a)(c,2),o=s[0],l=s[1],d=Object(i.useRef)(),u=Object(i.useRef)();return Object(a.jsxs)(te.a,{position:"relative",children:[Object(a.jsx)(te.a,{ref:d,onClick:function(){o&&o.scrollTo({left:o.scrollLeft-335,behavior:"smooth"})},className:n.prev,children:Object(a.jsx)(rt.a,{style:{fontSize:40}})}),Object(a.jsx)(te.a,{ref:u,onClick:function(){o&&o.scrollTo({left:o.scrollLeft+335,behavior:"smooth"})},className:n.next,children:Object(a.jsx)(ct.a,{style:{fontSize:40}})}),Object(a.jsx)(te.a,{ref:function(e){r(e),l(e)},className:n.root,children:t})]})},dt=Object(B.a)({root:{paddingTop:15,marginBottom:15},recentDesigns:{width:"100%",display:"flex",flexGrow:1,flexWrap:"nowrap",justifyContent:"flex-start",marginTop:15},title:{}}),ut=function(e){var t=e.width,n=(e.height,dt()),i=Math.trunc(t/345),r=Object(X.a)("recent-designs",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",be());case 1:case"end":return e.stop()}}),e)})))),c=r.isLoading,s=r.isError,o=r.data;if(s)return Object(a.jsx)("div",{});var l=function(){return Array.from(Array(i).keys()).map((function(e){return Object(a.jsx)(Ne,{},"recent-design-skeleton-".concat(e))}))},d=function(){return o.map((function(e){return Object(a.jsx)(Ce,Object(N.a)(Object(N.a)({title:e.metadata.name},e),{},{canDelete:!1}),"recent"+e._id)}))};return Object(a.jsxs)("div",{className:n.root,children:[o&&0!==o.length?Object(a.jsxs)("div",{className:n.title,children:[Object(a.jsx)(K.a,{variant:"h4",children:"Dise\xf1os recientes"}),Object(a.jsx)(J.a,{})]}):Object(a.jsx)("div",{}),o&&o.length>0?o.length>i?Object(a.jsx)(lt,{children:c?l():d()}):Object(a.jsx)("div",{className:n.recentDesigns,children:c?l():d()}):Object(a.jsx)("div",{})]})},jt=n(1276),pt=n(1277),bt=n(1279),gt=n(1341),mt=n(1283),ht=n(1278),ft=Object(B.a)((function(e){return{title:{display:"flex",justifyContent:"space-between"},close:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},folderNameInput:{marginTop:20,marginBottom:20}}})),xt=function(){var e=ft(),t=P(),n=t.uiState,r=t.dispatch,c=n.folderPath,s=n.folder,o=n.isFolderModalOpen,d=Object(l.b)(),b=Object(w.b)().enqueueSnackbar,g=Object(i.useState)(null),m=Object(p.a)(g,2),h=m[0],f=m[1],x=Object(i.useState)(s.name),O=Object(p.a)(x,2),v=O[0],y=O[1];Object(i.useEffect)((function(){y(s.name)}),[s.name,y]);var k=Object(Y.a)(Pe,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cancelQueries(["folders",c]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){d.invalidateQueries(["folders",c])},onError:function(e){b(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){b("Carpeta creada con \xe9xito.",{variant:"success",autoHideDuration:2e3}),S()}}),C=Object(Y.a)(Le,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cancelQueries(["folders",c]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){d.invalidateQueries(["folders",c])},onError:function(e){b(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){b("Nombre de carpeta cambiado con \xe9xito.",{variant:"success",autoHideDuration:2e3}),S()}}),S=function(){r({type:A.ui.toggleModal,payload:"Folder"}),r({type:A.ui.setFolder,payload:{_id:null,name:""}}),y(""),f(null)},T=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==v.trim()){e.next=2;break}return e.abrupt("return",f("Este campo es obligatorio."));case 2:if("/"!==v.trim()&&"mis dise\xf1os"!==v.trim().toLowerCase()){e.next=4;break}return e.abrupt("return",f("Nombre de carpeta no permitido."));case 4:return e.next=6,k.mutate({path:c,folderName:v.trim()});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==v.trim()){e.next=2;break}return e.abrupt("return",f("Este campo es obligatorio."));case 2:if("/"!==v.trim()&&"mis dise\xf1os"!==v.trim().toLowerCase()){e.next=4;break}return e.abrupt("return",f("Nombre de carpeta no permitido."));case 4:if(v.trim().toLowerCase()!==s.name.trim().toLowerCase()){e.next=6;break}return e.abrupt("return",S());case 6:return e.next=8,C.mutate({id:s._id,name:v});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(jt.a,{fullWidth:!0,open:o,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)("div",{className:e.title,children:[Object(a.jsx)(pt.a,{id:"form-dialog-title",onClose:S,children:s._id?"Editar Carpeta":"Nueva Carpeta"}),Object(a.jsx)(ce.a,{className:e.close,"aria-label":"close",onClick:S,children:Object(a.jsx)(ht.a,{})})]}),Object(a.jsxs)(bt.a,{children:[Object(a.jsxs)(K.a,{style:{marginBottom:20},children:["Usted est\xe1 por ",s._id?"editar una carpeta":"crear una nueva carpeta",". Por favor ingrese el ",s._id?"nuevo":""," nombre para su carpeta en la siguiente entrada de texto."]}),Object(a.jsx)(K.a,{variant:"caption",children:"IMPORTANTE: No puede existir una carpeta en el directorio con el mismo nombre."}),Object(a.jsx)(gt.a,{className:e.folderNameInput,error:!!h,helperText:h,margin:"dense",variant:"outlined",name:"name",value:v,onChange:function(e){var t=e.target;h&&f(null),y(t.value)},label:"Nombre Carpeta",type:"text",fullWidth:!0})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:S,children:"Cancelar"}),s._id?Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:D,children:"Editar Carpeta"}):Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:T,children:"Crear Carpeta"})]})]})},Ot=n(1288),vt=n(1289),yt=n(1290),wt=n(1291),kt=function(e){var t=e.options,n=e.Icon,r=e.text,c=e.fullWidth,s=void 0!==c&&c,o=e.children,l=Object(i.useState)(null),d=Object(p.a)(l,2),u=d[0],j=d[1],b=function(e){j(e.currentTarget)},g=function(){j(null)};return Object(a.jsxs)("div",{style:{width:s?"100%":"auto"},children:[r?Object(a.jsxs)(ee.a,{fullWidth:s,variant:"outlined",onClick:b,children:[n,Object(a.jsx)(K.a,{style:{marginLeft:10},children:r})]}):Object(a.jsx)(ce.a,{onClick:b,children:null!==n&&void 0!==n?n:Object(a.jsx)(We.a,{})}),Object(a.jsx)(Fe.a,{anchorEl:u,open:Boolean(u),keepMounted:!0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:g,children:t&&t.length?t.map((function(e,t){return Object(a.jsxs)(Me.a,{onClick:function(t){return function(e,t){t&&t(e),g()}(t,e.onSelect)},children:[e.icon?Object(a.jsx)(Be.a,{children:e.icon}):Object(a.jsx)("div",{}),Object(a.jsx)(K.a,{children:e.label})]},"option-".concat(t,"-").concat(e))})):o||Object(a.jsx)(K.a,{component:"div",children:Object(a.jsx)(te.a,{fontStyle:"italic",children:"No hay opciones especificadas."})})})]})},Ct=n(67),St=n(1214),Tt=n(1286),Dt=n(620),Nt=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},previewChip:{maxWidth:210},backdrop:{display:"flex",flexDirection:"column",zIndex:e.zIndex.modal+1,color:"#fff"}}})),At=function(){var e=Nt(),t=Object(l.b)(),n=Object(w.b)().enqueueSnackbar,r=P(),c=r.uiState,s=r.dispatch,o=Object(i.useState)([]),d=Object(p.a)(o,2),b=d[0],g=d[1],m=Object(i.useState)(!1),h=Object(p.a)(m,2),f=h[0],x=h[1],O=c.folderPath,v=Object(Y.a)(we,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cancelQueries("recent-designs");case 2:return e.next=4,t.cancelQueries(["designs",O]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){t.invalidateQueries("recent-designs"),t.invalidateQueries(["designs",O])},onError:function(e,t){t.last&&(x(!1),y()),n(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e,t){t.last&&(x(!1),y()),n(e.message,{variant:"success",autoHideDuration:2e3})}}),y=function(e){s({type:A.ui.toggleModal,payload:"ImportDesigns"})},k=function(e){return function(t){try{var a=JSON.parse(t.target.result);g((function(t){return[].concat(Object(_.a)(t),[{filename:e.name,design:a}])}))}catch(i){n('Ha ocurrido un error al cargar el dise\xf1o "'.concat(e.name,'". El archivo est\xe1 corrupto.'),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:2e3})}}},C=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),n=0;case 2:if(!(n<b.length)){e.next=9;break}return a=b[n],e.next=6,v.mutate({filename:a.filename,path:O,design:a.design,last:n===b.length-1});case 6:n++,e.next=2;break;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(jt.a,{open:c.isImportDesignsModalOpen,maxWidth:"sm",fullWidth:!0,children:[Object(a.jsx)(pt.a,{children:"Importar Dise\xf1os de Aprendizaje"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:y,children:Object(a.jsx)(ht.a,{})}),Object(a.jsxs)(bt.a,{dividers:!0,children:[Object(a.jsx)(K.a,{style:{marginBottom:20},children:"Para importar dise\xf1os en su cuenta haga click o arrastre sus archivos a la zona indicada."}),Object(a.jsx)(Dt.a,{getFileLimitExceedMessage:function(e){return"Se super\xf3 el n\xfamero m\xe1ximo de archivos. Solo se permiten ".concat(e,". ")},previewGridProps:{container:{spacing:1,direction:"row"}},dropzoneText:"Arrastra y suelta tus archivos o haz click aqu\xed",previewChipProps:{classes:{root:e.previewChip}},acceptedFiles:["application/json"],previewText:"Archivos Seleccionados",getDropRejectMessage:function(e,t,n){var a='El archivo "'.concat(e.name,'" fue rechazado. ');return t.includes(e.type)||(a+="El tipo de archivo no es compatible. "),e.size>n&&(a+="El archivo es demasiado grande. El l\xedmite de tama\xf1o es ".concat(n/1024/1024," MB.")),a},showPreviewsInDropzone:!1,maxFileSize:3145728,showAlerts:["error"],onChange:function(e){g([]);var t,a=Object(Ct.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;try{var r=new FileReader;r.onload=k(i),r.readAsText(i)}catch(c){console.log(c),n('Ha ocurrido un error al cargar el dise\xf1o "'.concat(i.name,'". El archivo est\xe1 corrupto.'),{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:2e3})}}}catch(s){a.e(s)}finally{a.f()}},showPreviews:!0,filesLimit:5,useChipsForPreview:!0,clearOnUnmount:!0}),Object(a.jsx)("div",{style:{marginTop:20},children:Object(a.jsx)(K.a,{variant:"caption",children:'IMPORTANTE: Solo se admiten archivos con extensi\xf3n "json", por ejemplo "Dise\xf1o de Ejemplo.json".'})})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:y,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:C,disabled:0===b.length,children:"Importar"})]})]}),Object(a.jsxs)(St.a,{className:e.backdrop,open:f,children:[Object(a.jsx)(Tt.a,{color:"inherit"}),Object(a.jsx)(K.a,{children:"Subiendo archivos..."})]})]})},It=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:Object(D.a)({paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},e.breakpoints.down("xs"),{paddingLeft:10,paddingRight:10}),rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},breadCrumbs:{marginTop:20,marginBottom:20,width:"100%",padding:"10px 15px 10px 15px",borderRadius:3,backgroundColor:e.palette.background.default},designsAndFoldersContainer:{paddingTop:15},link:{textDecoration:"none"},sectionTitle:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-end",paddingBottom:5},button:{height:35}}})),Et=function(){var e=It(),t=Object(M.g)(),n=Object(M.i)(),r=Object(i.useRef)(null),c=Object(U.a)(),s=Object(Q.a)(c.breakpoints.down("xs")),o=P(),d=o.uiState,b=o.dispatch,g=Object(w.b)().enqueueSnackbar,m=Object(l.b)(),h=x().authState,f=Object(i.useState)(0),O=Object(p.a)(f,2),v=O[0],y=O[1],k=Object(i.useState)(0),C=Object(p.a)(k,2),S=C[0],T=C[1];Object(i.useEffect)((function(){b({type:A.ui.updateFolderPath,payload:n.urlPath?"/"+n.urlPath:"/"})}),[b,n]);var D=d.folderPath,I=n.urlPath?D.split("/")[D.split("/").length-1]:"Mis Dise\xf1os",E=Object(Z.a)(["designs",D],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,ge(D,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),L=Object(X.a)(["folders",D],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(D);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),R=Object(Y.a)(xe,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.cancelQueries("recent-designs");case 2:return e.next=4,m.cancelQueries(["designs",D]);case 4:return e.next=6,m.cancelQueries([h.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){m.invalidateQueries("recent-designs"),m.invalidateQueries(["designs",D]),m.invalidateQueries([h.user.id,"user-public-designs"])},onError:function(e){g(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){t.push("/designs/".concat(e.design._id))}});Object(i.useEffect)((function(){r.current&&(T(r.current.offsetHeight),y(r.current.offsetWidth))}),[r]);var F=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"/",e.next=3,R.mutate({path:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b({type:A.ui.toggleModal,payload:"Folder"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsx)(tt,{})}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,ref:r,className:e.workspace,children:[Object(a.jsx)(it,{}),"/"===D&&Object(a.jsx)(ut,{id:"recent",width:v,height:S}),Object(a.jsxs)("div",{className:e.designsAndFoldersContainer,children:[Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(K.a,{variant:"h4",children:"/"===D?"Mis Dise\xf1os":I}),Object(a.jsx)(kt,{Icon:Object(a.jsx)(Ot.a,{}),text:"Nuevo",fullWidth:s,options:[{icon:Object(a.jsx)(vt.a,{}),label:"Nuevo Dise\xf1o",onSelect:function(e){return F(e,D)}},{icon:Object(a.jsx)(yt.a,{}),label:"Nueva Carpeta",onSelect:B},{icon:Object(a.jsx)(wt.a,{}),label:"Importar Dise\xf1os",onSelect:function(e){b({type:A.ui.toggleModal,payload:"ImportDesigns"})}}]})]}),Object(a.jsx)(J.a,{}),Object(a.jsx)(Ke,Object(N.a)({},L)),Object(a.jsx)(Ie,Object(N.a)(Object(N.a)({},E),{},{handleCreateDesign:function(e){return F(e,D)}}))]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]}),Object(a.jsx)(xt,{}),Object(a.jsx)(At,{})]})},Pt=n(603),Lt=n.n(Pt),Rt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("user/".concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("user/search/",{filter:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.contacts,e.prev=1,e.next=4,m("user/".concat(n),{newData:{contacts:a}},"PUT");case 4:if((i=e.sent).ok){e.next=7;break}throw new Error(i.message);case 7:return e.abrupt("return",i.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i,r,c,s,o,l,d,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.img,i=t.name,r=t.lastname,c=t.occupation,s=t.institution,o=t.country,l=t.city,d=t.description,e.prev=1,e.next=4,m("user/".concat(n),{newData:{uid:n,img:a,name:i,lastname:r,occupation:c,institution:s,country:o,city:l,description:d}},"PUT");case 4:if((j=e.sent).ok){e.next=7;break}throw new Error(j.message);case 7:return e.abrupt("return",j.data);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("user/search-by-email/",{email:t},"POST");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("user/resend-code/",{email:t},"POST");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.newPassword,e.prev=1,e.next=4,m("auth/reset-password/".concat(n),{newPassword:a},"PUT");case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),qt=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("user/update/user-img",t,"PUT",{});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Vt=n(1293),Ut=n(1294),Qt=n(1295),Gt=n(185),Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.useState)(e),n=Object(p.a)(t,2),a=n[0],r=n[1],c=function(){r(e)},s=function(e){var t=e.target;r(Object(N.a)(Object(N.a)({},a),{},Object(D.a)({},t.name,t.value)))};return[a,s,c,r]},Jt=n(80),Zt=n.n(Jt),Xt=n(1292),Yt=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},errorContainer:{display:"flex",width:"100%",justifyContent:"center"},error:{marginTop:15,minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"},avatarContainer:{position:"relative"},photoProfile:function(t){var n=t.isHovered;return{width:e.spacing(30),height:e.spacing(30),marginTop:e.spacing(2),marginBottom:e.spacing(2),backgroundColor:n?(e.palette.type,e.palette.grey[500]):"dark"===e.palette.type?e.palette.grey[600]:e.palette.grey[400]}},addPhotoIcon:function(t){var n=t.isHovered;return{position:"absolute",bottom:25,right:25,border:"2px solid ".concat(e.palette.background.paper),backgroundColor:n?(e.palette.type,e.palette.grey[500]):"dark"===e.palette.type?e.palette.grey[600]:e.palette.grey[400]}},inputFile:{display:"none"},backdrop:{display:"flex",flexDirection:"column",zIndex:e.zIndex.modal+1,color:"#fff"}}})),_t=r.a.memo((function(){var e=Object(i.useState)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Yt({isHovered:n}),s=Object(l.b)(),o=P(),d=o.uiState,b=o.dispatch,g=x(),m=g.authState,h=g.setAuthState,f=Object(M.i)(),O=Object(i.useRef)(),v=Object(i.useState)(null),y=Object(p.a)(v,2),k=y[0],C=y[1],S=Object(i.useState)(null),T=Object(p.a)(S,2),D=T[0],I=T[1],E=Object(i.useState)(!1),L=Object(p.a)(E,2),R=L[0],F=L[1],B=f.uid,z=Object(w.b)().enqueueSnackbar;Object(i.useEffect)((function(){if(k){var e=URL.createObjectURL(k);return I(e),function(){return URL.revokeObjectURL(e)}}}),[k]);var H=Object(X.a)(["user-profile",B],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(B);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),W=H.isLoading,q=H.isError,V=H.data,U=Kt({name:V.name,lastname:V.lastname,occupation:V.occupation,institution:V.institution,country:V.country,city:V.city,description:V.description}),Q=Object(p.a)(U,3),J=Q[0],Z=Q[1],_=Q[2],$=J.name,te=J.lastname,ne=J.occupation,ae=J.institution,ie=J.country,re=J.city,se=J.description,le=Object(Y.a)(Bt,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.cancelQueries(["user-profile",B]);case 2:return n=s.getQueryData(["user-profile",B]),s.setQueryData(["user-profile",B],(function(e){return Object.assign({},Object(N.a)(Object(N.a)({},e),{},{uid:B,img:t.img,name:$,lastname:te,occupation:ne,institution:ae,country:ie,city:re,description:se}))})),e.abrupt("return",{previousUserProfile:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t){console.log(e),s.setQueryData(["user-profile",B],t.previousUserProfile),F(!1),b({type:A.ui.toggleModal,payload:"EditProfile"}),I(null),C(null),z(e.message,{variant:"error",autoHideDuration:2e3})},onSettled:function(){s.invalidateQueries(["user-profile",B]),s.invalidateQueries("recent-designs"),s.invalidateQueries("designs"),s.invalidateQueries([B,"user-public-designs"])},onSuccess:function(e,t){F(!1),b({type:A.ui.toggleModal,payload:"EditProfile"}),I(null),C(null),z("Usuario actualizado correctamente",{variant:"success",autoHideDuration:2e3}),h((function(t){return Object(N.a)(Object(N.a)({},t),{},{user:Object(N.a)(Object(N.a)({},t.user),{},{img:e.value.img})})}))}});if(q)return Object(a.jsx)("div",{className:c.errorContainer,children:Object(a.jsx)(Se.a,{severity:"error",className:c.error,children:"Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."})});if(W)return Object(a.jsx)(K.a,{children:"Cargando..."});var de=function(){b({type:A.ui.toggleModal,payload:"EditProfile"}),_(),I(null),C(null)},ue=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),F(!0),n=V.img,!k){e.next=10;break}return(a=new FormData).append("img",k),e.next=8,qt(a);case 8:(i=e.sent).ok?n=i.data.user.img:z(i.message,{variant:"error",autoHideDuration:2e3});case 10:return e.next=12,le.mutate({uid:m.user.uid,img:n,name:$,lastname:te,occupation:ne,institution:ae,country:ie,city:re,description:se});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],C(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(jt.a,{onClose:de,"aria-labelledby":"customized-dialog-title",open:d.isEditProfileModalOpen,children:[Object(a.jsxs)(pt.a,{id:"customized-dialog-title",onClose:de,children:["Editar perfil",Object(a.jsx)(ce.a,{"aria-label":"close",className:c.closeButton,onClick:de,children:Object(a.jsx)(Zt.a,{})})]}),Object(a.jsx)(bt.a,{dividers:!0,children:Object(a.jsxs)(G.a,{container:!0,spacing:1,children:[Object(a.jsxs)(G.a,{container:!0,alignItems:"center",justify:"center",className:c.avatarContainer,children:[Object(a.jsx)("input",{ref:O,accept:"image/x-png,image/jpeg",className:c.inputFile,type:"file",onChange:je}),Object(a.jsxs)("div",{style:{position:"relative"},children:[Object(a.jsx)(oe.a,{component:Gt.a,className:c.photoProfile,src:D||(V.img&&V.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(V.img):""),alt:V.name+" "+V.lastname,onClick:function(e){return null===O||void 0===O?void 0:O.current.click()},onMouseEnter:function(e){r(!0)},onMouseLeave:function(e){r(!1)}}),Object(a.jsx)(oe.a,{component:Gt.a,className:c.addPhotoIcon,onClick:function(e){return null===O||void 0===O?void 0:O.current.click()},onMouseEnter:function(e){r(!0)},onMouseLeave:function(e){r(!1)},children:Object(a.jsx)(Xt.a,{})})]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"name",value:$,onChange:Z,label:"Nombres",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"lastname",value:te,onChange:Z,label:"Apellidos",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"country",value:null!==ie&&void 0!==ie?ie:"",onChange:Z,label:"Pa\xeds",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"city",value:null!==re&&void 0!==re?re:"",onChange:Z,label:"Ciudad",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"occupation",value:null!==ne&&void 0!==ne?ne:"",onChange:Z,label:"Ocupaci\xf3n",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"institution",value:null!==ae&&void 0!==ae?ae:"",onChange:Z,label:"Instituci\xf3n",type:"text",fullWidth:!0})}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(gt.a,{multiline:!0,variant:"outlined",margin:"dense",name:"description",rows:4,value:null!==se&&void 0!==se?se:"",onChange:Z,label:"Descripci\xf3n",type:"text",fullWidth:!0})})]})}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:de,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:ue,children:"Guardar"})]})]}),Object(a.jsxs)(St.a,{className:c.backdrop,open:R,children:[Object(a.jsx)(Tt.a,{color:"inherit"}),Object(a.jsx)(K.a,{children:"Actualizando informaci\xf3n..."})]})]})})),$t=Object(B.a)((function(e){return{root:{display:"flex",width:"100%",padding:5,borderRadius:10,border:"1px solid ".concat(e.palette.divider),marginTop:10,cursor:"pointer",backgroundColor:e.palette.background.design,"&:hover":{zIndex:.5,background:e.palette.background.designHover}},card:{display:"flex",width:"100%"},body:{display:"flex",marginLeft:10,flexDirection:"column",justifyContent:"center"},photo:{margin:10,width:e.spacing(8),height:e.spacing(8)},name:{},location:{}}})),en=function(e){var t,n=e._id,i=e.name,r=e.lastname,c=e.city,s=e.country,o=(e.scoreMean,e.img),l=e.occupation,d=e.onClick,u=$t(),j=Object(M.g)(),p=function(e,t){e.stopPropagation(),d&&d(),j.push("/profile/".concat(t))};return Object(a.jsx)("div",{className:u.root,onClick:function(e){return p(e,n)},children:Object(a.jsxs)("div",{className:u.card,children:[Object(a.jsx)(oe.a,{className:u.photo,alt:je(i,r),src:o&&o.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(o):"",children:pe(i,r)}),Object(a.jsxs)("div",{className:u.body,children:[Object(a.jsx)("div",{className:u.name,children:Object(a.jsx)(K.a,{variant:"h5",color:"textPrimary",children:i+" "+r})}),Object(a.jsx)("div",{className:u.location,children:Object(a.jsx)(K.a,{variant:"subtitle1",color:"textSecondary",children:c&&s?c+", "+s:null!==(t=null!==c&&void 0!==c?c:s)&&void 0!==t?t:"Sin locaci\xf3n"})}),Object(a.jsx)("div",{children:Object(a.jsx)(K.a,{variant:"subtitle1",color:"textSecondary",children:l||"Sin ocupaci\xf3n"})})]})]})})},tn=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),nn=function(){var e=tn(),t=P(),n=t.uiState,i=t.dispatch,r=Object(M.i)().uid,c=Object(X.a)(["user-profile",r],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}).data,s=function(){i({type:A.ui.toggleModal,payload:"Contacts"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{onClose:s,"aria-labelledby":"customized-dialog-title",open:n.isContactsModalOpen,children:[Object(a.jsxs)(pt.a,{id:"customized-dialog-title",onClose:s,children:["Contactos",Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:s,children:Object(a.jsx)(Zt.a,{})})]}),Object(a.jsx)(bt.a,{dividers:!0,children:c.contacts.map((function(e){return Object(a.jsx)(en,Object(N.a)(Object(N.a)({},e),{},{onClick:s}),e._id)}))}),Object(a.jsx)(mt.a,{children:Object(a.jsx)(ee.a,{onClick:s,children:"Cerrar"})})]})})},an=Object(B.a)((function(e){var t;return{designPanel:{flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},photoProfile:(t={width:e.spacing(30),height:e.spacing(30),marginTop:e.spacing(2),marginBottom:e.spacing(2)},Object(D.a)(t,e.breakpoints.down("md"),{width:e.spacing(25),height:e.spacing(25)}),Object(D.a)(t,e.breakpoints.down("sm"),{width:e.spacing(15),height:e.spacing(15)}),t),spaceFirstDataFirstData:{marginBottom:e.spacing(1)},centerGrid:{display:"flex",alignItems:"center",justifyItems:"center"},spaceSecondData:{marginBottom:e.spacing(2)},spaceData:Object(D.a)({marginLeft:e.spacing(3),marginBottom:e.spacing(2),marginRight:e.spacing(3)},e.breakpoints.down("xs"),{marginLeft:e.spacing(1),marginRight:e.spacing(1)}),spaceDesign:Object(D.a)({marginLeft:e.spacing(7),marginTop:e.spacing(2),marginRight:e.spacing(7)},e.breakpoints.down("xs"),{marginLeft:e.spacing(1),marginRight:e.spacing(1)}),spaceIcons:{marginRight:e.spacing(1)},errorContainer:{display:"flex",width:"100%",justifyContent:"center"},error:{marginTop:15,minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"}}})),rn=function(){var e=an(),t=Object(l.b)(),n=x(),i=n.authState,r=n.setAuthState,c=P().dispatch,s=Object(M.g)(),o=Object(M.i)().uid,d=Object(w.b)().enqueueSnackbar,p=Object(X.a)(["user-profile",o],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),b=p.isLoading,g=p.isError,m=p.data,h=p.refetch,f=Object(Z.a)([o,"user-public-designs"],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,me(o,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),O=Object(Y.a)(Mt,{onSuccess:function(e,n,a){var i=n.uid,c=n.contacts;r((function(e){return Object(N.a)(Object(N.a)({},e),{},{user:Object.assign({},Object(N.a)(Object(N.a)({},e.user),{},{contacts:c}))})})),t.invalidateQueries(["user-profile",i])},onError:function(e){console.log(e),d("No se ha actualizado su lista de contactos",{variant:"error",autoHideDuration:2e3})}}),v=Object(Y.a)(xe,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cancelQueries("recent-designs");case 2:return e.next=4,t.cancelQueries("designs");case 4:return e.next=6,t.cancelQueries([i.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){t.invalidateQueries("recent-designs"),t.invalidateQueries("designs"),t.invalidateQueries([i.user.id,"user-public-designs"])},onError:function(e){console.log(e),d("No se han cargado sus dise\xf1o",{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){s.push("/designs/".concat(e.design._id))}}),y=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.mutate({path:"/",isPublic:!0});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(g)return Object(a.jsx)("div",{className:e.designPanel,children:Object(a.jsx)(Se.a,{severity:"error",className:e.error,children:"Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."})});var k=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O.mutate({uid:i.user.uid,contacts:[].concat(Object(_.a)(i.user.contacts),[o])});case 3:return t.invalidateQueries(["user-profile",o]),e.next=6,h();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O.mutate({uid:i.user.uid,contacts:i.user.contacts.filter((function(e){return e!==o}))});case 3:t.invalidateQueries(["user-profile",o]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,sm:3,children:[Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",children:b?Object(a.jsx)(Te.a,{animation:"wave",variant:"circle",className:e.photoProfile}):Object(a.jsx)(oe.a,{alt:m.name+" "+m.lastname,className:e.photoProfile,src:m.img&&m.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(m.img):""})}),Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",children:b?Object(a.jsx)(Te.a,{animation:"wave",height:42,width:"80%"}):m&&Object(a.jsx)(K.a,{align:"center",variant:"h5",component:"h2",children:m.name+" "+m.lastname})}),Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",children:b?Object(a.jsx)(Te.a,{animation:"wave",height:20,width:"50%"}):m&&m.occupation&&Object(a.jsx)(K.a,{className:e.spaceFirstData,color:"textSecondary",children:m.occupation})}),Object(a.jsxs)(G.a,{container:!0,alignItems:"center",justify:"center",className:e.spaceFirstData,children:[Object(a.jsx)(G.a,{item:!0,children:b?Object(a.jsx)(Te.a,{animation:"wave",variant:"circle",width:20,height:20}):m.contacts.length>0?Object(a.jsx)(ce.a,{onClick:function(){c({type:A.ui.toggleModal,payload:"Contacts"})},children:Object(a.jsx)(_e.a,{})}):Object(a.jsx)(_e.a,{})}),Object(a.jsx)(G.a,{item:!0,children:b?Object(a.jsx)(Te.a,{animation:"wave",width:20,height:20,style:{marginLeft:5}}):Object(a.jsxs)(K.a,{style:{marginLeft:8},children:[" ",m.contacts.length]})}),"\u30fb",Object(a.jsx)(G.a,{item:!0,children:b?Object(a.jsx)(Te.a,{animation:"wave",variant:"circle",width:20,height:20}):Object(a.jsx)(de.a,{})}),Object(a.jsx)(G.a,{item:!0,children:b?Object(a.jsx)(Te.a,{animation:"wave",width:20,height:20,style:{marginLeft:5}}):Object(a.jsxs)(K.a,{style:{marginLeft:8},children:[" ",m.scoreMean]})})]}),Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",className:e.spaceSecondData,children:b?Object(a.jsx)(Te.a,{animation:"wave",width:"50%",height:42,style:{marginLeft:5}}):i.user.uid===o?Object(a.jsx)(ee.a,{variant:"outlined",size:"small",onClick:function(){c({type:A.ui.toggleModal,payload:"EditProfile"})},startIcon:Object(a.jsx)(ze.a,{}),children:"Editar perfil"}):i.user.contacts.includes(o)?Object(a.jsx)(ee.a,{variant:"outlined",size:"small",onClick:C,startIcon:Object(a.jsx)(ht.a,{}),children:"Eliminar de mis contactos"}):Object(a.jsx)(ee.a,{variant:"outlined",size:"small",onClick:k,startIcon:Object(a.jsx)(Vt.a,{}),children:"Agregar a mis contactos"})}),Object(a.jsx)(J.a,{className:e.spaceData}),Object(a.jsxs)(G.a,{className:e.spaceData,children:[b?Object(a.jsx)(Te.a,{animation:"wave",width:"100%",height:40,style:{marginLeft:5}}):m&&m.institution&&Object(a.jsxs)(G.a,{container:!0,className:e.spaceSecondData,children:[Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(Ut.a,{className:e.spaceIcons})}),Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{className:e.spaceFirstData,color:"textSecondary",children:m.institution})})]}),b?Object(a.jsx)(Te.a,{animation:"wave",width:"100%",height:40,style:{marginLeft:5}}):m&&m.city&&m.country&&Object(a.jsxs)(G.a,{container:!0,className:e.spaceSecondData,children:[Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(Lt.a,{className:e.spaceIcons})}),Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{className:e.spaceFirstData,color:"textSecondary",children:m.city+", "+m.country})})]}),b?Object(a.jsx)(Te.a,{animation:"wave",width:"100%",height:40,style:{marginLeft:5}}):m&&Object(a.jsxs)(G.a,{container:!0,className:e.spaceSecondData,children:[Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(Qt.a,{className:e.spaceIcons})}),Object(a.jsx)(G.a,{item:!0,children:Object(a.jsx)(K.a,{className:e.spaceFirstData,color:"textSecondary",children:m.email})})]}),Object(a.jsx)(J.a,{className:e.spaceSecondData}),b?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te.a,{animation:"wave",width:100,height:20,style:{marginLeft:5}}),Object(a.jsx)(Te.a,{animation:"wave",width:"100%",height:40,style:{marginLeft:5}})]}):m&&m.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{color:"textSecondary",className:e.spaceSecondData,children:"Descripci\xf3n"}),Object(a.jsx)(K.a,{children:m.description})]})]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:9,className:e.designPanel,children:Object(a.jsxs)(G.a,{className:e.spaceDesign,children:[Object(a.jsx)(K.a,{variant:"h4",children:"Dise\xf1os P\xfablicos"}),Object(a.jsx)(J.a,{}),!g&&!b&&i.user.uid===o&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(_t,{})}),Object(a.jsx)(Ie,Object(N.a)(Object(N.a)({},f),{},{label:"user-profile",handleCreateDesign:y})),!g&&!b&&Object(a.jsx)(nn,{})]})})]})},cn=n(1308),sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAACEBSURBVHja7J1JUBvb2b8PbQ2WrMGAhABJoMlIRBTGxIbYlBekUhU211n5v4lXziZe+dvEq+uV78rZxCtnE6+czccqZEOqUqFSLuwCO2DLKJaMJtDAJIQ1ANZg8V9EuG59Ma2pu9Xd+j1VVLkuXHX3efs8et/Tp8/pODk5IQAAIAQoNAEAAMICAAAICwAAYQEAAIQFAAAQFgAAwgIAAAgLAAAgLAAAhAUAABAWAAA0ggRNAKqxubmpy+fz3YVCQVcoFLoLhYKuWCzqSqWS+vTny5cvsnK5LK/8yE5OTuSEENLR0ZGnKKpAUVSeoqj8uXPnChKJJHv6I5VKkzKZLCmTyfZlMllSLpfvDwwMJNHq4Ft04OVnsLm5qTs8PLQcHR1ZKz+W4+Nja7lclv/oz6Y5Op2Fr+k/ReUVCkVYqVRGlEplWKlUhi9cuBCB0CAs0AYkEgl5Npt1ZrPZ0Ww268zlcs5isajjWEiMCE0qlSZVKpVfrVb71Wq1R61W+/v7+/OIMoQFBEowGLSm0+mr6XR6NJ1OX61kTNMivdwFiqLyWq32jVar9Wi12jd2uz2MuwDCAjwlEAg4Dw4Orh0cHNzI5XIugWVOrGRiKpXK19nZ+bKzs/O1w+Hw4y6BsECLiEaj6v39/elUKjX16dOna20uqJoEdvHixdddXV2L3d3dC2azOYtmgbAAy2Xe/v7+dDKZnP78+bMRgmpcYOfPn4/rdLqF7u7uBZSPEBZgUFJ7e3sze3t705VBckiKYXlJpdKkXq9f0Ov185AXhAXqZGNjQ7e7uzuzu7v7y3w+j0yKQ3nJ5fJ4T0/P33p6euYHBwcxhQLCAmfh8Xhmdnd3ZzKZzCgk1Xp5aTQaT09Pz/zo6Og8mgPCAoSQUChk3d7evrWzszNTmSEOUfFMXB0dHXmDwTDf29s7Z7PZUDJCWO2H1+ud2trauo1sSnhZV19f36zb7V5Ec0BYomdlZeX21tbWLYxNCVtccrk83tfXNzc+Pj6L5oCwREU8HpfH4/FfJxKJ2yKfcd524qIoKt/f3z9rNBr/bDQa8XoQhCVcotGoOh6P30kkErchKfHLqyKu55iUCmEJilgspo7FYhBVG4vLZDI9N5lMEBeExW+Wl5fvxmKxOxAVxGUymZ5PTEw8Q1NAWLxjdXX1VjQa/U2pVFJDVuBUWhKJJGs2m/905cqVOTQHhNVyvF7v1Obm5t3j42MrRAXOEpdCoQgPDAw8w3QICKslhEIh68bGxt2Dg4MpiArUKq7Ozs7FwcHBZ5iACmFxxtLS0t14PI5xKtCwuIxG4/PJyUmMb0FY7JZ/kUjkt5j0CZiQllwuj1sslj+iTISwGCUajaojkci9vb29GYgKMC0uvV4/b7FYnmL+FoTVNB6PZyYSidwrlUq30BqALSQSyZzFYnmKlSEgrIazqnA4fD+ZTP4cWRXgKtvS6XT/sFqtT5BtQVg14/V6p0Kh0P1isXgbrQG4RiqVztpsticY24KwqvLq1at7W1tbeKUGtDzb6uvrm71+/fpTNAWE9V8Eg0FrMBj8XWWLLMgK8EJaKpXKZ7fbf4+15iGsr7x7924mGAw+gKgAX8Vlt9sfX758ua0H5CEsQsjLly/vb29v/wqyAnyXVm9v719u3LjxBMJqQyKRSH8gEHiAJYqBkKSl0Wg8DofjscViSUBYbYLP57u6vr7+AE8BgRCRSqWzly5deuxyud5AWCLn7du3t0Kh0P8gqwJCz7ZsNtsfxsbG2mbZGkm7RRgvLQMRMR0KhUg+n9e1y0vUbZVhvXjx4gHeBQRizLT0ev38zZs3H0NYIiAWi6n9fv/36XT6GmQFxCotrVb72ul0/iDmdeRFL6xIJNLv8/keHR0d3cU9DcSOUql85nK5Hor1CaKohRUIBJx+v//7fD5/B7cyaBfkcvlzp9P5g8Ph8ENYAuHjx4+jPp/vEZaEAe2IRCKZc7lcD4eGhjwQFs/x+XxXfT7fo3K5PINbF7QrFEXNu1yuh2KaqyU6YX348OHqhw8fHhMMrgNACCELw8PDD4aHh0UhLQqyAkDUTH/48OHxhw8frkJYPCsDISsAzpaWz+cTvLREIazTAXbICoCzpeXz+R59/PhxFMJqIYFAwIkBdgCqUy6XZ3w+36NAIOCEsFpAJBLp9/v932PqAgC1USqVbvn9/u8jkUg/hMUhsVhM7fP5HmFSKAD1kc/n7/h8vkexWEwNYXGE3+//Hq/bANAYR0dHd/1+//cQFge8ePHiQeVFZgBAg6TT6WsvXrx4AGGxyNLS0l0sEQMAI0zv7e3NLC0tCaZSEZSw3r59ewuL7wHArLTi8fidt2/fCuLBlWBWHPX5fFexrDEA7EgrFAqR8+fPJ/j+3qEgMqxIJNK/vr6OPQMBYFFa6+vrD/g+3UEQwgoEAtjdBgCWKRaLtwOBAK8H4XkvrJcvX96v7BsIAGCZTCYz+vLly/sQVgO8e/duBjsyA8Btabi9vf2rd+/e8fJVN94OugeDQWswGMS4FQAtkFYwGCQqlcpvt9vDyLBqE9bvICsAWiqt36EkrIFXr17dy+VyLtwzALSOXC7nevXq1T0Iiwav1zu1tbV1G9kVAK3Psra2tm57vd4pCOsbRKNRdSgUug9ZAcAfaYVCofvRaJQXKzvwSljhcPg+5lsBwC+KxeLtcDjMi6kOvBGWx+OZSSaTP8ftAQD/SCaTP/d4PC2f6sALYUWjUXUkErmHUhAA/paGkUjkXqtLQ14IKxKJ3MMyxwDwm1KpdKuSWLSvsLxe71RlfSsAAM/Z29ubaeVTw5YLKxKJ/BalIACCKg1/25bCWlpaupvP5424BwAQDvl83tiqVUpbJqxQKGTF6qEACDPLisfjd0KhkLVthLWxsXEXsgJAuNKq9GHxC8vr9U4dHBxMIeYACJeDg4MprgfgWyKszc1NZFcAiCDLqvRl8QprdXX11vHxsRWxBkD4HB8fW1dXVzmbQ8m5sKLR6G+QXQEgniyr0qfFJ6zl5eW7pVJJjRgDIB5KpZJ6eXmZk9KQM2HFYjF1LBbDNAYARJhlxWKxO7FYjPVkhEthQVYAiFxaohBWNBpVJxIJrHMFgIhJJBK32V7NgRNhYUY7AO2RZVX6unCFFY/H5ciuAGifLCsej8uFLKxfI7sCoK2yrF8LVljIrgBovyxLkMJaWVm5XS6X5QghAO1DuVyWr6yssCItVoW1tbV1C+UgAO1XFlb6vnCE5fV6p7A4HwDtST6fN7KxkgNrwsLuzQC0fZbFeFnIirBCoZA1k8mMImYAtC+ZTGaU6VVJWRHW9vY2xq4AANMVF/BbWDs7O9i2CwDAuAsYF5bH45k5OTnBVAYAADk5OZEzucU948La3d2dQTkIADgtCytO4J+wNjY2dBhsBwD8mEwmM7qxsaHjnbCQXQEA2MyymBbWLxEbAABbbmBMWMFg0IqZ7QCAb5HP543BYLDpOVmMCWtvbw/lIADgzLKw4gjeCAuyAgCw6ghGhBUMBq3FYlGHkAAAzqJYLOqaLQsZEdb+/v40ykEAQLWysOKK1gormUxCVgAA1l3RtLCi0aj68+fPeDoIAKjK58+fjc1sBda0sFAOAgC4KgubFlYqlZpCDAAAXDijaWF9+vTpGkIAAODCGU0JKxAIONH8AACu3NGUsA4ODq4RjF8BAOpjuuIOzoV1A20PAODKHZJmDprL5Vxo+taRyWTI/v4+IYSQtbW1M/9uZGSEEEJId3c30Wg0vL6mWCxGisUiOTo6IqFQ6My/M5vNRKvVfv23RCJBnAREo+7oODk5aeiAwWDQ+u7duz8JpST0er1ndgCbzUbcbrcgAn18fEy2t7dpb/xqjIyMkN7eXqJQKHgjqUQiQXZ2dhr+DJVKRSwWC2/kJcY4MczC5cuXf2O328OcZFjpdPoqwfgVpx0gFArRZh21sra2RtbW1ojZbCZOp7NlHSIWixGv10sKhQIT39hfr8vpdBKbzdYScYkxTiwxXXEIZ8LCUsgcduzV1VXGPzcajZJoNEpGRkaI1WrltFO/f/++qYyKDr/fT8LhMBkbGyMGgwFx4ikVh8xymWEBllleXmatY//4m3xvb4+Mj4+znpWkUiny+vVrRrIqOgqFAlleXiZOp5MMDQ0hTvwUVt0OaegpYSKRkJfLZWzlxSKlUoksLi6y3glO2dnZIUtLS6RUKrGagSwuLrIuq/+bbXm9XsSJh5TLZXkikajLIw1pOpvNOgnGr1jtBEtLSySVSlX929PBZqVS+c3yZ2dnhxwdHZFIJEJyuVzV7GdpaYlMTk4y/g2+s7NTc7nU1dVF+vv7z7ym0wHtak8STwmFQkSpVDJeTokxThwzXXGJh21hYfyK5dS/WicwGAzE4XCQrq6uqn9HCCFWq5WkUikSCARos4FUKkVWVlbIxMQEY9eTyWTI8vJy1b8zm83EZrNVfaSvUCi+ysftdpNwOFz1adza2tqZskCcWkfFJTULi2rwIHglhyXC4TCJRqO0fzMyMkImJiaqdoJvZS4TExNf5/vQZUPhcJixa/rXv/5F+3uZTEYmJibI2NhYQ/OPrFYr+cUvflG1Pf79738zVkqJMU4tElZdLmlIWLlcDsJigePj46qZwtTUVNOljdVqJVNTU1Wzh+PjY0Y6Nl2Jo1KpyPXr15vOfBQKBZmcnKSVQy6XqyqZdo1Tq6jXJQ0JC+u3s8P79+9pf9/It3W1b/FmzqfZji2TychPf/pTxmZ1SyQSMj4+TmQy2Zl/8/Hjx6azLLHFqZXU65K6hbW5uQlZsUAqlaIds3A6nYzPKTIYDMTpdNKWHLUMKJ9FtQFxt9vN+CsoCoWC9q2FQqFAtre3ESceUY9T6hbW4eGhheAJIeMEAgHasomtuURDQ0NEpVI1dF50lEolEovFaDuhyWRi5ZpMJhNthpNIJBAn/jBdcQo7wjo6OrJCL8ySyWRov7UvXbrE6vEvX75M++3dyBhJNBqlnW/lcDhYvabBwUHaa2qkLBRjnPhAPU6BsHgAXYmiUqlYy0R+PE5Cl5E0MlC9t7dHm10xNcZzFr29vbS/P109od3j1A7CshDAKHSPpi0Wbpq7v7//zN/F4/G6y0G6TITuWEwhkUiI2Ww+8/fpdLrt48QjYbFXEh4fHyPDYrgcpCud6Dodk9AdJ5fLkUwmU/NnVcteqmU/TKFUKuk6SdvHiS/U45S6Z7rjHUJmoevcBoOBs1cvJBIJ6erqOvNp0/7+fs1P9Oiyl66uLs6uaWhoiLFBcDHGiS/U4xQKymgtdJ1br9dzei50x6unhPr06RNvrglxEhd1CQtzsJiHbqyHrqRhg9Mlh7/F4eFhzZ9zcHDAm2tCnIRBrW6pS1j5fL6bYA4WY5RKJdpxke7ubk7Ph25Fy1onJla7JiGuVS7GOPGM6YpbmBVWoVBAhsUgdAOkMpmM86VDqsmklnk+1QazpVIp4sSDOPGNWt1Sr7C6CWAMus5NN6uZTeiOW0tHqDYhU4jrkosxTjwUFjIsvlMsFnmXidC9OFzLVAC6v6H7bMSJ2zi1RYaFVRr4cUOyCZsdUKjCarc4tehLgXlhlUolNVTSvjckXaaBOCFOzVCrWyAsAACEBaojxLEGxAkIRlhfvnyRoWkBAExTq1vqmkCC9whBqzg+PiZ///vfGfs8g8Eg+B1nxEStbqHY+FAAAOCDsFASMohQ36tDnAALwqrJLXUJ6+TkBBkWR/Dx0bTY5v4gTvyhVrdgeRmeQveyLZ87IF1nadU1IU7ioS5hdXR05KESbr4JW3VD0nXAWkqjasJiaudlxKm5OPGNWt1S11NCiqIKX758gWkYgu7GotstmU3ojlvLqgTVXm4+OjpqaIkZhUJBvvvuu7r+n1gsRlZXVxEnIWROFFVTqkrV+aHIsBiErnMXCgXO37qvth54Ld/c1YQlxJUExBgnHgqrJrdAWC3uCHQvz3K9oQBdx1OpVDV/c9NtRSXEJXzFGifRC+vcuXMFAhiFbltzrjs33fE6Oztr/pwLFy6c+Tu69d4RJ27jxCdqdUtdwpJIJFkohlno0ne6zUjZgO54dOuI1/O3je66jDgxHyc+UatbIKwWQ7dHXyqV4qxzl0ol2vXA61m3vNq+g3Q7KCNO3MUJwgJ1o9FoaMdHuNp+nO44Mpmsrid7CoWCdhwrkUggTjyIk+iFJZVKk1AM81itZ298G4lEODkHOonQnd9Z0G2pvrOzI8jdXcQYJ75Qq1vqEpZMJoOwOC43crkcicVirB4/lUrRCqSRreWrbd0eCAQQJx7EiS/U6pZ6hbUPvbBTbtA9hVpfX2d1jOTDhw9n/s5gMDRUZkgkEmKz2WizLLrNSREnbuLEI2HV5BZkWDzB4XDQfnuHQiFWjhsOh2m/tenOqxp0wiKEkLdv3wpuIqkY4yTaDEsul+8TQhagF+bp6uqi/fb2+/2MlxypVIqsra3RfmvTDZ5XQ6FQEKfTeebvC4UCWVlZEdQ0BzHGiQcsVNzCrLAGBgaQYbGIy+Wi/f3q6ipjnSGTyZDXr183dT61Zll0m36mUimytLTEuLRKpRJrTyPFGKdWU6tbsLwMz8ZIRkZGqnaGcDjc1HF2dnbIP//5T9o3/p1OJyNjIhKJhPzkJz+pmkG8ePGCsSeHmUyGLC0tsTZGJsY4CYW6XzqiKCpfLpdhF5awWq0knU7TzrdZW1sjiUSCOBwO2vLkWx3Z5/NV7chdXV1kaGiIsWsyGAxkZGSEtqzJ5XJkcXGR2Gw2YrPZGtrSPpPJkGg0WtM4kl6vR5x4Qj3vKNctLIVCET48PBSVJEKhEGuDpT9mZGSkprkyIyMj5PDwkDbjSKVSZHl5mahUKmKxWIhSqfxmp9jZ2SFHR0ckkUjUlMGoVCoyOTnJioiPjo6qtvNpLAwGA9Hr9USr1Z45PpNKpb6+V0cnw2+VqUzMWRJjnFqBQqEIsyYspVIZEZuweJf2SiRkcnKSLC0tVb15c7lcXZ21Wif42c9+xtrb/m63m0ilUuL3+2sqh9go6Ww2G3G73YgTj1AqlZGas7EGPjwMpXAjrampqaoTMJks227evNlQKVYPQ0ND5MqVKy1p05GREcZkJfY4cSwsVjMsCItDxsbGiE6nY2TlzGZLVaYwmUxEo9GQ9+/fc/KKTldXFxkeHmb10b8Y4yQKYV24cCFC/jMXaxo64a6Dd3d3Mz7WZjAYiMvlaslTJo1GQ6ampkgsFiPr6+usLDXc1dVFBgcHiclkQpz4y0LFKewIa2BgIPnmzRtYhGMUCgVxu93EZrOR7e3tpsZDnE4n6e3t5UUHMJlMxGQykVgsRpLJZNOrHshkMjI0NES6u7tbcn1ijROb1DO/s+Pk5KTuA/z1r3/932KxeBsaaS2ZTIbs7/9ngjBdx3A6nUQqldI+ceMTsViMFIvFqk8VT+V0Cl/LJbHGiQmkUunsd9999/9Yy7AIIUSlUvkPDg5gjBaj0Wi+fvuKaWzjxyUc04PkiBO/UKlU/nr+vqGZ7mq12o+mBgA0S70uaVRYHjQ1AIABYdXlkmYyLKzaAABohgVOMqz+/v489igEADQDRVH5/v7+ujzS8GoNWq0WcxsAAA3TiEOaERbGsQAAzQirboc0m2FhHAsA0AgLnGZYdrsd7xQCABqmEYc0teKoSqXyodkBAFy5oylhdXZ2vkTTAwC4ckezwnpNMI4FAKiPhYo7uBWWw+HAKzoAAM7c0fSuORcvXnyN5gcAcOGMpoXV1dW1iBAAALhwRtPC6u7uXiAYxwIA1MZCxRmtEZbZbM6eP38+jjgAAKpx/vz5uNlszrZMWIQQotPpkGEBAFh3BSPCQlkIAGC7HGRMWHa7PSyVSpOIBwDgLKRSabLZV/oopk5Gr9cjwwIAsOoIJoU1j7IQAHBWOVhxBD+EZbfbw3K5HE8LAQD/hVwujzOxwgvF5En19PT8DaEBALDlBqaFhbIQAPBf5WDFDfwS1uDgYFKj0WDpZADAVzQajWdwcJCRWQQU0yeHLAsAwEZ2xYqwRkdH5zs6OrAFGACAdHR05EdHR/krLEIIMRgM8wgVAIBpF7AirN7e3jmUhQCgHKy4gN/CstlsYQy+A9DeaDQaj81mY3R3LYqtk+3r65tFlgVA+2ZXFQcwCmvCcrvdi5j5DkB7IpfL4263m/HViCk2T7qvrw9jWQC0Z3Y1x8YHsyqs8fHxWYqiMMUBgDaCoqj8+Pj4LCufzfbJ9/f3zyKEALQPbPZ51oVlNBr/jLIQgPYpByt9XrDCyiPLAqB9siuj0cjaMBDFxUUYjcbnyLIAaIvs6jmbB+BEWGazOYssCwDxZ1fNbOHFG2ERQojJZEKWBYCIs6tKH2cVLoWVhbQAEK+sTCZTlu0DUVxe1cTExDOJRJJFfAEQDxKJJDsxMfGMi2NRXF+c2Wz+E7IsAMSTXVX6NCdwLqwrV67MKRSKMOIMgPBRKBThK1euzHF1PKoVFzkwMPAMWRYAws+uKn2ZM1oiLLfbvdjZ2bmIeAMgXDo7OxfZWJGBd8IihJDBwUFkWQAIOLuq9GFOaZmwbDZbGDPgARCmrIxG43OmVxPltbAIIWRycvIZFvkDQFjI5fL45OTks1Ycm2r1xVsslj8iywJAONlVpc+2hJYLy+12L+r1emwLBoAA0Ov181wPtPNKWJUs66lEIpnD7QAAf5FIJHMWi+VpK8+BF8Iym83ZSkOgNASAv6XgU7ZXYxCEsAj5zxb3Op3uH7gvAOAfOp3uH0xuOS94YRFCiNVqfSKVSrFuFgA8QiqVzlqt1id8OBdeCctsNmdtNtsTlIYA8KcUtNlsT1pdCvJSWIT856khdo0GgB+y6uvrm23lU0HeC4sQQq5fv/5UpVL5cL8A0DpUKpXv+vXrT/l0ThRfG8tut/8eWRYArcuuKn2QV/BZWGG73f4Y0gKgJbJ6bLfbebdunYTPrXb58uX5w8ND5/b2NiGETOM+AoB9WfX29v7l8uXLvHz7hOJ76924ceOJRqPx4D4CgH00Go3nxo0bT/h6fpQQGtHhcDzG/CwA2EUqlc46HI7HfD5HQQjLYrEkLl26hPEsAFgsBS9duvTYYrEkICwGcLlcb2w22x8gLQCYl5XNZvuDy+V6w/cTlQipVcfGxuby+bwuHo8TgkF4ABiRldFofD42NiaI1VIoobXu5OTks8r6Wci0AGhSVnq9fr5Vq4e2hbAIIeTmzZuPtVrta9xvADSOVqt9ffPmzcdCOmdKqI3tdDp/UCqVz3DbAVA/SqXymdPp/EFo5y1YYZlMpqzL5Xool8uf4/YDoHbkcvlzl8v10GQyZYV27pSQG95isSScTucPWF4ZgNqQSCRzTqfzB75PXxClsAghxOFw+F0u10OKorCRBQB0nZ2i5l0u10OHw+EX7DWIIRBDQ0Mel8v1kODJIQBnseByuR4ODQ0J+jU3SizRcLlcb4aHhx9AWgD8t6yGh4cfCGFiaNsIixBChoeHIS0AviGr4eHhN2K4mI6TkxPRRcjn8131+XyPyuXyDO5X0K6cjlmJIbMStbAIIeTjx4+jPp/vUalUuoVbF7QbEolkTgxjVm0jLEIICQQCTr/f/30+n7+DWxi0C3K5/LnT6fxByE8D21JYhBASiUT6fT7fo6Ojo7u4lYHYUSqVz1wu10OhzrNqe2ERQkgsFlP7/f7v0+n0NYJVHoA4WdBqta+dTucPQpzBDmF9gxcvXjzY29ubgbSA2GSl1+vnhfYiM4RVA0tLS3fj8fgdSAuIRVZGo/G5kJaIgbDq5O3bt7dCodD/QFpA6LKy2Wx/EMriexBWE/h8vqvr6+sPisXibdz3QGhIpdLZS5cuPRbTHCsIqwqRSKQ/EAg8yGQyo8i2gFCyKo1G43E4HI/F+iQQwqrCy5cv729vb/8K0gJ8l1Vvb+9f+LxvIITFEe/evZsJBoMPIC3AV1nZ7fbHfN2RGcJqAcFg0BoMBn+Xy+VcEBfgi6hUKpXPbrf/3m63h9u9MSCsb/Dq1at7W1tbtyEt0GpZ9fX1zV6/fv0pmgLCosXr9U6FQqH7eIoIWoFUKp212WxP3G73IloDwqqJaDSqDofD95PJ5M+RbQGusiqdTvcPq9X6xGw2Z9EcEFbdeDyemUgkcg9L1QA2kUgkcxaL5eno6Cj2J4Cwms+2IpHIPbyLCNjIqvR6/bzFYnmKrArCYhSv1zsViUR+m8/njRAXaFZUcrk8brFY/oixKgiLVfASNWhWVu300jKExQNCoZB1Y2Pj7sHBwRTEBWoVVWdn5+Lg4OAzm80WRnNAWC0pEzc3N+8eHx9bIS5wlqgUCkV4YGDgGco/CIsXrK6u3opGo78plUpqiAucikoikWTNZvOfrly5MofmgLB4x/Ly8t1YLIbxLbBgMpmeT0xMYJwKwuI3sVhMHYvF7iQSCbzi04ai6u/vnzWZTM/FvL46hCVCotGoOh6PQ1xtJCqj0fgc86kgLEETj8fl8Xj814lE4na5XJZDXuKRFEVR+Yqo/mw0GvNoEghLVKysrNze2tq6hcmnwhaVXC6P9/X1zY2Pj8+iOSAs0eP1eqe2trZuY4lmYYlKo9F4+vr6ZjE9AcJqS0KhkHV7e/vWzs7OzMnJCcpFHkqqo6MjbzAY5nt7e+cw4RPCAhU8Hs/M7u7uDLIu/mRTPT0981hBAcICNGxsbOh2d3dndnd3f4mxLm4lJZfL4z09PX/r6emZHxwcTKJJICxQB8Fg0Lq3tzezt7c3XSwWdZAX85KSSqVJvV6/oNfr57F2OoQFGJTX/v7+dDKZnP78+TMyryYkdf78+bhOp1vo7u5egKQgLMAy0WhUvb+/P51KpaY+ffp0rfKfIbAzBEUIIRcvXnzd1dW12N3dvYDJnRAWaCGBQMB5cHBw7eDg4EZlq7J2FtgCIYSoVCpfZ2fny87OztcOh8OPuwTCAjwuH9Pp9NV0Oj2aTqevinyG/QJFUXmtVvtGq9V6tFrtG5R5EBYQMIlEQp7NZp3ZbHY0m806c7mcszKIL6RMbIEQQqRSaVKlUvnVarVfrVZ71Gq1v7+/H6/FQFhA7GxubuoODw8tR0dH1sqP5fj42FrJyAjHQls4/QdFUXmFQhFWKpURpVIZViqV4QsXLkQGBgYw1QDCAuBsoeXz+e5CoaArFArdhUJBVywWdaVSSX368+XLF1m5XJZXfmSVGfuko6MjT1FUgaKoPEVR+XPnzhUkEkn29EcqlSZlMllSJpPty2SypFwu34eQAIQFABA8FJoAAABhAQAAhAUAgLAAAADCAgAACAsAAGEBAAA/+f8DACiJ+qG5fz2ZAAAAAElFTkSuQmCC",on=n(1303),ln=n(1304),dn=n(1305),un=n(1306),jn=n(1307),pn=n(1342),bn=n(604),gn=n.n(bn),mn=n(1299),hn=n(619),fn=n(296),xn=n(1296),On=n(1297),vn=n(1298),yn=Object(i.createContext)();function wn(){var e=Object(i.useContext)(yn);if(void 0===e)throw new Error("useUserConfigState must be used within a UserConfigProvider");return e}var kn=function(e){var t=e.children,n=x().authState,r=Object(i.useState)({darkTheme:!1,modeAdvanced:!1}),c=Object(p.a)(r,2),s=c[0],o=c[1];Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("darkTheme"));null!==e&&o((function(t){return Object(N.a)(Object(N.a)({},t),{},{darkTheme:e})}))}),[]),Object(i.useEffect)((function(){null!==n.user&&localStorage.setItem("darkTheme",JSON.stringify(s.darkTheme))}),[n.user,s.darkTheme]);var l,d=(l=s.darkTheme,Object(hn.a)({palette:{type:l?"dark":"light",primary:{dark:fn.a[500],light:xn.a[500],main:l?fn.a[500]:xn.a[500]},secondary:{dark:On.a[900],light:vn.a[500],main:l?On.a[900]:vn.a[500]},text:{primary:l?"#F4F4F4":"#36393F"},background:{default:l?"#36393F":"#F4F4F4",paper:l?"#36393F":"#F4F4F4",workSpace:l?"#2F3136":"#FEFEFE",navbar:l?"#202225":"#DCDCDC",design:l?"#36393F":"#F4F4F4",designHover:l?"#393D46":"#F6F6F6"}}}));return Object(a.jsx)(yn.Provider,{value:{userConfig:s,setUserConfig:o},children:Object(a.jsx)(mn.a,{theme:d,children:t})})},Cn=n(1301),Sn=n(1302),Tn=n(1300),Dn=Object(B.a)((function(e){return{close:{position:"absolute",top:5,right:5,padding:15},header:{display:"flex",justifyContent:"center",alignItems:"center"}}})),Nn=r.a.memo((function(e){var t=e.isOpen,n=e.handleClose,i=e.maxWidth,r=void 0===i?"sm":i,c=e.title,s=void 0===c?"":c,o=e.subtitle,l=void 0===o?"":o,d=e.image,u=e.content,j=e.actions,p=Dn();return Object(a.jsxs)(jt.a,{fullWidth:!0,maxWidth:r,open:t,onClose:n,children:[Object(a.jsxs)(pt.a,{className:p.header,disableTypography:!0,children:[Object(a.jsx)(ce.a,{className:p.close,onClick:n,color:"inherit",size:"small",children:Object(a.jsx)(Tn.a,{})}),Object(a.jsxs)(G.a,{container:!0,spacing:1,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:d}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(K.a,{align:"center",variant:"h5",component:"p",children:s})}),Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(K.a,{align:"center",variant:"subtitle1",component:"h1",children:l})})]})]}),Object(a.jsx)(bt.a,{children:u}),j&&Object(a.jsx)(mt.a,{children:j})]})})),An=Object(B.a)((function(e){return{formcontrol:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},margin:{margin:e.spacing(1)},form:{display:"flex",flexDirection:"column",marginLeft:"10%",marginRight:"10%",width:"80%",overflow:"auto"},logo:{display:"block",marginLeft:"auto",marginRight:"auto",width:"30%",marginTop:15,marginBottom:15},footer:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",paddingTop:30,paddingBottom:15},link:{marginTop:10,marginBottom:10},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),In={emailError:null,passwordError:null},En=function(){var e=An(),t=Object(M.g)(),n=P(),r=n.uiState,c=n.dispatch,s=x().login,o=Object(i.useState)(In),l=Object(p.a)(o,2),d=l[0],b=l[1],g=Object(i.useState)(!1),m=Object(p.a)(g,2),h=m[0],f=m[1],O=Object(i.useState)(!1),v=Object(p.a)(O,2),y=v[0],w=v[1],k=Kt({email:"",password:""}),C=Object(p.a)(k,3),S=C[0],T=C[1],I=C[2],E=S.email,L=S.password,R=d.emailError,F=d.passwordError,B=function(e){f(null),b((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e.target.name+"Error",null))})),T(e)},z=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object.keys(S).map((function(e,t){return""===S[e].trim()?(b((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e+"Error","Este campo es requerido."))})),!1):(b((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e+"Error",null))})),!0)})).reduce((function(e,t){return e&&t}))){e.next=3;break}return e.abrupt("return");case 3:if(/^[-\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(E)||(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{emailError:"El correo debe tener la siguiente estructura: example@example.com"})})),0)){e.next=5;break}return e.abrupt("return");case 5:if(L.length>=8&&L.length<=16||(b((function(e){return Object(N.a)(Object(N.a)({},e),{},{passwordError:"La contrase\xf1a debe tener entre 8 y 16 caracteres."})})),0)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,s(E,L);case 9:(n=e.sent).ok?H():f(n.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){c({type:A.ui.toggleModal,payload:"Login"}),I(),b(In),w(!1),f(null)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Nn,{isOpen:r.isLoginModalOpen,handleClose:H,title:"\xa1Bienvenido!",subtitle:"Completa los campos para ingresar con tu cuenta",image:Object(a.jsx)("img",{className:e.logo,src:sn,alt:"Logo"}),content:Object(a.jsxs)("form",{className:e.form,onSubmit:z,noValidate:!0,children:[h&&Object(a.jsxs)(Se.a,{severity:"error",children:[" ",h]}),Object(a.jsx)(gt.a,{error:!!R,helperText:R,margin:"dense",variant:"outlined",name:"email",value:E,onChange:B,label:"Email",type:"email",fullWidth:!0}),Object(a.jsx)(gt.a,{error:!!F,helperText:F,margin:"dense",variant:"outlined",name:"password",value:L,onChange:B,label:"Contrase\xf1a",type:y?"text":"password",fullWidth:!0,InputProps:{endAdornment:Object(a.jsx)(ce.a,{onClick:function(){w(!y)},onMouseDown:function(e){e.preventDefault()},children:y?Object(a.jsx)(Cn.a,{}):Object(a.jsx)(Sn.a,{})})}}),Object(a.jsxs)("div",{className:e.footer,children:[Object(a.jsx)(ee.a,{variant:"outlined",type:"submit",fullWidth:!0,children:"Iniciar Sesi\xf3n"}),Object(a.jsx)("div",{style:{paddingTop:20},children:Object(a.jsx)($.a,{href:"#",align:"center",variant:"body1",onClick:function(e){e.preventDefault(),c({type:A.ui.toggleModal,payload:"Login"}),t.push("/reset-password")},children:"\xbfOlvidaste tu contrase\xf1a?"})}),Object(a.jsx)("div",{style:{paddingBottom:15,paddingTop:10},children:Object(a.jsx)($.a,{href:"#",variant:"body1",onClick:function(e){e.preventDefault(),H(),c({type:A.ui.toggleModal,payload:"Register"})},children:"\xbfNo tienes cuenta? Registrate"})})]})]})})})},Pn=Object(B.a)((function(e){return{form:{display:"flex",flexDirection:"column",marginLeft:"10%",marginRight:"10%",width:"80%"},logo:{display:"block",marginLeft:"auto",marginRight:"auto",width:"30%",marginTop:15,marginBottom:15},footer:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",paddingTop:30,paddingBottom:15},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),Ln={nameError:null,lastnameError:null,emailError:null,passwordError:null,confirmPasswordError:null},Rn=r.a.memo((function(){var e=Pn(),t=P(),n=t.uiState,r=t.dispatch,c=x().register,s=Object(i.useState)(null),o=Object(p.a)(s,2),l=o[0],d=o[1],b=Object(i.useState)(Ln),g=Object(p.a)(b,2),m=g[0],h=g[1],f=Kt({name:"",lastname:"",email:"",password:"",confirmPassword:""}),O=Object(p.a)(f,3),v=O[0],y=O[1],w=O[2],k=v.name,C=v.lastname,S=v.email,T=v.password,I=v.confirmPassword,E=m.nameError,L=m.lastnameError,R=m.emailError,F=m.passwordError,M=m.confirmPasswordError,B=function(){r({type:A.ui.toggleModal,payload:"Register"}),w(),h(Ln),d(null)},z=function(e){d(null),h((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e.target.name+"Error",null))})),y(e)},H=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object.keys(v).map((function(e,t){return""===v[e].trim()?(h((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e+"Error","Este campo es requerido."))})),!1):(h((function(t){return Object(N.a)(Object(N.a)({},t),{},Object(D.a)({},e+"Error",null))})),!0)})).reduce((function(e,t){return e&&t}))){e.next=3;break}return e.abrupt("return");case 3:if(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(T)?T.trim()===I.trim()||(h((function(e){return Object(N.a)(Object(N.a)({},e),{},{passwordError:"Las contrase\xf1as no coinciden.",confirmPasswordError:"Las contrase\xf1as no coinciden."})})),0):(h((function(e){return Object(N.a)(Object(N.a)({},e),{},{passwordError:"La contrase\xf1a debe tener al menos un car\xe1cter en min\xfascula, uno en may\xfascula, un n\xfamero y debe tener entre 8 y 16 caract\xe9res de longitud."})})),0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,c(v);case 7:(n=e.sent).ok?B():d(n.message);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(Nn,{isOpen:n.isRegisterModalOpen,handleClose:B,title:"\xa1Bienvenido!",subtitle:"Completa los campos para registrar tu cuenta",image:Object(a.jsx)("img",{className:e.logo,src:sn,alt:"Logo"}),content:Object(a.jsxs)("form",{className:e.form,onSubmit:H,noValidate:!0,children:[l&&Object(a.jsx)(Se.a,{severity:"error",children:l}),Object(a.jsx)(gt.a,{variant:"outlined",error:!!E,helperText:E,margin:"dense",name:"name",value:k,onChange:z,label:"Nombres",type:"text",fullWidth:!0}),Object(a.jsx)(gt.a,{variant:"outlined",error:!!L,helperText:L,margin:"dense",name:"lastname",value:C,onChange:z,label:"Apellidos",type:"text",fullWidth:!0}),Object(a.jsx)(gt.a,{variant:"outlined",error:!!R,helperText:R,margin:"dense",name:"email",value:S,onChange:z,label:"Email",type:"email",fullWidth:!0}),Object(a.jsx)(gt.a,{variant:"outlined",error:!!F,helperText:F,margin:"dense",name:"password",value:T,onChange:z,label:"Contrase\xf1a",type:"password",fullWidth:!0}),Object(a.jsx)(gt.a,{variant:"outlined",error:!!M,helperText:M,margin:"dense",name:"confirmPassword",value:I,onChange:z,label:"Repetir contrase\xf1a",type:"password",fullWidth:!0}),Object(a.jsxs)("div",{className:e.footer,children:[Object(a.jsx)(ee.a,{color:"primary",variant:"outlined",type:"submit",fullWidth:!0,children:"Registrarme"}),Object(a.jsx)($.a,{href:"#",style:{paddingTop:20,paddingBottom:15},variant:"body1",onClick:function(e){e.preventDefault(),B(),r({type:A.ui.toggleModal,payload:"Login"})},children:"\xbfYa tienes cuenta?"})]})]})})})),Fn=function(e,t){switch(t.type){case A.design.updateDesign:return Object(N.a)(Object(N.a)({},e),{},{design:t.payload});case A.design.changeMetadataField:return null!==t.payload.subfield?Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{metadata:Object(N.a)(Object(N.a)({},e.design.metadata),{},Object(D.a)({},t.payload.field,Object(N.a)(Object(N.a)({},e.design.metadata[t.payload.field]),{},Object(D.a)({},t.payload.subfield,t.payload.value))))})}):Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{metadata:Object(N.a)(Object(N.a)({},e.design.metadata),{},Object(D.a)({},t.payload.field,t.payload.value))})});case A.design.changeTaskField:var n=e.design.data.learningActivities;return n.forEach((function(e,a){e.id===t.payload.learningActivityID&&e.tasks.forEach((function(e,i){e.id===t.payload.taskID&&(null!==t.payload.subfield?n[a].tasks[i][t.payload.field][t.payload.subfield]=t.payload.value:n[a].tasks[i][t.payload.field]=t.payload.value)}))})),Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{data:Object(N.a)(Object(N.a)({},e.design.data),{},{learningActivities:n})})});case A.design.setCurrentLearningResultField:return Object(N.a)(Object(N.a)({},e),{},{currentLearningResult:Object(N.a)(Object(N.a)({},e.currentLearningResult),{},Object(D.a)({},t.payload.field,t.payload.value))});case A.design.clearCurrentLearningResult:return Object(N.a)(Object(N.a)({},e),{},{currentLearningResult:{category:{_id:null,name:null},verb:null,description:null,editing:!1,index:null}});case A.design.setCurrentLearningResult:return Object(N.a)(Object(N.a)({},e),{},{currentLearningResult:t.payload});case A.design.setBloomCategories:return Object(N.a)(Object(N.a)({},e),{},{bloomCategories:t.payload});case A.design.setBloomVerbs:return Object(N.a)(Object(N.a)({},e),{},{bloomVerbs:t.payload});case A.design.setDesignPrivileges:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{privileges:t.payload})});case A.design.addDesignKeyword:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{keywords:[].concat(Object(_.a)(e.design.keywords),[t.payload])})});case A.design.removeDesignKeyword:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{keywords:Object(_.a)(e.design.keywords.filter((function(e){return e!==t.payload})))})});case A.design.updateReadOnlyLink:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{readOnlyLink:t.payload})});case A.design.setAssessments:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{assessments:t.payload})});case A.design.setScoreMean:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{metadata:Object(N.a)(Object(N.a)({},e.design.metadata),{},{scoreMean:t.payload})})});case A.design.commentDesign:var a=Object(_.a)(e.design.comments),i=a.find((function(e){return e._id.toString()===t.payload._id.toString()})),r=a.indexOf(i);return i&&-1!==r?a[r]=t.payload:a.push(t.payload),Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{comments:a})});case A.design.deleteComment:return Object(N.a)(Object(N.a)({},e),{},{design:Object(N.a)(Object(N.a)({},e.design),{},{comments:e.design.comments.filter((function(e){return e._id.toString()!==t.payload.toString()}))})});case A.design.setConnectedUsers:return Object(N.a)(Object(N.a)({},e),{},{users:t.payload});default:return e}},Mn=Object(i.createContext)();function Bn(){var e=Object(i.useContext)(Mn);if(void 0===e)throw new Error("useDesignState must be used within a DesignProvider");return e}var zn={design:null,users:[],currentLearningResult:{category:{_id:null,name:null},verb:null,description:null,editing:!1,index:null},bloomCategories:[],bloomVerbs:[]},Hn=function(e){var t=e.children,n=Object(i.useReducer)(Fn,zn),r=Object(p.a)(n,2),c=r[0],s=r[1];return Object(a.jsx)(Mn.Provider,{value:{designState:c,dispatch:s},children:t})},Wn=Object(B.a)((function(e){return{root:{},title:{color:e.palette.text.primary},logo:{width:e.spacing(5),height:e.spacing(5)},brand:Object(D.a)({marginLeft:10},e.breakpoints.down("xs"),{marginLeft:0}),search:{display:"flex",justifyContent:"center"},searchForm:{display:"flex",alignItems:"center"},userAndOptions:Object(D.a)({display:"flex",justifyContent:"flex-end"},e.breakpoints.down("xs"),{justifyContent:"center"}),navbarColor:{background:e.palette.background.navbar},navbarLetter:{textDecoration:"none",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.text.primary,cursor:"pointer"},menuOptions:Object(D.a)({marginRight:10},e.breakpoints.down("xs"),{marginRight:0})}})),qn=function(){var e=Object(l.b)(),t=Object(M.g)(),n=Object(M.h)(),r=Object(i.useState)(null),c=Object(p.a)(r,2),s=c[0],o=c[1],d=Object(U.a)(),b=Object(Q.a)(d.breakpoints.down("xs")),g=wn(),m=g.userConfig,h=g.setUserConfig,f=P(),O=f.uiState,v=f.dispatch,y=x(),w=y.authState,k=y.logout,C=Object(i.useState)(""),S=Object(p.a)(C,2),T=S[0],I=S[1],E=Bn().designState.design,L=function(){e.clear(),o(null),k()},R=function(){o(null)},F=function(e){h(Object(N.a)(Object(N.a)({},m),{},Object(D.a)({},e.target.name,e.target.checked)))},B=function(){var e=Object(j.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),T.trim().length>0&&(null===E||n.pathname.includes("reader")||n.pathname.includes("shared-link")||O.userSaveDesign?t.push("/users/search?q=".concat(T.trim())):(v({type:A.ui.toggleModal,payload:"CheckSaveDesign"}),v({type:A.ui.setHistoryInCheckSaveDesign,payload:{url:"/users/search?q=".concat(T.trim())}})),I(""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),null===E||n.pathname.includes("reader")||n.pathname.includes("shared-link")||O.userSaveDesign?t.push("/profile/".concat(w.user.uid)):(v({type:A.ui.toggleModal,payload:"CheckSaveDesign"}),v({type:A.ui.setHistoryInCheckSaveDesign,payload:{url:"/profile/".concat(w.user.uid)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),null===E||n.pathname.includes("reader")||n.pathname.includes("shared-link")||O.userSaveDesign?t.push("/"):(v({type:A.ui.toggleModal,payload:"CheckSaveDesign"}),v({type:A.ui.setHistoryInCheckSaveDesign,payload:{url:"/"}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){o(e.currentTarget)},q=Wn(),V=function(){return Object(a.jsxs)(G.a,{item:!0,xs:b?6:12,sm:4,lg:2,className:q.userAndOptions,children:[Object(a.jsxs)(ee.a,{size:"small",onClick:z,style:{display:"flex",alignItems:"center",textTransform:"none"},children:[Object(a.jsx)(oe.a,{style:{marginRight:10,width:30,height:30},alt:je(w.user.name,w.user.lastname),src:w.user.img&&w.user.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(w.user.img):"",children:pe(w.user.name,w.user.lastname)}),Object(a.jsx)(K.a,{className:q.navbarLetter,children:je(w.user.name,w.user.lastname)})]}),Object(a.jsx)(ce.a,{onClick:W,className:q.menuOptions,children:Object(a.jsx)(gn.a,{})}),Object(a.jsxs)(Fe.a,{anchorEl:s,open:Boolean(s),keepMounted:!0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:R,children:[Object(a.jsx)(Me.a,{children:Object(a.jsx)(on.a,{control:Object(a.jsx)(ln.a,{checked:m.darkTheme,onChange:F,name:"darkTheme"}),label:"Tema Oscuro"})}),Object(a.jsx)(Me.a,{children:Object(a.jsx)(on.a,{control:Object(a.jsx)(ln.a,{checked:m.modeAdvanced,onChange:F,name:"modeAdvanced"}),label:"Modo Avanzado"})}),Object(a.jsx)(Me.a,{children:Object(a.jsx)(ee.a,{color:"primary",onClick:L,children:"Cerrar sesi\xf3n"})})]})]})};return Object(a.jsxs)("div",{className:q.root,children:[Object(a.jsx)(dn.a,{position:"static",className:q.navbarColor,elevation:0,children:Object(a.jsx)(un.a,{style:{padding:0},children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:b?6:12,sm:3,lg:2,children:Object(a.jsxs)(ee.a,{size:"small",onClick:H,className:q.brand,children:[Object(a.jsx)(oe.a,{className:q.logo,src:sn,alt:"Logo"}),Object(a.jsx)(K.a,{variant:"h6",className:q.title,children:"LAD"})]})}),b&&w.token&&V(),w.token?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G.a,{item:!0,xs:12,sm:5,lg:8,children:Object(a.jsx)("div",{className:q.search,children:Object(a.jsxs)("form",{className:q.searchForm,onSubmit:B,noValidate:!0,children:[Object(a.jsx)(pn.a,{margin:"dense",variant:"outlined",name:"filter",value:T,type:"text",placeholder:"Buscar usuario",onChange:function(e){var t=e.target;I(t.value)}}),Object(a.jsx)(ce.a,{type:"submit",className:q.iconButton,"aria-label":"search",children:Object(a.jsx)(cn.a,{})})]})})}),!b&&V()]}):Object(a.jsx)(G.a,{item:!0,xs:12,sm:9,lg:10,className:q.userAndOptions,children:Object(a.jsxs)(jn.a,{variant:"text","aria-label":"text primary button group",children:[Object(a.jsx)(ee.a,{onClick:function(){v({type:A.ui.toggleModal,payload:"Login"})},children:"Ingresar"}),Object(a.jsx)(ee.a,{onClick:function(){v({type:A.ui.toggleModal,payload:"Register"})},children:"Registrarme"})]})})]})})}),Object(a.jsx)(En,{}),Object(a.jsx)(Rn,{})]})},Vn=n(1309),Un=Object(B.a)((function(e){return{pos:{width:"fit-content"}}})),Qn=function(){var e=Un();return Object(a.jsx)(dn.a,{position:"static",color:"default",children:Object(a.jsx)(Vn.a,{maxWidth:"md",className:e.pos,children:Object(a.jsx)(un.a,{children:Object(a.jsx)(K.a,{variant:"body1",children:"\xa9 2021 Universidad Cat\xf3lica de Temuco"})})})})},Gn=n(1326),Kn=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingTop:20,paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10}}})),Jn=function(){var e=Kn(),t=Object(Z.a)(["shared-designs"],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,fe(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}});return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsx)(tt,{})}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsx)(K.a,{variant:"h4",style:{marginBottom:5},children:"Compartidos conmigo"}),Object(a.jsx)(J.a,{}),Object(a.jsx)(Ie,Object(N.a)(Object(N.a)({},t),{},{label:"shared-with-me"}))]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})})},Zn=n(1333),Xn=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("category");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Yn=n(1344),_n=Object(B.a)((function(e){return{keywordList:{width:"100%",display:"flex",justifyContent:"flex-start",height:48,mouseWheel:"horizontal",overflowX:"auto",overflowY:"hidden",listStyle:"none",padding:e.spacing(.5),margin:0},keyword:{margin:e.spacing(.5)},searchContainer:{display:"flex",alignItems:"center",marginBottom:15},input:{height:40,"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},button:{borderTopLeftRadius:0,borderBottomLeftRadius:0,height:40},keywordFilter:{paddingLeft:0,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius}}})),$n=function(e){var t=e.keywords,n=e.onChangeKeywords,r=_n(),c=Object(i.useState)(""),s=Object(p.a)(c,2),o=s[0],l=s[1],d=Object(i.useState)(null),u=Object(p.a)(d,2),j=u[0],b=u[1],g=st();return Object(a.jsxs)(te.a,{ref:g,component:"ul",className:r.keywordFilter,children:[Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.trim().length&&!t.includes(o.toLowerCase())?(n([].concat(Object(_.a)(t),[o.toLowerCase()]),"add",o.toLowerCase()),l("")):t.includes(o.toLowerCase())&&b("La palabra clave ya se encuentra agregada al filtro.")},className:r.searchContainer,children:[Object(a.jsx)(gt.a,{className:r.input,size:"small",variant:"outlined",value:o,onChange:function(e){var t=e.target;l(t.value),j&&b(null)},label:"Palabra Clave",error:!!j,helperText:j,fullWidth:!0}),Object(a.jsx)(ee.a,{variant:"contained",disableElevation:!0,color:"primary",type:"submit",className:r.button,children:"Agregar"})]}),Object(a.jsx)("div",{className:r.keywordList,children:t.map((function(e,i){return Object(a.jsx)("li",{children:Object(a.jsx)(Yn.a,{label:e,onDelete:function(e){return function(e){e===t.length-1?n(Object(_.a)(t.slice(0,e)),"remove",t[e]):n([].concat(Object(_.a)(t.slice(0,e)),Object(_.a)(t.slice(e+1,t.length))),"remove",t[e])}(i)},className:r.keyword})},"keyword-".concat(i))}))})]})},ea=Object(B.a)((function(e){return{leftPanel:Object(D.a)({display:"flex",flexDirection:"column",justifyContent:"stretch",borderRight:"1px solid ".concat(e.palette.divider),position:"relative"},e.breakpoints.up("sm"),{height:"calc(100vh - 128px)"}),workspace:{paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},sectionTitle:{marginTop:20,marginBottom:20},category:{width:"100%",paddingLeft:20},categoriesContainer:Object(D.a)({},e.breakpoints.up("sm"),{overflow:"auto",overflowX:"hidden"}),keywordList:{display:"flex",justifyContent:"flex-start",height:48,mouseWheel:"horizontal",overflowX:"auto",overflowY:"hidden",listStyle:"none",padding:e.spacing(.5),margin:0},keyword:{margin:e.spacing(.5)},searchContainer:{display:"flex",alignItems:"center",marginTop:20,marginBottom:15},input:{height:40,"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},button:{borderTopLeftRadius:0,borderBottomLeftRadius:0,height:40},keywordFilter:{paddingLeft:0,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius}}})),ta=function(){var e=ea(),t=Object(i.useState)(""),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(i.useState)(""),o=Object(p.a)(s,2),l=o[0],d=o[1],b=Object(i.useState)([]),g=Object(p.a)(b,2),m=g[0],h=g[1],f=Object(i.useState)([]),x=Object(p.a)(f,2),O=x[0],v=x[1],y=Object(X.a)("categories",Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn();case 2:return t=e.sent,h(t.categories.map((function(e){return Object(N.a)(Object(N.a)({},e),{},{selected:!1})}))),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),w=Object(Z.a)(["filtered-designs",l].concat(Object(_.a)(O),Object(_.a)(m)),function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,he(r,O,m.filter((function(e){return e.selected})),a);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),k=function(){d(r)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:[Object(a.jsx)(tt,{}),Object(a.jsx)(K.a,{style:{marginTop:20,marginLeft:20},children:"Categor\xedas"}),Object(a.jsx)("div",{className:e.categoriesContainer,children:y.isLoading?Object(_.a)(Array(10).keys()).map((function(e){return Object(a.jsxs)("div",{style:{margin:10,display:"flex",alignItems:"center"},children:[Object(a.jsx)(Te.a,{style:{borderRadius:4,marginRight:5},variant:"rect",height:20,width:20,animation:"wave"}),Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(Te.a,{style:{borderRadius:4},variant:"rect",height:20,animation:"wave"})})]},"category-skeleton-".concat(e))})):m&&m.map((function(t,n){return Object(a.jsx)(on.a,{className:e.category,control:Object(a.jsx)(Zn.a,{checked:t.selected,onChange:function(e){return function(e){var t=Object(_.a)(m);t[e].selected=!t[e].selected,h(t),k()}(n)}}),label:t.name},t._id)}))})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(K.a,{variant:"h4",children:"Buscar Dise\xf1o"}),Object(a.jsx)(J.a,{})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k()},className:e.searchContainer,children:[Object(a.jsx)(gt.a,{className:e.input,size:"small",variant:"outlined",value:r,onChange:function(e){var t=e.target;return c(t.value)},label:"Nombre/Propietario",onBlur:k,placeholder:"Ingresa el nombre o propietario para buscar dise\xf1os",InputProps:{endAdornment:r.trim().length?Object(a.jsx)(ce.a,{size:"small",onClick:function(){c(""),d("")},onMouseDown:function(e){return e.preventDefault()},children:Object(a.jsx)(ht.a,{})}):Object(a.jsx)("div",{})},fullWidth:!0}),Object(a.jsx)(ee.a,{className:e.button,variant:"contained",color:"primary",type:"submit",disableElevation:!0,children:"Buscar"})]}),Object(a.jsx)($n,{keywords:O,onChangeKeywords:function(e,t,n){v(e)}}),Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(K.a,{variant:"h4",children:"Repositorio P\xfablico"}),Object(a.jsx)(J.a,{}),y.isError?Object(a.jsx)(K.a,{children:y.error.message}):w.isError?Object(a.jsx)(K.a,{children:w.error.message}):Object(a.jsx)(Ie,Object(N.a)(Object(N.a)({},w),{},{label:"public-repository"}))]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})})},na=n(605),aa=n.n(na),ia=Object(B.a)((function(e){var t,n,a;return{root:{display:"flex",width:"100%",padding:5,borderRadius:10,marginTop:10,backgroundColor:e.palette.background.design},card:{display:"flex",width:"100%"},body:{width:"100%",display:"flex",marginLeft:10,marginRight:10,flexDirection:"column",justifyContent:"flex-start"},photo:{margin:10,width:e.spacing(8),height:e.spacing(8)},name:(t={width:"50%"},Object(D.a)(t,e.breakpoints.down("sm"),{width:"70%"}),Object(D.a)(t,e.breakpoints.down("xs"),{width:"100%"}),t),location:(n={width:"35%"},Object(D.a)(n,e.breakpoints.down("sm"),{width:"50%"}),Object(D.a)(n,e.breakpoints.down("xs"),{width:"80%"}),n),ocupation:(a={width:"35%"},Object(D.a)(a,e.breakpoints.down("sm"),{width:"50%"}),Object(D.a)(a,e.breakpoints.down("xs"),{width:"80%"}),a)}})),ra=function(){var e=ia(),t=Object(U.a)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)("div",{className:e.card,children:[Object(a.jsx)("div",{className:e.photo,children:Object(a.jsx)(Te.a,{width:t.spacing(8),height:t.spacing(8),variant:"circle",animation:"wave"})}),Object(a.jsxs)("div",{className:e.body,children:[Object(a.jsx)(Te.a,{className:e.name,animation:"wave",height:42,style:{borderRadius:4}}),Object(a.jsx)(Te.a,{className:e.location,animation:"wave",height:20,style:{borderRadius:4}}),Object(a.jsx)(Te.a,{className:e.ocupation,animation:"wave",height:20,style:{borderRadius:4}})]})]})})},ca=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:Object(D.a)({paddingLeft:30,paddingRight:30,paddingBottom:50,background:e.palette.background.workSpace,height:"auto"},e.breakpoints.up("md"),{height:"calc(100vh - 128px)",overflow:"auto"}),rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},usersContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15},errorContainer:{marginTop:15,marginBottom:15,display:"flex",width:"100%",justifyContent:"center"},error:{minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"center",alignItems:"center"},loadMore:{marginTop:50}}})),sa=function(){var e=ca(),t=Object(M.g)(),n=Object(M.h)(),i=aa.a.parse(n.search).q,r=function(e){t.push(e)},c=Object(Z.a)("search-users",function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,Ft(i,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),s=c.data,o=c.status,l=c.error,d=c.isFetchingNextPage,p=c.fetchNextPage,b=c.hasNextPage;return i?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsxs)(Je.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(a.jsxs)(Ze.a,{button:!0,onClick:function(){return r("/my-designs")},children:[Object(a.jsx)(Ye.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Mis Dise\xf1os"})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(Ze.a,{button:!0,onClick:function(){return r("/shared-with-me")},children:[Object(a.jsx)(_e.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Compartidos Conmigo"})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(Ze.a,{button:!0,onClick:function(){return r("/public-repository")},children:[Object(a.jsx)($e.a,{className:e.icon}),Object(a.jsx)(Xe.a,{primary:"Repositorio P\xfablico"})]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:"loading"===o?Object(a.jsxs)("div",{style:{paddingTop:15},children:[Object(a.jsx)(K.a,{variant:"h4",children:"Buscando usuarios..."}),Object(a.jsx)("div",{children:Object(_.a)(Array(6).keys()).map((function(e){return Object(a.jsx)(ra,{},"user-skeleton-".concat(e))}))})]}):"error"===o?Object(a.jsx)(Se.a,{severity:"error",className:e.error,children:l.message}):Object(a.jsxs)("div",{style:{paddingTop:15},children:[Object(a.jsx)(K.a,{variant:"h4",children:"Usuarios encontrados"}),s.pages[0].users.length>0?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:e.usersContainer,children:[s.pages.map((function(e,t){return e.users.map((function(e,t){return Object(a.jsx)(en,Object(N.a)({},e),e._id)}))})),s&&b&&Object(a.jsx)(ee.a,{className:e.loadMore,color:"primary",onClick:function(){return p()},children:d?"Cargando m\xe1s...":"Cargar M\xe1s"})]})}):Object(a.jsx)(Se.a,{severity:"error",className:e.error,children:"No se han encontrado coincidencias."})]})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})}):Object(a.jsx)("div",{className:e.errorContainer,children:Object(a.jsx)(Se.a,{severity:"error",className:e.error,children:"No se ha ingresado filtro para la b\xfasqueda de usuarios. Por favor ingrese informaci\xf3n en la entrada de texto de la barra de navegaci\xf3n para buscar usuarios y presione 'enter' o el \xedcono de b\xfasqueda."})})},oa=n(1329),la=n(1319),da=n(1285),ua=n(300),ja=n(1282),pa=n(1343),ba=n(1331),ga=n(74),ma=n(623),ha=n(624),fa=n(606),xa=n(28),Oa=n(621),va=Object(i.createContext)();function ya(){var e=Object(i.useContext)(va);if(void 0===e)throw new Error("SharedDocContext must be used within a SharedDocProvider");return e}var wa=function(e){var t=e.children,n=Object(i.useState)(null),r=Object(p.a)(n,2),c=r[0],s=r[1],o=Object(i.useState)(null),l=Object(p.a)(o,2),d=l[0],u=l[1],j=Object(i.useState)(null),b=Object(p.a)(j,2),g=b[0],m=b[1],h=Object(i.useState)(!1),f=Object(p.a)(h,2),O=f[0],v=f[1],y=x().authState,w=Object(i.useCallback)((function(e){if(d)return!1;if(!y.user)return!1;var t=new xa.d({guid:e});s(t);var n=new Oa.a("ws://lad-y.herokuapp.com",e,t),a={name:je(y.user.name,y.user.lastname),color:y.user.color};n.awareness.setLocalStateField("user",a),n.on("status",(function(e){"connected"===e.status?v(!0):v(!1)})),u(n),m(a)}),[d,y.user]),k=Object(i.useCallback)((function(){s(null),u(null),m(null)}),[s,u,m]);return Object(a.jsx)(va.Provider,{value:{doc:c,provider:d,connectToDesign:w,clearDoc:k,user:g,connected:O},children:t})},ka=(n(703),n(607)),Ca=n(608),Sa=n(609),Ta=n(610),Da=n(1310),Na=n(1311);function Aa(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText}var Ia=Object(B.a)((function(e){return{root:function(e){e.multiline,e.rowMax,e.focused;return{width:"100%",display:"flex"}},inputContainer:function(e){var t=e.multiline,n=e.rowMax;e.focused,e.type;return{width:"100%",cursor:"text",height:t&&1===n?"auto":"calc(22px * ".concat(n," + 34px)"),overflow:"auto"}},actions:function(){return{display:"flex",flexDirection:"column",width:70,justifyContent:"space-between",borderWidth:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderTopRightRadius:5,borderBottomRightRadius:5}},action:function(){return{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}},editorx:function(e){var t=e.multiline,n=e.rowMax;return{height:t&&1===n?"auto":"calc(22px * ".concat(n," + 34px)")}},"@global":{".ProseMirror":function(t){t.multiline,t.rowMax;return{height:"100%",overflow:"auto",overflowX:"hidden",width:"100%",fontSize:e.typography.body1.fontSize,fontFamily:e.typography.fontFamily,fontStyle:"normal",paddingTop:"1rem",paddingBottom:"1rem",paddingLeft:10,paddingRight:10}},".ProseMirror p":{marginBlockStart:0,marginBlockEnd:0},".ProseMirror:focus":{outline:"none"},".ProseMirror p.is-editor-empty:first-child::before":{content:"attr(data-empty-text)",float:"left",color:"dark"===e.palette.type?e.palette.grey[400]:e.palette.grey[600],pointerEvents:"none",height:0}}}})),Ea=Object(i.forwardRef)((function(e,t){var n=e.name,r=e.multiline,c=e.rowMax,s=void 0===c?1:c,o=e.maxLength,l=e.onChange,d=(e.placeholder,e.initialvalue),u=void 0===d?"":d,j=e.type,b=void 0===j?"text":j,g=e.max,m=e.min,h=e.deleteOnRemove,f=void 0!==h&&h,x=e.onSynced,O=Object(i.useRef)(!0),v=Object(i.useState)(!1),y=Object(p.a)(v,2),w=y[0],k=y[1],C=Ia({multiline:r,rowMax:s,focused:w,type:b}),S=Object(i.useState)(!1),T=Object(p.a)(S,2),D=T[0],N=T[1],A=ya(),I=A.doc,E=A.provider,P=A.user,L=Object(i.useState)(null),R=Object(p.a)(L,2),F=R[0],M=R[1];Object(i.useEffect)((function(){return function(){O.current=!1}}),[]);var B=Object(i.useCallback)((function(){return Aa(null===F||void 0===F?void 0:F.getHTML().toString()).trim().toString()}),[F]),z=Object(i.useCallback)((function(e){null===F||void 0===F||F.commands.first((function(t){var n=t.commands;return[function(){return n.setContent(e.toString())}]}))}),[F]);if(Object(i.useImperativeHandle)(t,(function(){return{clearText:function(){I&&F&&z("")}}})),Object(i.useEffect)((function(){return function(){I&&F&&f&&z("")}}),[I,F,z,f]),Object(i.useEffect)((function(){F||O.current&&M(new ga.a({editorProps:"number"===b?{handleTextInput:function(e,t,n,a){return!(!isNaN(a)||"-"===a)||("0"===a&&"00"===e.dom.firstChild.textContent||("-"===a&&e.dom.firstChild.textContent.match(/-/g).length>1||"-"===a&&null!==m&&m>=0||"-"===a&&0!==e.dom.firstChild.textContent.indexOf("-")||(null!==g&&parseInt(e.dom.firstChild.textContent)>g||null!==m&&parseInt(e.dom.firstChild.textContent)<m)))},handlePaste:function(e,t,n){var a;if(1!==n.content.childCount)return!0;if(isNaN(n.content.firstChild.textContent))return!0;var i=e.dom.firstChild.textContent+n.content.firstChild.textContent;return!!(i.includes("-")&&(null===(a=i.match(/-/g))||void 0===a?void 0:a.length)>1||i.includes("-")&&0!==i.indexOf("-"))||(null!==g&&parseInt(i)>g||null!==m&&parseInt(i)<m)}}:{},extensions:[ka.a.extend({content:r?"block+":"block"}),Ca.a,Sa.a,ha.a.configure({provider:E,user:P}),ma.a.configure({document:I,field:n}),Ta.a.configure({limit:o})],onUpdate:function(e){var t=Aa(e.editor.getHTML().toString()),a="number"!==b||isNaN(t)?t:parseInt(t);l&&e.transaction.docs[0].textContent!==t&&l({target:{name:n,type:b,value:"number"===b&&isNaN(a)?0:a}})},onFocus:function(e){e.editor,e.event;O.current&&k(!0)},onBlur:function(e){e.editor,e.event;O.current&&k(!1)}}))}),[F,I,g,o,m,r,n,l,E,b,P]),Object(i.useEffect)((function(){E.synced?D||""===B()&&(z(u),x&&x(),O.current&&N(!0)):E.once("synced",(function(){D||""===B()&&(z(u),x&&x(),O.current&&N(!0))}))}),[E.synced,B,u,x,E,z,D]),!F)return Object(a.jsx)("div",{children:"Conectando..."});return Object(a.jsxs)("div",{className:C.root,children:[Object(a.jsx)("div",{className:C.inputContainer,onClick:function(){w||F.chain().focus("end").run()},children:Object(a.jsx)(fa.a,{editor:F,className:"".concat(C.editorx)})}),"number"===b&&Object(a.jsxs)("div",{className:C.actions,children:[Object(a.jsx)(te.a,{className:C.action,component:Gt.a,onClick:function(){var e=B();if(F&&"number"===b){if(!e.length||"-"===e)return z(null!==m&&void 0!==m?m:0);if(e=parseInt(e),!(null!==g&&e+1>g))return l&&l({target:{name:n,type:b,value:"number"===b&&isNaN(e)?0:e+1}}),z(e+1)}},children:Object(a.jsx)(Da.a,{})}),Object(a.jsx)(J.a,{}),Object(a.jsx)(te.a,{className:C.action,component:Gt.a,onClick:function(){var e=B();if(F&&"number"===b){if(!e.length||"-"===e)return z(null!==m&&void 0!==m?m:0);if(e=parseInt(e),!(null!==m&&e-1<m))return l&&l({target:{name:n,type:b,value:"number"===b&&isNaN(e)?0:e-1}}),z(e-1)}},children:Object(a.jsx)(Na.a,{})})]})]})})),Pa=Object(B.a)((function(e){return{trashIcon:{display:"flex"},tasksSpacing:{position:"relative",width:"100%",height:"100%",marginTop:e.spacing(1),background:e.palette.background.workSpace},taskBody:{padding:10,position:"relative",left:"5%",width:"95%",height:"100%"},taskSpacingDescription:{marginLeft:e.spacing(2),marginTop:e.spacing(2)},taskSpacingDescriptionBD:{marginBottom:e.spacing(1)},colorLearningType:{position:"absolute",width:"5%",height:"100%"},timeField:Object(D.a)({display:"flex",alignItems:"center",marginRight:10},e.breakpoints.down("md"),{marginRight:0}),grid:{display:"flex",alignItems:"center"},gridContainer:Object(D.a)({display:"grid",gridTemplateColumns:"50% 50%",gridTemplateRows:"auto",gridTemplateAreas:"\n            'learningType modality'\n            'workingTime format'\n            'description description'"},e.breakpoints.down("md"),{gridTemplateAreas:"\n                'learningType learningType'\n                'modality modality'\n                'format format'\n                'workingTime workingTime'\n                'description description'"}),firstRow:{display:"grid",gridTemplateColumns:"auto auto 10%",gridTemplateRows:"auto",gridTemplateAreas:"'learningType modality'"},learningTypeContainer:{gridArea:"learningType",width:"100%",display:"flex"},learningType:Object(D.a)({marginRight:10},e.breakpoints.down("md"),{marginRight:0,marginTop:10}),modality:Object(D.a)({gridArea:"modality",width:"100%",display:"flex"},e.breakpoints.down("md"),{marginTop:10}),format:Object(D.a)({gridArea:"format",display:"flex",justifyContent:"space-between",alignSelf:"flex-end"},e.breakpoints.down("md"),{marginTop:10}),delete:{alignSelf:"flex-start",justifySelf:"center"},resourceLinkGrid:{display:"grid",gridTemplateColumns:"25% 75%"},fab:{maxHeight:"20px",minHeight:"20px",minWidth:"20px",maxWidth:"20px"},icon:{maxHeight:"15px",minHeight:"15px",minWidth:"15px",maxWidth:"15px"}}})),La=Object(i.forwardRef)((function(e,t){var n,r,c,s,o=e.learningActivityIndex,l=e.index,d=e.task,u=e.learningActivityID,j=e.sumHours,b=e.sumMinutes,g=e.refTask,m=(Object(W.a)(e,["learningActivityIndex","index","task","learningActivityID","sumHours","sumMinutes","refTask"]),Pa()),h=S(),f=h.socket,x=h.emitWithTimeout,O=Object(i.useRef)(!0),v=Object(i.useRef)(),y=Object(i.useRef)(),k=Object(i.useRef)(),C=Bn().designState.design,T=C.metadata,D=P(),I=D.uiState,E=D.dispatch,L=Object(w.b)().enqueueSnackbar,R=Object(U.a)(),F=Object(Q.a)(R.breakpoints.down("md")),M=Kt({description:d.description,learningType:d.learningType&&""!==d.learningType.trim()?d.learningType:"Seleccionar",modality:d.modality&&""!==d.modality.trim()?d.modality:"Seleccionar",format:d.format&&""!==d.format.trim()?d.format:"Seleccionar",timeHours:null!==(n=d.duration.hours)&&void 0!==n?n:0,timeMinutes:null!==(r=d.duration.minutes)&&void 0!==r?r:0,timeDesignHours:null!==(c=T.workingTimeDesign.hours)&&void 0!==c?c:0,timeDesignMinutes:null!==(s=T.workingTimeDesign.minutes)&&void 0!==s?s:0,groupSize:d.groupSize&&2!==d.groupSize?d.groupSize:2}),B=Object(p.a)(M,4),z=B[0],H=B[1],q=B[3];Object(i.useEffect)((function(){I.newTask&&null!==g.current&&(g.current.scrollIntoView(!1),E({type:A.ui.setScrollToNewTask,payload:!1}))}),[]),Object(i.useImperativeHandle)(t,(function(){return{clearTexts:function(){var e,t,n;null===v||void 0===v||null===(e=v.current)||void 0===e||e.clearText(),null===y||void 0===y||null===(t=y.current)||void 0===t||t.clearText(),null===k||void 0===k||null===(n=k.current)||void 0===n||n.clearText()}}})),Object(i.useEffect)((function(){return function(){O.current=!1}}),[]),Object(i.useEffect)((function(){O.current&&z.description!==d.description&&q((function(e){return Object(N.a)(Object(N.a)({},e),{},{description:d.description})}))}),[z.description,d.description,q]),Object(i.useEffect)((function(){O.current&&z.learningType!==d.learningType&&q((function(e){return Object(N.a)(Object(N.a)({},e),{},{learningType:d.learningType&&""!==d.learningType.trim()?d.learningType:"Seleccionar"})}))}),[z.learningType,d.learningType,q]),Object(i.useEffect)((function(){O.current&&z.modality!==d.modality&&q((function(e){return Object(N.a)(Object(N.a)({},e),{},{modality:d.modality&&""!==d.modality.trim()?d.modality:"Seleccionar"})}))}),[z.modality,d.modality,q]),Object(i.useEffect)((function(){O.current&&z.format!==d.format&&q((function(e){return Object(N.a)(Object(N.a)({},e),{},{format:d.format&&""!==d.format.trim()?d.format:"Seleccionar"})}))}),[z.format,d.format,q]),Object(i.useEffect)((function(){O.current&&z.timeHours!==d.duration.hours&&q((function(e){var t;return Object(N.a)(Object(N.a)({},e),{},{timeHours:null!==(t=d.duration.hours)&&void 0!==t?t:0})}))}),[z.timeHours,d.duration.hours,q]),Object(i.useEffect)((function(){O.current&&z.timeMinutes!==d.duration.minutes&&q((function(e){var t;return Object(N.a)(Object(N.a)({},e),{},{timeMinutes:null!==(t=d.duration.minutes)&&void 0!==t?t:0})}))}),[z.timeMinutes,d.duration.minutes,q]);var V=z.description,G=z.learningType,J=z.modality,Z=z.format,X=z.timeHours,Y=z.timeMinutes,_=z.groupSize,$=function(e){var t=e.target,n=t.name,a=t.value,i=null;n.includes("description")?n="description":n.includes("timeHours")?(n="duration",i="hours",a=isNaN(a)?0:a):n.includes("timeMinutes")&&(n="duration",i="minutes",a=isNaN(a)?0:a),O.current&&H({target:t}),null===f||void 0===f||f.emit("edit-task-field",{designId:C._id,learningActivityID:u,taskID:d.id,field:n,value:a,subfield:i,sumHours:j,sumMinutes:b},x((function(e){if(!e.ok)return L(e.message,{variant:"error",autoHideDuration:2e3});I.userSaveDesign&&E({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return L(i?'Error al editar el campo "'.concat(i,'" del campo "').concat(n,'". Por favor revise su conexi\xf3n. Tiempo de espera excedido.'):'Error al editar el campo "'.concat(n,'". Por favor revise su conexi\xf3n. Tiempo de espera excedido.'),{variant:"error",autoHideDuration:2e3})})))},ne=function(){E({type:A.ui.setResourceLink,payload:{learningActivityIndex:o,taskIndex:l}}),E({type:A.ui.toggleModal,payload:"Resource"})},ae=function(e){var t,n,a;""===V&&"Seleccionar"===G&&"Seleccionar"===J&&"Seleccionar"===Z&&0===X&&0===Y?(null===v||void 0===v||null===(t=v.current)||void 0===t||t.clearText(),null===y||void 0===y||null===(n=y.current)||void 0===n||n.clearText(),null===k||void 0===k||null===(a=k.current)||void 0===a||a.clearText(),null===f||void 0===f||f.emit("delete-task",{designId:C._id,learningActivityID:u,taskID:d.id},x((function(e){return e.ok&&I.userSaveDesign&&E({type:A.ui.setUserSaveDesign,payload:!1}),L(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return L("Error al eliminar la tarea. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))):(E({type:A.ui.setConfirmData,payload:{type:"tarea",args:{designId:C._id,learningActivityID:u,taskID:d.id},actionMutation:null}}),E({type:A.ui.toggleModal,payload:"Confirmation"}))},ie=function(e){O.current&&H(e),null===f||void 0===f||f.emit("edit-task-field",{designId:C._id,learningActivityID:u,taskID:d.id,field:e.target.name,value:e.target.value,subfield:null},x((function(e){if(!e.ok)return L(e.message,{variant:"error",autoHideDuration:2e3});I.userSaveDesign&&E({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return L('Error al editar el campo "'.concat(e.target.name,'". Por favor revise su conexi\xf3n. Tiempo de espera excedido.'),{variant:"error",autoHideDuration:2e3})})))};Object(i.useEffect)((function(){C.metadata.workingTimeDesign.hours>=C.metadata.workingTime.hours&&(C.metadata.workingTimeDesign.hours>C.metadata.workingTime.hours||C.metadata.workingTimeDesign.minutes>C.metadata.workingTime.minutes)&&L("Su tiempo de trabajo de dise\xf1o es mayor al tiempo de trabajo definido, por favor disminuya el tiempo de trabajo asignado en las tareas o aumente el tiempo en los metadatos.",{variant:"warning",autoHideDuration:5e3,preventDuplicate:!0})}),[C.metadata.workingTimeDesign.hours,C.metadata.workingTime.hours,C.metadata.workingTimeDesign.minutes,C.metadata.workingTime.minutes,L]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(te.a,{style:{height:"100%"},ref:g,children:Object(a.jsx)(ua.a,{square:!0,className:m.tasksSpacing,children:Object(a.jsxs)(te.a,{style:{display:"flex",position:"relative",height:"100%",width:"100%"},children:["Investigaci\xf3n"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#57A8E7"}}):"Adquisici\xf3n"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#E95D5D"}}):"Producci\xf3n"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#C8951F"}}):"Discusi\xf3n"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#087A4C"}}):"Colaboraci\xf3n"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#DFDF3F"}}):"Pr\xe1ctica"===d.learningType?Object(a.jsx)(te.a,{className:m.colorLearningType,style:{backgroundColor:"#A75BCD"}}):void 0,Object(a.jsx)("div",{className:m.taskBody,children:Object(a.jsxs)("div",{className:m.gridContainer,children:[Object(a.jsxs)("div",{className:m.learningTypeContainer,children:[Object(a.jsxs)(ja.a,{fullWidth:!0,variant:"outlined",className:m.learningType,children:[Object(a.jsx)(pa.a,{id:"learningType-task-".concat(d.id,"-learningActivity-").concat(u),shrink:!0,children:"Aprendizaje"}),Object(a.jsxs)(ba.a,{labelId:"learningType-task-".concat(d.id,"-learningActivity-").concat(u),label:"Aprendizaje",name:"learningType",value:G,onChange:ie,children:[Object(a.jsx)(Me.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Me.a,{value:"Investigaci\xf3n",children:" Investigaci\xf3n "}),Object(a.jsx)(Me.a,{value:"Adquisici\xf3n",children:" Adquisici\xf3n "}),Object(a.jsx)(Me.a,{value:"Producci\xf3n",children:" Producci\xf3n "}),Object(a.jsx)(Me.a,{value:"Discusi\xf3n",children:" Discusi\xf3n "}),Object(a.jsx)(Me.a,{value:"Colaboraci\xf3n",children:" Colaboraci\xf3n "}),Object(a.jsx)(Me.a,{value:"Pr\xe1ctica",children:" Pr\xe1ctica "})]})]}),F&&Object(a.jsx)(re.a,{title:"Eliminar tarea",className:m.delete,children:Object(a.jsx)(ce.a,{onClick:function(){return ae()},children:Object(a.jsx)(ue.a,{fontSize:"small"})})})]}),Object(a.jsxs)("div",{className:m.modality,children:[Object(a.jsxs)(ja.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(pa.a,{id:"modality-task-".concat(d.id,"-learningActivity-").concat(u),shrink:!0,children:" Modalidad "}),Object(a.jsxs)(ba.a,{labelId:"modality-task-".concat(d.id,"-learningActivity-").concat(u),label:"Aprendizaje",name:"modality",value:J,onChange:ie,children:[Object(a.jsx)(Me.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Me.a,{value:"Presencial-As\xedncrono",children:" Presencial-As\xedncrono"}),Object(a.jsx)(Me.a,{value:"Presencial-S\xedncrono",children:" Presencial-S\xedncrono"}),Object(a.jsx)(Me.a,{value:"Online-As\xedncrono",children:" Online-As\xedncrono"}),Object(a.jsx)(Me.a,{value:"Online-S\xedncrono",children:" Online-S\xedncrono"})]})]}),!F&&Object(a.jsx)(re.a,{title:"Eliminar tarea",className:m.delete,children:Object(a.jsx)(ce.a,{onClick:function(){return ae()},children:Object(a.jsx)(ue.a,{fontSize:"small"})})})]}),Object(a.jsxs)("div",{style:{width:"100%",gridArea:"workingTime",marginTop:3},children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:m.timeField,children:[Object(a.jsx)(gt.a,{label:"Horas",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:v,name:"timeHours-task-".concat(d.id,"-learning-activity-").concat(u),placeholder:"Horas",initialvalue:X,onChange:$,type:"number",min:0}}}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsx)(gt.a,{label:"Minutos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:y,name:"timeMinutes-task-".concat(d.id,"-learning-activity-").concat(u),placeholder:"Minutos",initialvalue:Y,onChange:$,type:"number",min:0,max:59}}})]})]}),Object(a.jsx)("div",{style:{marginTop:20},children:Object(a.jsx)(ee.a,{variant:"outlined",onClick:ne,children:" Administrar recursos"})}),Object(a.jsxs)("div",{className:m.format,children:[Object(a.jsxs)(ja.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(pa.a,{id:"format-task-".concat(d.id,"-learningActivity-").concat(u),shrink:!0,children:" Formato "}),Object(a.jsxs)(ba.a,{labelId:"format-task-".concat(d.id,"-learningActivity-").concat(u),label:"Formato",name:"format",value:Z,onChange:ie,children:[Object(a.jsx)(Me.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Me.a,{value:"Grupal",children:" Grupal"}),Object(a.jsx)(Me.a,{value:"Individual",children:" Individual"}),Object(a.jsx)(Me.a,{value:"Toda la clase",children:" Toda la clase"})]})]}),"Grupal"===Z&&C.metadata.classSize>1&&Object(a.jsxs)(ja.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(pa.a,{id:"group-task-".concat(d.id,"-learningActivity-").concat(u),shrink:!0,children:" Personas "}),Object(a.jsxs)(ba.a,{labelId:"group-quantity-task-".concat(d.id,"-learningActivity-").concat(u),label:"Cantidad",name:"groupSize",value:_,onChange:ie,type:"number",children:[Object(a.jsxs)(Me.a,{value:2,children:[" ",2," "]}),Object(a.jsxs)(Me.a,{value:3,children:[" ",3," "]}),Object(a.jsxs)(Me.a,{value:4,children:[" ",4," "]}),Object(a.jsxs)(Me.a,{value:5,children:[" ",5," "]})]})]})]}),Object(a.jsx)(gt.a,{style:{gridArea:"description",marginTop:10},InputLabelProps:{shrink:!0},label:"Descripci\xf3n",fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:k,name:"description-task-".concat(d.id,"-learning-activity-").concat(u),placeholder:"Descripci\xf3n",initialvalue:V,onChange:$,multiline:!0}}})]})})]})})},l)})})),Ra=Object(B.a)((function(e){return{root:{display:"flex",width:"100%",border:"1px solid ".concat(e.palette.divider),height:"100%"},title:{display:"flex",alignItems:"center"},colorBox:{width:10,height:10,marginRight:5,border:"1px solid #dddddd"},colorBoxRightPanel:{width:13,height:13,marginRight:5},spacingGraphic:{marginTop:e.spacing(1),display:"flex",flexWrap:"wrap"},legend:{marginTop:e.spacing(.5),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),display:"flex",alignItems:"center"}}})),Fa=function(e){var t=e.height,n=void 0===t?25:t,i=e.items,r=e.type,c=e.legends,s=e.colorGraphicToPdf,o=Ra(),l=wn().userConfig,d=[],u=0;return i.map((function(e){return u=e.value+u})),"Activity"===r?d=(l.darkTheme,["#57A8E7","#E95D5D","#C8951F","#087A4C","#DFDF3F","#A75BCD"]):"Format"===r?d=(l.darkTheme,["rgba(61, 156, 65, 0.8)","rgba(224, 243, 225, 0.8)","rgba(102, 242, 108, 0.75)"]):"Modality"===r&&(d=(l.darkTheme,["#A6CAF6","#6996CD","#5FA2EF","#135BB3"])),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:o.root,style:{height:n},children:i.map((function(e,t){return Object(a.jsx)(re.a,{title:Object(a.jsxs)("div",{className:o.title,children:[Object(a.jsx)("div",{className:o.colorBox,style:{backgroundColor:d[t]}}),"".concat(e.title,": ").concat((100*e.value/u).toFixed(1),"%")]}),arrow:!0,children:Object(a.jsx)("div",{style:{width:"".concat(100*e.value,"%"),height:"100%",backgroundColor:d[t]}})},"nombreGrafico".concat(t))}))}),c&&Object(a.jsx)("div",{className:o.spacingGraphic,children:i.map((function(e,t){return Object(a.jsxs)("div",{className:o.legend,children:[Object(a.jsx)("div",{className:o.colorBoxRightPanel,style:{backgroundColor:d[t]}}),s?Object(a.jsxs)(K.a,{variant:"caption",children:[" ",e.title," "]}):Object(a.jsxs)(K.a,{variant:"caption",style:{color:"#000000"},children:[" ",e.title," "]})]},"legends-".concat(t))}))})]})},Ma=[{title:"Investigaci\xf3n",value:0,minutes:0},{title:"Adquisici\xf3n",value:0,minutes:0},{title:"Producci\xf3n",value:0,minutes:0},{title:"Discusi\xf3n",value:0,minutes:0},{title:"Colaboraci\xf3n",value:0,minutes:0},{title:"Pr\xe1ctica",value:0,minutes:0}],Ba=[{title:"Investigaci\xf3n",value:0,minutes:0},{title:"Adquisici\xf3n",value:0,minutes:0},{title:"Producci\xf3n",value:0,minutes:0},{title:"Discusi\xf3n",value:0,minutes:0},{title:"Colaboraci\xf3n",value:0,minutes:0},{title:"Pr\xe1ctica",value:0,minutes:0}],za=[{title:"Grupal",value:0,minutes:0},{title:"Individual",value:0,minutes:0},{title:"Toda la clase",value:0,minutes:0}],Ha=[{title:"Presencial-As\xedncrono",value:0,minutes:0},{title:"Presencial-S\xedncrono",value:0,minutes:0},{title:"Online-As\xedncrono",value:0,minutes:0},{title:"Online-S\xedncrono",value:0,minutes:0}],Wa=n(1312),qa=n(1313),Va=n(214),Ua=n.n(Va),Qa=Object(B.a)((function(e){return{unitSpacing:{marginBottom:e.spacing(3)},titleUnitSpacing:{display:"flex",paddingLeft:10,paddingRight:10,marginTop:e.spacing(1)},graphicUnitSpacing:{width:"100%",paddingLeft:10,paddingRight:10,display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.spacing(1)},trashIcon:{marginLeft:"auto"},spacingDescriptionlearningActivity:{marginTop:e.spacing(1)},spacingDescription:{marginTop:e.spacing(2),marginRight:e.spacing(2)},spacingLinkedResults:{marginTop:e.spacing(2)},buttonPos:{marginTop:e.spacing(1),marginLeft:"auto"},gridTask:{marginTop:e.spacing(1),marginLeft:e.spacing(1)},descriptionContainer:{display:"flex",flexDirection:"column",padding:e.spacing(1)},learningResultList:{display:"flex",flexWrap:"nowrap",flexDirection:"column",paddingLeft:15,maxHeight:200,overflow:"auto",overflowX:!0},delete:{alignSelf:"center",justifySelf:"center"},fab:{position:"absolute",bottom:e.spacing(-5),right:e.spacing(2)},taskContainer:{position:"relative",marginBottom:e.spacing(6)},ellipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})),Ga=Object(i.forwardRef)((function(e,t){var n=e.index,r=e.learningActivity,c=e.sumHours,s=e.sumMinutes,o=e.refActivity,l=Qa(),d=Bn().designState.design,u=S(),j=u.socket,b=u.emitWithTimeout,g=P(),m=g.uiState,h=g.dispatch,f=Object(w.b)().enqueueSnackbar,x=Object(U.a)(),O=Object(Q.a)(x.breakpoints.down("xs")),v=Object(i.useState)(null),y=Object(p.a)(v,2),k=y[0],C=y[1],T=Object(i.useRef)(!0),D=Object(i.useRef)(),I=Object(i.useRef)(),E=Object(i.useRef)([]),L=r.tasks.reduce((function(e,t){return e[t.id]=Object(i.createRef)(),e}),{}),R=Kt({title:r.title,description:r.description}),F=Object(p.a)(R,4),M=F[0],B=F[1],z=F[3];Object(i.useEffect)((function(){return m.newActivity&&null!==o.current&&(o.current.scrollIntoView(!1),h({type:A.ui.setScrollToNewActivity,payload:!1})),function(){T.current=!1}}),[]),Object(i.useEffect)((function(){z({title:r.title,description:r.description})}),[d,z,r]);var H=M.title,W=M.description,q=function(){var e,t,n;""!==H||""!==W||0!==r.learningResults.length||void 0!==r.tasks&&0!==r.tasks.length?(h({type:A.ui.setConfirmData,payload:{type:"actividad",args:{designId:d._id,learningActivityID:r.id},actionMutation:null}}),h({type:A.ui.toggleModal,payload:"Confirmation"})):(null===E||void 0===E||null===(e=E.current)||void 0===e||e.forEach((function(e){return null===e||void 0===e?void 0:e.clearTexts()})),null===D||void 0===D||null===(t=D.current)||void 0===t||t.clearText(),null===I||void 0===I||null===(n=I.current)||void 0===n||n.clearText(),null===j||void 0===j||j.emit("delete-learningActivity",{designId:d._id,learningActivityID:r.id},b((function(e){return e.ok&&m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1}),f(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return f("Error al eliminar la actividad. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))));m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})},V=function(){var e=Ua()().toString();null===j||void 0===j||j.emit("new-task",{designId:d._id,learningActivityID:r.id,id:e},b((function(e){if(!e.ok)return f(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return f("Error al agregar la tarea. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),h({type:A.ui.setScrollToNewTask,payload:!0})},Z=function(e){var t=e.target,n=t.name;t.name.includes("title")?n="title":t.name.includes("description")&&(n="description"),null===j||void 0===j||j.emit("edit-unit-field",{designId:d._id,learningActivityID:r.id,field:n,value:t.value},b((function(e){if(!e.ok)return f(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return f("Error al editar el campo ".concat(n," de la actividad. Por favor revise su conexi\xf3n. Tiempo de espera excedido."),{variant:"error",autoHideDuration:2e3})}))),T.current&&B({target:Object(N.a)(Object(N.a)({},t),{},{name:n})})},X=function(){var e=d.metadata.results.map((function(e){return Object(a.jsx)(on.a,{classes:{label:l.ellipsis},label:Object(a.jsx)(re.a,{title:e.verb+" "+e.description,arrow:!0,children:Object(a.jsx)(K.a,{className:l.ellipsis,children:e.verb+" "+e.description})}),control:Object(a.jsx)(Zn.a,{checked:!!r.learningResults.find((function(t){return t.verb===e.verb})),onChange:function(t){return function(e,t,n){if(t){var a=0;r.learningResults.forEach((function(e,t){e.verb===n.verb&&e.description===n.description&&(a=t)})),null===j||void 0===j||j.emit("delete-learning-result-from-learningActivity",{designId:d._id,learningActivityID:r.id,indexLearningResults:a},b((function(e){if(!e.ok)return f(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return f("Error al desvincular el resultado de aprendizaje de la actividad. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))}else null===j||void 0===j||j.emit("add-learning-result-to-learningActivity",{designId:d._id,learningActivityID:r.id,result:n},b((function(e){if(!e.ok)return f(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return f("Error al vincular el resultado de aprendizaje a la actividad. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))}(0,!!r.learningResults.find((function(t){return t.verb===e.verb})),e)}})},"learning-result-".concat(e.verb))}));return 0===e.length?Object(a.jsx)(te.a,{style:{marginLeft:-15,paddingRight:10},fontSize:"caption.fontSize",fontStyle:"italic",textAlign:"justify",children:"No hay resultados de aprendizaje en este dise\xf1o. Para agregar resultados de aprendeizaje, por favor ve a la pesta\xf1a de metadatos."}):e},Y=function(e){e.stopPropagation(),C(e.currentTarget)},_=function(){C(null),h({type:A.ui.setEvaluation,payload:{learningActivityIndex:n}}),h({type:A.ui.toggleModal,payload:"Evaluation"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(G.a,{ref:o,children:Object(a.jsxs)(ua.a,{className:l.unitSpacing,children:[Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,sm:5,className:l.titleUnitSpacing,children:[Object(a.jsx)(gt.a,{label:"T\xedtulo",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:D,name:"title-learning-activity-".concat(r.id),placeholder:"T\xedtulo",initialvalue:H,onChange:Z}}}),O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ce.a,{onClick:Y,children:Object(a.jsx)(We.a,{})}),Object(a.jsxs)(Fe.a,{onBlur:function(){return C(null)},anchorEl:k,open:Boolean(k),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return C(null)},children:[Object(a.jsxs)(Me.a,{onClick:_,children:[Object(a.jsx)(Wa.a,{fontSize:"small"}),Object(a.jsx)(K.a,{children:"Definir Evaluaci\xf3n"})]}),Object(a.jsxs)(Me.a,{onClick:q,children:[Object(a.jsx)(ue.a,{fontSize:"small"}),Object(a.jsx)(K.a,{children:"Eliminar"})]})]})]})]}),void Ma.forEach((function(e){e.value=0})),Object(a.jsxs)(G.a,{item:!0,xs:12,sm:7,className:l.graphicUnitSpacing,children:[d.data.learningActivities[n]&&d.data.learningActivities[n].tasks&&d.data.learningActivities[n].tasks.forEach((function(e){Ma.forEach((function(t){t.title===e.learningType&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)}))})),Object(a.jsx)(Fa,{items:Ma,type:"Activity"}),!O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ce.a,{onClick:Y,children:Object(a.jsx)(We.a,{})}),Object(a.jsxs)(Fe.a,{onBlur:function(){return C(null)},anchorEl:k,open:Boolean(k),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return C(null)},children:[Object(a.jsxs)(Me.a,{onClick:_,children:[Object(a.jsx)(Wa.a,{fontSize:"small",style:{marginRight:8}}),Object(a.jsx)(K.a,{children:"Definir Evaluaci\xf3n"})]}),Object(a.jsxs)(Me.a,{onClick:q,children:[Object(a.jsx)(ue.a,{fontSize:"small",style:{marginRight:8}}),Object(a.jsx)(K.a,{children:"Eliminar Actividad"})]})]})]})]})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(G.a,{container:!0,spacing:2,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,sm:8,className:l.taskContainer,children:[Object(a.jsx)(G.a,{id:"tasks",className:l.gridTask,children:d.data.learningActivities[n]&&d.data.learningActivities[n].tasks&&d.data.learningActivities[n].tasks.map((function(e,t){return Object(a.jsx)(La,{ref:function(e){return E.current.push(e)},refTask:L[e.id],index:t,task:e,learningActivityIndex:n,learningActivityID:r.id,sumHours:c,sumMinutes:s},"task-".concat(t,"-learningActivity-").concat(n))}))}),Object(a.jsx)(re.a,{title:"Agregar tarea",arrow:!0,children:Object(a.jsx)(da.a,{"aria-label":"add-task",className:l.fab,size:"small",color:"primary",onClick:V,children:Object(a.jsx)(qa.a,{fontSize:"small"})})})]}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)("div",{className:l.descriptionContainer,children:[Object(a.jsx)(G.a,{className:l.spacingDescription,children:Object(a.jsx)(gt.a,{label:"Descripci\xf3n",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:I,name:"description-learning-activity-".concat(r.id),placeholder:"Descripci\xf3n",initialvalue:W,rowMax:3,multiline:!0,onChange:Z}}})}),Object(a.jsx)(K.a,{variant:"body2",className:l.spacingLinkedResults,color:"textSecondary",children:" Resultados Vinculados "}),Object(a.jsx)("div",{className:l.learningResultList,children:X()})]})})]})]})},n)})})),Ka=n(250),Ja=n.n(Ka),Za=function(e){var t=e.items,n=e.colorGraphicToPdf,i=wn().userConfig;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(Ja.a,{id:"pie",palette:(i.darkTheme,["#57A8E7","#E95D5D","#C8951F","#087A4C","#DFDF3F","#A75BCD"]),dataSource:t,title:"An\xe1lisis",theme:i.darkTheme&&n?"generic.contrast":"generic.light",children:[Object(a.jsx)(Ka.Series,{argumentField:"title",valueField:"value"}),Object(a.jsx)(Ka.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right",rowCount:2}),Object(a.jsx)(Ka.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText," - ").concat((100*e.percent).toFixed(1),"%")}},zIndex:2})]})})})},Xa=n(1336),Ya=n(1314),_a=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleSectionShare:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},divSectionShare:{padding:20}}})),$a=function(){var e=_a(),t=Object(i.useRef)(!0),n=P(),r=n.uiState,c=n.dispatch,s=Bn().designState.design,o=Object(i.useState)(""),l=Object(p.a)(o,1)[0],d=Object(i.useState)(""),b=Object(p.a)(d,2),g=b[0],m=b[1],h=Object(w.b)().enqueueSnackbar,f=S(),x=f.socket,O=f.emitWithTimeout,v=Object(i.useState)(Object(_.a)(s.privileges)),y=Object(p.a)(v,2),k=y[0],C=y[1];Object(i.useEffect)((function(){return function(){t.current=!1}}),[]);var T=Object(X.a)(["user-profile",s.owner],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(s.owner);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),D=T.data,I=T.error,E=T.isError,L=T.isLoading,R=function(){t.current&&C(Object(_.a)(s.privileges)),c({type:A.ui.toggleModal,payload:"Share"})},M=function(){navigator.clipboard.writeText("http://learning-activity-designer.herokuapp.com/shared-link/"+s.readOnlyLink),h("Enlace copiado.",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:2e3})},B=function(){null===x||void 0===x||x.emit("generate-new-share-link",{designId:s._id},O((function(e){return h(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return h("Error al generar el nuevo enlace. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))};if(I)return Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:I})});if(!s||!D)return Object(a.jsx)(K.a,{children:"Cargando..."});return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{open:r.isShareModalOpen,onClose:R,maxWidth:"sm",fullWidth:!0,children:[Object(a.jsx)(pt.a,{children:"Compartir Dise\xf1o"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:R,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsx)(bt.a,{dividers:!0,style:{padding:0},children:L?Object(a.jsx)(K.a,{children:"Cargando..."}):E?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:I})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:e.divSectionShare,children:[Object(a.jsx)("div",{className:e.titleSectionShare,children:Object(a.jsx)(K.a,{color:"textSecondary",children:" Compartir mediante enlace "})}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:10,paddingLeft:10,paddingRight:10},children:[Object(a.jsx)(K.a,{align:"justify",children:" Mediante el siguiente enlace puedes compartir este dise\xf1o en modo solo lectura: "}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)($.a,{style:{wordBreak:"break-word"},component:F.b,to:"/shared-link/".concat(s.readOnlyLink),onClick:R,align:"center",children:"http://learning-activity-designer.herokuapp.com/shared-link/"+s.readOnlyLink}),Object(a.jsx)(kt,{options:[{icon:Object(a.jsx)(Ya.a,{fontSize:"small"}),label:"Copiar enlace",onSelect:M},{icon:Object(a.jsx)(qa.a,{}),label:"Generar nuevo enlace",onSelect:B}]})]})]})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)("div",{className:e.divSectionShare,children:[Object(a.jsx)("div",{className:e.titleSectionShare,children:Object(a.jsx)(K.a,{color:"textSecondary",children:" Compartir a contactos "})}),Object(a.jsx)("div",{children:Object(a.jsx)(Xa.a,{value:l,blurOnSelect:!0,onChange:function(e,n){!function(e){if(e){var n=D.contacts.find((function(t){return t.name===e}));n&&(s.privileges.map((function(e){return e.user._id===n._id})).reduce((function(e,t){return e||t}))?h("El usuario ya se encuentra agregado",{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3}):t.current&&C([].concat(Object(_.a)(k),[{user:n,type:1}])),t.current&&m(""))}}(n)},inputValue:g,onInputChange:function(e,n){t.current&&m(n)},options:D.contacts.map((function(e){return e.name})),getOptionSelected:function(e,t){return e.id===t.id},renderInput:function(e){return Object(a.jsx)(gt.a,Object(N.a)(Object(N.a)({},e),{},{label:"Buscar Contacto",margin:"normal",variant:"outlined",InputProps:Object(N.a)({},e.InputProps)}))}})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(J.a,{style:{marginBottom:10}}),k.map((function(e,n){return Object(a.jsx)(G.a,{container:!0,style:{marginBottom:10},children:Object(a.jsxs)(G.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(te.a,{style:{justifyContent:"space-between"},children:Object(a.jsx)(oe.a,{style:{marginRight:7}})}),Object(a.jsxs)(te.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(K.a,{children:e.user.name+" "+e.user.lastname}),Object(a.jsx)(K.a,{color:"textSecondary",children:e.user.email})]})]}),Object(a.jsx)(te.a,{children:e.user._id===s.owner?Object(a.jsx)(K.a,{children:"Propietario"}):Object(a.jsx)(ja.a,{variant:"outlined",size:"small",children:Object(a.jsxs)(ba.a,{name:"type",value:e.type,onChange:function(a){!function(e,n,a){var i=e.target.value;if(i!==n)if("Quitar"===i)a===k.length-1?t.current&&C(Object(_.a)(k.slice(0,a))):t.current&&C([].concat(Object(_.a)(k.slice(0,a)),Object(_.a)(k.slice(a+1,k.length))));else{var r=Object(N.a)({},k[a]);r.type=i,a===k.length-1?t.current&&C([].concat(Object(_.a)(k.slice(0,a)),[r])):t.current&&C([].concat(Object(_.a)(k.slice(0,a)),[r],Object(_.a)(k.slice(a+1,k.length))))}}(a,e.type,n)},children:[Object(a.jsx)(Me.a,{value:0,children:" Editor "}),Object(a.jsx)(Me.a,{value:1,children:" Lector"}),Object(a.jsx)(Me.a,{value:"Quitar",children:" Quitar"})]},"privileges-action-".concat(n))})})]})},"privilege-".concat(n))}))]})]})]})}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:R,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:function(){null===x||void 0===x||x.emit("change-design-privileges",{designId:s._id,privileges:Object(_.a)(k)},O((function(e){e.ok||t.current&&C(Object(_.a)(s.privileges)),h(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){t.current&&C(Object(_.a)(s.privileges)),h("Error al compartir el dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),c({type:A.ui.toggleModal,payload:"Share"})},children:"Listo"})]})]})})},ei=n(18),ti=n(210),ni=function(){var e=Object(i.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(new Date(Date.now())),c=Object(p.a)(r,2),s=c[0],o=c[1],l=Object(i.useState)([]),d=Object(p.a)(l,2);return{confirmDateConfiguration:n,setDateConfiguration:a,selectedDate:s,setSelectedDate:o,privileges:d[0],setPrivileges:d[1]}},ai=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],ii=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],ri=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getFullYear(),a=e.getDate(),i=ai[e.getMonth()],r=ii[e.getDay()];return t?"".concat(r,", ").concat(a," de ").concat(i," de ").concat(n):"".concat(a," de ").concat(i," de ").concat(n)},ci=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={hour:"numeric",minute:"numeric"};return t&&(n.second="numeric"),e.toLocaleTimeString("es-ES",n)},si=function(e){var t=e.design,n=e.img,r=e.typeUserPDF,c=Object(ti.a)(ni),s=c.selectedDate,o=c.privileges,l=ei.StyleSheet.create({logo:{width:100,height:100,marginVertical:15,marginHorizontal:250},title:{fontSize:20,textAlign:"center",marginBottom:25},box:{width:"100%"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},date:{position:"absolute",fontSize:12,bottom:50,textAlign:"center"},marginTitle:{fontSize:15,marginLeft:35,marginTop:15},secondTitle:{fontSize:17,textAlign:"center",marginBottom:15,marginLeft:16,marginRight:16},body:{paddingTop:35,paddingBottom:65},table:{display:"table",flexDirection:"column",marginLeft:15,marginBottom:10,marginRight:15,justifyContent:"flex-start",alignContent:"stretch",flexWrap:"nowrap",alignItems:"stretch"},row:{display:"flex",flexDirection:"row",justifyContent:"space-around",fontSize:12},cell:{flexGrow:1,flexShrink:1,marginLeft:16,marginRight:16,marginBottom:3,flexBasis:"auto",alignSelf:"stretch"},breakLine:{width:"100%",height:400}}),d=Object(i.useRef)(!0),u=0;return Object(i.useEffect)((function(){return function(){d.current=!1}}),[]),o.forEach((function(e){e.selected&&(u+=1)})),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(ei.Document,{children:Object(a.jsxs)(ei.Page,{size:"A4",wrap:!0,style:l.body,children:[Object(a.jsxs)(ei.View,{style:l.box,children:[Object(a.jsx)(ei.Image,{src:sn,style:l.logo}),""===t.metadata.name?Object(a.jsx)(ei.Text,{style:l.title,children:" Nombre no definido. "}):Object(a.jsxs)(ei.Text,{style:l.title,children:[" ",t.metadata.name,". "]}),Object(a.jsxs)(ei.View,{style:{textAlign:"center",marginBottom:15},children:[o.map((function(e){return e.selected})).reduce((function(e,t){return e||t}))&&1===u?Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797"},children:"Autor"}):u>1&&Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797"},children:"Autores"}),o.map((function(e,t){return e.selected?Object(a.jsx)("div",{children:Object(a.jsx)(ei.Text,{style:{fontSize:12,marginLeft:10},children:e.user.name+" "+e.user.lastname})},"author-".concat(t)):Object(a.jsx)("div",{},"author-".concat(t))}))]}),Object(a.jsxs)(ei.View,{style:l.table,children:["teacher"===r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(ei.View,{style:[l.row],children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Nombre"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"\xc1rea disciplinar"})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[""===t.metadata.name?Object(a.jsx)(ei.Text,{style:l.cell,children:"No especificado"}):Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.name,"."]}),Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.category.name,"."]})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Tiempo de trabajo"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Tama\xf1o de la clase"})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.workingTime.hours," hrs : ",t.metadata.workingTime.minutes," min."]}),Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.classSize,"."]})]})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Conocimiento Previo"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Objetivos"})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[""===t.metadata.priorKnowledge?Object(a.jsx)(ei.Text,{style:l.cell,children:"No especificado"}):Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.priorKnowledge,"."]}),""===t.metadata.objective?Object(a.jsx)(ei.Text,{style:l.cell,children:"No especificado"}):Object(a.jsxs)(ei.Text,{style:l.cell,children:[t.metadata.objective,"."]})]}),Object(a.jsxs)(ei.View,{style:{marginLeft:16,marginRight:16},children:[Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:5,marginBottom:5},children:"Descripci\xf3n"}),""===t.metadata.description?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:t.metadata.description})]}),Object(a.jsxs)(ei.View,{style:{marginLeft:16,marginRight:16},children:[Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:5,marginBottom:5},children:"Pauta de evaluaci\xf3n"}),""===t.metadata.evaluationPattern?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center",color:"#5564eb"},children:t.metadata.evaluationPattern})]}),Object(a.jsxs)(ei.View,{style:{marginLeft:16,marginRight:16},children:[Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:5,marginBottom:5},children:"Evaluaci\xf3n"}),""===t.metadata.evaluation?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:t.metadata.evaluation})]})]}),Object(a.jsxs)(ei.View,{style:[l.table,{marginLeft:16,marginRight:16,height:650}],wrap:!1,children:[Object(a.jsx)(ei.Text,{style:[l.secondTitle,{borderBottom:1,borderColor:"#979797"}],children:" Resultados de aprendizaje"}),0===t.metadata.results.length?Object(a.jsx)(ei.Text,{style:{fontSize:12,marginBottom:5,marginLeft:16},children:"No han sido proporcionados."}):t.metadata.results.map((function(e,t){return Object(a.jsxs)(ei.View,{children:[Object(a.jsxs)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:2,marginBottom:2,marginLeft:16},children:["Resultado de aprendizaje n\xfamero ",t+1,":"]}),Object(a.jsx)(ei.Text,{style:{fontSize:12,marginBottom:2,marginLeft:16},children:e.verb+" "+e.description})]},"learning-result-".concat(t))}))]}),Object(a.jsxs)(ei.View,{style:[l.table],wrap:!1,children:[Object(a.jsx)(ei.Text,{style:[l.secondTitle,{borderBottom:1,borderColor:"#979797"}],children:" Actividades"}),t.data.learningActivities&&t.data.learningActivities.map((function(e,t){return Object(a.jsxs)(ei.View,{style:{marginBottom:20},wrap:!(t>=1),children:[Object(a.jsxs)(ei.View,{style:{marginBottom:5},children:[Object(a.jsx)(ei.Text,{style:{color:"#979797",fontSize:14,marginLeft:16},children:"T\xedtulo"}),""===e.title?Object(a.jsx)(ei.Text,{style:{fontSize:13,marginLeft:16},children:" No definido. "}):Object(a.jsxs)(ei.Text,{style:{fontSize:13,marginLeft:16},children:[" ",e.title," "]})]}),Object(a.jsxs)(ei.View,{style:{marginLeft:16,marginRight:20,marginBottom:10},children:[e.evaluation.length<=1?Object(a.jsx)(ei.Text,{style:{fontSize:14,color:"#979797",marginTop:5},children:"Evaluaci\xf3n."}):Object(a.jsx)(ei.Text,{style:{fontSize:14,color:"#979797",marginTop:5},children:"Evaluaciones."}),0===e.evaluation.length?Object(a.jsx)(ei.Text,{style:{fontSize:13},children:" No se ha especificado."}):e.evaluation.map((function(e,t){return Object(a.jsxs)(ei.View,{children:[Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:5},children:"Tipo"}),"Seleccionar"===e.type?Object(a.jsx)(ei.Text,{style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{style:{fontSize:12,justifyContent:"center"},children:e.type}),Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:7},children:"Descripci\xf3n"}),""===e.description?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"flex-end"},children:e.description})]},"evaluation-".concat(t))}))]}),e.tasks&&e.tasks.map((function(e,n){return Object(a.jsx)(ei.View,{children:Object(a.jsxs)(ei.View,{style:[l.table,{borderColor:"Investigaci\xf3n"===e.learningType?"#57A8E7":"Adquisici\xf3n"===e.learningType?"#E95D5D":"Producci\xf3n"===e.learningType?"#C8951F":"Discusi\xf3n"===e.learningType?"#087A4C":"Colaboraci\xf3n"===e.learningType?"#DFDF3F":"Pr\xe1ctica"===e.learningType?"#A75BCD":"Seleccionar"===e.learningType&&"#979797",borderLeftWidth:40}],children:[Object(a.jsxs)(ei.View,{style:[l.row,{marginTop:5}],children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Aprendizaje"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Tiempo"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Modalidad"})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:["Seleccionar"===e.learningType?Object(a.jsx)(ei.Text,{style:[l.cell],children:"No especificado."}):Object(a.jsx)(ei.Text,{style:[l.cell],children:e.learningType}),Object(a.jsxs)(ei.Text,{style:[l.cell],children:[e.duration.hours," hrs : ",e.duration.minutes," min."]}),"Seleccionar"===e.modality||0===e.modality.trim().length?Object(a.jsx)(ei.Text,{style:[l.cell],children:" No especificado. "}):Object(a.jsxs)(ei.Text,{style:[l.cell],children:[" ",e.modality," "]})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"Formato"}),"Grupal"===e.format&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}],children:"N\xfamero de integrantes"}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}]})]})]}),Object(a.jsxs)(ei.View,{style:[l.row],children:["Seleccionar"===e.format||0===e.format.trim().length?Object(a.jsx)(ei.Text,{style:[l.cell],children:"No especificado."}):Object(a.jsx)(ei.Text,{style:[l.cell],children:e.format}),"Grupal"===e.format&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(ei.Text,{style:l.cell,children:[" ",e.groupSize]}),Object(a.jsx)(ei.Text,{style:[l.cell,{color:"#979797"}]})]})]}),Object(a.jsxs)(ei.View,{style:{marginLeft:16,marginRight:16},children:[Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:20,marginBottom:5},children:"Descripci\xf3n"}),""===e.description?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:" No especificado. "}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.description}),Object(a.jsx)(ei.Text,{style:{fontSize:12,color:"#979797",marginTop:20,marginBottom:5},children:"Enlace de recursos"}),0===e.resourceLinks.length?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No se han proporcionado recursos"}):e.resourceLinks.map((function(e,i){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ei.Text,{style:{fontSize:10,color:"#979797",marginBottom:5},children:"T\xedtulo"}),""===e.title?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:10,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:10,justifyContent:"center"},children:e.title}),Object(a.jsx)(ei.Text,{style:{fontSize:10,color:"#979797",marginTop:10,marginBottom:5},children:"Enlace"}),""===e.link?Object(a.jsx)(ei.Text,{wrap:!0,style:{fontSize:10,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(ei.Link,{wrap:!0,style:{fontSize:10,justifyContent:"center",color:"#5564eb"},children:e.link})]},"resource-".concat(i,"-task-").concat(n,"-learningnActivity").concat(t))}))]})]})},"task-".concat(n))}))]},"learning-activity-".concat(t))}))]}),Object(a.jsx)(ei.View,{style:{marginTop:15},wrap:!1,children:"teacher"===r&&Object(a.jsx)(ei.Image,{src:n})})]}),Object(a.jsx)(ei.Text,{style:l.date,render:function(e){return 1===e.pageNumber&&ri(new Date(s),!0)},fixed:!0}),Object(a.jsx)(ei.Text,{style:l.pageNumber,render:function(e){var t=e.pageNumber,n=e.totalPages;return"".concat(t," / ").concat(n)},fixed:!0})]})})})},oi=n(617),li=n.n(oi),di=function(e){var t=e.children,n=e.value,i=e.index,r=Object(W.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(N.a)(Object(N.a)({role:"tabpanel",hidden:n!==i,id:"full-width-tabpanel-".concat(i),"aria-labelledby":"full-width-tab-".concat(i)},r),{},{children:n===i&&Object(a.jsx)(K.a,{component:"span",children:t})}))},ui=n(1346),ji=n(1315),pi=n(1316),bi=n(89),gi=n(1327),mi=n(618),hi=n(386),fi=n.n(hi),xi=Object(B.a)((function(e){return{author:{padding:"15px 10px 15px 20px",display:"flex",justifyContent:"start",alignItems:"center",textDecoration:"none"}}})),Oi=function(){var e=xi(),t=P(),n=t.uiState,r=t.dispatch,c=Object(ti.a)(ni),s=c.selectedDate,o=c.setSelectedDate,l=c.privileges,d=c.setPrivileges,u=Object(i.useState)(!1),j=Object(p.a)(u,2),b=j[0],g=j[1],m=Object(i.useRef)(!0);Object(i.useEffect)((function(){return function(){m.current=!1}}),[]);var h=function(e){return function(t,n){m.current&&g(!!n&&e)}};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(te.a,{children:[Object(a.jsxs)(ui.a,{expanded:"panel1"===b,onChange:h("panel1"),children:[Object(a.jsx)(ji.a,{expandIcon:Object(a.jsx)(fi.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:Object(a.jsx)(K.a,{children:"Definir fecha que se mostrar\xe1 en el documento PDF generado."})}),Object(a.jsx)(pi.a,{children:Object(a.jsx)("div",{children:Object(a.jsx)(bi.a,{utils:mi.a,children:Object(a.jsx)(G.a,{container:!0,children:Object(a.jsx)(gi.a,{disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Definir fecha",value:s,onChange:function(e){m.current&&o(e)},KeyboardButtonProps:{"aria-label":"change date"}})})})})})]}),Object(a.jsxs)(ui.a,{expanded:"panel2"===b,onChange:h("panel2"),children:[Object(a.jsx)(ji.a,{expandIcon:Object(a.jsx)(fi.a,{}),"aria-controls":"panel2bh-content",id:"panel2bh-header",children:Object(a.jsx)(K.a,{children:"Definir autores en el documento"})}),Object(a.jsx)(pi.a,{children:Object(a.jsx)("div",{style:{marginTop:10},children:Object(a.jsx)(ja.a,{component:"fieldset",children:n.pdf.privileges.map((function(t,n){var i;return Object(a.jsx)("div",{style:{marginTop:10},children:0===t.type&&Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:e.author,children:[Object(a.jsx)(on.a,{control:Object(a.jsx)(Zn.a,{checked:t.selected,onChange:function(e){return function(e,t){if(m.current){var n=JSON.parse(JSON.stringify(l));n[t].selected=!n[t].selected,d(n),r({type:A.ui.setPDFConfig,payload:{field:"privileges",value:n}})}}(0,n)}})}),Object(a.jsx)(oe.a,{alt:je(t.user.name,t.user.lastname),src:null!==(i=t.user.img)&&void 0!==i?i:"",children:pe(t.user.name,t.user.lastname)}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10},children:t.user.name+" "+t.user.lastname})]})})},"authors-".concat(n))}))})})})]})]})})},vi=n(1318),yi=Object(B.a)((function(e){return{spaceInit:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},menu:{borderBottom:"1px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},container:{display:"flex",height:"100%",width:"100%"},panel:{width:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingFile:{"-webkit-backface-visibility":"hidden",animation:"$scaleAnimation 1000ms ".concat(e.transitions.easing.easeInOut),animationIterationCount:"infinite",animationDirection:"alternate"},"@keyframes scaleAnimation":{from:{height:300,width:300},to:{height:150,width:150}}}})),wi=function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}},ki=function(e){var t=e.imgGraphic,n=e.setPdfView,r=yi(),c=P(),s=c.uiState,o=c.dispatch,l=s.pdf.typeUserPDF,d=Bn().designState.design,b=Object(i.useState)(null),g=Object(p.a)(b,2),m=g[0],h=g[1],f=Object(i.useState)(0),x=Object(p.a)(f,2),O=x[0],v=x[1],y=Object(ti.a)(ni).setPrivileges,w=Object(i.useState)(null),k=Object(p.a)(w,2),C=k[0],S=k[1],T=Object(i.useRef)(!0);Object(i.useEffect)((function(){return function(){T.current=!1}}),[]),Object(i.useEffect)((function(){if(T.current){var e=[];d.privileges.forEach((function(t){var n=JSON.parse(JSON.stringify(t));n.selected=!1,e.push(n)})),y(e),o({type:A.ui.setPDFConfig,payload:{field:"privileges",value:e}})}}),[d.privileges,o,y]),Object(i.useEffect)((function(){T.current&&m&&d&&l&&S(Object(a.jsx)(si,{design:d,img:m,typeUserPDF:l}))}),[d,m,l,S]);var D=function(){o({type:A.ui.setPDF,payload:null}),o({type:A.ui.toggleModal,payload:"PDF"}),n(!1)};return m||function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.current){e.next=5;break}return e.next=3,li()(t.current,{width:800,height:700,scrollX:279});case 3:n=e.sent,h(n.toDataURL("image/jpeg"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),m&&C?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{onClose:D,open:s.isPDFModalOpen,fullScreen:!0,children:[Object(a.jsxs)(pt.a,{className:r.titleMargin,children:["Exportar dise\xf1o",Object(a.jsxs)(oa.a,{value:O,onChange:function(e,t){v(t)},indicatorColor:"primary",textColor:"primary","aria-label":"full width tabs",centered:!0,children:[Object(a.jsx)(la.a,Object(N.a)({label:"CONFIGURACI\xd3N"},wi(0))),Object(a.jsx)(la.a,Object(N.a)({label:"VISTA PREVIA"},wi(1)))]})]}),Object(a.jsx)(ce.a,{"aria-label":"close",className:r.closeButton,onClick:D,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsx)(bt.a,{dividers:!0,children:Object(a.jsxs)(te.a,{className:r.container,children:[Object(a.jsx)(di,{value:O,index:0,className:r.panel,children:Object(a.jsx)(Oi,{})}),Object(a.jsx)(di,{value:O,index:1,className:r.panel,children:Object(a.jsx)(ei.PDFViewer,{width:"100%",height:"100%",children:t&&C&&C})})]})}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:D,children:"Cancelar"}),Object(a.jsx)("div",{className:r.spaceInit,children:Object(a.jsx)(ei.PDFDownloadLink,{style:{textDecoration:"none"},document:C,fileName:"designdata.pdf",children:function(e){e.blob,e.url;var t=e.loading;e.error;return Object(a.jsx)(ee.a,{variant:"contained",disabled:t,children:" Descargar "})}})})]})]})}):Object(a.jsx)(St.a,{className:r.backdrop,open:!0,children:Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(te.a,{width:300,height:300,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(vi.a,{className:r.loadingFile})}),Object(a.jsx)(K.a,{children:"Generando archivo pdf..."})]})})},Ci=Object(B.a)((function(e){return{spaceResource:{marginTop:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},tooltip:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},icon:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},resourceLinkGrid:{display:"grid",gridTemplateColumns:"95% 5%"}}})),Si=function(e){var t=e.index,n=e.resource,r=e.newResource,c=e.setNewResource,s=Ci(),o=P(),l=o.uiState,d=o.dispatch,u=Object(i.useRef)(!0);Object(i.useEffect)((function(){return function(){u.current=!1}}),[]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:s.spaceResource,children:Object(a.jsxs)(G.a,{children:[Object(a.jsxs)("div",{className:s.resourceLinkGrid,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"title",value:n.title,onChange:function(e){return function(e){var n=e.target.value;u.current&&c((function(e){return e.map((function(e,a){return a===t&&(e.title=n),e}))})),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(e)},label:"T\xedtulo",type:"text",fullWidth:!0}),Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"link",value:n.link,onChange:function(e){return function(e){var n=e.target.value;u.current&&c((function(e){return e.map((function(e,a){return a===t&&(e.link=n),e}))})),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(e)},label:"Enlace",type:"text",fullWidth:!0})]}),Object(a.jsx)("div",{children:Object(a.jsx)(te.a,{display:"flex",flexDirection:"row-reverse",children:Object(a.jsx)(te.a,{children:Object(a.jsx)(re.a,{title:"Eliminar recurso",className:s.tooltip,children:Object(a.jsx)(ce.a,{onClick:function(){return function(e){e===r.length-1?u.current&&c(Object(_.a)(r.slice(0,e))):u.current&&c([].concat(Object(_.a)(r.slice(0,e)),Object(_.a)(r.slice(e+1,r.length)))),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(t)},children:Object(a.jsx)(ue.a,{className:s.icon})})})})})})]}),Object(a.jsx)(J.a,{style:{marginTop:10}})]})},t)})},Ti=Object(B.a)((function(e){return{spaceInit:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},buttonZone:Object(D.a)({width:"100%",display:"flex",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexWrap:"wrap"}),resourceZone:Object(D.a)({height:"auto"},e.breakpoints.up("xs"),{height:"90%",overflow:"auto",overflowX:"hidden"}),contentSpace:Object(D.a)({height:"auto",paddingBottom:e.spacing(6)},e.breakpoints.up("xs"),{height:"calc(100vh - 500px)",overflow:"auto"})}})),Di=function(){var e=Ti(),t=Object(i.useRef)(!0),n=P(),r=n.uiState,c=n.dispatch,s=r.resourceLink,o=s.learningActivityIndex,l=s.taskIndex,d=Bn().designState.design,u=Object(i.useState)(Object(_.a)(d.data.learningActivities[o].tasks[l].resourceLinks)),j=Object(p.a)(u,2),b=j[0],g=j[1],m=S(),h=m.socket,f=m.emitWithTimeout,x=Object(w.b)().enqueueSnackbar;Object(i.useEffect)((function(){return function(){t.current=!1}}),[]);var O=function(){t.current&&g(Object(_.a)(d.data.learningActivities[o].tasks[l].resourceLinks)),c({type:A.ui.setResourceLink,payload:{learningActivityIndex:null,taskIndex:null}}),c({type:A.ui.toggleModal,payload:"Resource"})};return Object(a.jsx)("div",{children:Object(a.jsxs)(jt.a,{onClose:O,open:r.isResourceModalOpen,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(pt.a,{children:"Administrar Recursos"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:O,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsx)(bt.a,{dividers:!0,children:Object(a.jsxs)(G.a,{className:e.contentSpace,children:[Object(a.jsx)("div",{className:e.buttonZone,children:Object(a.jsx)(ee.a,{variant:"outlined",color:"primary",onClick:function(){t.current&&g([].concat(Object(_.a)(b),[{title:"",link:""}])),r.userSaveDesign&&c({type:A.ui.setUserSaveDesign,payload:!1})},children:"Agregar recurso"})}),Object(a.jsx)(te.a,{className:e.resourceZone,children:Object(a.jsx)(te.a,{children:b.map((function(e,t){return Object(a.jsx)(Si,{index:t,resource:e,newResource:b,setNewResource:g},"resource-".concat(t,"-task-").concat(l,"-learningActivity-").concat(o))}))})})]})}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:O,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:function(){null===h||void 0===h||h.emit("change-resource-in-task",{designId:d._id,learningActivityIndex:o,taskIndex:l,resources:Object(_.a)(b)},f((function(e){x(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return x("Error al modificar los recursos en la tarea. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),c({type:A.ui.toggleModal,payload:"Resource"})},children:"Guardar recursos"})]})]})})},Ni=Object(B.a)((function(e){return{spaceResource:{marginTop:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},tooltip:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},icon:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},resourceEvaluationGrid:{display:"grid",gridTemplateColumns:"95% 5%"}}})),Ai=function(e){var t=e.index,n=e.evaluation,i=e.newEvaluation,r=e.setNewEvaluation,c=e.learningActivityIndex,s=Ni(),o=P(),l=o.uiState,d=o.dispatch;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:s.spaceResource,children:Object(a.jsxs)(G.a,{children:[Object(a.jsxs)("div",{className:s.resourceEvaluationGrid,children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)(ja.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(pa.a,{id:"evaluation-".concat(t,"-learningActivity-").concat(c),children:" Tipo de evaluaci\xf3n "}),Object(a.jsxs)(ba.a,{labelId:"evaluationtype-".concat(t,"-learningActivity-").concat(c),label:"Tipo de evaluaci\xf3n",name:"type",value:n.type,onChange:function(e){return function(e){var n=e.target.value;r((function(e){return e.map((function(e,a){return a===t&&(e.type=n),e}))})),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(e)},children:[Object(a.jsx)(Me.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Me.a,{value:"Diagnostico",children:" Diagnostico"}),Object(a.jsx)(Me.a,{value:"Formativa",children:" Formativa"}),Object(a.jsx)(Me.a,{value:"Sumativa",children:" Sumativa"})]})]}),Object(a.jsx)(gt.a,{variant:"outlined",margin:"dense",name:"description",value:n.description,onChange:function(e){return function(e){var n=e.target.value;r((function(e){return e.map((function(e,a){return a===t&&(e.description=n),e}))})),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(e)},label:"Descripci\xf3n",type:"text",fullWidth:!0,multiline:!0,rows:4})]}),Object(a.jsx)("div",{children:Object(a.jsx)(te.a,{display:"flex",flexDirection:"row-reverse",children:Object(a.jsx)(te.a,{children:Object(a.jsx)(re.a,{title:"Eliminar evaluaci\xf3n",className:s.tooltip,children:Object(a.jsx)(ce.a,{onClick:function(){return function(e){e===i.length-1?r(Object(_.a)(i.slice(0,e))):r([].concat(Object(_.a)(i.slice(0,e)),Object(_.a)(i.slice(e+1,i.length)))),l.userSaveDesign&&d({type:A.ui.setUserSaveDesign,payload:!1})}(t)},children:Object(a.jsx)(ue.a,{className:s.icon})})})})})})]}),Object(a.jsx)(J.a,{style:{marginTop:10}})]})},t)})},Ii=Object(B.a)((function(e){return{spaceInit:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},buttonZone:Object(D.a)({width:"100%",display:"flex",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexWrap:"wrap"}),resourceZone:Object(D.a)({height:"auto"},e.breakpoints.up("xs"),{height:"100%",overflow:"auto",overflowX:"hidden"}),contentSpace:Object(D.a)({height:"auto",paddingBottom:e.spacing(6)},e.breakpoints.up("xs"),{height:"calc(100vh - 500px)",overflow:"auto"})}})),Ei=function(){var e=Ii(),t=P(),n=t.uiState,r=t.dispatch,c=Bn().designState.design,s=S(),o=s.socket,l=s.emitWithTimeout,d=n.evaluationData.learningActivityIndex,u=Object(i.useState)(Object(_.a)(c.data.learningActivities[d].evaluation)),j=Object(p.a)(u,2),b=j[0],g=j[1],m=Object(w.b)().enqueueSnackbar,h=function(){g(c.data.learningActivities[d].evaluation),r({type:A.ui.setEvaluation,payload:{learningActivityIndex:null}}),r({type:A.ui.toggleModal,payload:"Evaluation"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{onClose:h,open:n.isEvaluationModalOpen,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(pt.a,{children:"Evaluaci\xf3n de la actividad."}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:h,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsxs)(bt.a,{dividers:!0,children:[Object(a.jsx)(K.a,{color:"textSecondary",style:{marginBottom:10},children:" En el siguiente apartado el docente deber\xe1 definir las evaluaciones que el estudiante deber\xe1 realizar en cada actividad, se tienen 3 tipos de evaluaciones. La primera evaluaci\xf3n es de tipo diagnostico. La segunda de tipo Formativa. La tercera ser\xe1 de tipo sumativa."}),Object(a.jsx)("div",{className:e.buttonZone,children:Object(a.jsx)(ee.a,{variant:"outlined",color:"primary",onClick:function(){g([].concat(Object(_.a)(b),[{type:"Seleccionar",description:""}])),n.userSaveDesign&&r({type:A.ui.setUserSaveDesign,payload:!1})},children:"Agregar evaluaci\xf3n"})}),Object(a.jsx)(G.a,{className:e.contentSpace,children:Object(a.jsx)(te.a,{className:e.resourceZone,children:Object(a.jsx)(te.a,{children:b.map((function(e,t){return Object(a.jsx)(Ai,{index:t,evaluation:e,newEvaluation:b,setNewEvaluation:g,learningActivityIndex:d},"evaluation-".concat(t,"-learningActivity-").concat(d))}))})})})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:h,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:function(){null===o||void 0===o||o.emit("add-evaluation-in-activity",{designId:c._id,learningActivityID:c.data.learningActivities[d].id,evaluation:Object(_.a)(b)},l((function(e){e.ok&&n.userSaveDesign&&r({type:A.ui.setUserSaveDesign,payload:!1}),m(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return m("Error al modificar las evaluaciones de la actividad de aprendizaje. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),h()},children:"Guardar evaluaci\xf3n."})]})]})})},Pi=Object(B.a)((function(e){return{root:{background:e.palette.background.workSpace,minHeight:"calc(100vh - 412px)"},leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider),background:e.palette.background.paper},workspace:Object(D.a)({paddingLeft:15,paddingRight:15,position:"relative",background:e.palette.background.workSpace,height:"auto",paddingBottom:e.spacing(2)},e.breakpoints.up("md"),{height:"calc(100vh - 212px)"}),rightPanel:{display:"flex",position:"relative",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.paper},buttonGroupWorkSpace:{height:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1)},textLeftPanel:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},spaceData:{marginBottom:e.spacing(1),borderBottom:"2px solid ".concat(e.palette.divider)},LeftPanelMetadata:Object(D.a)({marginTop:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),height:"auto",paddingBottom:e.spacing(1)},e.breakpoints.up("xs"),{height:"calc(100vh - 235px)",overflow:"auto"}),textLeftPanelMetadata:{marginTop:e.spacing(3)},graphicsSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},betweenGraphics:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},workSpaceUnits:Object(D.a)({width:"100%",height:"auto"},e.breakpoints.up("md"),{height:"85%",overflow:"auto",overflowX:"hidden"}),buttonZone:Object(D.a)({width:"100%",display:"flex",justifyContent:"space-between",marginBottom:15},e.breakpoints.down("md"),{flexWrap:"wrap"}),fab:{position:"absolute",bottom:5,right:e.spacing(2)},origin:{marginTop:10,marginBottom:10,border:"1px solid ".concat(e.palette.divider),borderRadius:4,cursor:"pointer",userSelect:"none",backgroundColor:e.palette.background.design,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}}}})),Li=function(){var e=Pi(),t=Bn().designState,n=x().authState,r=Object(M.g)(),c=t.design,s=c.metadata,o=S(),l=o.socket,d=o.emitWithTimeout,u=Object(w.b)().enqueueSnackbar,j=Object(U.a)(),b=Object(Q.a)(j.breakpoints.down("md")),g=P(),m=g.uiState,h=g.dispatch,f=Object(i.useState)(null),O=Object(p.a)(f,2),v=O[0],y=O[1],k=Object(i.useRef)(),C=wn().userConfig,T=Object(i.useState)(!1),D=Object(p.a)(T,2),N=D[0],I=D[1],E=!1,L=!1,R=!1,B=c.data.learningActivities.reduce((function(e,t){return e[t.id]=Object(i.createRef)(),e}),{}),z=function(e){I(!0),H(),h({type:A.ui.setPDF,payload:e}),h({type:A.ui.toggleModal,payload:"PDF"})},H=function(){y(null)};return c.data.learningActivities.forEach((function(e){void 0!==e.tasks&&e.tasks.forEach((function(e){""!==e.learningType&&"Seleccionar"!==e.learningType&&(E=!0),""!==e.format&&"Seleccionar"!==e.format&&(L=!0),""!==e.modality&&"Seleccionar"!==e.modality&&(R=!0)}))})),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{container:!0,className:e.root,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:[Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(K.a,{className:e.textLeftPanel,children:" INFORMACI\xd3N DISE\xd1O "})}),Object(a.jsx)(J.a,{className:e.spaceData}),Object(a.jsxs)(G.a,{className:e.LeftPanelMetadata,children:[Object(a.jsx)(G.a,{children:s&&s.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",children:" Nombre "}),Object(a.jsx)(K.a,{variant:"body2",children:s.name}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.category&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:"Tema"}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.category.name," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.workingTime&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Tiempo de trabajo "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.workingTime.hours," (hrs) : ",s.workingTime.minutes," (min)"]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.workingTimeDesign&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:"Tiempo de trabajo Dise\xf1o"}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.workingTimeDesign.hours," (hrs) : ",s.workingTimeDesign.minutes," (min)"]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Tama\xf1o de la clase "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.classSize," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.priorKnowledge&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Conocimiento Previo "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.priorKnowledge," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Descripci\xf3n "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.description," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.objective&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Objetivos "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",s.objective," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&null!==s.scoreMean&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Valoraci\xf3n media (0 - 5) "}),Object(a.jsx)(te.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:s.scoreMean}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:s&&s.results&&Object(a.jsxs)("div",{className:e.textLeftPanelMetadata,children:[s.results.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{variant:"body2",color:"textSecondary",children:["Resultado de aprendizaje ",t+1]}),Object(a.jsx)(K.a,{variant:"body2",gutterBottom:!0,children:e.verb+" "+e.description})]},"learning-result-".concat(t))})),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:c.origin&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Derivado del dise\xf1o: "}),Object(a.jsxs)(ne.a,{className:e.origin,elevation:0,children:[Object(a.jsx)(ae.a,{onClick:function(){return function(e){e.privileges.find((function(e){return n.user.uid===e.user._id}))?e.privileges.find((function(e){return n.user.uid===e.user&&0===e.type}))?r.push("/designs/".concat(e._id)):r.push("/designs/reader/".concat(e._id)):e.metadata.isPublic?r.push("/designs/reader/".concat(e._id)):u("Usted no tiene acceso a este dise\xf1o.",{variant:"error",autoHideDuration:2e3})}(c.origin)},children:Object(a.jsxs)(te.a,{style:{display:"flex",alignItems:"center",padding:5},children:[Object(a.jsx)(le.a,{style:{marginBottom:5}}),Object(a.jsx)(K.a,{style:{marginLeft:10},variant:"body2",children:c.origin.metadata.name})]})}),Object(a.jsx)(J.a,{}),Object(a.jsx)(ae.a,{component:F.b,to:"/profile/".concat(c.origin.owner._id),children:Object(a.jsxs)(te.a,{style:{display:"flex",alignItems:"center",padding:5},children:[Object(a.jsx)(oe.a,{style:{width:25,height:25,fontSize:15},alt:je(c.origin.owner.name,c.origin.owner.lastname),src:c.origin.owner.img&&c.origin.owner.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(c.origin.owner.img):"",children:pe(c.origin.owner.name,c.origin.owner.lastname)}),Object(a.jsx)(K.a,{style:{marginLeft:10},variant:"body2",children:je(c.origin.owner.name,c.origin.owner.lastname)})]})})]})]})})]})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsxs)("div",{className:e.buttonZone,children:[Object(a.jsxs)(Fe.a,{variant:"selectedMenu",anchorEl:v,keepMounted:!0,open:Boolean(v),onClose:H,children:[Object(a.jsx)(Me.a,{onClick:function(){return z("teacher")},children:"PDF Docente"}),Object(a.jsx)(Me.a,{onClick:function(){return z("student")},children:"PDF Estudiante"}),Object(a.jsx)(Me.a,{onClick:function(e){var t=JSON.parse(JSON.stringify(c));t.comments=[],t.assessments=[],t.folder="",t.origin=t._id,t.privileges=[],t.owner="",t.metadata.scoreMean=0;var n,a=Object(Ct.a)(t.data.learningActivities);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.id=Ua()().toString();var r,s=Object(Ct.a)(i.tasks);try{for(s.s();!(r=s.n()).done;){r.value.id=Ua()().toString()}}catch(o){s.e(o)}finally{s.f()}}}catch(o){a.e(o)}finally{a.f()}delete t._id,delete t.createdAt,delete t.updatedAt,delete t.readOnlyLink,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"example.json";"object"===typeof e&&(e=JSON.stringify(e));var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.click()}(t,"".concat(0===c.metadata.name.trim().length?"Dise\xf1o sin nombre":c.metadata.name.trim(),".json")),H()},children:"Respaldar Dise\xf1o"})]}),Object(a.jsxs)(jn.a,{size:"small",fullWidth:b,className:e.buttonGroupWorkSpace,children:[Object(a.jsx)(ee.a,{onClick:function(e){y(e.currentTarget)},children:"Exportar"}),Object(a.jsx)(ee.a,{onClick:function(){h({type:A.ui.toggleModal,payload:"Share"})},children:"Compartir"}),Object(a.jsx)(ee.a,{onClick:function(e){null===l||void 0===l||l.emit("save-design",{designId:c._id},d((function(e){e.ok&&!m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!0}),u(e.message,{variant:"success",autoHideDuration:2e3})}),(function(){return u("Error al intentar guardar el dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))},children:"Guardar"})]})]}),Object(a.jsx)(te.a,{id:"learningActivities",className:e.workSpaceUnits,children:Object(a.jsx)(te.a,{children:Object(a.jsx)(G.a,{className:e.workSpaceUnits,children:Object(a.jsx)(G.a,{children:c.data.learningActivities&&c.data.learningActivities.map((function(e,t){return Object(a.jsx)(Ga,{refActivity:B[e.id],index:t,learningActivity:e,sumHours:0,sumMinutes:0},"learningActivity-".concat(t))}))})})})}),Object(a.jsx)(re.a,{title:"Agregar actividad de aprendizaje",arrow:!0,children:Object(a.jsx)(da.a,{color:"primary",className:e.fab,onClick:function(){var e=Ua()().toString();null===l||void 0===l||l.emit("new-learningActivity",{designId:c._id,id:e},d((function(e){if(!e.ok)return u(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return u("Error al agregar la nueva actividad de aprendizaje. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),h({type:A.ui.setScrollToNewActivity,payload:!0})},children:Object(a.jsx)(qa.a,{})})})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel,children:[(Ma.forEach((function(e){e.value=0})),Ba.forEach((function(e){e.value=0})),za.forEach((function(e){e.value=0})),void Ha.forEach((function(e){e.value=0}))),Object(a.jsx)("div",{style:{position:"absolute",zIndex:1,width:"100%"},children:Object(a.jsxs)(G.a,{className:e.graphicsSpacing,children:[c.data.learningActivities&&c.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){Ma.forEach((function(t){t.title===e.learningType&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),Ba.forEach((function(t){t.title===e.learningType&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),za.forEach((function(t){t.title===e.format&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),Ha.forEach((function(t){t.title===e.modality&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)}))}))})),E&&Object(a.jsx)("div",{className:e.betweenGraphics,children:Object(a.jsx)(Za,{items:Ba,colorGraphicToPdf:!0})}),L&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[Object(a.jsx)(K.a,{children:"Formato"}),Object(a.jsx)(Fa,{items:za,type:"Format",legends:!0,colorGraphicToPdf:!0})]}),R&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[Object(a.jsx)(K.a,{children:"Modalidad"}),Object(a.jsx)(Fa,{items:Ha,type:"Modality",legends:!0,colorGraphicToPdf:!0})]})]})}),Object(a.jsx)("div",{style:{zIndex:0,width:"100%"},children:Object(a.jsxs)(G.a,{className:e.graphicsSpacing,ref:k,children:[c.data.learningActivities&&c.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){Ma.forEach((function(t){t.title===e.learningType&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),Ba.forEach((function(t){t.title===e.learningType&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),za.forEach((function(t){t.title===e.format&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)})),Ha.forEach((function(t){t.title===e.modality&&(t.minutes=60*e.duration.hours+e.duration.minutes,t.value=t.value+t.minutes)}))}))})),E&&Object(a.jsx)("div",{className:e.betweenGraphics,children:Object(a.jsx)(Za,{items:Ba,colorGraphicToPdf:!1})}),L&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[C.darkTheme?Object(a.jsx)(K.a,{style:{color:"#000000"},children:"Formato"}):Object(a.jsx)(K.a,{children:"Formato"}),Object(a.jsx)(Fa,{items:za,type:"Format",legends:!0,colorGraphicToPdf:!1})]}),R&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[C.darkTheme?Object(a.jsx)(K.a,{style:{color:"#000000"},children:"Modalidad"}):Object(a.jsx)(K.a,{children:"Modalidad"}),Object(a.jsx)(Fa,{items:Ha,type:"Modality",legends:!0,colorGraphicToPdf:!1})]})]})})]}),Object(a.jsx)($a,{}),N&&Object(a.jsx)(ki,{imgGraphic:k,setPdfView:I}),m.isResourceModalOpen&&Object(a.jsx)(Di,{}),m.isEvaluationModalOpen&&Object(a.jsx)(Ei,{})]})})},Ri=Object(B.a)((function(e){return{root:Object(D.a)({position:"relative",display:"flex",padding:20,width:"49%",marginBottom:10,borderRadius:5,border:"1px solid ".concat(e.palette.divider)},e.breakpoints.down("xs"),{width:"100%"}),description:{overflow:"hidden",textOverflow:"ellipsis",textAlign:"justify"},actions:{width:96,display:"flex",alignItems:"flex-start"}}})),Fi=function(e){var t=e.category,n=e.verb,i=e.description,r=e.index,c=Ri(),s=P(),o=s.uiState,l=s.dispatch,d=Bn(),u=d.designState,j=d.dispatch,p=u.design;return Object(a.jsxs)("div",{className:c.root,children:[Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(K.a,{color:"textSecondary",gutterBottom:!0,variant:"caption",children:"Resultado"}),Object(a.jsxs)(K.a,{variant:"body2",children:[n," ",i]})]}),Object(a.jsxs)("div",{className:c.actions,children:[Object(a.jsx)(ce.a,{className:c.deleteIcon,onClick:function(){j({type:A.design.setCurrentLearningResult,payload:{category:t,verb:n,description:i,editing:!0,index:r}}),l({type:A.ui.toggleModal,payload:"LearningResult"})},children:Object(a.jsx)(ze.a,{})}),Object(a.jsx)(ce.a,{className:c.deleteIcon,onClick:function(){l({type:A.ui.setConfirmData,payload:{type:"resultado de aprendizaje",args:{designId:p._id,index:r},actionMutation:null}}),l({type:A.ui.toggleModal,payload:"Confirmation"}),o.userSaveDesign&&l({type:A.ui.setUserSaveDesign,payload:!1})},children:Object(a.jsx)(ue.a,{})})]})]})},Mi=n(1347),Bi=n(1320),zi=n(1334),Hi=n(1317),Wi=Object(B.a)((function(e){return{root:{width:"100%",height:300,clipPath:"polygon(50% 0, 0 100%, 100% 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},option:{backgroundColor:e.palette.primary.main,marginBottom:10,width:"100%",display:"flex",justifyContent:"center",alignItems:"center","&:hover":{transition:"box-shadow .3s",cursor:"pointer",boxShadow:"0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)"}},crear:{paddingTop:30,height:"25%"},evaluar:{height:"16.6%"},analizar:{height:"16.6%"},aplicar:{height:"16.6%"},comprender:{height:"16.6%"},recordar:{height:"16.6%"},active:{boxShadow:"0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)",backgroundColor:e.palette.secondary.light,color:"white"}}})),qi=function(){var e=Wi(),t=Bn(),n=t.designState,i=t.dispatch,r=n.currentLearningResult.category,c=n.bloomCategories;return Object(a.jsx)("div",{className:e.root,children:c.map((function(t){var n=r._id===t._id;return Object(a.jsx)("div",{onClick:function(){return e=n?null:t,void i({type:A.design.setCurrentLearningResultField,payload:{field:"category",value:e}});var e},className:"".concat(e.option," ").concat(e[t.name.toLowerCase()]," ").concat(n&&e.active),children:t.name},t._id)}))})},Vi=n(1330),Ui=Object(B.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"center"},option:{minWidth:"25%"}}})),Qi=function(){var e=Ui(),t=Bn(),n=t.designState,i=t.dispatch,r=n.currentLearningResult.category,c=n.currentLearningResult.verb,s=n.bloomVerbs;return Object(a.jsx)("div",{className:e.root,children:s.filter((function(e){return e.category===r._id})).map((function(t){var n=c===t.name;return Object(a.jsx)(on.a,{className:e.option,value:t.name,control:Object(a.jsx)(Vi.a,{checked:n,onChange:function(e){return n=t.name,void i({type:A.design.setCurrentLearningResultField,payload:{field:"verb",value:n}});var n},value:t.name}),label:t.name},t._id)}))})},Gi=Object(B.a)((function(e){return{closeButton:{color:e.palette.grey[500]},title:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},adornament:{display:"flex",alignItems:"flex-start"},steps:{padding:0,marginTop:30,marginBottom:30},stepContent:Object(D.a)({margin:20},e.breakpoints.down("xs"),{margin:10})}})),Ki=function(e){var t,n=e.design,r=e.isOpen,c=Gi(),s=Object(w.b)().enqueueSnackbar,o=S(),l=o.socket,d=o.emitWithTimeout,u=Bn(),j=u.designState,b=u.dispatch,g=P(),m=g.uiState,h=g.dispatch,f=j.currentLearningResult,x=f.category,O=f.verb,v=f.editing,y=f.index,k=Object(i.useState)(null!==(t=j.currentLearningResult.description)&&void 0!==t?t:""),C=Object(p.a)(k,2),T=C[0],D=C[1],N=Object(i.useState)(0),I=Object(p.a)(N,2),E=I[0],L=I[1],R=["Selecciona una categor\xeda de bloom","Selecciona un verbo","Proporciona una descripci\xf3n"],F=Object(i.useRef)(!0);Object(i.useEffect)((function(){return function(){F.current=!1}}),[]),Object(i.useEffect)((function(){F.current&&D(j.currentLearningResult.description)}),[D,j.currentLearningResult.description]);var M=function(){h({type:A.ui.toggleModal,payload:"LearningResult"}),F.current&&L(0),D(""),b({type:A.design.clearCurrentLearningResult})};return Object(a.jsxs)(jt.a,{fullWidth:!0,open:r,onClose:M,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(pt.a,{style:{padding:"5px 5px 5px 16px"},children:Object(a.jsxs)(te.a,{className:c.title,children:[Object(a.jsx)(te.a,{className:c.ellipsis,children:v?"Editar resultado de aprendizaje":"Nuevo resultado de aprendizaje"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:c.closeButton,onClick:M,children:Object(a.jsx)(ht.a,{})})]})}),Object(a.jsxs)(bt.a,{dividers:!0,style:{padding:0},children:[Object(a.jsx)(Mi.a,{classes:{root:c.steps},activeStep:E,alternativeLabel:!0,children:R.map((function(e){return Object(a.jsx)(Bi.a,{children:Object(a.jsx)(zi.a,{children:e})},e)}))}),0===E?Object(a.jsxs)(te.a,{className:c.stepContent,children:[Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:"En la siguiente pir\xe1mide se encuentran las distintas categor\xedas o habilidades de pensamiento descritas seg\xfan la taxonom\xeda de Benjam\xedn Bloom."}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:"Por favor seleccione la categor\xeda que m\xe1s sentido tenga con el resultado de aprendizaje que desea crear."}),Object(a.jsx)(qi,{})]}):1===E?Object(a.jsxs)(te.a,{className:c.stepContent,children:[Object(a.jsxs)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:['En la siguiente lista se encuentran los distintos verbos descritos por la taxonom\xeda de Bloom disponibles para la categor\xeda "',j.bloomCategories.find((function(e){return e._id===x._id})).name,'".']}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:"Por favor seleccione el verbo que m\xe1s sentido tenga con el resultado de aprendizaje que desea crear."}),Object(a.jsx)(Qi,{})]}):Object(a.jsxs)(te.a,{className:c.stepContent,children:[Object(a.jsxs)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:['Usted ha seleccionado el verbo "',O,'" correspondiente a la categor\xeda "',j.bloomCategories.find((function(e){return e._id===x._id})).name,'".']}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10,marginBottom:10},align:"justify",children:"Por favor complete la descripci\xf3n del resultado de aprendizaje."}),Object(a.jsx)(gt.a,{multiline:!0,classes:{},rows:6,variant:"outlined",name:"description",value:null!==T&&void 0!==T?T:"",onChange:function(e){var t=e.target;return D(t.value)},label:"Descripci\xf3n",type:"text",InputProps:{style:{display:"flex",alignItems:"flex-start"},startAdornment:Object(a.jsx)(Hi.a,{position:"start",style:{height:"100%"},classes:{root:c.adornament},children:Object(a.jsx)("div",{style:{width:"100%",height:"100%"},children:O})})},fullWidth:!0})]})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{disabled:0===E,onClick:function(){F.current&&L((function(e){return e-1}))},children:"Volver"}),E===R.length-1?Object(a.jsx)(ee.a,{variant:"contained",color:"primary",disabled:2===E&&(null===T||""===T),onClick:function(){if(!T||T&&""===T.trim())return console.log("No se ha ingresado una descripci\xf3n.");b({type:A.design.setCurrentLearningResultField,payload:{field:"description",value:T}}),v?v&&(null===l||void 0===l||l.emit("edit-learning-result",{designId:n._id,index:y,learningResult:{category:x,verb:O,description:T}},d((function(e){if(!e.ok)return s(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1}),M()}),(function(){return s("Error al editar el resultado de aprendizaje. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))):null===l||void 0===l||l.emit("add-learning-result",{designId:n._id,learningResult:{category:x,verb:O,description:T}},d((function(e){if(!e.ok)return s(e.message,{variant:"error",autoHideDuration:2e3});m.userSaveDesign&&h({type:A.ui.setUserSaveDesign,payload:!1}),M()}),(function(){return s("Error al agregar el resultado de aprendizaje. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))},children:"Finalizar"}):Object(a.jsx)(ee.a,{variant:"contained",color:"primary",disabled:0===E?null===x._id:1===E&&null===O,onClick:function(){return 0===E&&null===x._id&&null===x.name?console.log("No ha seleccionado una categor\xeda de bloom."):1!==E||""!==O&&O?void(F.current&&L((function(e){return e+1}))):console.log("No ha seleccionado un verbo de bloom.")},children:"Siguiente"})]})]})},Ji=n(1321),Zi=Object(i.forwardRef)((function(e,t){var n=e.name,r=e.value,c=e.onSave,s=Object(W.a)(e,["name","value","onSave"]),o=Object(i.useState)(!1),l=Object(p.a)(o,2),d=l[0],u=l[1],j=Object(i.useState)(r),b=Object(p.a)(j,2),g=b[0],m=b[1];Object(i.useEffect)((function(){m(r)}),[r,m]);var h=Object(i.useCallback)((function(){c&&c({target:{name:n,value:g}}),u(!1)}),[n,c,g]);Object(i.useImperativeHandle)(t,(function(){return{editing:d,handleSave:h}}));return Object(a.jsx)(gt.a,Object(N.a)({name:n,disabled:!d,value:g,onChange:function(e){var t=e.target;m(t.value)},InputProps:{readOnly:!d,endAdornment:Object(a.jsx)(ce.a,{onClick:d?h:function(){u(!0)},onMouseDown:function(e){return e.preventDefault()},children:d?Object(a.jsx)(Ji.a,{}):Object(a.jsx)(ze.a,{})})}},s))})),Xi=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingTop:15,paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 177px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},title:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},sectionAction:Object(D.a)({},e.breakpoints.down("xs"),{width:"100%"}),content:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",marginTop:10,marginBottom:10},grid:{display:"flex",alignItems:"center"},category:{width:"100%"},categoryPopOver:{maxHeight:400},timeField:{marginRight:10,display:"flex",alignItems:"center"},clickHere:{textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},learningResults:{flexWrap:"wrap"}}})),Yi=Object(i.forwardRef)((function(e,t){var n,r,c,s,o,l,d=e.evaluationPatternRef,b=Xi(),g=S(),m=g.socket,h=g.emitWithTimeout,f=x().authState,O=Object(i.useRef)(!0),v=P(),y=v.uiState,k=v.dispatch,C=Bn().designState.design,T=C.metadata,D=Object(w.b)().enqueueSnackbar,I=Object(i.useRef)(),E=Object(i.useRef)(),L=Object(i.useRef)(),R=Object(i.useRef)(),F=Object(i.useRef)(),M=Object(i.useRef)(),B=Object(i.useRef)(),z=Object(i.useRef)(),H=Kt({name:T.name,category:null!==(n=T.category.name)&&void 0!==n?n:"Sin categor\xeda",classSize:T.classSize,workingTimeDesignHours:null!==(r=T.workingTimeDesign.hours)&&void 0!==r?r:0,workingTimeDesignMinutes:null!==(c=T.workingTimeDesign.minutes)&&void 0!==c?c:0,workingTimeHours:null!==(s=T.workingTime.hours)&&void 0!==s?s:0,workingTimeMinutes:null!==(o=T.workingTime.minutes)&&void 0!==o?o:0,priorKnowledge:T.priorKnowledge,description:T.description,objective:T.objective,isPublic:T.isPublic,evaluation:T.evaluation,evaluationPattern:T.evaluationPattern,keywords:null!==(l=C.keywords)&&void 0!==l?l:[]}),W=Object(p.a)(H,4),q=W[0],V=W[1],U=W[3];Object(i.useImperativeHandle)(t,(function(){return{clearEditors:function(){var e,t,n,a,i,r,c;null===I||void 0===I||null===(e=I.current)||void 0===e||e.clearText(),null===E||void 0===E||null===(t=E.current)||void 0===t||t.clearText(),null===L||void 0===L||null===(n=L.current)||void 0===n||n.clearText(),null===R||void 0===R||null===(a=R.current)||void 0===a||a.clearText(),null===F||void 0===F||null===(i=F.current)||void 0===i||i.clearText(),null===M||void 0===M||null===(r=M.current)||void 0===r||r.clearText(),null===B||void 0===B||null===(c=B.current)||void 0===c||c.clearText()}}})),Object(i.useEffect)((function(){return function(){O.current=!1}}),[]);var Q=Object(i.useCallback)((function(e){O.current&&V({target:{name:"keywords",value:e}})}),[V]);Object(i.useEffect)((function(){O.current&&JSON.stringify(q.keywords)!==JSON.stringify(C.keywords)&&Q(Object(_.a)(C.keywords))}),[C.keywords,q.keywords,Q]),Object(i.useEffect)((function(){var e;O.current&&(q.category!==T.category.name&&V({target:{name:"category",value:null!==(e=T.category.name)&&void 0!==e?e:"Sin categor\xeda"}}))}),[T.category,q.category,U,V]),Object(i.useEffect)((function(){var e;O.current&&(q.evaluation!==T.evaluation&&V({target:{name:"evaluation",value:null!==(e=T.evaluation)&&void 0!==e?e:""}}))}),[T.evaluation,q.evaluation,U,V]),Object(i.useEffect)((function(){O.current&&q.name!==T.name&&V({target:{name:"name",value:T.name}})}),[T.name,q.name,U,V]),Object(i.useEffect)((function(){O.current&&q.classSize!==T.classSize&&V({target:{name:"classSize",value:T.classSize}})}),[T.classSize,q.classSize,U,V]),Object(i.useEffect)((function(){O.current&&q.description!==T.description&&V({target:{name:"description",value:T.description}})}),[T.description,q.description,U,V]),Object(i.useEffect)((function(){O.current&&q.workingTimeDesignHours!==T.workingTimeDesign.hours&&V({target:{name:"workingTimeDesignHours",value:T.workingTimeDesign.hours}})}),[T.workingTimeDesign,q.workingTimeDesignHours,U,V]),Object(i.useEffect)((function(){var e;O.current&&(q.workingTimeDesignMinutes!==T.workingTimeDesign.minutes&&V({target:{name:"workingTimeDesignMinutes",value:null!==(e=T.workingTimeDesign.minutes)&&void 0!==e?e:0}}))}),[T.workingTimeDesign,q.workingTimeDesignMinutes,U,V]),Object(i.useEffect)((function(){var e;O.current&&(q.workingTimeHours!==T.workingTime.hours&&V({target:{name:"workingTimeHours",value:null!==(e=T.workingTime.hours)&&void 0!==e?e:0}}))}),[T.workingTime.hours,q.workingTimeHours,U,V]),Object(i.useEffect)((function(){var e;O.current&&(q.workingTimeMinutes!==T.workingTime.minutes&&V({target:{name:"workingTimeMinutes",value:null!==(e=T.workingTime.minutes)&&void 0!==e?e:0}}))}),[T.workingTime.minutes,q.workingTimeMinutes,U,V]),Object(i.useEffect)((function(){O.current&&q.priorKnowledge!==T.priorKnowledge&&V({target:{name:"priorKnowledge",value:T.priorKnowledge}})}),[T.priorKnowledge,q.priorKnowledge,U,V]),Object(i.useEffect)((function(){O.current&&q.objective!==T.objective&&V({target:{name:"objective",value:T.objective}})}),[T.objective,q.objective,U,V]),Object(i.useEffect)((function(){O.current&&q.isPublic!==T.isPublic&&V({target:{name:"isPublic",value:T.isPublic}})}),[T.isPublic,q.isPublic,U,V]),Object(i.useEffect)((function(){O.current&&q.evaluationPattern!==T.evaluationPattern&&V({target:{name:"evaluationPattern",value:T.evaluationPattern}})}),[T.evaluationPattern,q.evaluationPattern,U,V]);var Z=q.name,Y=q.category,ne=q.classSize,ae=q.workingTimeDesignHours,ie=q.workingTimeDesignMinutes,re=q.workingTimeHours,ce=q.workingTimeMinutes,se=q.priorKnowledge,oe=q.description,le=q.objective,ue=q.isPublic,je=q.keywords,pe=q.evaluation,be=q.evaluationPattern,ge=Object(X.a)("categories",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),me=ge.isLoading,he=ge.isError,fe=ge.data,xe=ge.error;if(he)return Object(a.jsx)(K.a,{children:xe.message});var Oe=function(e){var t=e.target,n=t.name,a=t.value;a="number"!==t.type||isNaN(t.value)?"checkbox"===t.type?t.checked:t.value:parseInt(t.value);var i={target:{name:t.name,value:a}},r=null;switch(n){case"workingTimeHours":n="workingTime",r="hours",a=isNaN(a)?0:a;break;case"workingTimeMinutes":n="workingTime",r="minutes",a=isNaN(a)?0:a;break;case"category":a=fe.categories.find((function(e){return e.name===a}))}null===m||void 0===m||m.emit("edit-metadata-field",{designId:C._id,field:n,value:a,subfield:r},h((function(e){if(!e.ok)return D(e.message,{variant:"error",autoHideDuration:2e3});y.userSaveDesign&&k({type:A.ui.setUserSaveDesign,payload:!1})}),(function(){return D("Error al editar el dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),r?void 0!==T[n]&&null!==T[n]&&void 0!==T[n][r]&&null!==T[n][r]&&T[n][r].toString()===a.toString()||O.current&&V(i):void 0!==T[n]&&null!==T[n]&&T[n].toString()===a.toString()||O.current&&V(i)},ve=function(){return k({type:A.ui.toggleModal,payload:"LearningResult"})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:b.leftPanel}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:b.workspace,children:[Object(a.jsx)("div",{className:b.title,children:me?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te.a,{width:300,height:50}),Object(a.jsx)(Te.a,{width:150,height:50})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"h4",children:"Informaci\xf3n Dise\xf1o"}),Object(a.jsx)(ee.a,{className:b.sectionAction,variant:"outlined",color:"default",onClick:function(e){d.current.editing&&d.current.handleSave(),null===m||void 0===m||m.emit("save-design",{designId:C._id},h((function(e){e.ok&&!y.userSaveDesign&&k({type:A.ui.setUserSaveDesign,payload:!0}),D(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return D("Error al intentar guardar el dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))},children:"Guardar Informaci\xf3n"})]})}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(G.a,{container:!0,spacing:3,className:b.content,children:[Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,sm:12,md:6,lg:8,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Nombre",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:I,name:"name",placeholder:"Nombre",initialvalue:Z,onChange:Oe}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:6,sm:6,md:3,lg:2,children:Object(a.jsx)("div",{style:{width:"100%"},children:me?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te.a,{width:80,height:20}),Object(a.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:[Object(a.jsx)(Te.a,{width:40,height:20,style:{marginRight:10}}),Object(a.jsx)(Te.a,{width:"100%",height:20})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",children:"Visibilidad"}),Object(a.jsx)(on.a,{control:Object(a.jsx)(ln.a,{name:"isPublic",checked:ue,onChange:Oe,disabled:!(C.owner===f.user.uid)}),label:ue?"P\xfablico":"Privado"})]})})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:6,sm:6,md:3,lg:2,children:Object(a.jsx)("div",{style:{width:"100%",display:"flex",alignItems:"flex-start"},children:me?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Te.a,{width:80,height:20}),Object(a.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center"},children:[Object(a.jsx)(Te.a,{width:40,height:20,style:{marginRight:10}}),Object(a.jsx)(Te.a,{width:"100%",height:20})]})]}):Object(a.jsxs)(te.a,{style:{marginTop:-10},children:[Object(a.jsx)(K.a,{variant:"body2",gutterBottom:!0,children:"Valoraci\xf3n media "}),Object(a.jsxs)(te.a,{display:"flex",children:[Object(a.jsx)(de.a,{style:{marginRight:10}})," ",T.scoreMean]})]})})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsxs)(ja.a,{className:b.category,variant:"outlined",children:[Object(a.jsx)(pa.a,{id:"category-label",children:"Categor\xeda"}),Object(a.jsx)(ba.a,{labelId:"category-label",name:"category",label:"Categor\xeda",value:Y,onChange:Oe,MenuProps:{classes:{paper:b.categoryPopOver}},children:null==fe||0===fe.categories.length?Object(a.jsx)(Me.a,{value:"Sin categor\xeda",children:"Sin categor\xeda"}):fe.categories.map((function(e){return Object(a.jsx)(Me.a,{value:e.name,children:e.name},e._id)}))})]})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Tama\xf1o de la clase",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:E,name:"classSize",placeholder:"Tama\xf1o de la clase",initialvalue:null!==ne&&void 0!==ne?ne:0,type:"number",min:0,onChange:Oe}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:Object(a.jsxs)("div",{style:{width:"100%"},children:[me?Object(a.jsx)(Te.a,{width:150,height:20}):Object(a.jsx)(K.a,{children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:b.timeField,children:[me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Horas",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:L,name:"workingTimeHours",placeholder:"Horas",initialvalue:re,type:"number",min:0,onChange:Oe}}}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10},children:" : "}),me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Minutos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:R,name:"workingTimeMinutes",placeholder:"Minutos",initialvalue:ce,type:"number",min:0,max:59,onChange:Oe}}})]})]})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:Object(a.jsxs)("div",{style:{width:"100%"},children:[me?Object(a.jsx)(Te.a,{width:150,height:20}):Object(a.jsx)(K.a,{children:" Tiempo dise\xf1ado "}),Object(a.jsxs)("div",{className:b.timeField,children:[me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{variant:"outlined",InputLabelProps:{shrink:!0},name:"workingTimeDesignHours",value:ae,label:"Horas",type:"number",disabled:!0,fullWidth:!0}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10},children:" : "}),me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{variant:"outlined",InputLabelProps:{shrink:!0},name:"workingTimeDesignMinutes",value:ie,label:"Minutos",type:"number",disabled:!0,fullWidth:!0})]})]})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Descripci\xf3n",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:M,name:"description",placeholder:"Descripci\xf3n",initialvalue:null!==oe&&void 0!==oe?oe:"",rowMax:5,onChange:Oe,multiline:!0}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Conocimiento previo",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:F,name:"priorKnowledge",placeholder:"Conocimiento previo",initialvalue:null!==se&&void 0!==se?se:"",rowMax:5,onChange:Oe,multiline:!0}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,md:12,lg:6,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Objetivos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:B,name:"objective",placeholder:"Objetivos",initialvalue:null!==le&&void 0!==le?le:"",rowMax:5,onChange:Oe,multiline:!0}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(gt.a,{label:"Evaluaci\xf3n",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:Ea,inputProps:{ref:z,name:"evaluation",placeholder:"Evaluaci\xf3n",initialvalue:null!==pe&&void 0!==pe?pe:"",rowMax:5,onChange:Oe,multiline:!0}}})}),Object(a.jsx)(G.a,{item:!0,className:b.grid,xs:12,children:me?Object(a.jsx)(Te.a,{width:"100%",height:70}):Object(a.jsx)(Zi,{ref:d,label:"Pauta/R\xfabrica de evaluaci\xf3n",name:"evaluationPattern",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",value:be,onSave:Oe,color:"primary"})})]}),me?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(a.jsx)(Te.a,{width:"100%",height:70,style:{marginRight:10}}),Object(a.jsx)(Te.a,{width:"10%",height:70})]}),Object(a.jsx)(Te.a,{width:"100%",height:30})]}):Object(a.jsx)($n,{keywords:je,onChangeKeywords:function(e,t,n){"add"===t?null===m||void 0===m||m.emit("add-design-keyword",{designId:C._id,keyword:n},h((function(e){if(!e.ok)return D(e.message,{variant:"error",autoHideDuration:2e3})}),(function(){return D("Error al agregar la palabra clave. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))):"remove"===t&&(null===m||void 0===m||m.emit("remove-design-keyword",{designId:C._id,keyword:n},h((function(e){if(!e.ok)return D(e.message,{variant:"error",autoHideDuration:2e3})}),(function(){return D("Error al eliminar la palabra clave. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))))}}),me?Object(a.jsx)("div",{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:b.title,children:[Object(a.jsx)(K.a,{variant:"h4",children:"Resultados de aprendizaje"}),Object(a.jsx)(ee.a,{className:b.sectionAction,variant:"outlined",color:"default",onClick:ve,children:"Agregar"})]}),Object(a.jsx)(J.a,{}),Object(a.jsx)("div",{className:"".concat(b.content," ").concat(b.learningResults),children:0===T.results.length?Object(a.jsxs)(Se.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["Este dise\xf1o a\xfan no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click "," ",Object(a.jsx)($.a,{className:b.clickHere,onClick:ve,children:"aqu\xed"}),"!"]}):T.results.map((function(e,t){return Object(a.jsx)(Fi,Object(N.a)({index:t},e),"learning-result-".concat(t))}))})]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:b.rightPanel})]},C._id),Object(a.jsx)(Ki,{design:C,isOpen:y.isLearningResultModalOpen})]})})),_i=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("bloom/category");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$i=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("bloom/verb",{category:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),er=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleMargin:{margin:"auto"},bodyMargin:{marginLeft:e.spacing(5),marginRight:e.spacing(5)}}})),tr=function(){var e=er(),t=P(),n=t.uiState,i=t.dispatch,r=n.historyData.url,c=Object(M.g)(),s=function(){i({type:A.ui.toggleModal,payload:"CheckSaveDesign"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{onClose:s,open:n.isCheckSaveDesignModalOpen,children:[Object(a.jsx)(pt.a,{className:e.titleMargin,children:"Est\xe1 apunto de salir del dise\xf1o"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:s,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsxs)(bt.a,{dividers:!0,children:[Object(a.jsx)(K.a,{align:"center",style:{marginTop:15,marginBottom:25},children:"Usted est\xe1 intentando salir del dise\xf1o actual, pero existen cambios que no han sido guardados. \xbfDesea continuar sin guardar?"}),Object(a.jsx)(K.a,{variant:"caption",children:"IMPORTANTE: Al aceptar realizar esta acci\xf3n los cambios no se guardaran."}),Object(a.jsx)(te.a,{children:Object(a.jsx)(K.a,{variant:"caption",children:"RECOMENDACI\xd3N: Guarde sus cambios antes de salir de esta p\xe1gina."})})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:s,children:"Cancelar"}),Object(a.jsx)(ee.a,{onClick:function(){i({type:A.ui.setUserSaveDesign,payload:!0}),i({type:A.ui.toggleModal,payload:"CheckSaveDesign"}),c.push("".concat(r))},children:"Aceptar"})]})]})})},nr=n(1322),ar=Object(B.a)((function(e){return{root:function(e){return{marginBottom:10,boxShadow:e.editing?"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)":"none"}},header:{paddingBottom:0}}})),ir=function(e){var t=e.data,n=Object(w.b)().enqueueSnackbar,r=x().authState,c=P().dispatch,s=Bn().designState,o=S(),l=o.socket,d=o.online,u=o.emitWithTimeout,j=s.design,b=t.user,g=t.date,m=t.commentary,h=Object(i.useState)(!1),f=Object(p.a)(h,2),O=f[0],v=f[1],y=Object(i.useState)(m),k=Object(p.a)(y,2),C=k[0],T=k[1],D=ar({editing:O}),I=function(){c({type:A.ui.setConfirmData,payload:{type:"comentario",args:{designId:j._id,commentaryId:t._id},actionMutation:null}}),c({type:A.ui.toggleModal,payload:"Confirmation"})};return Object(a.jsxs)(ne.a,{className:D.root,elevation:0,children:[Object(a.jsx)(nr.a,{className:D.header,avatar:Object(a.jsx)(oe.a,{alt:je(b.name,b.lastname),src:b.img&&b.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(b.img):"",children:pe(b.name,b.lastname)}),action:r.user?r.user.uid===b._id?Object(a.jsx)(kt,{options:[{icon:Object(a.jsx)(ze.a,{}),label:"Editar",onSelect:function(){return v(!0)}},{icon:Object(a.jsx)(ue.a,{}),label:"Eliminar",onSelect:I}]}):r.user.uid===j.owner?Object(a.jsx)(kt,{options:[{icon:Object(a.jsx)(ue.a,{}),label:"Eliminar",onSelect:I}]}):Object(a.jsx)("div",{}):null,title:b.name+" "+b.lastname,subheader:ri(new Date(g))+" a las "+ci(new Date(g))}),Object(a.jsx)(ie.a,{children:O?Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(),m.trim()!==C.trim()&&d&&(null===l||void 0===l||l.emit("comment-design",{designId:j._id,commentary:Object(N.a)(Object(N.a)({},t),{},{commentary:C.trim()})},u((function(e){e.ok||n(e.message,{variant:"error",autoHideDuration:2e3})}),(function(){T(m),n("Error al editar el comentario. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))),v(!1)},noValidate:!0,children:[Object(a.jsx)(gt.a,{multiline:!0,rowsMax:6,variant:"outlined",name:"commentary",value:null!==C&&void 0!==C?C:"",onChange:function(e){var t=e.target;return T(t.value)},label:"Editar Comentario",type:"text",fullWidth:!0}),Object(a.jsx)(te.a,{style:{display:"flex",justifyContent:"flex-end",marginTop:10},children:Object(a.jsx)(ee.a,{type:"submit",variant:"contained",color:"primary",disabled:!C.length,disableElevation:!0,children:"Guardar"})})]}):Object(a.jsx)(K.a,{children:m})})]})},rr=Object(B.a)({clickHere:{textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}}}),cr=function(){var e=rr(),t=Object(w.b)().enqueueSnackbar,n=Object(U.a)(),r=Object(Q.a)(n.breakpoints.down("xs")),c=P().dispatch,s=x().authState,o=Bn().designState,l=S(),d=l.socket,u=l.online,j=l.emitWithTimeout,b=Object(i.useState)(""),g=Object(p.a)(b,2),m=g[0],h=g[1],f=o.design,O=s.user,v=function(){h("")};return Object(a.jsx)(ne.a,{elevation:0,style:{marginBottom:10},children:Object(a.jsx)(ie.a,{children:s.user?Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&(null===d||void 0===d||d.emit("comment-design",{designId:f._id,commentary:{user:{_id:O.uid,name:O.name,lastname:O.lastname,img:O.img},date:(new Date).toJSON(),commentary:m.trim()}},j((function(e){e.ok||t(e.message,{variant:"error",autoHideDuration:2e3})}),(function(){return t("Error al agregar el comentario. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),v())},noValidate:!0,children:[Object(a.jsxs)(te.a,{style:{display:"flex",marginBottom:10},children:[!r&&Object(a.jsx)(oe.a,{style:{marginRight:10,marginTop:5},alt:je(O.name,O.lastname),src:O.img&&O.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(O.img):"",children:pe(O.name,O.lastname)}),Object(a.jsx)(gt.a,{multiline:!0,variant:"outlined",name:"commentary",InputLabelProps:{shrink:!0},placeholder:"Ingresa tu comentario",value:m,onChange:function(e){var t=e.target;return h(t.value)},label:"Nuevo Comentario",type:"text",fullWidth:!0})]}),Object(a.jsx)(te.a,{style:{display:"flex",justifyContent:"flex-end"},children:Object(a.jsx)(ee.a,{type:"submit",variant:"contained",color:"primary",disabled:!m.length,disableElevation:!0,children:"Comentar"})})]}):Object(a.jsxs)(K.a,{align:"center",children:["Para poder comentar este dise\xf1o debes ",Object(a.jsx)($.a,{className:e.clickHere,onClick:function(){c({type:A.ui.toggleModal,payload:"Login"})},children:"ingresar sesi\xf3n"}),"."]})})})},sr=function(){var e=Bn().designState.design;return Object(a.jsxs)("div",{children:[0!==e.comments.length&&e.comments.map((function(e){return Object(a.jsx)(ir,{data:e},e._id)})),Object(a.jsx)(cr,{})]})},or=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},menu:{borderBottom:"1px solid ".concat(e.palette.divider)},menuLetters:{marginLeft:e.spacing(2),marginBottom:e.spacing(1)},menuLettersSelected:{marginLeft:e.spacing(2),borderBottom:"2px solid ".concat(e.palette.divider)},tabBarGrid:Object(D.a)({display:"flex",justifyContent:"space-between",alignItems:"center"},e.breakpoints.down("xs"),{justifyContent:"center"}),usersConnecteds:{display:"flex"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start",minHeight:"calc(100vh - 128px)"},backdrop:{zIndex:1e3,color:"#fff"},loadingFile:{"-webkit-backface-visibility":"hidden",animation:"$spinAndScale 3000ms ".concat(e.transitions.easing.easeInOut),animationIterationCount:"infinite",animationDirection:"alternate"},comments:{paddingTop:10,paddingLeft:10,paddingRight:10,background:e.palette.background.workSpace,minHeight:"calc(100vh - 177px)"},user:{display:"flex",alignItems:"center",marginTop:10},"@keyframes spinAndScale":{from:{height:300,width:300,transform:"rotate(0deg)"},to:{height:150,width:150,transform:"rotate(360deg)"}}}})),lr=function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}},dr=function(){var e=or(),t=Object(M.i)().id,n=Object(U.a)(),r=Object(Q.a)(n.breakpoints.down("sm")),c=Object(Q.a)(n.breakpoints.down("xs")),s=ya(),o=s.doc,l=s.provider,d=s.connectToDesign,b=s.clearDoc,g=s.connected,m=x().authState,h=S(),f=h.socket,O=h.online,v=h.emitWithTimeout,y=Bn(),w=y.designState,k=y.dispatch,C=P().uiState,T=Object(i.useState)([]),D=Object(p.a)(T,2),I=D[0],E=D[1],L=Object(i.useState)(0),R=Object(p.a)(L,2),F=R[0],B=R[1],z=Object(i.useState)(null),H=Object(p.a)(z,2),W=H[0],q=H[1],V=w.design,Z=Object(i.useRef)(!0),X=Object(i.useRef)(),Y=Object(i.useRef)(),_=Object(i.useRef)(),$=Object(i.useRef)(),ee=Object(i.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i();case 2:t=e.sent,k({type:A.design.setBloomCategories,payload:t.bloomCategories});case 4:case"end":return e.stop()}}),e)}))),[k]),ne=Object(i.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i("");case 2:t=e.sent,k({type:A.design.setBloomVerbs,payload:t.bloomVerbs});case 4:case"end":return e.stop()}}),e)}))),[k]);Object(i.useEffect)((function(){ee(),ne()}),[ee,ne]),Object(i.useEffect)((function(){var e=X.current;return function(){null===e||void 0===e||e.clearEditors(),b(),Z.current=!1,k({type:A.design.updateDesign,payload:null})}}),[b,k]),Object(i.useEffect)((function(){O&&(null===f||void 0===f||f.emit("join-to-design",{user:m.user,designId:t,public:!1},v((function(e){if(e.ok){var n=e.data.design.privileges.find((function(e){return e.user._id===m.user.uid}));n&&0===n.type?Z.current&&(k({type:A.design.updateDesign,payload:e.data.design}),d(t)):q("Ha ocurrido un error, el dise\xf1o no existe o usted no tiene privilegios para editar este dise\xf1o.")}else q(e.message)}),(function(){q("Error al intentar ingresar al dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.")}))))}),[f,m.user,O,t,k,d,v]),Object(i.useEffect)((function(){return null===f||void 0===f||f.on("update-design",(function(e){Z.current&&k({type:A.design.updateDesign,payload:e})})),null===f||void 0===f||f.on("add-design-keyword",(function(e){Z.current&&k({type:A.design.addDesignKeyword,payload:e})})),null===f||void 0===f||f.on("remove-design-keyword",(function(e){Z.current&&k({type:A.design.removeDesignKeyword,payload:e})})),null===f||void 0===f||f.on("edit-metadata-field",(function(e){var t=e.field,n=e.value,a=e.subfield;Z.current&&k({type:A.design.changeMetadataField,payload:{field:t,value:n,subfield:a}})})),null===f||void 0===f||f.on("edit-task-field",(function(e){var t=e.learningActivityID,n=e.taskID,a=e.field,i=e.value,r=e.subfield;Z.current&&k({type:A.design.changeTaskField,payload:{learningActivityID:t,taskID:n,field:a,value:i,subfield:r}})})),null===f||void 0===f||f.on("users",(function(e){Z.current&&E(e)})),null===f||void 0===f||f.on("change-design-privileges",(function(e){k({type:A.design.setDesignPrivileges,payload:e})})),null===f||void 0===f||f.on("change-read-only-link",(function(e){Z.current&&k({type:A.design.updateReadOnlyLink,payload:e})})),null===f||void 0===f||f.on("update-design-rate",(function(e){var t=e.assessments,n=e.mean;Z.current&&(k({type:A.design.setAssessments,payload:t}),k({type:A.design.setScoreMean,payload:n}))})),null===f||void 0===f||f.on("comment-design",(function(e){Z.current&&k({type:A.design.commentDesign,payload:e})})),null===f||void 0===f||f.on("delete-comment",(function(e){Z.current&&k({type:A.design.deleteComment,payload:e})})),function(){null===f||void 0===f||f.emit("leave-from-design",{user:m.user,designId:t}),null===f||void 0===f||f.off("updateDesign"),null===f||void 0===f||f.off("edit-metadata-field"),null===f||void 0===f||f.off("add-design-keyword"),null===f||void 0===f||f.off("remove-design-keyword"),null===f||void 0===f||f.off("change-read-only-link"),null===f||void 0===f||f.off("edit-task-field"),null===f||void 0===f||f.off("users"),null===f||void 0===f||f.off("update-design-rate"),null===f||void 0===f||f.off("comment-design"),null===f||void 0===f||f.off("delete-comment")}}),[f,m.user,t,k]);if(Object(i.useEffect)((function(){return C.userSaveDesign||(window.onbeforeunload=function(e){return"\xbfSeguro que quieres salir?"}),function(){return window.onbeforeunload=null}}),[C]),W)return Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:W})});if(!V||!o||!l)return Object(a.jsx)(te.a,{className:e.workspace,children:Object(a.jsx)(St.a,{className:e.backdrop,open:!0,children:Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(te.a,{width:300,height:300,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(le.a,{className:e.loadingFile})}),Object(a.jsx)(K.a,{children:"Cargando Dise\xf1o de Aprendizaje..."})]})})});var ae=function(){return Object(a.jsx)("div",{className:e.usersConnecteds,children:Object(a.jsxs)(kt,{Icon:Object(a.jsx)(_e.a,{}),text:I.length,children:[Object(a.jsx)(K.a,{style:{paddingLeft:10,paddingTop:5},gutterBottom:!0,children:"Usuarios conectados"}),Object(a.jsx)(J.a,{}),Object(a.jsx)(te.a,{style:{padding:10},children:ie()})]})})},ie=function(){return I.map((function(t,n){return Object(a.jsxs)(te.a,{className:e.user,children:[Object(a.jsx)(oe.a,{style:{border:"3px solid ".concat(t.color),backgroundColor:t.color,marginRight:10},alt:je(t.name,t.lastname),src:t.img&&t.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(t.img):"",children:pe(t.name,t.lastname)}),Object(a.jsxs)(te.a,{children:[Object(a.jsx)(K.a,{color:"textPrimary",children:t.name+" "+t.lastname}),Object(a.jsx)(K.a,{color:"textSecondary",children:t.privilege})]})]},t.uid+n)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{container:!0,className:e.menu,children:[Object(a.jsx)(G.a,{item:!0,xs:12,children:Object(a.jsx)(te.a,{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center",children:c&&ae()})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsxs)(G.a,{ref:$,item:!0,xs:12,md:6,lg:8,className:e.tabBarGrid,children:[Object(a.jsxs)(oa.a,{ref:_,value:F,onChange:function(e,t){Y.current&&(null===Y||void 0===Y?void 0:Y.current.editing)&&Y.current.handleSave(),B(t)},"aria-label":"full width tabs example",children:[Object(a.jsx)(la.a,Object(N.a)({label:"METADATOS"},lr(0))),Object(a.jsx)(la.a,Object(N.a)({label:"DISE\xd1O"},lr(1))),Object(a.jsx)(la.a,Object(N.a)({label:"COMENTARIOS"},lr(2)))]}),!c&&r&&ae()]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,children:Object(a.jsx)(te.a,{width:"100%",height:"100%",display:"flex",justifyContent:"flex-end",alignItems:"center",children:!c&&!r&&ae()})})]},V._id),Object(a.jsx)(di,{value:F,index:0,children:Object(a.jsx)(Yi,{ref:X,evaluationPatternRef:Y})}),Object(a.jsx)(di,{value:F,index:1,children:Object(a.jsx)(Li,{})}),Object(a.jsx)(di,{value:F,index:2,children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel}),Object(a.jsx)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.comments,children:Object(a.jsx)(sr,{})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})}),C.isCheckSaveDesignModalOpen&&Object(a.jsx)(tr,{}),Object(a.jsx)(St.a,{className:e.backdrop,open:!O||!g,children:Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(te.a,{width:300,height:300,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(le.a,{className:e.loadingFile})}),Object(a.jsx)(K.a,{align:"center",children:"Se ha perdido la conexi\xf3n con el servidor. Intentando reconectar..."})]})})]})},ur=Object(B.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleMargin:{margin:"auto"},bodyMargin:{marginLeft:e.spacing(5),marginRight:e.spacing(5)}}})),jr=function(){var e=ur(),t=P(),n=t.uiState,r=t.dispatch,c=n.confirmModalData,s=c.type,o=c.args,l=c.actionMutation,d=Object(w.b)().enqueueSnackbar,b=S(),g=b.socket,m=b.emitWithTimeout,h=Object(i.useState)(""),f=Object(p.a)(h,2),x=f[0],O=f[1];Object(i.useEffect)((function(){O("carpeta"===s?"\xbfEst\xe1s realmente seguro de que deseas eliminar tu carpeta? ":"\xbfEst\xe1s realmente seguro de que deseas eliminar tu ".concat(s,"?"))}),[s]);var v=function(){r({type:A.ui.setConfirmData,payload:{type:null,args:null,actionMutation:null}}),r({type:A.ui.toggleModal,payload:"Confirmation"})},y=function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,a=null,"dise\xf1o"!==s&&"carpeta"!==s){e.next=7;break}return e.next=5,l.mutate(o);case 5:e.next=8;break;case 7:"actividad"===s?(t="delete-learningActivity",a="Error al eliminar la actividad."):"tarea"===s?(t="delete-task",a="Error al eliminar la tarea."):"comentario"===s?(t="delete-comment",a="Error al eliminar el comentario."):"resultado de aprendizaje"===s&&(t="delete-learning-result",a="Error al eliminar el resultado de aprendizaje.");case 8:t&&(null===g||void 0===g||g.emit(t,o,m((function(e){return e.ok&&n.userSaveDesign&&r({type:A.ui.setUserSaveDesign,payload:!1}),d(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return d(a+" Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})})))),v();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(jt.a,{onClose:v,open:n.isConfirmationModalOpen,children:[Object(a.jsxs)(pt.a,{className:e.titleMargin,children:["Eliminar ",s]}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:v,children:Object(a.jsx)(Zt.a,{})}),Object(a.jsxs)(bt.a,{dividers:!0,children:[Object(a.jsx)(K.a,{align:"center",style:{marginTop:15,marginBottom:25},children:x}),Object(a.jsx)(K.a,{align:"center",variant:"caption",children:"carpeta"!==s?"IMPORTANTE: Este proceso no se podr\xe1 deshacer luego de haber elegido la opci\xf3n de eliminar.":"IMPORTANTE: Recuerda que se eliminar\xe1n tambi\xe9n las carpetas y dise\xf1os de aprendizaje que se encuentren al interior de esta o de sus carpetas hijas y este proceso no se podr\xe1 deshacer luego de haber elegido la opci\xf3n de eliminar."})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:v,children:"Cancelar"}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:y,children:"Eliminar"})]})]})})},pr=Object(B.a)((function(e){return{trashIcon:{display:"flex"},tasksSpacing:{position:"relative",width:"100%",height:"100%",marginTop:e.spacing(1),background:e.palette.background.workSpace},taskBody:{padding:10,position:"relative",left:"5%",width:"95%",height:"100%"},taskSpacingDescription:{marginLeft:e.spacing(2),marginTop:e.spacing(2)},taskSpacingDescriptionBD:{marginBottom:e.spacing(1)},colorLearningType:{position:"absolute",width:"5%",height:"100%"},timeField:Object(D.a)({display:"flex",alignItems:"center",marginRight:10},e.breakpoints.down("md"),{marginRight:0}),grid:{display:"flex",alignItems:"center"},gridContainer:Object(D.a)({display:"grid",gridTemplateColumns:"50% 50%",gridTemplateRows:"auto",gridTemplateAreas:"\n            'learningType modality'\n            'workingTime format'\n            'description description'"},e.breakpoints.down("md"),{gridTemplateAreas:"\n                'learningType learningType'\n                'modality modality'\n                'format format'\n                'workingTime workingTime'\n                'description description'"}),firstRow:{display:"grid",gridTemplateColumns:"auto auto 10%",gridTemplateRows:"auto",gridTemplateAreas:"'learningType modality'"},learningTypeContainer:{gridArea:"learningType",width:"100%",display:"flex"},learningType:Object(D.a)({marginRight:10},e.breakpoints.down("md"),{marginRight:0,marginTop:10}),modality:Object(D.a)({gridArea:"modality",width:"100%"},e.breakpoints.down("md"),{marginTop:10}),format:Object(D.a)({gridArea:"format",alignSelf:"flex-end"},e.breakpoints.down("md"),{marginTop:10})}})),br=function(e){var t=e.index,n=e.task,i=pr();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(te.a,{style:{height:"100%"},children:Object(a.jsx)(ua.a,{square:!0,className:i.tasksSpacing,children:Object(a.jsx)(te.a,{children:Object(a.jsxs)(te.a,{style:{display:"flex",position:"relative",height:"100%",width:"100%"},children:["Investigaci\xf3n"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#57A8E7"}}):"Adquisici\xf3n"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#E95D5D"}}):"Producci\xf3n"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#C8951F"}}):"Discusi\xf3n"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#087A4C"}}):"Colaboraci\xf3n"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#DFDF3F"}}):"Pr\xe1ctica"===n.learningType?Object(a.jsx)("div",{className:i.colorLearningType,style:{backgroundColor:"#A75BCD"}}):void 0,Object(a.jsx)("div",{className:i.taskBody,children:Object(a.jsxs)("div",{className:i.gridContainer,children:[Object(a.jsx)("div",{className:i.learningTypeContainer,children:Object(a.jsxs)(te.a,{className:i.learningType,children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",children:" Aprendizaje "}),Object(a.jsx)(K.a,{children:n.learningType})]})}),Object(a.jsxs)("div",{className:i.modality,children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",children:" Modalidad "}),Object(a.jsx)(K.a,{children:n.modality})]}),Object(a.jsxs)("div",{style:{width:"100%",gridArea:"workingTime",marginTop:3},children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:i.timeField,children:[Object(a.jsx)(K.a,{children:n.duration.hours}),Object(a.jsx)(K.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsxs)(K.a,{children:[n.duration.minutes," (hrs:mins)"]})]})]}),Object(a.jsxs)(te.a,{className:i.format,children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",style:{marginBottom:4,marginRight:5},children:" Formato "}),Object(a.jsx)(K.a,{children:n.format})]}),Object(a.jsxs)(te.a,{style:{gridArea:"description",marginTop:10,wordBreak:"break-word"},children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",children:" Descripci\xf3n "}),Object(a.jsx)(te.a,{className:i.taskSpacingDescriptionBD,children:Object(a.jsx)(K.a,{children:n.description})})]})]})})]})})})},t)})},gr=Object(B.a)((function(e){return{unitSpacing:{marginTop:e.spacing(3)},titleUnitSpacing:{display:"flex",paddingLeft:10,paddingRight:10,marginTop:e.spacing(1)},graphicUnitSpacing:{width:"100%",paddingLeft:10,paddingRight:10,display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.spacing(1)},trashIcon:{marginLeft:"auto"},spacingDescriptionlearningActivity:{marginTop:e.spacing(1)},spacingDescription:{marginRight:e.spacing(2)},spacingLinkedResults:{marginTop:e.spacing(2)},buttonPos:{marginTop:e.spacing(1),marginLeft:"auto"},gridTask:{marginTop:e.spacing(1),marginLeft:e.spacing(1)},descriptionContainer:{display:"flex",flexDirection:"column",padding:e.spacing(1)},learningResultList:{display:"flex",flexWrap:"nowrap",flexDirection:"column",paddingLeft:15,paddingRight:15,maxHeight:200,overflow:"auto",overflowX:!0},taskContainer:{position:"relative"},learningResult:{marginBottom:10,userSelect:"none"},ellipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}})),mr=function(e){var t=e.index,n=e.learningActivity,i=gr(),r=Bn().designState.design,c=function(){var e=[];return r.metadata.results.forEach((function(t,a){n.learningResults.find((function(e){return e.verb===t.verb&&e.description===t.description}))&&e.push(t)})),e.map((function(e,n){return Object(a.jsx)(te.a,{className:i.learningResult,children:Object(a.jsx)(re.a,{title:e.verb+" "+e.description,arrow:!0,children:Object(a.jsx)(K.a,{className:i.ellipsis,children:n+1+". "+e.verb+" "+e.description})})},"learning-result-".concat(n,"-learning-activity-").concat(t))}))};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(G.a,{children:Object(a.jsxs)(ua.a,{className:i.unitSpacing,children:[Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,sm:5,className:i.titleUnitSpacing,children:Object(a.jsx)(K.a,{children:n.title})}),void Ma.forEach((function(e){e.value=0})),Object(a.jsxs)(G.a,{item:!0,xs:12,sm:7,className:i.graphicUnitSpacing,children:[r.data.learningActivities[t]&&r.data.learningActivities[t].tasks&&r.data.learningActivities[t].tasks.forEach((function(e){Ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)}))})),Object(a.jsx)(Fa,{items:Ma,type:"Activity"})]})]}),Object(a.jsx)(J.a,{}),Object(a.jsxs)(G.a,{container:!0,spacing:2,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,sm:8,className:i.taskContainer,children:[Object(a.jsx)(G.a,{className:i.gridTask,children:r.data.learningActivities[t]&&r.data.learningActivities[t].tasks&&r.data.learningActivities[t].tasks.map((function(e,n){return Object(a.jsx)(br,{index:n,task:e,learningActivityIndex:t},"task-".concat(n,"-learningActivity-").concat(t))}))}),Object(a.jsx)(G.a,{container:!0,children:Object(a.jsx)(G.a,{item:!0})})]}),Object(a.jsx)(G.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)("div",{className:i.descriptionContainer,children:[Object(a.jsx)(K.a,{variant:"body2",className:i.spacingDescriptionlearningActivity,color:"textSecondary",children:" Descripci\xf3n Unidad de aprendizaje "}),Object(a.jsx)(G.a,{className:i.spacingDescription,children:Object(a.jsx)(K.a,{children:n.description})}),Object(a.jsx)(K.a,{variant:"body2",className:i.spacingLinkedResults,color:"textSecondary",children:" Resultados Vinculados "}),Object(a.jsx)("div",{className:i.learningResultList,children:c()})]})})]})]})},t)})},hr=Object(B.a)((function(e){return{root:{background:e.palette.background.workSpace,minHeight:"calc(100vh - 112px)"},leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider),height:"auto"},workspace:Object(D.a)({paddingLeft:15,paddingRight:15,background:e.palette.background.workSpace,height:"auto",paddingBottom:e.spacing(1)},e.breakpoints.up("md"),{height:"calc(100vh - 112px)"}),rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.paper},textLefPanel:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},spaceData:{marginBottom:e.spacing(1),borderBottom:"2px solid ".concat(e.palette.divider)},LeftPanelMetadata:Object(D.a)({marginTop:e.spacing(1),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),height:"auto",paddingBottom:e.spacing(1)},e.breakpoints.up("xs"),{height:"calc(100vh - 200px)",overflow:"auto"}),textLeftPanelMetadata:{marginTop:e.spacing(3)},graphicsSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},betweenGraphics:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},workSpaceUnits:Object(D.a)({height:"auto"},e.breakpoints.up("md"),{height:"90%",overflow:"auto",overflowX:"hidden"}),buttonGroupWorkSpace:{height:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1)},origin:{marginTop:10,marginBottom:10,border:"1px solid ".concat(e.palette.divider),borderRadius:4,cursor:"pointer",userSelect:"none",backgroundColor:e.palette.background.design,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),fr=function(e){e.type;var t=hr(),n=Bn().designState,i=x().authState,r=Object(M.i)(),c=Object(M.g)(),s=Object(l.b)(),o=Object(w.b)().enqueueSnackbar,d=n.design,p=d.metadata,b=!1,g=!1,m=!1,h=Object(Y.a)(ye,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.cancelQueries("recent-designs");case 2:return e.next=4,s.cancelQueries(["designs","/"]);case 4:return e.next=6,s.cancelQueries([i.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){s.invalidateQueries("recent-designs"),s.invalidateQueries(["designs","/"]),s.invalidateQueries([i.user.id,"user-public-designs"])},onError:function(e){o(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){c.push("/designs/".concat(e.newDesign._id))}});d.data.learningActivities.forEach((function(e){void 0!==e.tasks&&e.tasks.forEach((function(e){""!==e.learningType&&"Seleccionar"!==e.learningType&&(b=!0),""!==e.format&&"Seleccionar"!==e.format&&(g=!0),""!==e.modality&&"Seleccionar"!==e.modality&&(m=!0)}))}));var f=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.mutate({id:r.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(G.a,{container:!0,className:t.root,children:[Object(a.jsxs)(G.a,{item:!0,xs:12,md:3,lg:2,className:t.leftPanel,children:[Object(a.jsx)(G.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(K.a,{className:t.textLefPanel,children:" INFORMACI\xd3N DISE\xd1O "})}),Object(a.jsx)(J.a,{className:t.spaceData}),Object(a.jsxs)(G.a,{className:t.LeftPanelMetadata,children:[Object(a.jsx)(G.a,{children:p&&p.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",children:" Nombre "}),Object(a.jsx)(K.a,{variant:"body2",children:p.name}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.category&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:"Tema"}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.category.name," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.workingTime&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Tiempo de trabajo "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.workingTime.hours," (hrs) : ",p.workingTime.minutes," (min)"]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.workingTimeDesign&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:"Tiempo de trabajo Dise\xf1o"}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.workingTimeDesign.hours," (hrs) : ",p.workingTimeDesign.minutes," (min)"]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.classSize&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Tama\xf1o de la clase "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.classSize," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.priorKnowledge&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Conocimiento Previo "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.priorKnowledge," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Descripci\xf3n "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.description," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.objective&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Objetivos "}),Object(a.jsxs)(K.a,{variant:"body2",children:[" ",p.objective," "]}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&null!==p.scoreMean&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Valoraci\xf3n media (0 - 5) "}),Object(a.jsx)(te.a,{display:"flex",justifyContent:"flex-start",alignItems:"center",children:p.scoreMean}),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:p&&p.results&&Object(a.jsxs)("div",{className:t.textLeftPanelMetadata,children:[p.results.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(K.a,{variant:"body2",color:"textSecondary",children:["Resultado de aprendizaje ",t+1]}),Object(a.jsx)(K.a,{variant:"body2",gutterBottom:!0,children:e.verb+" "+e.description})]},"learning-result-".concat(t))})),Object(a.jsx)(J.a,{})]})}),Object(a.jsx)(G.a,{children:d.origin&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(K.a,{variant:"body2",color:"textSecondary",className:t.textLeftPanelMetadata,children:" Derivado del dise\xf1o: "}),Object(a.jsxs)(ne.a,{className:t.origin,elevation:0,children:[Object(a.jsx)(ae.a,{onClick:function(){return function(e){if(!i.user)return o("Debe ingresar sesi\xf3n para poder realizar esta acci\xf3n.",{variant:"error",autoHideDuration:2e3});e.privileges.find((function(e){return i.user.uid===e.user._id}))?e.privileges.find((function(e){return i.user.uid===e.user._id&&0===e.type}))?c.push("/designs/".concat(e._id)):c.push("/designs/reader/".concat(e._id)):e.metadata.isPublic?c.push("/designs/reader/".concat(e._id)):o("Usted no tiene acceso a este dise\xf1o.",{variant:"error",autoHideDuration:2e3})}(d.origin)},children:Object(a.jsxs)(te.a,{style:{display:"flex",alignItems:"center",padding:5},children:[Object(a.jsx)(le.a,{style:{marginBottom:5}}),Object(a.jsx)(K.a,{style:{marginLeft:10},variant:"body2",children:d.origin.metadata.name})]})}),Object(a.jsx)(J.a,{}),Object(a.jsx)(ae.a,{onClick:function(){return function(e){if(!i.user)return o("Debe ingresar sesi\xf3n para poder realizar esta acci\xf3n.",{variant:"error",autoHideDuration:2e3});c.push("/profile/".concat(e.owner._id))}(d.origin)},children:Object(a.jsxs)(te.a,{style:{display:"flex",alignItems:"center",padding:5},children:[Object(a.jsx)(oe.a,{style:{width:25,height:25,fontSize:15},alt:je(d.origin.owner.name,d.origin.owner.lastname),src:d.origin.owner.img&&d.origin.owner.img.length>0?"".concat("http://learning-activity-designer.herokuapp.com/","uploads/users/").concat(d.origin.owner.img):"",children:pe(d.origin.owner.name,d.origin.owner.lastname)}),Object(a.jsx)(K.a,{style:{marginLeft:10},variant:"body2",children:je(d.origin.owner.name,d.origin.owner.lastname)})]})})]})]})})]})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:t.workspace,children:[i.token?Object(a.jsx)("div",{className:t.buttonZone,children:Object(a.jsx)(jn.a,{size:"small","aria-label":"outlined primary button group",className:t.buttonGroupWorkSpace,children:Object(a.jsx)(ee.a,{onClick:f,children:" Duplicar "})})}):Object(a.jsx)("div",{}),Object(a.jsx)(G.a,{className:t.workSpaceUnits,children:Object(a.jsx)(G.a,{children:d.data.learningActivities&&d.data.learningActivities.map((function(e,t){return Object(a.jsx)(mr,{index:t,learningActivity:e},"learningActivity-".concat(t))}))})})]}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:3,lg:2,className:t.rightPanel,children:[(Ma.forEach((function(e){e.value=0})),Ba.forEach((function(e){e.value=0})),za.forEach((function(e){e.value=0})),void Ha.forEach((function(e){e.value=0}))),Object(a.jsxs)(G.a,{className:t.graphicsSpacing,children:[d.data.learningActivities&&d.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){Ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),Ba.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),za.forEach((function(t){t.title===e.format&&(t.value=t.value+1)})),Ha.forEach((function(t){t.title===e.modality&&(t.value=t.value+1)}))}))})),b&&Object(a.jsx)("div",{className:t.betweenGraphics,children:Object(a.jsx)(Za,{items:Ba,colorGraphicToPdf:!0})}),g&&Object(a.jsxs)("div",{className:t.betweenGraphics,children:[Object(a.jsx)(K.a,{children:"Formato"}),Object(a.jsx)(Fa,{items:za,type:"Format",legends:!0,colorGraphicToPdf:!0})]}),m&&Object(a.jsxs)("div",{className:t.betweenGraphics,children:[Object(a.jsx)(K.a,{children:"Modalidad"}),Object(a.jsx)(Fa,{items:Ha,type:"Modality",legends:!0,colorGraphicToPdf:!0})]})]})]})]})})},xr=n(1350),Or=Object(B.a)((function(e){return{closeButton:{color:e.palette.grey[500]},title:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},ellipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},bodyMargin:{marginLeft:e.spacing(5),marginRight:e.spacing(5)},ratingRoot:Object(D.a)({fontSize:90},e.breakpoints.down("xs"),{fontSize:40})}})),vr={.5:"P\xe9simo",1:"Muy malo",1.5:"Malo",2:"Menos que bueno",2.5:"Bueno",3:"M\xe1s que bueno",3.5:"Muy bueno",4:"Extraordinario",4.5:"Casi excelente",5:"Excelente"},yr=function(e,t){var n=e.find((function(e){return e.user===t}));return n?n.score:null},wr=function(){var e=Or(),t=Object(w.b)().enqueueSnackbar,n=S(),r=n.socket,c=n.online,s=n.emitWithTimeout,o=x().authState,l=P(),d=l.uiState,u=l.dispatch,j=Bn().designState.design,b=yr(j.assessments,o.user.uid),g=Object(i.useState)(b),m=Object(p.a)(g,2),h=m[0],f=m[1],O=Object(i.useState)(-1),v=Object(p.a)(O,2),y=v[0],k=v[1];Object(i.useEffect)((function(){f(yr(j.assessments,o.user.uid))}),[j.assessments,f,o.user.uid]);var C=function(){f(b),k(-1),u({type:A.ui.toggleModal,payload:"Assessment"})};return Object(a.jsxs)(jt.a,{style:{padding:0},open:d.isAssessmentModalOpen,children:[Object(a.jsx)(pt.a,{style:{padding:"5px 5px 5px 16px"},children:Object(a.jsxs)(te.a,{className:e.title,children:[Object(a.jsx)(te.a,{className:e.ellipsis,children:"Valorar dise\xf1o"}),Object(a.jsx)(ce.a,{"aria-label":"close",className:e.closeButton,onClick:C,children:Object(a.jsx)(ht.a,{})})]})}),Object(a.jsxs)(bt.a,{dividers:!0,children:[Object(a.jsx)(K.a,{align:"center",style:{marginBottom:20},children:"En esta ventana usted puede valorar o cambiar su valoraci\xf3n del dise\xf1o de aprendizaje que est\xe1 visualizando haciendo click en alguna de las estrellas a continuaci\xf3n:"}),Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(xr.a,{classes:{root:e.ratingRoot},name:"hover-feedback",value:h,precision:.5,onChange:function(e,t){f(t)},onChangeActive:function(e,t){k(t)}}),Object(a.jsx)(te.a,{style:{minHeight:50,marginTop:20},children:Object(a.jsx)(K.a,{children:-1!==y?vr[y]:h?vr[h]:"No valorado"})})]})]}),Object(a.jsxs)(mt.a,{children:[Object(a.jsx)(ee.a,{onClick:C,children:" Cancelar "}),Object(a.jsx)(ee.a,{variant:"contained",color:"primary",onClick:function(){if(h){if(h===b)return C();c&&(null===r||void 0===r||r.emit("rate-design",{designId:j._id,rate:{user:o.user.uid,score:h}},s((function(e){return t(e.message,{variant:e.ok?"success":"error",autoHideDuration:2e3})}),(function(){return t("Error al valorar el dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.",{variant:"error",autoHideDuration:2e3})}))),C())}},disabled:!h,children:" Valorar "})]})]})},kr=Object(B.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},comments:{paddingTop:10,paddingLeft:10,paddingRight:10,background:e.palette.background.workSpace,minHeight:"calc(100vh - 177px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},menu:{borderBottom:"1px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start",minHeight:"calc(100vh - 128px)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingFile:{"-webkit-backface-visibility":"hidden",animation:"$spinAndScale 3000ms ".concat(e.transitions.easing.easeInOut),animationIterationCount:"infinite",animationDirection:"alternate"},"@keyframes spinAndScale":{from:{height:300,width:300,transform:"rotate(0deg)"},to:{height:150,width:150,transform:"rotate(360deg)"}}}})),Cr=function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}},Sr=function(){var e=kr(),t=Object(M.i)().id,n=Object(i.useRef)(!0),r=S(),c=r.socket,s=r.online,o=r.emitWithTimeout,l=x().authState,d=Bn(),u=d.designState,j=d.dispatch,b=P().dispatch,g=Object(i.useState)(0),m=Object(p.a)(g,2),h=m[0],f=m[1],O=u.design,v=Object(i.useState)(null),y=Object(p.a)(v,2),w=y[0],k=y[1];Object(i.useEffect)((function(){s&&(null===c||void 0===c||c.emit("join-to-design",{user:l.user,designId:t,public:!0},o((function(e){e.ok?n.current&&j({type:A.design.updateDesign,payload:e.data.design}):k(e.message)}),(function(){k("Error al intentar ingresar al dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.")}))))}),[c,l.user,s,t,j,o]),Object(i.useEffect)((function(){return null===c||void 0===c||c.on("update-design-rate",(function(e){var t=e.assessments,a=e.mean;n.current&&(j({type:A.design.setAssessments,payload:t}),j({type:A.design.setScoreMean,payload:a}))})),null===c||void 0===c||c.on("comment-design",(function(e){n.current&&j({type:A.design.commentDesign,payload:e})})),null===c||void 0===c||c.on("delete-comment",(function(e){n.current&&j({type:A.design.deleteComment,payload:e})})),function(){null===c||void 0===c||c.off("update-design-rate"),null===c||void 0===c||c.off("comment-design"),null===c||void 0===c||c.off("delete-comment")}}),[c,j]),Object(i.useEffect)((function(){return function(){null===c||void 0===c||c.emit("leave-from-design",{user:l.user,designId:t})}}),[c,l.user,t]);if(w)return Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:w})});if(!O)return Object(a.jsx)(St.a,{className:e.backdrop,open:!0,children:Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(te.a,{width:300,height:300,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(le.a,{className:e.loadingFile})}),Object(a.jsx)(K.a,{children:"Cargando Dise\xf1o de Aprendizaje..."})]})});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{container:!0,className:e.menu,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.tabBar,children:[Object(a.jsxs)(oa.a,{value:h,onChange:function(e,t){f(t)},"aria-label":"full width tabs example",children:[Object(a.jsx)(la.a,Object(N.a)({label:"DISE\xd1O"},Cr(0))),Object(a.jsx)(la.a,Object(N.a)({label:"COMENTARIOS"},Cr(1)))]}),l.user&&l.user.uid!==O.owner&&Object(a.jsxs)(ee.a,{variant:"outlined",color:"default",onClick:function(){b({type:A.ui.toggleModal,payload:"Assessment"})},children:[Object(a.jsx)(de.a,{style:{marginRight:10,marginTop:-3}})," Valorar Dise\xf1o"]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2})]},O._id),Object(a.jsx)(di,{value:h,index:0,children:Object(a.jsx)(fr,{})}),Object(a.jsx)(di,{value:h,index:1,children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel}),Object(a.jsx)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.comments,children:Object(a.jsx)(sr,{})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})}),Object(a.jsx)(wr,{})]})},Tr=Object(B.a)((function(e){return{root:{minHeight:"calc(100vh - 128px)"},leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},comments:{paddingTop:10,paddingLeft:10,paddingRight:10,background:e.palette.background.workSpace,minHeight:"calc(100vh - 177px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},content:{borderBottom:"1px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},loadingFile:{"-webkit-backface-visibility":"hidden",animation:"$spinAndScale 3000ms ".concat(e.transitions.easing.easeInOut),animationIterationCount:"infinite",animationDirection:"alternate"},"@keyframes spinAndScale":{from:{height:300,width:300,transform:"rotate(0deg)"},to:{height:150,width:150,transform:"rotate(360deg)"}}}})),Dr=function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}},Nr=function(){var e=Tr(),t=Object(M.i)(),n=Object(i.useRef)(!0),r=S(),c=r.socket,s=r.online,o=r.emitWithTimeout,l=x().authState,d=Bn(),b=d.designState,g=d.dispatch,m=P().dispatch,h=Object(i.useState)(0),f=Object(p.a)(h,2),O=f[0],v=f[1],y=b.design,w=Object(i.useState)(null),k=Object(p.a)(w,2),C=k[0],T=k[1],D=Object(i.useState)(null),I=Object(p.a)(D,2),E=I[0],L=I[1];Object(i.useEffect)((function(){l.user&&s&&E&&(null===c||void 0===c||c.emit("join-to-design",{user:l.user,designId:E,public:!0},o((function(e){e.ok?n.current&&g({type:A.design.updateDesign,payload:e.data.design}):T(e.message)}),(function(){T("Error al intentar ingresar al dise\xf1o. Por favor revise su conexi\xf3n. Tiempo de espera excedido.")}))))}),[c,l.user,s,g,E,o]),Object(i.useEffect)((function(){return function(){l.user&&(null===c||void 0===c||c.emit("leave-from-design",{user:l.user,designId:E}))}}),[c,l.user,E]),Object(i.useEffect)((function(){return l.user&&(null===c||void 0===c||c.on("update-design-rate",(function(e){var t=e.assessments,a=e.mean;n.current&&(g({type:A.design.setAssessments,payload:t}),g({type:A.design.setScoreMean,payload:a}))})),null===c||void 0===c||c.on("comment-design",(function(e){n.current&&g({type:A.design.commentDesign,payload:e})})),null===c||void 0===c||c.on("delete-comment",(function(e){n.current&&g({type:A.design.deleteComment,payload:e})}))),function(){l.user&&(null===c||void 0===c||c.off("update-design-rate")),null===c||void 0===c||c.off("comment-design"),null===c||void 0===c||c.off("delete-comment")}}),[c,g,l.user]);var R=Object(X.a)(["shared-design-by-link",t.link],Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve({link:t.link});case 2:if(n=e.sent,!l.user){e.next=6;break}return L(n.design._id),e.abrupt("return",n);case 6:return g({type:A.design.updateDesign,payload:n.design}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),F=R.isLoading,B=R.isError,z=R.error,H=R.data,W=function(e,t){v(t)},q=function(){m({type:A.ui.toggleModal,payload:"Assessment"})};return Object(a.jsx)("div",{className:e.root,children:B||C?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:z.message})}):F||!y?Object(a.jsx)(St.a,{className:e.backdrop,open:!0,children:Object(a.jsxs)(te.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(a.jsx)(te.a,{width:300,height:300,style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(le.a,{className:e.loadingFile})}),Object(a.jsx)(K.a,{children:"Cargando Dise\xf1o de Aprendizaje..."})]})}):H.design==={}?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(Se.a,{severity:"error",children:"No se ha encontrado dise\xf1o."})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(G.a,{container:!0,className:e.content,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsxs)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.tabBar,children:[Object(a.jsxs)(oa.a,{value:O,onChange:W,"aria-label":"full width tabs example",children:[Object(a.jsx)(la.a,Object(N.a)({label:"DISE\xd1O"},Dr(0))),Object(a.jsx)(la.a,Object(N.a)({label:"COMENTARIOS"},Dr(1)))]}),l.user&&l.user.uid!==y.owner&&Object(a.jsxs)(ee.a,{variant:"outlined",color:"default",onClick:q,children:[Object(a.jsx)(de.a,{style:{marginRight:10,marginTop:-3}})," Valorar Dise\xf1o"]})]}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2})]},H.design._id),Object(a.jsx)(di,{value:O,index:0,children:Object(a.jsx)(fr,{type:"shared-link"})}),Object(a.jsx)(di,{value:O,index:1,children:Object(a.jsxs)(G.a,{container:!0,children:[Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel}),Object(a.jsx)(G.a,{item:!0,xs:12,md:6,lg:8,className:e.comments,children:Object(a.jsx)(sr,{})}),Object(a.jsx)(G.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})}),l.user&&Object(a.jsx)(wr,{})]})})},Ar=n(1323),Ir=n(1324),Er=n(1325),Pr=Object(B.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 128px)",height:"auto"},container:Object(D.a)({display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid ".concat(e.palette.divider),padding:10,borderRadius:e.shape.borderRadius,height:"100%"},e.breakpoints.down("xs"),{borderStyle:"none",padding:0}),backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},buttonZone:Object(D.a)({display:"flex",justifySelf:"flex-end",justifyContent:"flex-end"},e.breakpoints.down("sm"),{marginTop:30,paddingRight:20}),body:Object(D.a)({maxWidth:600,display:"flex",flexDirection:"column",justifyContent:"space-between"},e.breakpoints.up("sm"),{height:450}),content:Object(D.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:20},e.breakpoints.down("sm"),{padding:40}),input:{marginTop:30},codeForm:{width:"100%",display:"flex",marginTop:30},codeButton:{borderTopLeftRadius:0,borderBottomLeftRadius:0},codeInput:{"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Lr={value:"",error:null},Rr={value:"",error:null},Fr={password:"",confirm:"",passwordError:null,confirmError:null},Mr=function(){var e=Pr(),t=Object(M.g)(),n=Object(w.b)().enqueueSnackbar,r=Object(i.useState)(0),c=Object(p.a)(r,2),s=c[0],o=c[1],l=Object(i.useState)(!1),d=Object(p.a)(l,2),b=d[0],g=d[1],m=Object(i.useState)(null),h=Object(p.a)(m,2),f=h[0],x=h[1],O=Object(i.useState)(null),v=Object(p.a)(O,2),y=v[0],k=v[1],C=Object(i.useState)(Rr),S=Object(p.a)(C,2),T=S[0],A=S[1],I=Object(i.useState)(Lr),E=Object(p.a)(I,2),P=E[0],L=E[1],R=Object(i.useState)(Fr),F=Object(p.a)(R,2),B=F[0],z=F[1],H=[{icon:Qt.a,label:"Buscar cuenta por email"},{icon:Ar.a,label:"C\xf3digo de verificaci\xf3n"},{icon:Ir.a,label:"Restablecer contrase\xf1a"},{icon:Er.a,label:"Contrase\xf1a restablecida"}],W=function(){o((function(e){return e+1}))},q=function(e){var t=e.target;L({value:t.value,error:null})},V=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),P.value.trim().length){e.next=3;break}return e.abrupt("return",L(Object(N.a)(Object(N.a)({},P),{},{error:"Este campo es obligatorio"})));case 3:if(/^[-\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(P.value)||(L((function(e){return Object(N.a)(Object(N.a)({},e),{},{error:"El correo debe tener la siguiente estructura: example@example.com"})})),0)){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.next=8,zt(P.value);case 8:if(a=e.sent,g(!1),a.ok){e.next=12;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 12:n("Se ha enviado un c\xf3digo de verificaci\xf3n a su correo electr\xf3nico.",{variant:"success",autoHideDuration:5e3}),k(a.data.randomCode),x(a.data.user._id),W();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),B.password.trim().length?B.confirm.trim().length?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(B.password)?B.password===B.confirm||(z((function(e){return Object(N.a)(Object(N.a)({},e),{},{passwordError:"Las contrase\xf1as no coinciden.",confirmError:"Las contrase\xf1as no coinciden."})})),0):(z((function(e){return Object(N.a)(Object(N.a)({},e),{},{passwordError:"La contrase\xf1a debe tener al menos un car\xe1cter en min\xfascula, uno en may\xfascula, un n\xfamero y debe tener entre 8 y 16 caract\xe9res de longitud."})})),0):z(Object(N.a)(Object(N.a)({},B),{},{confirmError:"Este campo es obligatorio"})):z(Object(N.a)(Object(N.a)({},B),{},{passwordError:"Este campo es obligatorio"}))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Wt({uid:f,newPassword:B.password});case 5:if((a=e.sent).ok){e.next=8;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 8:n(a.message,{variant:"success",autoHideDuration:5e3}),W();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){var t,n=e.target;z(Object(N.a)(Object(N.a)({},B),{},(t={},Object(D.a)(t,n.name,n.value),Object(D.a)(t,"passwordError",null),Object(D.a)(t,"confirmError",null),t)))},G=function(e){var t=e.target;A(Object(N.a)(Object(N.a)({},T),{},{value:t.value,error:null}))},J=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),A(Rr),e.next=4,Ht(P.value);case 4:if(a=e.sent,g(!1),a.ok){e.next=8;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 8:n(a.message,{variant:"success",autoHideDuration:2e3}),k(a.data.randomCode);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(Vn.a,{className:e.root,children:[Object(a.jsxs)(te.a,{className:e.container,children:[Object(a.jsx)(Mi.a,{style:{width:"100%"},activeStep:s,alternativeLabel:!0,children:H.map((function(e){return Object(a.jsx)(Bi.a,{children:Object(a.jsx)(zi.a,{children:e.label})},e.label)}))}),Object(a.jsxs)("form",{className:e.body,onSubmit:0===s?V:1===s?function(e){if(e.preventDefault(),T.value.trim().toUpperCase()!==y.trim().toUpperCase())return A(Object(N.a)(Object(N.a)({},T),{},{error:"El c\xf3digo ingresado no coincide"}));W()}:2===s?U:function(e){e.preventDefault(),t.push("/")},noValidate:!0,children:[function(t){switch(t){case 0:return Object(a.jsxs)(te.a,{className:e.content,children:[Object(a.jsx)(K.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Busca tu cuenta por correo electr\xf3nico"}),Object(a.jsx)(K.a,{variant:"body1",align:"center",gutterBottom:!0,children:"Introduce la direcci\xf3n de correo electr\xf3nico asociada a tu cuenta para poder identificarte."}),Object(a.jsx)(gt.a,{className:e.input,label:"Email",type:"email",value:P.value,error:!!P.error,helperText:P.error,onChange:q,placeholder:"Ingresa correo electr\xf3nico",variant:"outlined",fullWidth:!0,autoFocus:!0})]});case 1:return Object(a.jsxs)(te.a,{className:e.content,children:[Object(a.jsx)(K.a,{variant:"h5",align:"center",gutterBottom:!0,children:"C\xf3digo de verificaci\xf3n"}),Object(a.jsx)(K.a,{variant:"body1",align:"center",gutterBottom:!0,children:'Introduce el c\xf3digo de verificaci\xf3n que hemos enviado a tu correo electr\xf3nico. Si este no ha llegado a tu correo, puedes reenviar un c\xf3digo haciendo click en el bot\xf3n "Reenviar C\xf3digo".'}),Object(a.jsxs)("div",{className:e.codeForm,children:[Object(a.jsx)(gt.a,{className:e.codeInput,value:T.value,error:!!T.error,helperText:T.error,onChange:G,label:"C\xf3digo verificaci\xf3n",type:"text",placeholder:"Ingresa c\xf3digo verificaci\xf3n",variant:"outlined",inputProps:{style:{textTransform:"uppercase"}},fullWidth:!0}),Object(a.jsx)(ee.a,{className:e.codeButton,size:"small",variant:"contained",color:"primary",disableElevation:!0,onClick:J,children:"Reenviar C\xf3digo"})]})]});case 2:return Object(a.jsxs)(te.a,{className:e.content,children:[Object(a.jsx)(K.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Restablecer contrase\xf1a"}),Object(a.jsx)(K.a,{variant:"body1",align:"center",gutterBottom:!0,children:"Complete el siguiente formulario para reestablecer su contrase\xf1a."}),Object(a.jsx)(gt.a,{name:"password",className:e.input,value:B.password,onChange:Q,error:!!B.passwordError,helperText:B.passwordError,label:"Nueva contrase\xf1a",type:"password",placeholder:"Ingresa la nueva contrase\xf1a",variant:"outlined",fullWidth:!0}),Object(a.jsx)(gt.a,{name:"confirm",className:e.input,value:B.confirm,onChange:Q,error:!!B.confirmError,helperText:B.confirmError,label:"Confirmar contrase\xf1a",type:"password",placeholder:"Ingresa nuevamente la nueva contrase\xf1a",variant:"outlined",fullWidth:!0})]});case 3:return Object(a.jsxs)(te.a,{className:e.content,children:[Object(a.jsx)(K.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Contrase\xf1a restablecida"}),Object(a.jsx)(K.a,{variant:"body1",align:"center",gutterBottom:!0,children:'La contrase\xf1a de su cuenta se ha reestablecido con \xe9xito. Por favor haga click en el boton "Finalizar" para redirigirlo a la p\xe1gina de inicio.'})]});default:return"Unknown step"}}(s),Object(a.jsxs)(te.a,{className:e.buttonZone,children:[1===s&&Object(a.jsx)(ee.a,{disabled:0===s,onClick:function(){o((function(e){return e-1})),k(null),L(Lr)},className:e.backButton,children:"Volver"}),Object(a.jsx)(ee.a,{disableElevation:!0,variant:"contained",type:"submit",color:"primary",children:s===H.length-1?"Finalizar":"Siguiente"})]})]})]}),Object(a.jsx)(St.a,{className:e.backdrop,open:b,children:Object(a.jsx)(Tt.a,{color:"inherit"})})]})},Br=Object(B.a)((function(e){return{"@global":{"html, body":{height:"100%"},"*::-webkit-scrollbar":{height:"0.6em",width:"0.6em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),zr=function(){var e=x(),t=e.authState,n=e.verifyToken,r=t.token,c=t.checking;return Br(),Object(i.useEffect)((function(){n()}),[n]),c?Object(a.jsx)("h1",{children:"Espere..."}):Object(a.jsx)(F.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(kn,{children:[Object(a.jsx)(Gn.a,{}),Object(a.jsx)(qn,{}),Object(a.jsxs)(M.d,{children:[Object(a.jsx)(q,{exact:!0,path:"/",component:H,isAuthenticated:!c&&!!r}),Object(a.jsx)(q,{exact:!0,path:"/reset-password",component:Mr,isAuthenticated:!c&&!!r}),Object(a.jsx)(M.b,{exact:!0,path:"/shared-link/:link",component:Nr}),Object(a.jsx)(V,{exact:!0,path:"/profile/:uid",component:rn,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/my-designs",component:Et,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{path:"/my-designs/:urlPath+/",component:Et,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/shared-with-me",component:Jn,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/public-repository",component:ta,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/users/search",component:sa,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/designs/:id",component:dr,isAuthenticated:!c&&!!r}),Object(a.jsx)(V,{exact:!0,path:"/designs/reader/:id",component:Sr,isAuthenticated:!c&&!!r}),Object(a.jsx)(M.a,{to:"/"})]}),Object(a.jsx)(jr,{}),Object(a.jsx)(Qn,{})]})})})},Hr=n(628),Wr=new o.a;var qr=function(){return Object(a.jsx)(l.a,{client:Wr,children:Object(a.jsx)(w.a,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:Hr.a,children:Object(a.jsx)(R,{children:Object(a.jsx)(v,{children:Object(a.jsx)(Hn,{children:Object(a.jsx)(T,{children:Object(a.jsx)(wa,{children:Object(a.jsx)(zr,{})})})})})})})})};s.a.render(Object(a.jsx)(qr,{}),document.getElementById("root"))},703:function(e,t,n){},830:function(e,t){},832:function(e,t){},859:function(e,t){},860:function(e,t){},973:function(e,t){},975:function(e,t){}},[[1208,1,2]]]);
//# sourceMappingURL=main.a74bfb20.chunk.js.map