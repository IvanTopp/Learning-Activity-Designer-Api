(this["webpackJsonplearning-activity-designer-app"]=this["webpackJsonplearning-activity-designer-app"]||[]).push([[0],{533:function(e,t,n){},660:function(e,t){},662:function(e,t){},690:function(e,t){},691:function(e,t){},905:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),i=n.n(r),c=n(43),s=n.n(c),o=(n(310),n(311),n(1017)),l=n(233),d=n(8),u=n.n(d),j=n(18),b=n(12),p="http://learning-activity-designer.herokuapp.com/api",g=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,r,i,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:"GET",r="".concat(p,"/").concat(t),"GET"!==a){e.next=11;break}return e.next=5,fetch(r);case 5:return i=e.sent,e.next=8,i.json();case 8:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(r,{method:a,headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 13:return c=e.sent,e.next=16,c.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,r,i,c,s,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:"GET",r="".concat(p,"/").concat(t),i=localStorage.getItem("token")||"","GET"!==a){e.next=12;break}return e.next=6,fetch(r,{method:a,headers:{"x-token":i}});case 6:return c=e.sent,e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 12:return e.next=14,fetch(r,{method:a,headers:{"Content-type":"application/json","x-token":i},body:JSON.stringify(n)});case 14:return s=e.sent,e.next=17,s.json();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=Object(r.createContext)();function x(){var e=Object(r.useContext)(h);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}var f={checking:!0,user:null,token:null},O=function(e){var t=e.children,n=Object(r.useState)(f),i=Object(b.a)(n,2),c=i[0],s=i[1],o=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",{email:t,password:n},"POST");case 2:return(a=e.sent).ok&&(r=a.data,i=r.user,c=r.token,s({user:i,token:c,checking:!1})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/register",t,"POST");case 2:return(n=e.sent).ok&&(a=n.data,r=a.user,i=a.token,s({user:r,token:i,checking:!1})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=Object(r.useCallback)(Object(j.a)(u.a.mark((function e(){var t,n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=4;break}return s({user:null,token:null,checking:!1}),e.abrupt("return",!1);case 4:return e.next=6,m("auth/renew");case 6:if(!(t=e.sent).ok){e.next=14;break}return n=t.data,a=n.user,r=n.token,localStorage.setItem("token",r),s({user:a,token:r,checking:!1}),e.abrupt("return",!0);case 14:return s({user:null,token:null,checking:!1}),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)}))),[]);return Object(r.useEffect)((function(){null===c.token?localStorage.removeItem("token"):localStorage.setItem("token",c.token)}),[c.token]),Object(a.jsx)(h.Provider,{value:{authState:c,login:o,register:l,logout:function(){s({checking:!1,user:null,token:null})},verifyToken:d,setAuthState:s},children:t})},v=n(446),y=Object(r.createContext)(),w=function(){var e=Object(r.useContext)(y);if(void 0===e)throw new Error("useSocketState must be used within a SocketProvider");return e},k=function(e){var t=e.children,n=x().authState,i=function(e){var t=Object(r.useState)(null),n=Object(b.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(!1),s=Object(b.a)(c,2),o=s[0],l=s[1],d=x().authState,u=Object(r.useCallback)((function(){var t=d.token,n=v.io.connect(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}});i(n)}),[e,d.token]),j=Object(r.useCallback)((function(){null===a||void 0===a||a.disconnect()}),[a]);return Object(r.useEffect)((function(){l(null===a||void 0===a?void 0:a.connected)}),[a]),Object(r.useEffect)((function(){null===a||void 0===a||a.on("connect",(function(){return l(!0)})),null===a||void 0===a||a.on("disconnect",(function(){return l(!1)}))}),[a]),{socket:a,online:o,connectSocket:u,disconnectSocket:j}}("http://learning-activity-designer.herokuapp.com"),c=i.socket,s=i.online,o=i.connectSocket,l=i.disconnectSocket;return Object(r.useEffect)((function(){!!n.token&&o()}),[n.token,o]),Object(r.useEffect)((function(){!!n.token||l()}),[n.token,l]),Object(a.jsx)(y.Provider,{value:{socket:c,online:s},children:t})},C=n(21),S=n(4),T={ui:{toggleLoginModal:"[UI] toggle login modal",toggleModal:"[UI] toggle modal",toggleRegisterModal:"[UI] toggle register modal",toggleLearningResultModal:"[UI] toggle learning result modal",updateFolderPath:"[UI] update folder path",toggleConfirmAction:"[UI] confirm action",setFolder:"[UI] set folder data",setConfirmData:"[UI] set confirm data",setPDF:"[UI] set pdf",setResourceLink:"[UI] set resource link",setEvaluation:"[UI] set evaluation"},design:{updateDesign:"[DESIGN] toggle login modal",changeMetadataField:"[DESIGN] change metadata field",changeTaskField:"[DESIGN] change task field",setCurrentLearningResultField:"[DESIGN] set learning result field",clearCurrentLearningResult:"[DESIGN] clear current learning result",setCurrentLearningResult:"[DESIGN] set current learning result",setBloomCategories:"[DESIGN] set bloom categories",setBloomVerbs:"[DESIGN] set bloom verbs",setDesignPrivileges:"[DESIGN] set design privileges",addDesignKeyword:"[DESIGN] add design keyword",removeDesignKeyword:"[DESIGN] remove design keyword",updateReadOnlyLink:"[DESIGN] change read only link"}},A=function(e,t){switch(t.type){case T.ui.toggleModal:return Object(S.a)(Object(S.a)({},e),{},Object(C.a)({},"is"+t.payload+"ModalOpen",!e["is"+t.payload+"ModalOpen"]));case T.ui.toggleRegisterModal:return Object(S.a)(Object(S.a)({},e),{},{isRegisterModalOpen:!e.isRegisterModalOpen});case T.ui.updateFolderPath:return e.folderPath!==t.payload?Object(S.a)(Object(S.a)({},e),{},{folderPath:t.payload}):e;case T.ui.toggleWitchOpenModal:return Object(S.a)(Object(S.a)({},e),{},{setWitchOpenModal:!e.setWitchOpenModal});case T.ui.setFolder:return Object(S.a)(Object(S.a)({},e),{},{folder:t.payload});case T.ui.setConfirmData:return Object(S.a)(Object(S.a)({},e),{},{confirmModalData:t.payload});case T.ui.setPDF:return Object(S.a)(Object(S.a)({},e),{},{pdf:Object(S.a)(Object(S.a)({},e.pdf),{},{typeUserPDF:t.payload})});case T.ui.setResourceLink:return Object(S.a)(Object(S.a)({},e),{},{resourceLink:t.payload});case T.ui.setEvaluation:return Object(S.a)(Object(S.a)({},e),{},{evaluationData:t.payload});default:return e}},N=Object(r.createContext)();function D(){var e=Object(r.useContext)(N);if(void 0===e)throw new Error("useUiState must be used within a UiProvider");return e}var E={folderPath:"/",isLoginModalOpen:!1,isRegisterModalOpen:!1,isLearningResultModalOpen:!1,isEditProfileModalOpen:!1,isContactsModalOpen:!1,isConfirmationModalOpen:!1,isShareModalOpen:!1,setWichOpenModal:!1,isFolderModalOpen:!1,isPDFModalOpen:!1,isResourceModalOpen:!1,isEvaluationModalOpen:!1,folder:{_id:null,name:""},confirmModalData:{type:null,args:null,actionMutation:null},pdf:{typeUserPDF:null},resourceLink:{learningActivityIndex:null,taskIndex:null},evaluationData:{learningActivityIndex:null}},I=function(e){var t=e.children,n=Object(r.useReducer)(A,E),i=Object(b.a)(n,2),c=i[0],s=i[1];return Object(a.jsx)(N.Provider,{value:{uiState:c,dispatch:s},children:t})},L=n(55),P=n(44),R=n(948),F=Object(R.a)((function(e){return{root:{minHeight:"calc(100vh - 64px)"}}})),B=function(){var e=F();return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)("h1",{children:"LandingPage"}),Object(a.jsx)("hr",{})]})},M=n(110),W=function(e){var t=e.isAuthenticated,n=e.component,r=Object(M.a)(e,["isAuthenticated","component"]);return Object(a.jsx)(P.b,Object(S.a)(Object(S.a)({},r),{},{component:function(e){return t?Object(a.jsx)(P.a,{to:"/my-designs"}):Object(a.jsx)(n,Object(S.a)({},e))}}))},V=function(e){var t=e.isAuthenticated,n=e.component,r=Object(M.a)(e,["isAuthenticated","component"]);return localStorage.setItem("lastPath",r.location.pathname),Object(a.jsx)(P.b,Object(S.a)(Object(S.a)({},r),{},{component:function(e){return t?Object(a.jsx)(n,Object(S.a)({},e)):Object(a.jsx)(P.a,{to:"/"})}}))},z=n(979),q=n(159),Q=n(980),H=n(908),G=n(966),U=n(1023),K=n(970),Z=n(1022),X=n(957),J=n(950),Y=n(951),_=n(952),$=n(907),ee=n(956),te=n(1024),ne=n(953),ae=n(954),re=n(955),ie=function(e,t){var n=e.split(" ")[0],a=t.split(" ")[0];return"".concat(n," ").concat(a)},ce=function(e,t){return"".concat(e.substring(0,1)+t.substring(0,1))},se=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/recent");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/user",{path:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/public/user/",{id:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(j.a)(u.a.mark((function e(t,n,a,r){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/public-repository",{filter:t,keywords:n,categories:a,from:r},"POST");case 2:if((i=e.sent).ok){e.next=5;break}throw new Error(i.message);case 5:return e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("design/shared-with-user/",{from:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.isPublic,r=void 0!==a&&a,e.next=3,m("design",{path:n,isPublic:r},"POST");case 3:if((i=e.sent).ok){e.next=6;break}throw new Error(i.message);case 6:return e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("design/".concat(n),{},"DELETE");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.link)&&(!n||0!==n.trim().length)){e.next=3;break}return e.abrupt("return",{design:{}});case 3:return e.next=5,g("design/shared-link/".concat(n),{},"GET");case 5:if((a=e.sent).ok){e.next=8;break}throw new Error(a.message);case 8:return e.abrupt("return",a.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("design/duplicate",{id:n},"POST");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=n(45),he=Object(R.a)((function(e){return{root:{position:"relative",border:"1px solid ".concat(e.palette.divider),width:325,minWidth:325,margin:"10px 10px 10px 0px",borderRadius:5,cursor:"pointer",userSelect:"none",backgroundColor:e.palette.background.design,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}},ownerInfo:{borderTop:"1px solid ".concat(e.palette.divider),paddingLeft:15,paddingRight:15},row:{display:"flex"},rowJustified:{display:"flex",justifyContent:"space-between"},col:{display:"flex",flexDirection:"column"},ellipsis:{width:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},designIcon:{marginLeft:-12,fontSize:50,alignSelf:"center",justifySelf:"start",width:"20%"},deleteIcon:{position:"absolute",top:8,right:8},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),xe=function(e){var t,n,r,i,c=e._id,s=e.title,o=e.updatedAt,d=e.metadata,b=e.folder,p=e.owner,g=e.privileges,m=e.canDelete,h=void 0===m||m,f=Object(l.b)(),O=x().authState,v=D().dispatch,y=Object(me.b)().enqueueSnackbar,w=Object(P.g)(),k=Object(Z.a)(be,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){var t,n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.cancelQueries("recent-designs");case 2:return e.next=4,f.cancelQueries(["designs",b.path]);case 4:return e.next=6,f.cancelQueries([p._id,"user-public-designs"]);case 6:if(t=f.getQueryData(["designs",b.path]),n=f.getQueryData([p,"user-public-designs"]),a=["designs",b.path],w.location.pathname.includes("/my-designs")||(a=[p._id,"user-public-designs"]),f.setQueryData(a,(function(e){var t=e.pages.find((function(e){return e.designs.find((function(e){return e._id===c}))})),n=t.designs.filter((function(e){return e._id!==c})),a=Object.assign({},Object(S.a)(Object(S.a)({},t),{},{designs:n})),r=e.pages;return r[e.pages.indexOf(t)]=a,Object.assign({},Object(S.a)(Object(S.a)({},e),{},{pages:r}))})),"/"!==b.path){e.next=15;break}return r=f.getQueryData("recent-designs"),f.setQueryData("recent-designs",(function(e){return e.filter((function(e){return e._id!==c}))})),e.abrupt("return",{previousDesigns:t,previousPublicDesigns:n,previousRecentDesigns:r});case 15:return e.abrupt("return",{previousDesigns:t,previousPublicDesigns:n});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:function(e,t,n){console.log(e),f.setQueryData(["designs",b.path],n.previousDesigns),f.setQueryData([p,"user-public-designs"],n.previousPublicDesigns),n.previousRecentDesigns&&f.setQueryData("recent-designs",n.previousRecentDesigns)},onSettled:function(){f.invalidateQueries("recent-designs"),f.invalidateQueries(["designs",b.path]),f.invalidateQueries([p._id,"user-public-designs"])},onSuccess:function(e){y("Su dise\xf1o se ha eliminado.",{variant:"success",autoHideDuration:2e3})}}),C=he(),A=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),v({type:T.ui.setConfirmData,payload:{type:"dise\xf1o",args:{id:c},actionMutation:k}}),v({type:T.ui.toggleModal,payload:"Confirmation"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(J.a,{className:C.root,elevation:0,children:[Object(a.jsx)(Y.a,{onClick:function(){g.find((function(e){return O.user.uid===e.user}))?g.find((function(e){return O.user.uid===e.user&&0===e.type}))?w.push("/designs/".concat(c)):w.push("/designs/reader/".concat(c)):d.isPublic?w.push("/designs/reader/".concat(c)):w.push("/")},children:Object(a.jsxs)(_.a,{children:[Object(a.jsxs)("div",{className:C.row,style:{width:"100%"},children:[Object(a.jsx)(ne.a,{className:C.designIcon}),Object(a.jsxs)("div",{className:C.col,children:[Object(a.jsx)("div",{className:C.row,children:Object(a.jsx)(q.a,{className:C.ellipsis,variant:"h5",component:"h2",children:s})}),Object(a.jsx)("div",{className:C.row,children:Object(a.jsx)(q.a,{className:C.ellipsis,variant:"body1",component:"p",children:d.category?d.category.name:"Sin categor\xeda"})})]})]}),Object(a.jsx)("div",{className:C.rowJustified,children:Object(a.jsxs)(q.a,{variant:"body1",component:"p",children:["Tiempo de dise\xf1o: ","".concat(null!==(t=d.workingTime.hours)&&void 0!==t?t:0,":").concat(null!==(n=d.workingTime.minutes)&&void 0!==n?n:0)," Hrs"]})}),Object(a.jsxs)("div",{className:C.rowJustified,style:{marginTop:10,marginBottom:-5},children:[Object(a.jsxs)(q.a,{color:"textSecondary",variant:"body2",children:["\xdaltima modificaci\xf3n: ",new Date(o).toLocaleDateString()]}),Object(a.jsxs)("div",{className:C.row,style:{marginRight:4},children:[Object(a.jsx)(ae.a,{fontSize:"small"}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",d.scoreMean]})]})]})]})}),h&&O.user.uid===p._id&&Object(a.jsx)($.a,{className:C.deleteIcon,onClick:A,children:Object(a.jsx)(re.a,{})}),Object(a.jsx)(Y.a,{component:L.b,to:"/profile/".concat(p._id),children:Object(a.jsxs)(ee.a,{className:C.ownerInfo,children:[Object(a.jsx)(te.a,{alt:ie(p.name,p.lastname),src:null!==(r=p.img)&&void 0!==r?r:"",children:ce(p.name,p.lastname)}),Object(a.jsxs)("div",{children:[Object(a.jsx)(q.a,{color:"textPrimary",children:ie(p.name,p.lastname)}),Object(a.jsx)(q.a,{color:"textSecondary",children:null!==(i=p.occupation)&&void 0!==i?i:"Sin ocupaci\xf3n"})]})]})})]})},fe=n(1016),Oe=Object(R.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center"},designsContainer:{width:"100%",display:"flex",flexGrow:1,flexWrap:"wrap",justifyContent:"flex-start",marginTop:15,marginBottom:15},error:{marginTop:15,width:"100%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"},loadMore:{marginBottom:50},clickHere:{textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}}}),ve=function(e){var t=e.data,n=e.status,r=e.isFetchingNextPage,i=e.fetchNextPage,c=e.hasNextPage,s=e.handleCreateDesign,o=e.label,l=Oe(),d=x().authState;return"loading"===n?Object(a.jsx)("p",{children:"Loading..."}):"error"===n?Object(a.jsx)(fe.a,{severity:"error",className:l.error,children:"Ha ocurrido un problema al intentar obtener los dise\xf1os. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."}):Object(a.jsxs)("div",{className:l.root,children:[Object(a.jsx)("div",{className:l.designsContainer,children:t.pages[0].designs.length>0?t.pages.map((function(e,t){return e.designs.map((function(e,t){return Object(a.jsx)(xe,Object(S.a)(Object(S.a)({title:e.metadata.name},e),{},{canDelete:"public-repository"!==o}),"my-design"+e._id)}))})):"shared-with-me"===o?Object(a.jsx)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"No se han encontrado dise\xf1os compartidos. Cuando otros usuarios compartan dise\xf1os contigo aparecer\xe1n aqu\xed."}):"user-profile"===o?t.pages[0].ownerId===d.user.uid?Object(a.jsxs)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["No cuentas con dise\xf1os p\xfablicos. Crea tu primer dise\xf1o p\xfablico haciendo click "," ",Object(a.jsx)(X.a,{className:l.clickHere,onClick:s,children:"aqu\xed"}),"!"]}):Object(a.jsx)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"Este usuario no cuenta con dise\xf1os p\xfablicos."}):"public-repository"===o?Object(a.jsx)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:"No se han encontrado resultados para tu b\xfasqueda."}):Object(a.jsxs)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["No se han encontrado dise\xf1os en este directorio. Crea tu primer dise\xf1o haciendo click "," ",Object(a.jsx)(X.a,{className:l.clickHere,onClick:s,children:"aqu\xed"}),"!"]})}),t&&t.pages[0].designs.length>0&&c&&Object(a.jsx)(H.a,{className:l.loadMore,color:"primary",onClick:function(){return i()},children:r?"Cargando m\xe1s...":"Cargar M\xe1s"})]})},ye=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("folder/user",{path:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,a=t.folderName,e.next=3,m("folder/create",{path:n,folderName:a},"POST");case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r.message);case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.name,e.next=3,m("folder/".concat(n),{name:a},"PUT");case 3:if((r=e.sent).ok){e.next=6;break}throw new Error(r.message);case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,m("folder/".concat(n),{},"DELETE");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.message);case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=n(1012),Te=n(469),Ae=n(958),Ne=n(959),De=n(961),Ee=n(962),Ie=n(963),Le={mouseX:null,mouseY:null},Pe=function(e){var t=e.options,n=e.children,i=Object(r.useState)(Le),c=Object(b.a)(i,2),s=c[0],o=c[1],l=Object(r.useRef)(),d=function(){o(Le)};return Object(a.jsxs)("div",{ref:l,onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var t=l.current.getBoundingClientRect();e.clientX>=t.x&&e.clientX<=t.x+t.width&&e.clientY>=t.y&&e.clientY<=t.y+t.height?o({mouseX:e.clientX-2,mouseY:e.clientY-4}):d()},style:{width:325},children:[n,Object(a.jsx)(Te.a,{keepMounted:!0,open:null!==s.mouseY,onClose:d,anchorReference:"anchorPosition",anchorPosition:null!==s.mouseY&&null!==s.mouseX?{top:s.mouseY,left:s.mouseX}:void 0,children:t&&t.length?t.map((function(e,t){return Object(a.jsxs)(Ae.a,{onClick:function(t){return function(e,t){t&&t(e),d()}(t,e.onSelect)},children:[e.icon?Object(a.jsx)(Ne.a,{children:e.icon}):Object(a.jsx)("div",{}),Object(a.jsx)(q.a,{children:e.label})]},"option-".concat(t,"-").concat(e))})):Object(a.jsx)(q.a,{component:"div",children:Object(a.jsx)(Se.a,{fontStyle:"italic",children:"No hay opciones especificadas."})})})]})},Re=Object(R.a)((function(e){return{root:{display:"flex",alignItems:"center",border:"1px solid ".concat(e.palette.divider),width:325,minWidth:325,borderRadius:5,margin:"10px 10px 10px 0px",cursor:"pointer",backgroundColor:e.palette.background.paper,"&:hover":{boxShadow:"0px 0px 10px 0 #bcc3d6",background:e.palette.background.designHover}},content:{display:"flex",justifyContent:"space-between",alignItems:"center"},folderContainer:{display:"flex",justifyContent:"space-between",borderRadius:e.shape.borderRadius,alignItems:"center",width:"100%",userSelect:"none",textDecoration:"none",color:e.palette.text.primary},folderBody:{padding:"15px 10px 15px 20px",display:"flex",justifyContent:"start",alignItems:"center",textDecoration:"none"},folderName:{paddingTop:3,fontSize:20,paddingLeft:20},more:{marginRight:10}}})),Fe=function(e){var t=e._id,n=e.name,i=e.path,c=Object(M.a)(e,["_id","name","path"]),s=Re(),o=Object(r.useState)(null),d=Object(b.a)(o,2),p=d[0],g=d[1],m=D().dispatch,h=Object(l.b)(),x=Object(me.b)().enqueueSnackbar,f=i!=="/"+n?i.replace("/"+n,""):i.replace(n,""),O=Object(Z.a)(Ce,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["folders",f]);case 2:return n=h.getQueryData(["folders",f]),h.setQueryData(["folders",f],(function(e){return e.filter((function(e){return e._id!==t}))})),e.abrupt("return",{previousFolders:n});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){h.invalidateQueries(["folders",f])},onError:function(e,t,n){h.setQueryData(["folders",f],n.previousFolders),x(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){x("Carpeta eliminada con \xe9xito.",{variant:"success",autoHideDuration:2e3})}}),v=function(e){g(null),m({type:T.ui.setFolder,payload:{_id:t,name:n}}),m({type:T.ui.toggleModal,payload:"Folder"})},y=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(null),m({type:T.ui.setConfirmData,payload:{type:"carpeta",args:{id:t},actionMutation:O}}),m({type:T.ui.toggleModal,payload:"Confirmation"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(Se.a,Object(S.a)(Object(S.a)({className:s.root},c),{},{children:Object(a.jsx)(Pe,{options:[{icon:Object(a.jsx)(De.a,{}),label:"Cambiar Nombre",onSelect:v},{icon:Object(a.jsx)(re.a,{}),label:"Eliminar",onSelect:y}],children:Object(a.jsxs)("div",{className:s.content,children:[Object(a.jsx)(Se.a,Object(S.a)(Object(S.a)({className:s.folderContainer,component:L.b,to:"/my-designs".concat(i)},c),{},{children:Object(a.jsxs)("div",{className:s.folderBody,children:[Object(a.jsx)(Ee.a,{fontSize:"large"}),Object(a.jsx)(q.a,{className:s.folderName,children:n})]})})),Object(a.jsx)($.a,{className:s.more,onClick:function(e){e.stopPropagation(),g(e.currentTarget)},children:Object(a.jsx)(Ie.a,{})}),Object(a.jsxs)(Te.a,{onBlur:function(){return g(null)},anchorEl:p,open:Boolean(p),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return g(null)},children:[Object(a.jsxs)(Ae.a,{onClick:v,children:[Object(a.jsx)(Ne.a,{children:Object(a.jsx)(De.a,{})}),Object(a.jsx)(q.a,{children:"Cambiar Nombre"})]}),Object(a.jsxs)(Ae.a,{onClick:y,children:[Object(a.jsx)(Ne.a,{children:Object(a.jsx)(re.a,{})}),Object(a.jsx)(q.a,{children:"Eliminar"})]})]})]})})}))},Be=Object(R.a)({root:{paddingTop:15,display:"flex",flexDirection:"column",justifyContent:"center"},folderContainer:{width:"100%",display:"flex",flexGrow:1,flexWrap:"wrap",justifyContent:"flex-start"}}),Me=function(e){e.title;var t=e.data,n=Be();return t&&t.length>0?Object(a.jsx)("div",{className:n.root,children:Object(a.jsx)("div",{className:n.folderContainer,children:t.map((function(e){return Object(a.jsx)(Fe,Object(S.a)({},e),"my-folder"+e._id)}))})}):Object(a.jsx)("div",{})},We=n(960),Ve=n(909),ze=n(965),qe=n(964),Qe=n(967),He=n(968),Ge=Object(R.a)((function(e){return{icon:{marginRight:10}}})),Ue=function(){var e=Ge(),t=Object(P.g)(),n=Object(P.h)(),r=Object(l.b)(),i=x().authState,c=Object(Z.a)(je,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.cancelQueries("recent-designs");case 2:return e.next=4,r.cancelQueries(["designs","/"]);case 4:return e.next=6,r.cancelQueries([i.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){r.invalidateQueries("recent-designs"),r.invalidateQueries(["designs","/"]),r.invalidateQueries([i.user.id,"user-public-designs"])},onError:function(e){console.log(e)},onSuccess:function(e){t.push("/designs/".concat(e.design._id))}}),s=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.mutate({path:"/"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.a,{variant:"contained",color:"default",style:{margin:10},onClick:s,children:"Crear Dise\xf1o"}),Object(a.jsxs)(We.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(a.jsxs)(Ve.a,{button:!0,selected:n.pathname.includes("/my-designs"),component:L.b,to:"/my-designs",children:[Object(a.jsx)(qe.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Mis Dise\xf1os"})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(Ve.a,{button:!0,selected:n.pathname.includes("/shared-with-me"),component:L.b,to:"/shared-with-me",children:[Object(a.jsx)(Qe.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Compartidos Conmigo"})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(Ve.a,{button:!0,selected:n.pathname.includes("/public-repository"),component:L.b,to:"/public-repository",children:[Object(a.jsx)(He.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Repositorio P\xfablico"})]}),Object(a.jsx)(G.a,{})]})]})},Ke=n(1021),Ze=Object(R.a)((function(e){return{root:{marginTop:20,marginBottom:20,width:"100%",padding:"10px 15px 10px 15px",borderRadius:3,backgroundColor:e.palette.background.default},link:{textDecoration:"none","&:hover":{textDecoration:"underline"}}}})),Xe=function(){var e=Ze(),t=D().uiState.folderPath;return Object(a.jsxs)(Ke.a,{className:e.root,children:[1!==t.length?Object(a.jsx)(q.a,{className:e.link,color:"inherit",component:L.b,to:"/my-designs",children:" Mis Dise\xf1os "}):Object(a.jsx)(q.a,{color:"textPrimary",children:" Mis Dise\xf1os "}),function(){if(1!==t.length){var n="",r=t.split("/");return r.shift(),r.map((function(r){var i=n+="/"+r;return Object(a.jsx)("div",{style:{display:"flex"},children:t===i?Object(a.jsxs)(q.a,{color:"textPrimary",children:[r," "]}):Object(a.jsxs)(q.a,{className:e.link,color:"inherit",component:L.b,to:"/my-designs".concat(i),children:[r," "]})},i)}))}}()]})},Je=n(450),Ye=n(969),_e=Object(R.a)((function(e){return{root:{border:"1px solid ".concat(e.palette.divider),display:"flex",flexDirection:"column",justifyContent:"space-between",width:325,minWidth:325,height:198,margin:"10px 10px 10px 0px",borderRadius:10},ownerInfo:{borderTop:"1px solid ".concat(e.palette.divider),paddingLeft:15,paddingRight:15,paddingTop:10},row:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},col:{width:"80%",display:"flex",flexDirection:"column"}}})),$e=function(){var e=_e();return Object(a.jsxs)(J.a,{className:e.root,children:[Object(a.jsxs)(_.a,{children:[Object(a.jsxs)("div",{className:e.row,children:[Object(a.jsx)(Ye.a,{variant:"rect",width:35,height:43}),Object(a.jsxs)("div",{className:e.col,children:[Object(a.jsxs)("div",{className:e.row,style:{marginLeft:-5},children:[Object(a.jsx)(Ye.a,{style:{marginTop:-3},animation:"wave",height:33,width:"80%"}),Object(a.jsx)(Ye.a,{variant:"circle",width:20,height:20})]}),Object(a.jsx)("div",{className:e.row,style:{marginLeft:-5},children:Object(a.jsx)(Ye.a,{style:{marginTop:-3},animation:"wave",height:23,width:"70%"})})]})]}),Object(a.jsx)("div",{className:e.row,children:Object(a.jsx)(Ye.a,{animation:"wave",height:20,width:"70%"})}),Object(a.jsxs)("div",{className:e.row,children:[Object(a.jsxs)("div",{className:e.row,style:{marginTop:14,marginBottom:-5},children:[Object(a.jsx)(Ye.a,{animation:"wave",height:20,width:"70%"}),Object(a.jsx)(Ye.a,{variant:"circle",width:13,height:13,style:{marginTop:2,marginRight:5}})]}),Object(a.jsx)(Ye.a,{animation:"wave",height:20,width:"5%",style:{marginTop:14,marginBottom:-5}})]})]}),Object(a.jsxs)(ee.a,{className:e.ownerInfo,children:[Object(a.jsx)(Ye.a,{variant:"circle",width:40,height:40,style:{marginBottom:3}}),Object(a.jsxs)("div",{className:e.col,style:{marginBottom:3},children:[Object(a.jsx)(Ye.a,{animation:"wave",height:20,width:"100%"}),Object(a.jsx)(Ye.a,{animation:"wave",height:20,width:"80%"})]})]})]})},et=Object(R.a)({root:{paddingTop:15,marginBottom:15},recentDesigns:{width:"100%",display:"flex",flexGrow:1,flexWrap:"nowrap",justifyContent:"flex-start",marginTop:15},title:{}}),tt=function(e){var t=e.width,n=(e.height,et()),r=Math.trunc(t/345),i=Object(K.a)("recent-designs",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se());case 1:case"end":return e.stop()}}),e)})))),c=i.isLoading,s=i.isError,o=i.data;if(s)return Object(a.jsx)("div",{});var l=function(){return Array.from(Array(r).keys()).map((function(e){return Object(a.jsx)($e,{},"recent-design-skeleton-".concat(e))}))},d=function(){return o.map((function(e){return Object(a.jsx)(xe,Object(S.a)(Object(S.a)({title:e.metadata.name},e),{},{canDelete:!1}),"recent"+e._id)}))};return Object(a.jsxs)("div",{className:n.root,children:[o&&0!==o.length?Object(a.jsxs)("div",{className:n.title,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Dise\xf1os recientes"}),Object(a.jsx)(G.a,{})]}):Object(a.jsx)("div",{}),o&&o.length>0?o.length>r?Object(a.jsx)(Je.a,{className:n.recentDesigns,style:{cursor:"grab"},children:c?l():d()}):Object(a.jsx)("div",{className:n.recentDesigns,children:c?l():d()}):Object(a.jsx)("div",{})]})},nt=n(971),at=n(972),rt=n(974),it=n(1025),ct=n(978),st=n(973),ot=Object(R.a)((function(e){return{title:{display:"flex",justifyContent:"space-between"},close:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},folderNameInput:{marginTop:20,marginBottom:20}}})),lt=function(){var e=ot(),t=D(),n=t.uiState,i=t.dispatch,c=n.folderPath,s=n.folder,o=n.isFolderModalOpen,d=Object(l.b)(),p=Object(me.b)().enqueueSnackbar,g=Object(r.useState)(null),m=Object(b.a)(g,2),h=m[0],x=m[1],f=Object(r.useState)(s.name),O=Object(b.a)(f,2),v=O[0],y=O[1];Object(r.useEffect)((function(){y(s.name)}),[s.name,y]);var w=Object(Z.a)(we,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cancelQueries(["folders",c]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){d.invalidateQueries(["folders",c])},onError:function(e){p(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){p("Carpeta creada con \xe9xito.",{variant:"success",autoHideDuration:2e3}),C()}}),k=Object(Z.a)(ke,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.cancelQueries(["folders",c]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){d.invalidateQueries(["folders",c])},onError:function(e){p(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){p("Nombre de carpeta cambiado con \xe9xito.",{variant:"success",autoHideDuration:2e3}),C()}}),C=function(){i({type:T.ui.toggleModal,payload:"Folder"}),i({type:T.ui.setFolder,payload:{_id:null,name:""}}),y(""),x(null)},S=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==v.trim()){e.next=2;break}return e.abrupt("return",x("Este campo es obligatorio."));case 2:if("/"!==v.trim()&&"mis dise\xf1os"!==v.trim().toLowerCase()){e.next=4;break}return e.abrupt("return",x("Nombre de carpeta no permitido."));case 4:return e.next=6,w.mutate({path:c,folderName:v.trim()});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==v.trim()){e.next=2;break}return e.abrupt("return",x("Este campo es obligatorio."));case 2:if("/"!==v.trim()&&"mis dise\xf1os"!==v.trim().toLowerCase()){e.next=4;break}return e.abrupt("return",x("Nombre de carpeta no permitido."));case 4:if(v.trim().toLowerCase()!==s.name.trim().toLowerCase()){e.next=6;break}return e.abrupt("return",C());case 6:return e.next=8,k.mutate({id:s._id,name:v});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(nt.a,{fullWidth:!0,open:o,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)("div",{className:e.title,children:[Object(a.jsx)(at.a,{id:"form-dialog-title",onClose:C,children:s._id?"Editar Carpeta":"Nueva Carpeta"}),Object(a.jsx)($.a,{className:e.close,"aria-label":"close",onClick:C,children:Object(a.jsx)(st.a,{})})]}),Object(a.jsxs)(rt.a,{children:[Object(a.jsxs)(q.a,{style:{marginBottom:20},children:["Usted est\xe1 por ",s._id?"editar una carpeta":"crear una nueva carpeta",". Por favor ingrese el ",s._id?"nuevo":""," nombre para su carpeta en la siguiente entrada de texto."]}),Object(a.jsx)(q.a,{variant:"caption",children:"Importante: No puede existir una carpeta en el directorio con el mismo nombre."}),Object(a.jsx)(it.a,{className:e.folderNameInput,error:!!h,helperText:h,margin:"dense",variant:"outlined",name:"name",value:v,onChange:function(e){var t=e.target;h&&x(null),y(t.value)},label:"Nombre Carpeta",type:"text",fullWidth:!0})]}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:C,children:"Cancelar"}),s._id?Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:A,children:"Editar Carpeta"}):Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:S,children:"Crear Carpeta"})]})]})},dt=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},breadCrumbs:{marginTop:20,marginBottom:20,width:"100%",padding:"10px 15px 10px 15px",borderRadius:3,backgroundColor:e.palette.background.default},designsAndFoldersContainer:{paddingTop:15},link:{textDecoration:"none"},sectionTitle:Object(C.a)({width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-end",paddingBottom:5},e.breakpoints.down("xs"),{flexDirection:"column",alignItems:"start",justifyContent:"center"}),button:{height:35}}})),ut=function(){var e=dt(),t=Object(P.g)(),n=Object(P.i)(),i=Object(r.useRef)(null),c=D(),s=c.uiState,o=c.dispatch,d=Object(me.b)().enqueueSnackbar,p=Object(l.b)(),g=x().authState,m=Object(r.useState)(0),h=Object(b.a)(m,2),f=h[0],O=h[1],v=Object(r.useState)(0),y=Object(b.a)(v,2),w=y[0],k=y[1];Object(r.useEffect)((function(){o({type:T.ui.updateFolderPath,payload:n.urlPath?"/"+n.urlPath:"/"})}),[o,n]);var C=s.folderPath,A=n.urlPath?C.split("/")[C.split("/").length-1]:"Mis Dise\xf1os",N=Object(U.a)(["designs",C],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,oe(C,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),E=Object(K.a)(["folders",C],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(C);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),I=Object(Z.a)(je,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries("recent-designs");case 2:return e.next=4,p.cancelQueries(["designs",C]);case 4:return e.next=6,p.cancelQueries([g.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){p.invalidateQueries("recent-designs"),p.invalidateQueries(["designs",C]),p.invalidateQueries([g.user.id,"user-public-designs"])},onError:function(e){d(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){t.push("/designs/".concat(e.design._id))}});Object(r.useEffect)((function(){i.current&&(k(i.current.offsetHeight),O(i.current.offsetWidth))}),[i]);var L=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"/",e.next=3,I.mutate({path:n});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o({type:T.ui.toggleModal,payload:"Folder"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsx)(Ue,{})}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,ref:i,className:e.workspace,children:[Object(a.jsx)(Xe,{}),"/"===C&&Object(a.jsx)(tt,{id:"recent",width:f,height:w}),Object(a.jsxs)("div",{className:e.designsAndFoldersContainer,children:[Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(q.a,{variant:"h4",children:"/"===C?"Mis Dise\xf1os":A}),Object(a.jsxs)(Q.a,{className:e.button,children:[Object(a.jsx)(H.a,{variant:"outlined",fullWidth:!0,size:"large",color:"default",onClick:function(e){return L(e,C)},children:"Crear Dise\xf1o"}),Object(a.jsx)(H.a,{variant:"outlined",fullWidth:!0,size:"large",color:"default",onClick:R,children:"Crear Carpeta"})]})]}),Object(a.jsx)(G.a,{}),Object(a.jsx)(Me,Object(S.a)({},E)),Object(a.jsx)(ve,Object(S.a)(Object(S.a)({},N),{},{handleCreateDesign:function(e){return L(e,C)}}))]})]}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]}),Object(a.jsx)(lt,{})]})},jt=n(27),bt=n(451),pt=n.n(bt),gt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("user/".concat(t));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("user/search/",{filter:t,from:n},"POST");case 2:if((a=e.sent).ok){e.next=5;break}throw new Error(a.message);case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ht=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.contacts,e.prev=1,e.next=4,m("user/".concat(n),{newData:{contacts:a}},"PUT");case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.message);case 7:return e.abrupt("return",r.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r,i,c,s,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.name,r=t.lastname,i=t.occupation,c=t.institution,s=t.country,o=t.city,l=t.description,e.prev=1,e.next=4,m("user/".concat(n),{newData:{uid:n,name:a,lastname:r,occupation:i,institution:c,country:s,city:o,description:l}},"PUT");case 4:if((d=e.sent).ok){e.next=7;break}throw new Error(d.message);case 7:return e.abrupt("return",d.data);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("user/search-by-email/",{email:t},"POST");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("user/resend-code/",{email:t},"POST");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.newPassword,e.prev=1,e.next=4,m("auth/reset-password/".concat(n),{newPassword:a},"PUT");case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",{ok:!1,message:"Ha ocurrido un error al hacer la petici\xf3n, compruebe su conexi\xf3n a internet o vuelva a intentarlo m\xe1s tarde."});case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),yt=n(981),wt=n(982),kt=n(983),Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(b.a)(t,2),a=n[0],i=n[1],c=function(){i(e)},s=function(e){var t=e.target;i(Object(S.a)(Object(S.a)({},a),{},Object(C.a)({},t.name,t.value)))};return[a,s,c,i]},St=n(81),Tt=n.n(St),At=Object(R.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},photoProfile:{width:e.spacing(30),height:e.spacing(30),marginTop:e.spacing(2),marginBottom:e.spacing(2)},errorContainer:{display:"flex",width:"100%",justifyContent:"center"},error:{marginTop:15,minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"}}})),Nt=i.a.memo((function(){var e,t=At(),n=Object(l.b)(),r=D(),i=r.uiState,c=r.dispatch,s=x().authState,o=Object(P.i)().uid,d=Object(me.b)().enqueueSnackbar,p=Object(K.a)(["user-profile",o],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),g=p.isLoading,m=p.isError,h=p.data,f=Ct({name:h.name,lastname:h.lastname,occupation:h.occupation,institution:h.institution,country:h.country,city:h.city,description:h.description}),O=Object(b.a)(f,3),v=O[0],y=O[1],w=O[2],k=v.name,C=v.lastname,A=v.occupation,N=v.institution,E=v.country,I=v.city,L=v.description,R=Object(Z.a)(xt,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries(["user-profile",o]);case 2:return t=n.getQueryData(["user-profile",o]),a=["user-profile",o],n.setQueryData(a,(function(e){return Object.assign({},Object(S.a)(Object(S.a)({},e),{},{uid:o,name:k,lastname:C,occupation:A,institution:N,country:E,city:I,description:L}))})),e.abrupt("return",{previousUserProfile:t});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:function(e,t){console.log(e),n.setQueryData(["user-profile",o],t.previousUserProfile)},onSettled:function(){n.invalidateQueries(["user-profile",o])}});if(m)return Object(a.jsx)("div",{className:t.errorContainer,children:Object(a.jsx)(fe.a,{severity:"error",className:t.error,children:"Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."})});if(g)return Object(a.jsx)(q.a,{children:"Cargando..."});var F=function(){c({type:T.ui.toggleModal,payload:"EditProfile"}),w()},B=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R.mutate({uid:s.user.uid,name:k,lastname:C,occupation:A,institution:N,country:E,city:I,description:L});case 3:c({type:T.ui.toggleModal,payload:"EditProfile"}),d("Su perfil se ha guardado correctamente",{variant:"success",autoHideDuration:2e3});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{onClose:F,"aria-labelledby":"customized-dialog-title",open:i.isEditProfileModalOpen,children:[Object(a.jsxs)(at.a,{id:"customized-dialog-title",onClose:F,children:["Editar perfil",Object(a.jsx)($.a,{"aria-label":"close",className:t.closeButton,onClick:F,children:Object(a.jsx)(Tt.a,{})})]}),Object(a.jsx)(rt.a,{dividers:!0,children:Object(a.jsxs)(z.a,{container:!0,spacing:1,children:[Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(te.a,{alt:h.name+" "+h.lastname,className:t.photoProfile,src:null!==(e=h.img)&&void 0!==e?e:""})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"name",value:k,onChange:y,label:"Nombres",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"lastname",value:C,onChange:y,label:"Apellidos",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"country",value:null!==E&&void 0!==E?E:"",onChange:y,label:"Pa\xeds",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"city",value:null!==I&&void 0!==I?I:"",onChange:y,label:"Ciudad",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"occupation",value:null!==A&&void 0!==A?A:"",onChange:y,label:"Ocupaci\xf3n",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"institution",value:null!==N&&void 0!==N?N:"",onChange:y,label:"Instituci\xf3n",type:"text",fullWidth:!0})}),Object(a.jsx)(z.a,{item:!0,xs:12,children:Object(a.jsx)(it.a,{multiline:!0,variant:"outlined",margin:"dense",name:"description",rows:4,value:null!==L&&void 0!==L?L:"",onChange:y,label:"Descripci\xf3n",type:"text",fullWidth:!0})})]})}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:F,children:"Cancelar"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:B,children:"Guardar"})]})]})})})),Dt=Object(R.a)((function(e){return{root:{display:"flex",width:"100%",padding:5,borderRadius:10,border:"1px solid ".concat(e.palette.divider),marginTop:10,cursor:"pointer",backgroundColor:e.palette.background.design,"&:hover":{zIndex:.5,background:e.palette.background.designHover}},card:{display:"flex",width:"100%"},body:{display:"flex",marginLeft:10,flexDirection:"column",justifyContent:"center"},photo:{margin:10,width:e.spacing(8),height:e.spacing(8)},name:{},location:{}}})),Et=function(e){var t,n=e._id,r=e.name,i=e.lastname,c=e.city,s=e.country,o=(e.scoreMean,e.img),l=e.occupation,d=e.onClick,u=Dt(),j=Object(P.g)(),b=function(e,t){e.stopPropagation(),d&&d(),j.push("/profile/".concat(t))};return Object(a.jsx)("div",{className:u.root,onClick:function(e){return b(e,n)},children:Object(a.jsxs)("div",{className:u.card,children:[Object(a.jsx)(te.a,{className:u.photo,alt:ie(r,i),src:null!==o&&void 0!==o?o:"",children:Object(a.jsx)(q.a,{variant:"h5",children:ce(r,i)})}),Object(a.jsxs)("div",{className:u.body,children:[Object(a.jsx)("div",{className:u.name,children:Object(a.jsx)(q.a,{variant:"h5",color:"textPrimary",children:r+" "+i})}),Object(a.jsx)("div",{className:u.location,children:Object(a.jsx)(q.a,{variant:"subtitle1",color:"textSecondary",children:c&&s?c+", "+s:null!==(t=null!==c&&void 0!==c?c:s)&&void 0!==t?t:"Sin locaci\xf3n"})}),Object(a.jsx)("div",{children:Object(a.jsx)(q.a,{variant:"subtitle1",color:"textSecondary",children:l||"Sin ocupaci\xf3n"})})]})]})})},It=Object(R.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),Lt=function(){var e=It(),t=D(),n=t.uiState,r=t.dispatch,i=Object(P.i)().uid,c=Object(K.a)(["user-profile",i],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}).data,s=function(){r({type:T.ui.toggleModal,payload:"Contacts"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{onClose:s,"aria-labelledby":"customized-dialog-title",open:n.isContactsModalOpen,children:[Object(a.jsxs)(at.a,{id:"customized-dialog-title",onClose:s,children:["Contactos",Object(a.jsx)($.a,{"aria-label":"close",className:e.closeButton,onClick:s,children:Object(a.jsx)(Tt.a,{})})]}),Object(a.jsx)(rt.a,{dividers:!0,children:c.contacts.map((function(e){return Object(a.jsx)(Et,Object(S.a)(Object(S.a)({},e),{},{onClick:s}),e._id)}))}),Object(a.jsx)(ct.a,{children:Object(a.jsx)(H.a,{onClick:s,children:"Cerrar"})})]})})},Pt=Object(R.a)((function(e){return{designPanel:{flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},photoProfile:{width:e.spacing(30),height:e.spacing(30),marginTop:e.spacing(2),marginBottom:e.spacing(2)},spaceFirstDataFirstData:{marginBottom:e.spacing(1)},centerGrid:{display:"flex",alignItems:"center",justifyItems:"center"},spaceSecondData:{marginBottom:e.spacing(2)},spaceData:{marginLeft:e.spacing(5),marginBottom:e.spacing(2),marginRight:e.spacing(5)},spaceDesign:{marginLeft:e.spacing(7),marginTop:e.spacing(2),marginRight:e.spacing(7)},spaceIcons:{marginRight:e.spacing(1)},errorContainer:{display:"flex",width:"100%",justifyContent:"center"},error:{marginTop:15,minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"justify",alignItems:"center"}}})),Rt=function(){var e,t=Pt(),n=Object(l.b)(),r=x(),i=r.authState,c=r.setAuthState,s=D().dispatch,o=Object(P.g)(),d=Object(P.i)().uid,b=Object(me.b)().enqueueSnackbar,p=Object(K.a)(["user-profile",d],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(d);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),g=p.isLoading,m=p.isError,h=p.data,f=p.error,O=p.refetch,v=Object(U.a)([d,"user-public-designs"],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,le(d,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),y=Object(Z.a)(ht,{onSuccess:function(e,t,a){var r=t.uid,i=t.contacts;c((function(e){return Object(S.a)(Object(S.a)({},e),{},{user:Object.assign({},Object(S.a)(Object(S.a)({},e.user),{},{contacts:i}))})})),n.invalidateQueries(["user-profile",r])},onError:function(e){console.log(e),b("No se ha actualizado su lista de contactos",{variant:"error",autoHideDuration:2e3})}}),w=Object(Z.a)(je,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries("recent-designs");case 2:return e.next=4,n.cancelQueries("designs");case 4:return e.next=6,n.cancelQueries([i.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){n.invalidateQueries("recent-designs"),n.invalidateQueries("designs"),n.invalidateQueries([i.user.id,"user-public-designs"])},onError:function(e){console.log(e),b("No se han cargado sus dise\xf1o",{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){o.push("/designs/".concat(e.design._id))}}),k=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.mutate({path:"/",isPublic:!0});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(m)return Object(a.jsx)("div",{className:t.errorContainer,children:Object(a.jsx)(fe.a,{severity:"error",className:t.error,children:"Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexi\xf3n, por favor revise que su equipo tenga conexi\xf3n a internet e intente m\xe1s tarde. Si el problema persiste, por favor comun\xedquese con el equipo de soporte."})});if(g)return Object(a.jsx)(q.a,{children:"Cargando..."});var C=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y.mutate({uid:i.user.uid,contacts:[].concat(Object(jt.a)(i.user.contacts),[d])});case 3:return n.invalidateQueries(["user-profile",d]),e.next=6,O();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y.mutate({uid:i.user.uid,contacts:i.user.contacts.filter((function(e){return e!==d}))});case 3:n.invalidateQueries(["user-profile",d]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?Object(a.jsxs)(q.a,{children:["Error: ",f.message]}):g?Object(a.jsx)(q.a,{children:"Cargando..."}):Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,sm:3,children:[Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(te.a,{alt:h.name+" "+h.lastname,className:t.photoProfile,src:null!==(e=h.img)&&void 0!==e?e:""})}),Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:h&&Object(a.jsx)(q.a,{align:"center",variant:"h5",component:"h2",children:h.name+" "+h.lastname})}),Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:h&&h.occupation&&Object(a.jsx)(q.a,{className:t.spaceFirstData,color:"textSecondary",children:h.occupation})}),Object(a.jsxs)(z.a,{container:!0,alignItems:"center",justify:"center",className:t.spaceFirstData,children:[Object(a.jsx)(z.a,{item:!0,children:h.contacts.length>0?Object(a.jsx)($.a,{onClick:function(){s({type:T.ui.toggleModal,payload:"Contacts"})},children:Object(a.jsx)(Qe.a,{})}):Object(a.jsx)(Qe.a,{})}),Object(a.jsx)(z.a,{item:!0,children:Object(a.jsxs)(q.a,{style:{marginLeft:8},children:[" ",h.contacts.length]})}),"\u30fb",Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(ae.a,{})}),Object(a.jsx)(z.a,{item:!0,children:Object(a.jsxs)(q.a,{style:{marginLeft:8},children:[" ",h.scoreMean]})})]}),Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",className:t.spaceSecondData,children:i.user.uid===d?Object(a.jsx)(H.a,{variant:"outlined",size:"small",onClick:function(){s({type:T.ui.toggleModal,payload:"EditProfile"})},startIcon:Object(a.jsx)(De.a,{}),children:"Editar perfil"}):i.user.contacts.includes(d)?Object(a.jsx)(H.a,{variant:"outlined",size:"small",onClick:A,startIcon:Object(a.jsx)(st.a,{}),children:"Eliminar de mis contactos"}):Object(a.jsx)(H.a,{variant:"outlined",size:"small",onClick:C,startIcon:Object(a.jsx)(yt.a,{}),children:"Agregar a mis contactos"})}),Object(a.jsx)(G.a,{className:t.spaceData}),Object(a.jsxs)(z.a,{className:t.spaceData,children:[h&&h.institution&&Object(a.jsxs)(z.a,{container:!0,className:t.spaceSecondData,children:[Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(wt.a,{className:t.spaceIcons})}),Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(q.a,{className:t.spaceFirstData,color:"textSecondary",children:h.institution})})]}),h&&h.city&&h.country&&Object(a.jsxs)(z.a,{container:!0,className:t.spaceSecondData,children:[Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(pt.a,{className:t.spaceIcons})}),Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(q.a,{className:t.spaceFirstData,color:"textSecondary",children:h.city+", "+h.country})})]}),h&&Object(a.jsxs)(z.a,{container:!0,className:t.spaceSecondData,children:[Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(kt.a,{className:t.spaceIcons})}),Object(a.jsx)(z.a,{item:!0,children:Object(a.jsx)(q.a,{className:t.spaceFirstData,color:"textSecondary",children:h.email})})]}),Object(a.jsx)(G.a,{className:t.spaceSecondData}),h&&h.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{color:"textSecondary",className:t.spaceSecondData,children:"Descripci\xf3n"}),Object(a.jsx)(q.a,{children:h.description})]})]})]}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:9,className:t.designPanel,children:Object(a.jsxs)(z.a,{className:t.spaceDesign,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Dise\xf1os P\xfablicos"}),Object(a.jsx)(G.a,{}),i.user.uid===d&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Nt,{})}),Object(a.jsx)(Lt,{}),Object(a.jsx)(ve,Object(S.a)(Object(S.a)({},v),{},{label:"user-profile",handleCreateDesign:k}))]})})]})},Ft=n(993),Bt="data:image/png;base64,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",Mt=n(991),Wt=n(992),Vt=n(1026),zt=n(994),qt=n(995),Qt=n(452),Ht=n.n(Qt),Gt=n(987),Ut=n(467),Kt=n(242),Zt=n(984),Xt=n(985),Jt=n(986),Yt=Object(r.createContext)();function _t(){var e=Object(r.useContext)(Yt);if(void 0===e)throw new Error("useUserConfigState must be used within a UserConfigProvider");return e}var $t=function(e){var t=e.children,n=x().authState,i=Object(r.useState)({darkTheme:!1,modeAdvanced:!1}),c=Object(b.a)(i,2),s=c[0],o=c[1];Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("darkTheme"));null!==e&&o((function(t){return Object(S.a)(Object(S.a)({},t),{},{darkTheme:e})}))}),[]),Object(r.useEffect)((function(){null!==n.user&&localStorage.setItem("darkTheme",JSON.stringify(s.darkTheme))}),[n.user,s.darkTheme]);var l,d=(l=s.darkTheme,Object(Ut.a)({palette:{type:l?"dark":"light",primary:{dark:Kt.a[500],light:Zt.a[500],main:l?Kt.a[500]:Zt.a[500]},secondary:{dark:Xt.a[900],light:Jt.a[500],main:l?Xt.a[900]:Jt.a[500]},text:{primary:l?"#F4F4F4":"#36393F"},background:{default:l?"#36393F":"#F4F4F4",paper:l?"#36393F":"#F4F4F4",workSpace:l?"#2F3136":"#FEFEFE",navbar:l?"#202225":"#DCDCDC",design:l?"#36393F":"#F4F4F4",designHover:l?"#393D46":"#F6F6F6"}}}));return Object(a.jsx)(Yt.Provider,{value:{userConfig:s,setUserConfig:o},children:Object(a.jsx)(Gt.a,{theme:d,children:t})})},en=n(989),tn=n(990),nn=n(988),an=Object(R.a)((function(e){return{close:{position:"absolute",top:5,right:5,padding:15},header:{display:"flex",justifyContent:"center",alignItems:"center"}}})),rn=i.a.memo((function(e){var t=e.isOpen,n=e.handleClose,r=e.maxWidth,i=void 0===r?"sm":r,c=e.title,s=void 0===c?"":c,o=e.subtitle,l=void 0===o?"":o,d=e.image,u=e.content,j=e.actions,b=an();return Object(a.jsxs)(nt.a,{fullWidth:!0,maxWidth:i,open:t,onClose:n,children:[Object(a.jsxs)(at.a,{className:b.header,disableTypography:!0,children:[Object(a.jsx)($.a,{className:b.close,onClick:n,color:"inherit",size:"small",children:Object(a.jsx)(nn.a,{})}),Object(a.jsxs)(z.a,{container:!0,spacing:1,children:[Object(a.jsx)(z.a,{item:!0,xs:12,children:d}),Object(a.jsx)(z.a,{item:!0,xs:12,children:Object(a.jsx)(q.a,{align:"center",variant:"h5",component:"p",children:s})}),Object(a.jsx)(z.a,{item:!0,xs:12,children:Object(a.jsx)(q.a,{align:"center",variant:"subtitle1",component:"h1",children:l})})]})]}),Object(a.jsx)(rt.a,{children:u}),j&&Object(a.jsx)(ct.a,{children:j})]})})),cn=Object(R.a)((function(e){return{formcontrol:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},margin:{margin:e.spacing(1)},form:{display:"flex",flexDirection:"column",marginLeft:"10%",marginRight:"10%",width:"80%",overflow:"auto"},logo:{display:"block",marginLeft:"auto",marginRight:"auto",width:"30%",marginTop:15,marginBottom:15},footer:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",paddingTop:30,paddingBottom:15},link:{marginTop:10,marginBottom:10},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),sn={emailError:null,passwordError:null},on=function(){var e=cn(),t=Object(P.g)(),n=D(),i=n.uiState,c=n.dispatch,s=x().login,o=Object(r.useState)(sn),l=Object(b.a)(o,2),d=l[0],p=l[1],g=Object(r.useState)(!1),m=Object(b.a)(g,2),h=m[0],f=m[1],O=Object(r.useState)(!1),v=Object(b.a)(O,2),y=v[0],w=v[1],k=Ct({email:"",password:""}),A=Object(b.a)(k,3),N=A[0],E=A[1],I=A[2],L=N.email,R=N.password,F=d.emailError,B=d.passwordError,M=function(e){f(null),p((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e.target.name+"Error",null))})),E(e)},W=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object.keys(N).map((function(e,t){return""===N[e].trim()?(p((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e+"Error","Este campo es requerido."))})),!1):(p((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e+"Error",null))})),!0)})).reduce((function(e,t){return e&&t}))){e.next=3;break}return e.abrupt("return");case 3:if(/^[-\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(L)||(p((function(e){return Object(S.a)(Object(S.a)({},e),{},{emailError:"El correo debe tener la siguiente estructura: example@example.com"})})),0)){e.next=5;break}return e.abrupt("return");case 5:if(R.length>=8&&R.length<=16||(p((function(e){return Object(S.a)(Object(S.a)({},e),{},{passwordError:"La contrase\xf1a debe tener entre 8 y 16 caracteres."})})),0)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,s(L,R);case 9:(n=e.sent).ok?c({type:T.ui.toggleModal,payload:"Login"}):f(n.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){c({type:T.ui.toggleModal,payload:"Login"}),I()};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(rn,{isOpen:i.isLoginModalOpen,handleClose:V,title:"\xa1Bienvenido!",subtitle:"Completa los campos para ingresar con tu cuenta",image:Object(a.jsx)("img",{className:e.logo,src:Bt,alt:"Logo"}),content:Object(a.jsxs)("form",{className:e.form,onSubmit:W,noValidate:!0,children:[h&&Object(a.jsxs)(fe.a,{severity:"error",children:[" ",h]}),Object(a.jsx)(it.a,{error:!!F,helperText:F,margin:"dense",variant:"outlined",name:"email",value:L,onChange:M,label:"Email",type:"email",fullWidth:!0}),Object(a.jsx)(it.a,{error:!!B,helperText:B,margin:"dense",variant:"outlined",name:"password",value:R,onChange:M,label:"Contrase\xf1a",type:y?"text":"password",fullWidth:!0,InputProps:{endAdornment:Object(a.jsx)($.a,{onClick:function(){w(!y)},onMouseDown:function(e){e.preventDefault()},children:y?Object(a.jsx)(en.a,{}):Object(a.jsx)(tn.a,{})})}}),Object(a.jsxs)("div",{className:e.footer,children:[Object(a.jsx)(H.a,{variant:"outlined",type:"submit",fullWidth:!0,children:"Iniciar Sesi\xf3n"}),Object(a.jsx)("div",{style:{paddingTop:20},children:Object(a.jsx)(X.a,{href:"#",align:"center",variant:"body1",onClick:function(e){e.preventDefault(),c({type:T.ui.toggleModal,payload:"Login"}),t.push("/reset-password")},children:"\xbfOlvidaste tu contrase\xf1a?"})}),Object(a.jsx)("div",{style:{paddingBottom:15,paddingTop:10},children:Object(a.jsx)(X.a,{href:"#",variant:"body1",onClick:function(e){e.preventDefault(),V(),c({type:T.ui.toggleModal,payload:"Register"})},children:"\xbfNo tienes cuenta? Registrate"})})]})]})})})},ln=Object(R.a)((function(e){return{form:{display:"flex",flexDirection:"column",marginLeft:"10%",marginRight:"10%",width:"80%"},logo:{display:"block",marginLeft:"auto",marginRight:"auto",width:"30%",marginTop:15,marginBottom:15},footer:{display:"flex",flexDirection:"column",width:"100%",justifyContent:"center",alignItems:"center",paddingTop:30,paddingBottom:15},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),dn={nameError:null,lastnameError:null,emailError:null,passwordError:null,confirmPasswordError:null},un=i.a.memo((function(){var e=ln(),t=D(),n=t.uiState,i=t.dispatch,c=x().register,s=Object(r.useState)(null),o=Object(b.a)(s,2),l=o[0],d=o[1],p=Object(r.useState)(dn),g=Object(b.a)(p,2),m=g[0],h=g[1],f=Ct({name:"",lastname:"",email:"",password:"",confirmPassword:""}),O=Object(b.a)(f,3),v=O[0],y=O[1],w=O[2],k=v.name,A=v.lastname,N=v.email,E=v.password,I=v.confirmPassword,L=m.nameError,P=m.lastnameError,R=m.emailError,F=m.passwordError,B=m.confirmPasswordError,M=function(){i({type:T.ui.toggleModal,payload:"Register"}),w(),h(dn),d(null)},W=function(e){d(null),h((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e.target.name+"Error",null))})),y(e)},V=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Object.keys(v).map((function(e,t){return""===v[e].trim()?(h((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e+"Error","Este campo es requerido."))})),!1):(h((function(t){return Object(S.a)(Object(S.a)({},t),{},Object(C.a)({},e+"Error",null))})),!0)})).reduce((function(e,t){return e&&t}))){e.next=3;break}return e.abrupt("return");case 3:if(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(E)?E.trim()===I.trim()||(h((function(e){return Object(S.a)(Object(S.a)({},e),{},{passwordError:"Las contrase\xf1as no coinciden.",confirmPasswordError:"Las contrase\xf1as no coinciden."})})),0):(h((function(e){return Object(S.a)(Object(S.a)({},e),{},{passwordError:"La contrase\xf1a debe tener al menos un car\xe1cter en min\xfascula, uno en may\xfascula, un n\xfamero y debe tener entre 8 y 16 caract\xe9res de longitud."})})),0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,c(v);case 7:(n=e.sent).ok?i({type:T.ui.toggleModal,payload:"Register"}):d(n.message);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(rn,{isOpen:n.isRegisterModalOpen,handleClose:M,title:"\xa1Bienvenido!",subtitle:"Completa los campos para registrar tu cuenta",image:Object(a.jsx)("img",{className:e.logo,src:Bt,alt:"Logo"}),content:Object(a.jsxs)("form",{className:e.form,onSubmit:V,noValidate:!0,children:[l&&Object(a.jsx)(fe.a,{severity:"error",children:l}),Object(a.jsx)(it.a,{variant:"outlined",error:!!L,helperText:L,margin:"dense",name:"name",value:k,onChange:W,label:"Nombres",type:"text",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",error:!!P,helperText:P,margin:"dense",name:"lastname",value:A,onChange:W,label:"Apellidos",type:"text",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",error:!!R,helperText:R,margin:"dense",name:"email",value:N,onChange:W,label:"Email",type:"email",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",error:!!F,helperText:F,margin:"dense",name:"password",value:E,onChange:W,label:"Contrase\xf1a",type:"password",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",error:!!B,helperText:B,margin:"dense",name:"confirmPassword",value:I,onChange:W,label:"Repetir contrase\xf1a",type:"password",fullWidth:!0}),Object(a.jsxs)("div",{className:e.footer,children:[Object(a.jsx)(H.a,{color:"primary",variant:"outlined",type:"submit",fullWidth:!0,children:"Registrarme"}),Object(a.jsx)(X.a,{href:"#",style:{paddingTop:20,paddingBottom:15},variant:"body1",onClick:function(e){e.preventDefault(),M(),i({type:T.ui.toggleModal,payload:"Login"})},children:"\xbfYa tienes cuenta?"})]})]})})})),jn=Object(R.a)((function(e){var t;return{root:{flexGrow:1},title:{flexGrow:1,color:e.palette.text.primary},logo:{width:e.spacing(5),height:e.spacing(5)},brand:Object(C.a)({display:"flex",alignItems:"center",textDecoration:"none",marginLeft:5,marginRight:5},e.breakpoints.down("xs"),{marginTop:20,marginBottom:10}),search:Object(C.a)({marginLeft:5,marginRight:5},e.breakpoints.down("xs"),{marginTop:5,marginBottom:5}),searchForm:{display:"flex",alignItems:"center"},userAndOptions:Object(C.a)({marginLeft:5,marginRight:5},e.breakpoints.down("xs"),{marginTop:5,marginBottom:10}),navbarColor:{background:e.palette.background.navbar},navbarLetter:{textDecoration:"none",color:e.palette.text.primary,cursor:"pointer"},menuColor:{background:e.palette.background.menu},toolbar:(t={display:"flex",flexDirection:"row",justifyContent:"space-between"},Object(C.a)(t,e.breakpoints.down("xs"),{flexDirection:"column",justifyContent:"center"}),Object(C.a)(t,e.breakpoints.up("sm"),{flexDirection:"row",justifyContent:"space-between"}),t)}})),bn=function(){var e=Object(l.b)(),t=Object(P.g)(),n=Object(r.useState)(null),i=Object(b.a)(n,2),c=i[0],s=i[1],o=_t(),d=o.userConfig,p=o.setUserConfig,g=D().dispatch,m=x(),h=m.authState,f=m.logout,O=Object(r.useState)(""),v=Object(b.a)(O,2),y=v[0],w=v[1],k=function(e){p(Object(S.a)(Object(S.a)({},d),{},Object(C.a)({},e.target.name,e.target.checked)))},A=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),y.trim().length>0&&(t.push("/users/search?q=".concat(y.trim())),w(""));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=jn();return Object(a.jsxs)("div",{className:N.root,children:[Object(a.jsx)(Mt.a,{position:"static",className:N.navbarColor,elevation:0,children:Object(a.jsxs)(Wt.a,{className:N.toolbar,children:[Object(a.jsxs)(Se.a,{className:N.brand,component:L.b,to:"/",children:[Object(a.jsx)(te.a,{className:N.logo,src:Bt,alt:"Logo"}),Object(a.jsx)(q.a,{variant:"h6",className:N.title,children:"LAD"})]}),h.token?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:N.search,children:Object(a.jsxs)("form",{className:N.searchForm,onSubmit:A,noValidate:!0,children:[Object(a.jsx)(Vt.a,{margin:"dense",variant:"outlined",name:"filter",value:y,type:"text",placeholder:"Buscar usuario",onChange:function(e){var t=e.target;w(t.value)}}),Object(a.jsx)($.a,{type:"submit",className:N.iconButton,"aria-label":"search",children:Object(a.jsx)(Ft.a,{})})]})}),Object(a.jsxs)("div",{className:N.userAndOptions,style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(q.a,{className:N.navbarLetter,component:L.b,to:"/profile/".concat(h.user.uid),children:h.user.name}),Object(a.jsx)($.a,{onClick:function(e){s(e.currentTarget)},children:Object(a.jsx)(Ht.a,{})})]}),Object(a.jsxs)(Te.a,{anchorEl:c,open:Boolean(c),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){s(null)},children:[Object(a.jsx)(Ae.a,{children:Object(a.jsx)(zt.a,{control:Object(a.jsx)(qt.a,{checked:d.darkTheme,onChange:k,name:"darkTheme"}),label:"Tema Oscuro"})}),Object(a.jsx)(Ae.a,{children:Object(a.jsx)(zt.a,{control:Object(a.jsx)(qt.a,{checked:d.modeAdvanced,onChange:k,name:"modeAdvanced"}),label:"Modo Avanzado"})}),Object(a.jsx)(Ae.a,{children:Object(a.jsx)(H.a,{color:"primary",onClick:function(){e.clear(),s(null),f()},children:"Cerrar sesi\xf3n"})})]})]}):Object(a.jsxs)(Q.a,{variant:"text","aria-label":"text primary button group",children:[Object(a.jsx)(H.a,{onClick:function(){g({type:T.ui.toggleModal,payload:"Login"})},children:"Ingresar"}),Object(a.jsx)(H.a,{onClick:function(){g({type:T.ui.toggleModal,payload:"Register"})},children:"Registrarme"})]})]})}),Object(a.jsx)(on,{}),Object(a.jsx)(un,{})]})},pn=n(996),gn=Object(R.a)((function(e){return{pos:{width:"fit-content"}}})),mn=function(){var e=gn();return Object(a.jsx)(Mt.a,{position:"static",color:"default",children:Object(a.jsx)(pn.a,{maxWidth:"md",className:e.pos,children:Object(a.jsx)(Wt.a,{children:Object(a.jsx)(q.a,{variant:"body1",children:"\xa9 2021 Universidad Cat\xf3lica de Temuco"})})})})},hn=n(1011),xn=n(910),fn=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingTop:20,paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10}}})),On=function(){var e=fn(),t=Object(U.a)(["shared-designs"],function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,ue(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}});return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsx)(Ue,{})}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsx)(q.a,{variant:"h4",style:{marginBottom:5},children:"Compartidos conmigo"}),Object(a.jsx)(G.a,{}),Object(a.jsx)(ve,Object(S.a)(Object(S.a)({},t),{},{label:"shared-with-me"}))]}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})})},vn=n(1018),yn=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("category");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),wn=n(1028);var kn=Object(R.a)((function(e){return{keywordList:{width:"100%",display:"flex",justifyContent:"flex-start",height:48,mouseWheel:"horizontal",overflowX:"auto",overflowY:"hidden",listStyle:"none",padding:e.spacing(.5),margin:0},keyword:{margin:e.spacing(.5)},searchContainer:{display:"flex",alignItems:"center",marginBottom:15},input:{height:40,"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},button:{borderTopLeftRadius:0,borderBottomLeftRadius:0,height:40},keywordFilter:{paddingLeft:0,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius}}})),Cn=function(e){var t=e.keywords,n=e.onChangeKeywords,i=kn(),c=Object(r.useState)(""),s=Object(b.a)(c,2),o=s[0],l=s[1],d=Object(r.useState)(null),u=Object(b.a)(d,2),j=u[0],p=u[1],g=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1];return Object(r.useLayoutEffect)((function(){if(n){var e=function(e){0!==e.deltaY&&(e.preventDefault(),n.scrollTo({left:n.scrollLeft+e.deltaY,behavior:"auto"}))};return n.addEventListener("wheel",e),function(){return n.removeEventListener("wheel",e)}}}),[n]),a}();return Object(a.jsxs)(Se.a,{ref:g,component:"ul",className:i.keywordFilter,children:[Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o.trim().length&&!t.includes(o.toLowerCase())?(n([].concat(Object(jt.a)(t),[o.toLowerCase()]),"add",o.toLowerCase()),l("")):t.includes(o.toLowerCase())&&p("La palabra clave ya se encuentra agregada al filtro.")},className:i.searchContainer,children:[Object(a.jsx)(it.a,{className:i.input,size:"small",variant:"outlined",value:o,onChange:function(e){var t=e.target;l(t.value),j&&p(null)},label:"Palabra Clave",error:!!j,helperText:j,fullWidth:!0}),Object(a.jsx)(H.a,{variant:"contained",disableElevation:!0,color:"primary",type:"submit",className:i.button,children:"Agregar"})]}),Object(a.jsx)("div",{className:i.keywordList,children:t.map((function(e,r){return Object(a.jsx)("li",{children:Object(a.jsx)(wn.a,{label:e,onDelete:function(e){return function(e){e===t.length-1?n(Object(jt.a)(t.slice(0,e)),"remove",t[e]):n([].concat(Object(jt.a)(t.slice(0,e)),Object(jt.a)(t.slice(e+1,t.length))),"remove",t[e])}(r)},className:i.keyword})},"keyword-".concat(r))}))})]})},Sn=Object(R.a)((function(e){return{leftPanel:Object(C.a)({display:"flex",flexDirection:"column",justifyContent:"stretch",borderRight:"1px solid ".concat(e.palette.divider),position:"relative"},e.breakpoints.up("sm"),{height:"calc(100vh - 128px)"}),workspace:{paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},sectionTitle:{marginTop:20,marginBottom:20},category:{width:"100%",paddingLeft:20},categoriesContainer:Object(C.a)({},e.breakpoints.up("sm"),{overflow:"auto",overflowX:"hidden"}),keywordList:{display:"flex",justifyContent:"flex-start",height:48,mouseWheel:"horizontal",overflowX:"auto",overflowY:"hidden",listStyle:"none",padding:e.spacing(.5),margin:0},keyword:{margin:e.spacing(.5)},searchContainer:{display:"flex",alignItems:"center",marginTop:20,marginBottom:15},input:{height:40,"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},button:{borderTopLeftRadius:0,borderBottomLeftRadius:0,height:40},keywordFilter:{paddingLeft:0,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius}}})),Tn=function(){var e=Sn(),t=Object(r.useState)(""),n=Object(b.a)(t,2),i=n[0],c=n[1],s=Object(r.useState)(""),o=Object(b.a)(s,2),l=o[0],d=o[1],p=Object(r.useState)([]),g=Object(b.a)(p,2),m=g[0],h=g[1],x=Object(r.useState)([]),f=Object(b.a)(x,2),O=f[0],v=f[1],y=Object(K.a)("categories",Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn();case 2:return t=e.sent,h(t.categories.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{selected:!1})}))),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),w=Object(U.a)(["filtered-designs",l].concat(Object(jt.a)(O),Object(jt.a)(m)),function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,de(i,O,m.filter((function(e){return e.selected})),a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),k=function(){d(i)};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:[Object(a.jsx)(Ue,{}),Object(a.jsx)(q.a,{style:{marginTop:20,marginLeft:20},children:"Categor\xedas"}),Object(a.jsx)("div",{className:e.categoriesContainer,children:m.map((function(t,n){return Object(a.jsx)(zt.a,{className:e.category,control:Object(a.jsx)(vn.a,{checked:t.selected,onChange:function(e){return function(e){var t=Object(jt.a)(m);t[e].selected=!t[e].selected,h(t),k()}(n)}}),label:t.name},t._id)}))})]}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Buscar Dise\xf1o"}),Object(a.jsx)(G.a,{})]}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k()},className:e.searchContainer,children:[Object(a.jsx)(it.a,{className:e.input,size:"small",variant:"outlined",value:i,onChange:function(e){var t=e.target;return c(t.value)},label:"Nombre/Propietario",onBlur:k,placeholder:"Ingresa el nombre o propietario para buscar dise\xf1os",InputProps:{endAdornment:i.trim().length?Object(a.jsx)($.a,{size:"small",onClick:function(){c(""),d("")},onMouseDown:function(e){return e.preventDefault()},children:Object(a.jsx)(st.a,{})}):Object(a.jsx)("div",{})},fullWidth:!0}),Object(a.jsx)(H.a,{className:e.button,variant:"contained",color:"primary",type:"submit",disableElevation:!0,children:"Buscar"})]}),Object(a.jsx)(Cn,{keywords:O,onChangeKeywords:function(e,t,n){v(e)}}),Object(a.jsxs)("div",{className:e.sectionTitle,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Repositorio P\xfablico"}),Object(a.jsx)(G.a,{}),y.isError?Object(a.jsx)(q.a,{children:y.error.message}):w.isError?Object(a.jsx)(q.a,{children:w.error.message}):y.isLoading||w.isLoading?Object(a.jsx)(q.a,{children:"Cargando..."}):Object(a.jsx)(ve,Object(S.a)(Object(S.a)({},w),{},{label:"public-repository"}))]})]}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})})},An=n(453),Nn=n.n(An),Dn=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingLeft:30,paddingRight:30,paddingBottom:50,background:e.palette.background.workSpace,minHeight:"calc(100vh - 128px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},icon:{marginRight:10},usersContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:15},errorContainer:{marginTop:15,marginBottom:15,display:"flex",width:"100%",justifyContent:"center"},error:{minWidth:"50%",display:"flex",justifyContent:"center",textAlign:"center",alignItems:"center"},loadMore:{marginTop:50}}})),En=function(){var e=Dn(),t=Object(P.g)(),n=Object(P.h)(),r=Nn.a.parse(n.search).q,i=function(e){t.push(e)},c=Object(U.a)("search-users",function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,mt(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){if(e.nPages!==t.length)return e.from}}),s=c.data,o=c.status,l=c.error,d=c.isFetchingNextPage,b=c.fetchNextPage,p=c.hasNextPage;return r?"loading"===o?Object(a.jsx)("p",{children:"Loading..."}):"error"===o?Object(a.jsx)(fe.a,{severity:"error",className:e.error,children:l.message}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:Object(a.jsxs)(We.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(a.jsxs)(Ve.a,{button:!0,onClick:function(){return i("/my-designs")},children:[Object(a.jsx)(qe.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Mis Dise\xf1os"})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(Ve.a,{button:!0,onClick:function(){return i("/shared-with-me")},children:[Object(a.jsx)(Qe.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Compartidos Conmigo"})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(Ve.a,{button:!0,onClick:function(){return i("/public-repository")},children:[Object(a.jsx)(He.a,{className:e.icon}),Object(a.jsx)(ze.a,{primary:"Repositorio P\xfablico"})]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:Object(a.jsx)("div",{style:{paddingTop:15},children:s.pages[0].users.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"h4",children:"Usuarios encontrados"}),Object(a.jsx)(G.a,{}),Object(a.jsxs)("div",{className:e.usersContainer,children:[s.pages.map((function(e,t){return e.users.map((function(e,t){return Object(a.jsx)(Et,Object(S.a)({},e),e._id)}))})),s&&p&&Object(a.jsx)(H.a,{className:e.loadMore,color:"primary",onClick:function(){return b()},children:d?"Cargando m\xe1s...":"Cargar M\xe1s"})]})]}):Object(a.jsx)(fe.a,{severity:"error",className:e.error,children:"No se han encontrado coincidencias."})})}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel})]})}):Object(a.jsx)("div",{className:e.errorContainer,children:Object(a.jsx)(fe.a,{severity:"error",className:e.error,children:"No se ha ingresado filtro para la b\xfasqueda de usuarios. Por favor ingrese informaci\xf3n en la entrada de texto de la barra de navegaci\xf3n para buscar usuarios y presione 'enter' o el \xedcono de b\xfasqueda."})})},In=n(1013),Ln=n(1006),Pn=n(999),Rn=n(1e3),Fn=n(1002),Bn=n(72),Mn=n(304),Wn=n(977),Vn=n(1027),zn=n(1015),qn=function(e,t){switch(t.type){case T.design.updateDesign:return Object(S.a)(Object(S.a)({},e),{},{design:t.payload});case T.design.changeMetadataField:return null!==t.payload.subfield?Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{metadata:Object(S.a)(Object(S.a)({},e.design.metadata),{},Object(C.a)({},t.payload.field,Object(S.a)(Object(S.a)({},e.design.metadata[t.payload.field]),{},Object(C.a)({},t.payload.subfield,t.payload.value))))})}):Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{metadata:Object(S.a)(Object(S.a)({},e.design.metadata),{},Object(C.a)({},t.payload.field,t.payload.value))})});case T.design.changeTaskField:var n=e.design.data.learningActivities;return n.forEach((function(e,a){e.id===t.payload.learningActivityID&&e.tasks.forEach((function(e,r){e.id===t.payload.taskID&&(null!==t.payload.subfield?n[a].tasks[r][t.payload.field][t.payload.subfield]=t.payload.value:n[a].tasks[r][t.payload.field]=t.payload.value)}))})),Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{data:Object(S.a)(Object(S.a)({},e.design.data),{},{learningActivities:n})})});case T.design.setCurrentLearningResultField:return Object(S.a)(Object(S.a)({},e),{},{currentLearningResult:Object(S.a)(Object(S.a)({},e.currentLearningResult),{},Object(C.a)({},t.payload.field,t.payload.value))});case T.design.clearCurrentLearningResult:return Object(S.a)(Object(S.a)({},e),{},{currentLearningResult:{category:null,verb:null,description:null,editing:!1,index:null}});case T.design.setCurrentLearningResult:return Object(S.a)(Object(S.a)({},e),{},{currentLearningResult:t.payload});case T.design.setBloomCategories:return Object(S.a)(Object(S.a)({},e),{},{bloomCategories:t.payload});case T.design.setBloomVerbs:return Object(S.a)(Object(S.a)({},e),{},{bloomVerbs:t.payload});case T.design.setDesignPrivileges:return Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{privileges:t.payload})});case T.design.addDesignKeyword:return Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{keywords:[].concat(Object(jt.a)(e.design.keywords),[t.payload])})});case T.design.removeDesignKeyword:return Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{keywords:Object(jt.a)(e.design.keywords.filter((function(e){return e!==t.payload})))})});case T.design.updateReadOnlyLink:return Object(S.a)(Object(S.a)({},e),{},{design:Object(S.a)(Object(S.a)({},e.design),{},{readOnlyLink:t.payload})});default:return e}},Qn=Object(r.createContext)();function Hn(){var e=Object(r.useContext)(Qn);if(void 0===e)throw new Error("useDesignState must be used within a DesignProvider");return e}var Gn={design:null,currentLearningResult:{category:null,verb:null,description:null,editing:!1,index:null},bloomCategories:[],bloomVerbs:[]},Un=function(e){var t=e.children,n=Object(r.useReducer)(qn,Gn),i=Object(b.a)(n,2),c=i[0],s=i[1];return Object(a.jsx)(Qn.Provider,{value:{designState:c,dispatch:s},children:t})},Kn=n(63),Zn=n(470),Xn=n(471),Jn=n(454),Yn=n(28),_n=n(468),$n=Object(r.createContext)();function ea(){var e=Object(r.useContext)($n);if(void 0===e)throw new Error("SharedDocContext must be used within a SharedDocProvider");return e}var ta=function(e){var t=e.children,n=Object(r.useState)(null),i=Object(b.a)(n,2),c=i[0],s=i[1],o=Object(r.useState)(null),l=Object(b.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(null),p=Object(b.a)(j,2),g=p[0],m=p[1],h=x().authState,f=Object(r.useCallback)((function(e){if(d)return!1;if(!h.user)return!1;var t=["#30bced","#6eeb83","#ffbc42","#ecd444","#ee6352","#9ac2c9","#8acb88","#1be7ff"],n=new Yn.d({guid:e});s(n);var a=new _n.a("ws://lad-y.herokuapp.com",e,n),r={name:h.user.name,color:t[Math.floor(Math.random()*t.length)]};a.awareness.setLocalStateField("user",r),u(a),m(r)}),[d,h.user]),O=Object(r.useCallback)((function(){s(null),u(null),m(null)}),[s,u,m]);return Object(a.jsx)($n.Provider,{value:{doc:c,provider:d,connectToDesign:f,clearDoc:O,user:g},children:t})},na=(n(533),n(181)),aa=n(455),ra=n(456),ia=n(457),ca=n(458),sa=n(997),oa=n(998);function la(e){var t=document.createElement("span");return t.innerHTML=e,t.textContent||t.innerText}var da=Object(R.a)((function(e){return{root:function(e){e.multiline,e.rowMax,e.focused;return{width:"100%",display:"flex"}},inputContainer:function(e){var t=e.multiline,n=e.rowMax;e.focused,e.type;return{width:"100%",cursor:"text",height:t&&1===n?"auto":"calc(22px * ".concat(n," + 34px)"),overflow:"auto"}},actions:function(){return{display:"flex",flexDirection:"column",width:70,justifyContent:"space-between",borderWidth:1,borderStyle:"solid",borderColor:e.palette.action.disabled,borderTopRightRadius:5,borderBottomRightRadius:5}},action:function(){return{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"}},editorx:function(e){var t=e.multiline,n=e.rowMax;return{height:t&&1===n?"auto":"calc(22px * ".concat(n," + 34px)")}},"@global":{".ProseMirror":function(t){t.multiline,t.rowMax;return{height:"100%",overflow:"auto",overflowX:"hidden",width:"100%",fontSize:e.typography.body1.fontSize,fontFamily:e.typography.fontFamily,fontStyle:"normal",paddingTop:"1rem",paddingBottom:"1rem",paddingLeft:10,paddingRight:10}},".ProseMirror p":{marginBlockStart:0,marginBlockEnd:0},".ProseMirror:focus":{outline:"none"},".ProseMirror p.is-editor-empty:first-child::before":{content:"attr(data-empty-text)",float:"left",color:"dark"===e.palette.type?e.palette.grey[400]:e.palette.grey[600],pointerEvents:"none",height:0}}}})),ua=Object(r.forwardRef)((function(e,t){var n=e.name,i=e.multiline,c=e.rowMax,s=void 0===c?1:c,o=e.maxLength,l=e.onChange,d=(e.placeholder,e.initialvalue),u=void 0===d?"":d,j=e.type,p=void 0===j?"text":j,g=e.max,m=e.min,h=e.deleteOnRemove,x=void 0!==h&&h,f=Object(r.useState)(!1),O=Object(b.a)(f,2),v=O[0],y=O[1],w=da({multiline:i,rowMax:s,focused:v,type:p}),k=Object(r.useState)(!1),C=Object(b.a)(k,2),S=C[0],T=C[1],A=ea(),N=A.doc,D=A.provider,E=A.user,I=Object(r.useState)(null),L=Object(b.a)(I,2),P=L[0],R=L[1],F=Object(r.useCallback)((function(){return la(null===P||void 0===P?void 0:P.getHTML().toString()).trim().toString()}),[P]),B=Object(r.useCallback)((function(e){null===P||void 0===P||P.commands.first((function(t){var n=t.commands;return[function(){return n.setContent(e.toString())}]}))}),[P]);if(Object(r.useImperativeHandle)(t,(function(){return{clearText:function(){N&&P&&B("")}}})),Object(r.useEffect)((function(){return function(){N&&P&&x&&B("")}}),[N,P,B,x]),P||R(new Kn.a({editorProps:"number"===p?{handleTextInput:function(e,t,n,a){return!(!isNaN(a)||"-"===a)||("0"===a&&"00"===e.dom.firstChild.textContent||("-"===a&&e.dom.firstChild.textContent.match(/-/g).length>1||"-"===a&&null!==m&&m>=0||"-"===a&&0!==e.dom.firstChild.textContent.indexOf("-")||(null!==g&&parseInt(e.dom.firstChild.textContent)>g||null!==m&&parseInt(e.dom.firstChild.textContent)<m)))},handlePaste:function(e,t,n){var a;if(1!==n.content.childCount)return!0;if(isNaN(n.content.firstChild.textContent))return!0;var r=e.dom.firstChild.textContent+n.content.firstChild.textContent;return!!(r.includes("-")&&(null===(a=r.match(/-/g))||void 0===a?void 0:a.length)>1||r.includes("-")&&0!==r.indexOf("-"))||(null!==g&&parseInt(r)>g||null!==m&&parseInt(r)<m)}}:{},extensions:[aa.a.extend({content:i?"block+":"block"}),ra.a,ia.a,Xn.a.configure({provider:D,user:E}),Zn.a.configure({document:N,field:n}),ca.a.configure({limit:o})],onUpdate:function(e){var t=la(e.editor.getHTML().toString()),a="number"!==p||isNaN(t)?t:parseInt(t);l&&l({target:{name:n,type:p,value:"number"===p&&isNaN(a)?0:a}})},onFocus:function(e){e.editor,e.event;y(!0)},onBlur:function(e){e.editor,e.event;y(!1)}})),Object(r.useEffect)((function(){D.synced?S||""===F()&&(B(u),T(!0)):D.once("synced",(function(){S||""===F()&&(B(u),T(!0))}))}),[D.synced,F,u,D,B,S]),!P)return Object(a.jsx)("div",{children:"Conectando..."});return Object(a.jsxs)("div",{className:w.root,children:[Object(a.jsx)("div",{className:w.inputContainer,onClick:function(){v||P.chain().focus("end").run()},children:Object(a.jsx)(Jn.a,{editor:P,className:"".concat(w.editorx)})}),"number"===p&&Object(a.jsxs)("div",{className:w.actions,children:[Object(a.jsx)(Se.a,{className:w.action,component:na.a,onClick:function(){var e=F();if(P&&"number"===p){if(!e.length||"-"===e)return B(null!==m&&void 0!==m?m:0);if(e=parseInt(e),!(null!==g&&e+1>g))return l&&l({target:{name:n,type:p,value:"number"===p&&isNaN(e)?0:e+1}}),B(e+1)}},children:Object(a.jsx)(sa.a,{})}),Object(a.jsx)(G.a,{}),Object(a.jsx)(Se.a,{className:w.action,component:na.a,onClick:function(){var e=F();if(P&&"number"===p){if(!e.length||"-"===e)return B(null!==m&&void 0!==m?m:0);if(e=parseInt(e),!(null!==m&&e-1<m))return l&&l({target:{name:n,type:p,value:"number"===p&&isNaN(e)?0:e-1}}),B(e-1)}},children:Object(a.jsx)(oa.a,{})})]})]})})),ja=Object(R.a)((function(e){return{trashIcon:{display:"flex"},tasksSpacing:{position:"relative",width:"100%",height:"100%",marginTop:e.spacing(1),background:e.palette.background.workSpace},taskBody:{padding:10,position:"relative",left:"5%",width:"95%",height:"100%"},taskSpacingDescription:{marginLeft:e.spacing(2),marginTop:e.spacing(2)},taskSpacingDescriptionBD:{marginBottom:e.spacing(1)},colorLearningType:{position:"absolute",width:"5%",height:"100%"},timeField:Object(C.a)({display:"flex",alignItems:"center",marginRight:10},e.breakpoints.down("md"),{marginRight:0}),grid:{display:"flex",alignItems:"center"},gridContainer:Object(C.a)({display:"grid",gridTemplateColumns:"50% 50%",gridTemplateRows:"auto",gridTemplateAreas:"\n            'learningType modality'\n            'workingTime format'\n            'description description'"},e.breakpoints.down("md"),{gridTemplateAreas:"\n                'learningType learningType'\n                'modality modality'\n                'format format'\n                'workingTime workingTime'\n                'description description'"}),firstRow:{display:"grid",gridTemplateColumns:"auto auto 10%",gridTemplateRows:"auto",gridTemplateAreas:"'learningType modality'"},learningTypeContainer:{gridArea:"learningType",width:"100%",display:"flex"},learningType:Object(C.a)({marginRight:10},e.breakpoints.down("md"),{marginRight:0,marginTop:10}),modality:Object(C.a)({gridArea:"modality",width:"100%",display:"flex"},e.breakpoints.down("md"),{marginTop:10}),format:Object(C.a)({gridArea:"format",display:"flex",justifyContent:"space-between",alignSelf:"flex-end"},e.breakpoints.down("md"),{marginTop:10}),delete:{alignSelf:"flex-start",justifySelf:"center"},resourceLinkGrid:{display:"grid",gridTemplateColumns:"25% 75%"},fab:{maxHeight:"20px",minHeight:"20px",minWidth:"20px",maxWidth:"20px"},icon:{maxHeight:"15px",minHeight:"15px",minWidth:"15px",maxWidth:"15px"}}})),ba=Object(r.forwardRef)((function(e,t){var n,i,c=e.learningActivityIndex,s=e.index,o=e.task,l=e.learningActivityID,d=(Object(M.a)(e,["learningActivityIndex","index","task","learningActivityID"]),ja()),u=w().socket,j=Object(r.useRef)(!0),p=Object(r.useRef)(),g=Object(r.useRef)(),m=Object(r.useRef)(),h=Hn().designState.design,x=D().dispatch,f=Object(me.b)().enqueueSnackbar,O=Object(Bn.a)(),v=Object(Pn.a)(O.breakpoints.down("md")),y=Ct({description:o.description,learningType:o.learningType&&""!==o.learningType.trim()?o.learningType:"Seleccionar",modality:o.modality&&""!==o.modality.trim()?o.modality:"Seleccionar",format:o.format&&""!==o.format.trim()?o.format:"Seleccionar",timeHours:null!==(n=o.duration.hours)&&void 0!==n?n:0,timeMinutes:null!==(i=o.duration.minutes)&&void 0!==i?i:0,groupSize:o.groupSize&&2!==o.groupSize?o.groupSize:2}),k=Object(b.a)(y,4),C=k[0],A=k[1],N=k[3];Object(r.useImperativeHandle)(t,(function(){return{clearTexts:function(){null===p||void 0===p||p.current.clearText(),null===g||void 0===g||g.current.clearText(),null===m||void 0===m||m.current.clearText()}}})),Object(r.useEffect)((function(){return function(){j.current=!1}}),[]),Object(r.useEffect)((function(){j.current&&C.description!==o.description&&N((function(e){return Object(S.a)(Object(S.a)({},e),{},{description:o.description})}))}),[C.description,o.description,N]),Object(r.useEffect)((function(){j.current&&C.learningType!==o.learningType&&N((function(e){return Object(S.a)(Object(S.a)({},e),{},{learningType:o.learningType&&""!==o.learningType.trim()?o.learningType:"Seleccionar"})}))}),[C.learningType,o.learningType,N]),Object(r.useEffect)((function(){j.current&&C.modality!==o.modality&&N((function(e){return Object(S.a)(Object(S.a)({},e),{},{modality:o.modality&&""!==o.modality.trim()?o.modality:"Seleccionar"})}))}),[C.modality,o.modality,N]),Object(r.useEffect)((function(){j.current&&C.format!==o.format&&N((function(e){return Object(S.a)(Object(S.a)({},e),{},{format:o.format&&""!==o.format.trim()?o.format:"Seleccionar"})}))}),[C.format,o.format,N]),Object(r.useEffect)((function(){j.current&&C.timeHours!==o.duration.hours&&N((function(e){var t;return Object(S.a)(Object(S.a)({},e),{},{timeHours:null!==(t=o.duration.hours)&&void 0!==t?t:0})}))}),[C.timeHours,o.duration.hours,N]),Object(r.useEffect)((function(){j.current&&C.timeMinutes!==o.duration.minutes&&N((function(e){var t;return Object(S.a)(Object(S.a)({},e),{},{timeMinutes:null!==(t=o.duration.minutes)&&void 0!==t?t:0})}))}),[C.timeMinutes,o.duration.minutes,N]);var E=C.description,I=C.learningType,L=C.modality,P=C.format,R=C.timeHours,F=C.timeMinutes,B=C.groupSize,W=function(e){var t=e.target,n=t.name,a=t.value,r=null;n.includes("description")?n="description":n.includes("timeHours")?(n="duration",r="hours",a=isNaN(a)?0:a):n.includes("timeMinutes")&&(n="duration",r="minutes",a=isNaN(a)?0:a),A({target:t}),u.emit("edit-task-field",{designId:h._id,learningActivityID:l,taskID:o.id,field:n,value:a,subfield:r})},V=function(){x({type:T.ui.setResourceLink,payload:{learningActivityIndex:c,taskIndex:s}}),x({type:T.ui.toggleModal,payload:"Resource"})},z=function(e){var t,n,a;""===E&&"Seleccionar"===I&&"Seleccionar"===L&&"Seleccionar"===P&&0===R&&0===F?(null===p||void 0===p||null===(t=p.current)||void 0===t||t.clearText(),null===g||void 0===g||null===(n=g.current)||void 0===n||n.clearText(),null===m||void 0===m||null===(a=m.current)||void 0===a||a.clearText(),u.emit("delete-task",{designId:h._id,learningActivityID:l,taskID:o.id}),f("Su tarea se ha eliminado",{variant:"success",autoHideDuration:2e3})):(x({type:T.ui.setConfirmData,payload:{type:"tarea",args:{designId:h._id,learningActivityID:l,taskID:o.id},actionMutation:null}}),x({type:T.ui.toggleModal,payload:"Confirmation"}))},Q=function(e){A(e),u.emit("edit-task-field",{designId:h._id,learningActivityID:l,taskID:o.id,field:e.target.name,value:e.target.value,subfield:null})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Se.a,{style:{height:"100%"},children:Object(a.jsx)(Mn.a,{square:!0,className:d.tasksSpacing,children:Object(a.jsxs)(Se.a,{style:{display:"flex",position:"relative",height:"100%",width:"100%"},children:["Investigaci\xf3n"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#57A8E7"}}):"Adquisici\xf3n"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#E95D5D"}}):"Producci\xf3n"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#C8951F"}}):"Discusi\xf3n"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#087A4C"}}):"Colaboraci\xf3n"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#DFDF3F"}}):"Pr\xe1ctica"===o.learningType?Object(a.jsx)(Se.a,{className:d.colorLearningType,style:{backgroundColor:"#A75BCD"}}):void 0,Object(a.jsx)("div",{className:d.taskBody,children:Object(a.jsxs)("div",{className:d.gridContainer,children:[Object(a.jsxs)("div",{className:d.learningTypeContainer,children:[Object(a.jsxs)(Wn.a,{fullWidth:!0,variant:"outlined",className:d.learningType,children:[Object(a.jsx)(Vn.a,{id:"learningType-task-".concat(o.id,"-learningActivity-").concat(l),shrink:!0,children:"Aprendizaje"}),Object(a.jsxs)(zn.a,{labelId:"learningType-task-".concat(o.id,"-learningActivity-").concat(l),label:"Aprendizaje",name:"learningType",value:I,onChange:Q,children:[Object(a.jsx)(Ae.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Ae.a,{value:"Investigaci\xf3n",children:" Investigaci\xf3n "}),Object(a.jsx)(Ae.a,{value:"Adquisici\xf3n",children:" Adquisici\xf3n "}),Object(a.jsx)(Ae.a,{value:"Producci\xf3n",children:" Producci\xf3n "}),Object(a.jsx)(Ae.a,{value:"Discusi\xf3n",children:" Discusi\xf3n "}),Object(a.jsx)(Ae.a,{value:"Colaboraci\xf3n",children:" Colaboraci\xf3n "}),Object(a.jsx)(Ae.a,{value:"Pr\xe1ctica",children:" Pr\xe1ctica "})]})]}),v&&Object(a.jsx)(Rn.a,{title:"Eliminar tarea",className:d.delete,children:Object(a.jsx)($.a,{onClick:function(){return z()},children:Object(a.jsx)(re.a,{fontSize:"small"})})})]}),Object(a.jsxs)("div",{className:d.modality,children:[Object(a.jsxs)(Wn.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Vn.a,{id:"modality-task-".concat(o.id,"-learningActivity-").concat(l),shrink:!0,children:" Modalidad "}),Object(a.jsxs)(zn.a,{labelId:"modality-task-".concat(o.id,"-learningActivity-").concat(l),label:"Aprendizaje",name:"modality",value:L,onChange:Q,children:[Object(a.jsx)(Ae.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Ae.a,{value:"Presencial-As\xedncrono",children:" Presencial-As\xedncrono"}),Object(a.jsx)(Ae.a,{value:"Presencial-S\xedncrono",children:" Presencial-S\xedncrono"}),Object(a.jsx)(Ae.a,{value:"Online-As\xedncrono",children:" Online-As\xedncrono"}),Object(a.jsx)(Ae.a,{value:"Online-S\xedncrono",children:" Online-S\xedncrono"})]})]}),!v&&Object(a.jsx)(Rn.a,{title:"Eliminar tarea",className:d.delete,children:Object(a.jsx)($.a,{onClick:function(){return z()},children:Object(a.jsx)(re.a,{fontSize:"small"})})})]}),Object(a.jsxs)("div",{style:{width:"100%",gridArea:"workingTime",marginTop:3},children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:d.timeField,children:[Object(a.jsx)(it.a,{label:"Horas",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:p,name:"timeHours-task-".concat(o.id,"-learning-activity-").concat(l),placeholder:"Horas",initialvalue:R,onChange:W,type:"number",min:0}}}),Object(a.jsx)(q.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsx)(it.a,{label:"Minutos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:g,name:"timeMinutes-task-".concat(o.id,"-learning-activity-").concat(l),placeholder:"Minutos",initialvalue:F,onChange:W,type:"number",min:0,max:59}}})]})]}),Object(a.jsx)("div",{style:{marginTop:20},children:Object(a.jsx)(H.a,{variant:"outlined",onClick:V,children:" Administrar recursos"})}),Object(a.jsxs)("div",{className:d.format,children:[Object(a.jsxs)(Wn.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Vn.a,{id:"format-task-".concat(o.id,"-learningActivity-").concat(l),shrink:!0,children:" Formato "}),Object(a.jsxs)(zn.a,{labelId:"format-task-".concat(o.id,"-learningActivity-").concat(l),label:"Formato",name:"format",value:P,onChange:Q,children:[Object(a.jsx)(Ae.a,{value:"Seleccionar",children:" Seleccionar "}),Object(a.jsx)(Ae.a,{value:"Grupal",children:" Grupal"}),Object(a.jsx)(Ae.a,{value:"Individual",children:" Individual"}),Object(a.jsx)(Ae.a,{value:"Toda la clase",children:" Toda la clase"})]})]}),"Grupal"===P&&Object(a.jsxs)(Wn.a,{fullWidth:!0,variant:"outlined",children:[Object(a.jsx)(Vn.a,{id:"group-task-".concat(o.id,"-learningActivity-").concat(l),shrink:!0,children:" Personas "}),Object(a.jsxs)(zn.a,{labelId:"group-quantity-task-".concat(o.id,"-learningActivity-").concat(l),label:"Cantidad",name:"groupSize",value:B,onChange:Q,type:"number",children:[Object(a.jsx)(Ae.a,{value:2,children:" 2 "}),Object(a.jsx)(Ae.a,{value:3,children:" 3"}),Object(a.jsx)(Ae.a,{value:4,children:" 4"}),Object(a.jsx)(Ae.a,{value:5,children:" 5"})]})]})]}),Object(a.jsx)(it.a,{style:{gridArea:"description",marginTop:10},InputLabelProps:{shrink:!0},label:"Descripci\xf3n",fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:m,name:"description-task-".concat(o.id,"-learning-activity-").concat(l),placeholder:"Descripci\xf3n",initialvalue:E,onChange:W,multiline:!0}}})]})})]})})},s)})})),pa=Object(R.a)((function(e){return{root:{display:"flex",width:"100%",border:"1px solid ".concat(e.palette.divider),height:"100%"},title:{display:"flex",alignItems:"center"},colorBox:{width:10,height:10,marginRight:5,border:"1px solid #dddddd"},colorBoxRightPanel:{width:13,height:13,marginRight:5},spacingGraphic:{marginTop:e.spacing(1),display:"flex",flexWrap:"wrap"},legend:{marginTop:e.spacing(.5),marginLeft:e.spacing(.5),marginRight:e.spacing(.5),display:"flex",alignItems:"center"}}})),ga=function(e){var t=e.height,n=void 0===t?25:t,r=e.items,i=e.type,c=e.legends,s=e.colorGraphicToPdf,o=pa(),l=_t().userConfig,d=[],u=0;return r.map((function(e){return u=e.value+u})),"Activity"===i?d=(l.darkTheme,["#57A8E7","#E95D5D","#C8951F","#087A4C","#DFDF3F","#A75BCD"]):"Format"===i?d=(l.darkTheme,["rgba(61, 156, 65, 0.8)","rgba(224, 243, 225, 0.8)","rgba(102, 242, 108, 0.75)"]):"Modality"===i&&(d=(l.darkTheme,["#A6CAF6","#6996CD","#5FA2EF","#135BB3"])),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:o.root,style:{height:n},children:r.map((function(e,t){return Object(a.jsx)(Rn.a,{title:Object(a.jsxs)("div",{className:o.title,children:[Object(a.jsx)("div",{className:o.colorBox,style:{backgroundColor:d[t]}}),"".concat(e.title,": ").concat((100*e.value/u).toFixed(1),"%")]}),arrow:!0,children:Object(a.jsx)("div",{style:{width:"".concat(100*e.value,"%"),height:"100%",backgroundColor:d[t]}})},"nombreGrafico".concat(t))}))}),c&&Object(a.jsx)("div",{className:o.spacingGraphic,children:r.map((function(e,t){return Object(a.jsxs)("div",{className:o.legend,children:[Object(a.jsx)("div",{className:o.colorBoxRightPanel,style:{backgroundColor:d[t]}}),s?Object(a.jsxs)(q.a,{variant:"caption",children:[" ",e.title," "]}):Object(a.jsxs)(q.a,{variant:"caption",style:{color:"#000000"},children:[" ",e.title," "]})]},"legends-".concat(t))}))})]})},ma=[{title:"Investigaci\xf3n",value:0},{title:"Adquisici\xf3n",value:0},{title:"Producci\xf3n",value:0},{title:"Discusi\xf3n",value:0},{title:"Colaboraci\xf3n",value:0},{title:"Pr\xe1ctica",value:0}],ha=[{title:"Investigaci\xf3n",value:0},{title:"Adquisici\xf3n",value:0},{title:"Producci\xf3n",value:0},{title:"Discusi\xf3n",value:0},{title:"Colaboraci\xf3n",value:0},{title:"Pr\xe1ctica",value:0}],xa=[{title:"Grupal",value:0},{title:"Individual",value:0},{title:"Toda la clase",value:0}],fa=[{title:"Presencial-As\xedncrono",value:0},{title:"Presencial-S\xedncrono",value:0},{title:"Online-As\xedncrono",value:0},{title:"Online-S\xedncrono",value:0}],Oa=n(1001),va=n(1003),ya=n(239),wa=n.n(ya),ka=Object(R.a)((function(e){return{unitSpacing:{marginBottom:e.spacing(3)},titleUnitSpacing:{display:"flex",paddingLeft:10,paddingRight:10,marginTop:e.spacing(1)},graphicUnitSpacing:{width:"100%",paddingLeft:10,paddingRight:10,display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.spacing(1)},trashIcon:{marginLeft:"auto"},spacingDescriptionlearningActivity:{marginTop:e.spacing(1)},spacingDescription:{marginTop:e.spacing(2),marginRight:e.spacing(2)},spacingLinkedResults:{marginTop:e.spacing(2)},buttonPos:{marginTop:e.spacing(1),marginLeft:"auto"},gridTask:{marginTop:e.spacing(1),marginLeft:e.spacing(1)},descriptionContainer:{display:"flex",flexDirection:"column",padding:e.spacing(1)},learningResultList:{display:"flex",flexWrap:"nowrap",flexDirection:"column",paddingLeft:15,maxHeight:200,overflow:"auto",overflowX:!0},delete:{alignSelf:"center",justifySelf:"center"},fab:{position:"absolute",bottom:e.spacing(-5),right:e.spacing(2)},taskContainer:{position:"relative",marginBottom:e.spacing(6)}}})),Ca=function(e){var t=e.index,n=e.learningActivity,i=ka(),c=Hn().designState.design,s=w().socket,o=D().dispatch,l=Object(me.b)().enqueueSnackbar,d=Object(Bn.a)(),u=Object(Pn.a)(d.breakpoints.down("xs")),j=Object(r.useState)(null),p=Object(b.a)(j,2),g=p[0],m=p[1],h=Object(r.useRef)(),x=Object(r.useRef)(),f=Object(r.useRef)([]),O=Ct({title:n.title,description:n.description}),v=Object(b.a)(O,4),y=v[0],k=v[1],C=v[3];Object(r.useEffect)((function(){C({title:n.title,description:n.description})}),[c,C,n]);var A=y.title,N=y.description,E=function(){var e,t,a;""!==A||""!==N||0!==n.learningResults.length||void 0!==n.tasks&&0!==n.tasks.length?(o({type:T.ui.setConfirmData,payload:{type:"actividad",args:{designId:c._id,learningActivityID:n.id},actionMutation:null}}),o({type:T.ui.toggleModal,payload:"Confirmation"})):(null===f||void 0===f||null===(e=f.current)||void 0===e||e.forEach((function(e){return null===e||void 0===e?void 0:e.clearTexts()})),null===h||void 0===h||null===(t=h.current)||void 0===t||t.clearText(),null===x||void 0===x||null===(a=x.current)||void 0===a||a.clearText(),s.emit("delete-learningActivity",{designId:c._id,learningActivityID:n.id}),l("Su actividad se ha eliminado",{variant:"success",autoHideDuration:2e3}))},I=function(){var e=wa()().toString();s.emit("new-task",{designId:c._id,learningActivityID:n.id,id:e})},L=function(e){var t=e.target,a=t.name;t.name.includes("title")?a="title":t.name.includes("description")&&(a="description"),s.emit("edit-unit-field",{designId:c._id,learningActivityID:n.id,field:a,value:t.value}),k({target:Object(S.a)(Object(S.a)({},t),{},{name:a})})},P=function(){var e=c.metadata.results.map((function(e){return Object(a.jsx)(zt.a,{style:{width:"50%"},control:Object(a.jsx)(vn.a,{checked:!!n.learningResults.find((function(t){return t.verb===e.verb})),onChange:function(t){return function(e,t,a){if(t){var r=0;n.learningResults.forEach((function(e,t){e.verb===a.verb&&e.description===a.description&&(r=t)})),s.emit("delete-learning-result-from-learningActivity",{designId:c._id,learningActivityID:n.id,indexLearningResults:r})}else s.emit("add-learning-result-to-learningActivity",{designId:c._id,learningActivityID:n.id,result:a})}(0,!!n.learningResults.find((function(t){return t.verb===e.verb})),e)}}),label:e.verb},"learning-result-".concat(e.verb))}));return 0===e.length?Object(a.jsx)(Se.a,{style:{marginLeft:-15,paddingRight:10},fontSize:"caption.fontSize",fontStyle:"italic",textAlign:"justify",children:"No hay resultados de aprendizaje en este dise\xf1o. Para agregar resultados de aprendeizaje, por favor ve a la pesta\xf1a de metadatos."}):e},R=function(e){e.stopPropagation(),m(e.currentTarget)},F=function(){m(null),o({type:T.ui.setEvaluation,payload:{learningActivityIndex:t}}),o({type:T.ui.toggleModal,payload:"Evaluation"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(z.a,{children:Object(a.jsxs)(Mn.a,{className:i.unitSpacing,children:[Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,sm:5,className:i.titleUnitSpacing,children:[Object(a.jsx)(it.a,{label:"T\xedtulo",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:h,name:"title-learning-activity-".concat(n.id),placeholder:"T\xedtulo",initialvalue:A,onChange:L}}}),u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{onClick:R,children:Object(a.jsx)(Ie.a,{})}),Object(a.jsxs)(Te.a,{onBlur:function(){return m(null)},anchorEl:g,open:Boolean(g),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return m(null)},children:[Object(a.jsxs)(Ae.a,{onClick:F,children:[Object(a.jsx)(Oa.a,{fontSize:"small"}),Object(a.jsx)(q.a,{children:"Definir Evaluaci\xf3n"})]}),Object(a.jsxs)(Ae.a,{onClick:E,children:[Object(a.jsx)(re.a,{fontSize:"small"}),Object(a.jsx)(q.a,{children:"Eliminar"})]})]})]})]}),void ma.forEach((function(e){e.value=0})),Object(a.jsxs)(z.a,{item:!0,xs:12,sm:7,className:i.graphicUnitSpacing,children:[c.data.learningActivities[t]&&c.data.learningActivities[t].tasks&&c.data.learningActivities[t].tasks.forEach((function(e){ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)}))})),Object(a.jsx)(ga,{items:ma,type:"Activity"}),!u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($.a,{onClick:R,children:Object(a.jsx)(Ie.a,{})}),Object(a.jsxs)(Te.a,{onBlur:function(){return m(null)},anchorEl:g,open:Boolean(g),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return m(null)},children:[Object(a.jsxs)(Ae.a,{onClick:F,children:[Object(a.jsx)(Oa.a,{fontSize:"small",style:{marginRight:8}}),Object(a.jsx)(q.a,{children:"Definir Evaluaci\xf3n"})]}),Object(a.jsxs)(Ae.a,{onClick:E,children:[Object(a.jsx)(re.a,{fontSize:"small",style:{marginRight:8}}),Object(a.jsx)(q.a,{children:"Eliminar Actividad"})]})]})]})]})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(z.a,{container:!0,spacing:2,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,sm:8,className:i.taskContainer,children:[Object(a.jsx)(z.a,{id:"tasks",className:i.gridTask,children:c.data.learningActivities[t]&&c.data.learningActivities[t].tasks&&c.data.learningActivities[t].tasks.map((function(e,r){return Object(a.jsx)(ba,{ref:function(e){return f.current.push(e)},index:r,task:e,learningActivityIndex:t,learningActivityID:n.id},"task-".concat(r,"-learningActivity-").concat(t))}))}),Object(a.jsx)(Rn.a,{title:"Agregar tarea",arrow:!0,children:Object(a.jsx)(Fn.a,{"aria-label":"add-task",className:i.fab,size:"small",color:"primary",onClick:I,children:Object(a.jsx)(va.a,{fontSize:"small"})})})]}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)("div",{className:i.descriptionContainer,children:[Object(a.jsx)(z.a,{className:i.spacingDescription,children:Object(a.jsx)(it.a,{label:"Descripci\xf3n",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:x,name:"description-learning-activity-".concat(n.id),placeholder:"Descripci\xf3n",initialvalue:N,rowMax:3,multiline:!0,onChange:L}}})}),Object(a.jsx)(q.a,{variant:"body2",className:i.spacingLinkedResults,color:"textSecondary",children:" Resultados Vinculados "}),Object(a.jsx)("div",{className:i.learningResultList,children:P()})]})})]})]})},t)})},Sa=n(205),Ta=n.n(Sa),Aa=function(e){var t=e.items,n=e.colorGraphicToPdf,r=_t().userConfig;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(Ta.a,{id:"pie",palette:(r.darkTheme,["#57A8E7","#E95D5D","#C8951F","#087A4C","#DFDF3F","#A75BCD"]),dataSource:t,title:"An\xe1lisis",theme:r.darkTheme&&n?"generic.contrast":"generic.light",children:[Object(a.jsx)(Sa.Series,{argumentField:"title",valueField:"value"}),Object(a.jsx)(Sa.Legend,{verticalAlignment:"bottom",horizontalAlignment:"center",itemTextPosition:"right",rowCount:2}),Object(a.jsx)(Sa.Tooltip,{enabled:!0,customizeTooltip:function(e){return{text:"".concat(e.argumentText," - ").concat((100*e.percent).toFixed(1),"%")}},zIndex:2})]})})})},Na=n(1020),Da=n(1004),Ea=function(e){var t=e.options,n=e.Icon,i=void 0===n?Ie.a:n,c=Object(r.useState)(null),s=Object(b.a)(c,2),o=s[0],l=s[1],d=function(){l(null)};return Object(a.jsxs)("div",{children:[Object(a.jsx)($.a,{onClick:function(e){l(e.currentTarget)},children:Object(a.jsx)(i,{})}),Object(a.jsx)(Te.a,{anchorEl:o,open:Boolean(o),anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},onClose:d,children:t&&t.length?t.map((function(e,t){return Object(a.jsxs)(Ae.a,{onClick:function(t){return function(e,t){t&&t(e),d()}(t,e.onSelect)},children:[e.icon?Object(a.jsx)(Ne.a,{children:e.icon}):Object(a.jsx)("div",{}),Object(a.jsx)(q.a,{children:e.label})]},"option-".concat(t,"-").concat(e))})):Object(a.jsx)(q.a,{component:"div",children:Object(a.jsx)(Se.a,{fontStyle:"italic",children:"No hay opciones especificadas."})})})]})},Ia=Object(R.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleSectionShare:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"},divSectionShare:{padding:20}}})),La=function(){var e=Ia(),t=D(),n=t.uiState,i=t.dispatch,c=Hn().designState.design,s=Object(r.useState)(""),o=Object(b.a)(s,1)[0],l=Object(r.useState)(""),d=Object(b.a)(l,2),p=d[0],g=d[1],m=Object(me.b)().enqueueSnackbar,h=w().socket,x=Object(r.useState)(Object(jt.a)(c.privileges)),f=Object(b.a)(x,2),O=f[0],v=f[1],y=Object(K.a)(["user-profile",c.owner],Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt(c.owner);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),k=y.data,C=y.error,A=y.isError,N=y.isLoading,E=function(){v(Object(jt.a)(c.privileges)),i({type:T.ui.toggleModal,payload:"Share"})},I=function(){navigator.clipboard.writeText("http://learning-activity-designer.herokuapp.com/shared-link/"+c.readOnlyLink),m("Enlace copiado.",{variant:"success",anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:2e3})},P=function(){h.emit("generate-new-share-link",{designId:c._id})};if(C)return Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(fe.a,{severity:"error",children:C})});if(!c||!k)return Object(a.jsx)(q.a,{children:"Cargando..."});return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{open:n.isShareModalOpen,onClose:E,maxWidth:"sm",fullWidth:!0,children:[Object(a.jsx)(at.a,{children:"Compartir Dise\xf1o"}),Object(a.jsx)($.a,{"aria-label":"close",className:e.closeButton,onClick:E,children:Object(a.jsx)(Tt.a,{})}),Object(a.jsx)(rt.a,{dividers:!0,style:{padding:0},children:N?Object(a.jsx)(q.a,{children:"Cargando..."}):A?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(fe.a,{severity:"error",children:C})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:e.divSectionShare,children:[Object(a.jsx)("div",{className:e.titleSectionShare,children:Object(a.jsx)(q.a,{color:"textSecondary",children:" Compartir mediante enlace "})}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:10,paddingLeft:10,paddingRight:10},children:[Object(a.jsx)(q.a,{align:"justify",children:" Mediante el siguiente enlace puedes compartir este dise\xf1o en modo solo lectura: "}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(X.a,{style:{wordBreak:"break-word"},component:L.b,to:"/shared-link/".concat(c.readOnlyLink),onClick:E,align:"center",children:"http://learning-activity-designer.herokuapp.com/shared-link/"+c.readOnlyLink}),Object(a.jsx)(Ea,{options:[{icon:Object(a.jsx)(Da.a,{fontSize:"small"}),label:"Copiar enlace",onSelect:I},{icon:Object(a.jsx)(va.a,{}),label:"Generar nuevo enlace",onSelect:P}]})]})]})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)("div",{className:e.divSectionShare,children:[Object(a.jsx)("div",{className:e.titleSectionShare,children:Object(a.jsx)(q.a,{color:"textSecondary",children:" Compartir a contactos "})}),Object(a.jsx)("div",{children:Object(a.jsx)(Na.a,{value:o,blurOnSelect:!0,onChange:function(e,t){!function(e){if(e){var t=k.contacts.find((function(t){return t.name===e}));t&&(c.privileges.map((function(e){return e.user._id===t._id})).reduce((function(e,t){return e||t}))?m("El usuario ya se encuentra agregado",{variant:"error",anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:2e3}):v([].concat(Object(jt.a)(O),[{user:t,type:1}])),g(""))}}(t)},inputValue:p,onInputChange:function(e,t){g(t)},options:k.contacts.map((function(e){return e.name})),getOptionSelected:function(e,t){return e.id===t.id},renderInput:function(e){return Object(a.jsx)(it.a,Object(S.a)(Object(S.a)({},e),{},{label:"Buscar Contacto",margin:"normal",variant:"outlined",InputProps:Object(S.a)({},e.InputProps)}))}})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(G.a,{style:{marginBottom:10}}),O.map((function(e,t){return Object(a.jsx)(z.a,{container:!0,style:{marginBottom:10},children:Object(a.jsxs)(z.a,{item:!0,xs:12,style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(Se.a,{style:{justifyContent:"space-between"},children:Object(a.jsx)(te.a,{style:{marginRight:7}})}),Object(a.jsxs)(Se.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(q.a,{children:e.user.name+" "+e.user.lastname}),Object(a.jsx)(q.a,{color:"textSecondary",children:e.user.email})]})]}),Object(a.jsx)(Se.a,{children:e.user._id===c.owner?Object(a.jsx)(q.a,{children:"Propietario"}):Object(a.jsx)(Wn.a,{variant:"outlined",size:"small",children:Object(a.jsxs)(zn.a,{name:"type",value:e.type,onChange:function(n){!function(e,t,n){var a=e.target.value;if(a!==t)if("Quitar"===a)n===O.length-1?v(Object(jt.a)(O.slice(0,n))):v([].concat(Object(jt.a)(O.slice(0,n)),Object(jt.a)(O.slice(n+1,O.length))));else{var r=Object(S.a)({},O[n]);r.type=a,n===O.length-1?v([].concat(Object(jt.a)(O.slice(0,n)),[r])):v([].concat(Object(jt.a)(O.slice(0,n)),[r],Object(jt.a)(O.slice(n+1,O.length))))}}(n,e.type,t)},children:[Object(a.jsx)(Ae.a,{value:0,children:" Editor "}),Object(a.jsx)(Ae.a,{value:1,children:" Lector"}),Object(a.jsx)(Ae.a,{value:"Quitar",children:" Quitar"})]},"privileges-action-".concat(t))})})]})},"privilege-".concat(t))}))]})]})]})}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:E,children:"Cancelar"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){h.emit("change-design-privileges",{designId:c._id,privileges:Object(jt.a)(O)}),i({type:T.ui.toggleModal,payload:"Share"}),m("Se ha compartido su dise\xf1o correctamente",{variant:"success",autoHideDuration:2e3})},children:"Listo"})]})]})})},Pa=n(16),Ra=function(e){var t=e.design,n=e.img,r=e.typeUserPDF,i=Pa.StyleSheet.create({logo:{width:100,height:100,marginVertical:15,marginHorizontal:250},title:{fontSize:20,textAlign:"center",marginBottom:25},box:{width:"100%"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"},table:{display:"table",width:"auto",marginLeft:50,marginBottom:10,marginRight:50},tableRow:{margin:"auto",flexDirection:"row"},tableCol:{width:"100%"},tableCell:{margin:"auto",marginTop:5,fontSize:12},marginTitle:{fontSize:15,marginLeft:50,marginTop:15,marginBottom:10},body:{paddingTop:35,paddingBottom:65}});return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Pa.Document,{children:Object(a.jsxs)(Pa.Page,{size:"A4",wrap:!0,style:i.body,children:[Object(a.jsxs)(Pa.View,{style:i.box,children:[Object(a.jsx)(Pa.Image,{src:Bt,style:i.logo}),""===t.metadata.name?Object(a.jsx)(Pa.Text,{style:i.title,children:" Nombre no definido. "}):Object(a.jsxs)(Pa.Text,{style:i.title,children:[" ",t.metadata.name,". "]}),Object(a.jsxs)(Pa.View,{style:i.table,children:["teacher"===r&&Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Nombre"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797",marginLeft:6}],children:"\xc1rea disciplinar"})})]}),"teacher"===r&&Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:""===t.metadata.name?Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10}],children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:[i.tableCell,{marginBottom:10}],children:[" ",t.metadata.name,". "]})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginLeft:6}],children:t.metadata.category.name})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Tiempo de trabajo"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797",marginLeft:6}],children:"Modo de Entrega"})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsxs)(Pa.Text,{style:[i.tableCell,{marginBottom:10}],children:[" ",t.metadata.workingTime.hours," hrs : ",t.metadata.workingTime.minutes," min"]})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:""===t.metadata.name?Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginLeft:6}],children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:[i.tableCell,{marginLeft:6}],children:[" ",t.metadata.name,". "]})})]}),"teacher"===r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Tama\xf1o de la clase"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797",marginLeft:6}],children:"Conocimiento Previo"})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10}],children:t.metadata.classSize})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:""===t.metadata.priorKnowledge?Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginLeft:6}],children:"No especificado."}):Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginLeft:6}],children:t.metadata.priorKnowledge})})]})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Descripci\xf3n"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797",marginLeft:6}],children:"Objetivos"})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:""===t.metadata.description?Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginRight:6}],children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginRight:6}],children:[" ",t.metadata.description,". "]})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:""===t.metadata.objective?Object(a.jsx)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginLeft:6}],children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:[i.tableCell,{marginBottom:10,marginLeft:6}],children:[" ",t.metadata.objective,". "]})})]})]}),t.data.learningActivities&&t.data.learningActivities.map((function(e,t){return Object(a.jsxs)(Pa.View,{children:[Object(a.jsxs)(Pa.Text,{style:i.marginTitle,children:[" ",e.title," "]}),e.tasks&&e.tasks.map((function(e,n){return Object(a.jsx)(Pa.View,{children:Object(a.jsx)(Pa.View,{children:Object(a.jsxs)(Pa.View,{style:[i.table,{marginBottom:20,borderTop:1,borderColor:"#808080"}],children:[Object(a.jsxs)(Pa.View,{style:i.tableRow,children:["teacher"===r&&Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Aprendizaje"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Tiempo"})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Modalidad"})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:["teacher"===r&&Object(a.jsx)(Pa.View,{style:i.tableCol,children:"Seleccionar"===e.learningType||0===e.learningType.trim().length?Object(a.jsx)(Pa.Text,{style:i.tableCell,children:"No especificado."}):Object(a.jsx)(Pa.Text,{style:i.tableCell,children:e.learningType})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsxs)(Pa.Text,{style:i.tableCell,children:[e.duration.hours," hrs : ",e.duration.minutes," min."]})}),Object(a.jsx)(Pa.View,{style:i.tableCol,children:"Seleccionar"===e.modality||0===e.modality.trim().length?Object(a.jsx)(Pa.Text,{style:i.tableCell,children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:i.tableCell,children:[" ",e.modality," "]})})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"Formato"})}),"Grupal"===e.format&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsx)(Pa.Text,{style:[i.tableCell,{color:"#979797"}],children:"N\xfamero de integrantes"})}),Object(a.jsx)(Pa.View,{style:i.tableCol})]})]}),Object(a.jsxs)(Pa.View,{style:i.tableRow,children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:"Seleccionar"===e.format||0===e.format.trim().length?Object(a.jsx)(Pa.Text,{style:i.tableCell,children:" No especificado. "}):Object(a.jsxs)(Pa.Text,{style:i.tableCell,children:[" ",e.format," "]})}),"Grupal"===e.format&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Pa.View,{style:i.tableCol,children:Object(a.jsxs)(Pa.Text,{style:i.tableCell,children:[" ",e.groupSize]})}),Object(a.jsx)(Pa.View,{style:i.tableCol})]})]}),Object(a.jsxs)(Pa.View,{children:[Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:20,marginBottom:5},children:"Descripci\xf3n"}),""===e.description?Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:" No especificado. "}):Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.description})]}),Object(a.jsxs)(Pa.View,{children:[Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:20,marginBottom:5},children:"Enlaces de recursos"}),0===e.resourceLinks.length?Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No se han proporcionado recursos"}):e.resourceLinks.map((function(e,r){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:10},children:"Titulo"}),Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.title}),Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:10},children:"Enlace"}),Object(a.jsx)(Pa.Link,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.link})]},"resource-".concat(r,"-task-").concat(n,"-learningnActivity").concat(t))}))]})]})})},"task-".concat(n))})),Object(a.jsxs)(Pa.View,{style:{marginLeft:50,marginRight:50},children:[Object(a.jsx)(Pa.Text,{style:{fontSize:15,color:"#979797",marginTop:5},children:"Evaluaci\xf3n de la actividad."}),Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:10},children:"Titulo"}),""===e.evaluation.title?Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.evaluation.title}),Object(a.jsx)(Pa.Text,{style:{fontSize:12,color:"#979797",marginTop:10,marginBottom:10},children:"Descripci\xf3n"}),""===e.evaluation.description?Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:"No definido."}):Object(a.jsx)(Pa.Text,{wrap:!0,style:{fontSize:12,justifyContent:"center"},children:e.evaluation.description})]})]},"learning-activity-".concat(t))})),Object(a.jsx)(Pa.View,{style:{marginTop:15},children:"teacher"===r&&Object(a.jsx)(Pa.Image,{src:n})})]}),Object(a.jsx)(Pa.Text,{style:i.pageNumber,render:function(e){var t=e.pageNumber,n=e.totalPages;return"".concat(t," / ").concat(n)},fixed:!0})]})})})},Fa=n(466),Ba=n.n(Fa),Ma=Object(R.a)((function(e){return{spaceInit:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),Wa=function(e){var t=e.imgGraphic,n=e.setPdfView,i=Ma(),c=D(),s=c.uiState,o=c.dispatch,l=s.pdf.typeUserPDF,d=Hn().designState.design,p=Object(r.useState)(null),g=Object(b.a)(p,2),m=g[0],h=g[1];m||function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba()(t.current,{width:800,height:700,scrollX:279});case 2:n=e.sent,h(n.toDataURL("image/jpeg"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();var x=function(){o({type:T.ui.setPDF,payload:null}),o({type:T.ui.toggleModal,payload:"PDF"}),n(!1)};return m?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{onClose:x,open:s.isPDFModalOpen,fullScreen:!0,children:[Object(a.jsx)(at.a,{className:i.titleMargin,children:"Exportar dise\xf1o"}),Object(a.jsx)($.a,{"aria-label":"close",className:i.closeButton,onClick:x,children:Object(a.jsx)(Tt.a,{})}),Object(a.jsx)(rt.a,{dividers:!0,children:Object(a.jsx)(Pa.PDFViewer,{width:"100%",height:"100%",children:void 0!==t&&Object(a.jsx)(Ra,{design:d,img:m,typeUserPDF:l})})}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:x,children:"Cancelar"}),Object(a.jsx)("div",{className:i.spaceInit,children:Object(a.jsx)(Pa.PDFDownloadLink,{document:Object(a.jsx)(Ra,{design:d,img:m,typeUserPDF:l}),fileName:"designdata.pdf",children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Cargando documento...":Object(a.jsx)(H.a,{variant:"contained",children:" Descargar "})}})})]})]})}):Object(a.jsx)("div",{children:" Cargando..."})},Va=Object(R.a)((function(e){return{spaceResource:{marginTop:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},tooltip:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},icon:{maxHeight:"25px",minHeight:"25px",minWidth:"25px",maxWidth:"25px"},resourceLinkGrid:{display:"grid",gridTemplateColumns:"95% 5%"}}})),za=function(e){var t=e.index,n=e.resource,r=e.newResource,i=e.setNewResource,c=Va();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:c.spaceResource,children:Object(a.jsxs)(z.a,{children:[Object(a.jsxs)("div",{className:c.resourceLinkGrid,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"title",value:n.title,onChange:function(e){return function(e){var n=e.target.value;i((function(e){return e.map((function(e,a){return a===t&&(e.title=n),e}))}))}(e)},label:"T\xedtulo",type:"text",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"link",value:n.link,onChange:function(e){return function(e){var n=e.target.value;i((function(e){return e.map((function(e,a){return a===t&&(e.link=n),e}))}))}(e)},label:"Enlace",type:"text",fullWidth:!0})]}),Object(a.jsx)("div",{children:Object(a.jsx)(Se.a,{display:"flex",flexDirection:"row-reverse",children:Object(a.jsx)(Se.a,{children:Object(a.jsx)(Rn.a,{title:"Eliminar recurso",className:c.tooltip,children:Object(a.jsx)($.a,{onClick:function(){return function(e){e===r.length-1?i(Object(jt.a)(r.slice(0,e))):i([].concat(Object(jt.a)(r.slice(0,e)),Object(jt.a)(r.slice(e+1,r.length))))}(t)},children:Object(a.jsx)(re.a,{className:c.icon})})})})})})]}),Object(a.jsx)(G.a,{style:{marginTop:10}})]})},t)})},qa=Object(R.a)((function(e){return{spaceInit:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},buttonZone:Object(C.a)({width:"100%",display:"flex",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexWrap:"wrap"}),resourceZone:Object(C.a)({height:"auto"},e.breakpoints.up("xs"),{height:"90%",overflow:"auto",overflowX:"hidden"}),contentSpace:Object(C.a)({height:"auto",paddingBottom:e.spacing(6)},e.breakpoints.up("xs"),{height:"calc(100vh - 500px)",overflow:"auto"})}})),Qa=function(){var e=qa(),t=D(),n=t.uiState,i=t.dispatch,c=n.resourceLink,s=c.learningActivityIndex,o=c.taskIndex,l=Hn().designState.design,d=Object(r.useState)(Object(jt.a)(l.data.learningActivities[s].tasks[o].resourceLinks)),u=Object(b.a)(d,2),j=u[0],p=u[1],g=w().socket,m=Object(me.b)().enqueueSnackbar,h=function(){p(Object(jt.a)(l.data.learningActivities[s].tasks[o].resourceLinks)),i({type:T.ui.setResourceLink,payload:{learningActivityIndex:null,taskIndex:null}}),i({type:T.ui.toggleModal,payload:"Resource"})};return Object(a.jsx)("div",{children:Object(a.jsxs)(nt.a,{onClose:h,open:n.isResourceModalOpen,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(at.a,{children:"Administrar Recursos"}),Object(a.jsx)($.a,{"aria-label":"close",className:e.closeButton,onClick:h,children:Object(a.jsx)(Tt.a,{})}),Object(a.jsx)(rt.a,{dividers:!0,children:Object(a.jsxs)(z.a,{className:e.contentSpace,children:[Object(a.jsx)("div",{className:e.buttonZone,children:Object(a.jsx)(H.a,{variant:"outlined",color:"primary",onClick:function(){p([].concat(Object(jt.a)(j),[{title:"",link:""}]))},children:"Agregar recurso"})}),Object(a.jsx)(Se.a,{className:e.resourceZone,children:Object(a.jsx)(Se.a,{children:j.map((function(e,t){return Object(a.jsx)(za,{index:t,resource:e,newResource:j,setNewResource:p},"resource-".concat(t,"-task-").concat(o,"-learningActivity-").concat(s))}))})})]})}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:h,children:"Cancelar"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){g.emit("change-resource-in-task",{designId:l._id,learningActivityIndex:s,taskIndex:o,resources:Object(jt.a)(j)}),i({type:T.ui.toggleModal,payload:"Resource"}),m("Se ha agregado su recurso correctamente",{variant:"success",autoHideDuration:2e3})},children:"Guardar recursos"})]})]})})},Ha=Object(R.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),Ga=function(){var e=Ha(),t=D(),n=t.uiState,i=t.dispatch,c=Hn().designState.design,s=w().socket,o=Object(me.b)().enqueueSnackbar,l=n.evaluationData.learningActivityIndex,d=Object(r.useState)(c.data.learningActivities[l].evaluation),u=Object(b.a)(d,2),j=u[0],p=u[1],g=function(){p(c.data.learningActivities[l].evaluation),i({type:T.ui.setEvaluation,payload:{learningActivityIndex:null}}),i({type:T.ui.toggleModal,payload:"Evaluation"})};return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{onClose:g,open:n.isEvaluationModalOpen,fullWidth:!0,maxWidth:"md",children:[Object(a.jsx)(at.a,{children:"Evaluaci\xf3n de la actividad."}),Object(a.jsx)($.a,{"aria-label":"close",className:e.closeButton,onClick:g,children:Object(a.jsx)(Tt.a,{})}),Object(a.jsxs)(rt.a,{dividers:!0,children:[Object(a.jsx)(q.a,{color:"textSecondary",style:{marginBottom:10},children:" Lorem ipsum dolor sit amet consectetur adipiscing elit dapibus leo pharetra semper, nisl vivamus sodales vitae morbi libero quis et eu. Magna hendrerit congue odio placerat mus auctor donec iaculis, primis feugiat metus et etiam arcu erat, natoque malesuada rhoncus fames ultricies porta montes. Habitant tellus imperdiet eget himenaeos scelerisque tincidunt et habitasse posuere metus, potenti enim diam euismod est nostra magnis inceptos accumsan odio, nisi quis litora fusce montes class orci phasellus curae. Congue facilisi metus ante mattis ad nec inceptos, lacinia arcu tempor enim a suscipit, curabitur dignissim feugiat purus proin habitasse."}),Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"title",value:j.title,onChange:function(e){return function(e){var t=e.target.value;p(Object(S.a)(Object(S.a)({},j),{},{title:t}))}(e)},label:"T\xedtulo",type:"text",fullWidth:!0}),Object(a.jsx)(it.a,{variant:"outlined",margin:"dense",name:"description",value:j.description,onChange:function(e){return function(e){var t=e.target.value;p(Object(S.a)(Object(S.a)({},j),{},{description:t}))}(e)},label:"Descripci\xf3n",type:"text",fullWidth:!0,multiline:!0,rows:4})]}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:g,children:"Cancelar"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){s.emit("add-evaluation-in-activity",{designId:c._id,learningActivityID:c.data.learningActivities[l].id,evaluation:j}),i({type:T.ui.toggleModal,payload:"Evaluation"}),o("Se ha agregado su evaluaci\xf3n correctamente",{variant:"success",autoHideDuration:2e3})},children:"Guardar evaluaci\xf3n."})]})]})})},Ua=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:Object(C.a)({paddingLeft:15,paddingRight:15,position:"relative",background:e.palette.background.workSpace,paddingBottom:e.spacing(6),height:"auto"},e.breakpoints.up("md"),{height:"calc(100vh - 177px)",overflow:"auto"}),rightPanel:{display:"flex",position:"relative",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.paper},buttonGroupWorkSpace:{height:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1)},textLeftPanel:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},spaceData:{marginBottom:e.spacing(1),borderBottom:"2px solid ".concat(e.palette.divider)},LeftPanelMetadata:{marginTop:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2)},textLeftPanelMetadata:{marginTop:e.spacing(3)},graphicsSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},betweenGraphics:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},workSpaceUnits:Object(C.a)({height:"auto"},e.breakpoints.up("md"),{height:"85%",overflow:"auto",overflowX:"hidden"}),buttonZone:Object(C.a)({width:"100%",display:"flex",justifyContent:"space-between",marginBottom:15},e.breakpoints.down("md"),{flexWrap:"wrap"}),fab:{position:"absolute",bottom:5,right:e.spacing(2)}}})),Ka=function(){var e=Ua(),t=Hn().designState.design,n=t.metadata,i=w().socket,c=Object(me.b)().enqueueSnackbar,s=Object(Bn.a)(),o=Object(Pn.a)(s.breakpoints.down("md")),l=D(),d=l.uiState,u=l.dispatch,j=Object(r.useState)(null),p=Object(b.a)(j,2),g=p[0],m=p[1],h=Object(r.useRef)(),x=_t().userConfig,f=Object(r.useState)(!1),O=Object(b.a)(f,2),v=O[0],y=O[1],k=!1,C=!1,S=!1,A=function(e){y(!0),N(),u({type:T.ui.setPDF,payload:e}),u({type:T.ui.toggleModal,payload:"PDF"})},N=function(){m(null)};return t.data.learningActivities.forEach((function(e){void 0!==e.tasks&&e.tasks.forEach((function(e){""!==e.learningType&&"Seleccionar"!==e.learningType&&(k=!0),""!==e.format&&"Seleccionar"!==e.format&&(C=!0),""!==e.modality&&"Seleccionar"!==e.modality&&(S=!0)}))})),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.leftPanel,children:[Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(q.a,{className:e.textLeftPanel,children:" INFORMACI\xd3N DISE\xd1O "})}),Object(a.jsx)(G.a,{className:e.spaceData}),Object(a.jsxs)(z.a,{className:e.LeftPanelMetadata,children:[Object(a.jsx)(z.a,{children:n&&n.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",children:" Nombre "}),Object(a.jsx)(q.a,{variant:"body2",children:n.name}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.category&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:"Tema"}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.category.name," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.workingTime&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Tiempo de trabajo "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.workingTime.hours," : ",n.workingTime.minutes]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.workingTimeDesign&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:"Tiempo de trabajo Dise\xf1o"}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.workingTimeDesign.hours," : ",n.workingTimeDesign.minutes]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Modo de entrega "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.name," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Tama\xf1o de la clase "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.classSize," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.priorKnowledge&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Conocimiento Previo "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.priorKnowledge," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:e.textLeftPanelMetadata,children:" Descripci\xf3n "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",n.description," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:n&&n.objective&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{color:"textSecondary",className:e.textLeftPanelMetadata,children:" Objetivos "}),Object(a.jsxs)(q.a,{children:[" ",n.objective," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{})]})]}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.workspace,children:[Object(a.jsxs)("div",{className:e.buttonZone,children:[Object(a.jsxs)(Te.a,{variant:"selectedMenu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:N,children:[Object(a.jsx)(Ae.a,{onClick:function(){return A("teacher")},children:"PDF Docente"}),Object(a.jsx)(Ae.a,{onClick:function(){return A("student")},children:"PDF Estudiante"})]}),Object(a.jsxs)(Q.a,{size:"small",fullWidth:o,className:e.buttonGroupWorkSpace,children:[Object(a.jsx)(H.a,{onClick:function(e){m(e.currentTarget)},children:"Exportar"}),Object(a.jsx)(H.a,{onClick:function(){u({type:T.ui.toggleModal,payload:"Share"})},children:"Compartir"}),Object(a.jsx)(H.a,{onClick:function(e){i.emit("save-design",{designId:t._id}),c("Su dise\xf1o se ha guardado correctamente",{variant:"success",autoHideDuration:2e3})},children:"Guardar"})]})]}),Object(a.jsx)(Se.a,{id:"learningActivities",className:e.workSpaceUnits,children:Object(a.jsx)(Se.a,{children:Object(a.jsx)(z.a,{className:e.workSpaceUnits,children:Object(a.jsx)(z.a,{children:t.data.learningActivities&&t.data.learningActivities.map((function(e,t){return Object(a.jsx)(Ca,{index:t,learningActivity:e},"learningActivity-".concat(t))}))})})})}),Object(a.jsx)(Rn.a,{title:"Agregar actividad de aprendizaje",arrow:!0,children:Object(a.jsx)(Fn.a,{color:"primary",className:e.fab,onClick:function(){var e=wa()().toString();i.emit("new-learningActivity",{designId:t._id,id:e})},children:Object(a.jsx)(va.a,{})})})]}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:3,lg:2,className:e.rightPanel,children:[(ma.forEach((function(e){e.value=0})),ha.forEach((function(e){e.value=0})),xa.forEach((function(e){e.value=0})),void fa.forEach((function(e){e.value=0}))),Object(a.jsx)("div",{style:{position:"absolute",zIndex:1,width:"100%"},children:Object(a.jsxs)(z.a,{className:e.graphicsSpacing,children:[t.data.learningActivities&&t.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),ha.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),xa.forEach((function(t){t.title===e.format&&(t.value=t.value+1)})),fa.forEach((function(t){t.title===e.modality&&(t.value=t.value+1)}))}))})),k&&Object(a.jsx)("div",{className:e.betweenGraphics,children:Object(a.jsx)(Aa,{items:ha,colorGraphicToPdf:!0})}),C&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[Object(a.jsx)(q.a,{children:"Formato"}),Object(a.jsx)(ga,{items:xa,type:"Format",legends:!0,colorGraphicToPdf:!0})]}),S&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[Object(a.jsx)(q.a,{children:"Modalidad"}),Object(a.jsx)(ga,{items:fa,type:"Modality",legends:!0,colorGraphicToPdf:!0})]})]})}),Object(a.jsx)("div",{style:{zIndex:0,width:"100%"},children:Object(a.jsxs)(z.a,{className:e.graphicsSpacing,ref:h,children:[t.data.learningActivities&&t.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),ha.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),xa.forEach((function(t){t.title===e.format&&(t.value=t.value+1)})),fa.forEach((function(t){t.title===e.modality&&(t.value=t.value+1)}))}))})),k&&Object(a.jsx)("div",{className:e.betweenGraphics,children:Object(a.jsx)(Aa,{items:ha,colorGraphicToPdf:!1})}),C&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[x.darkTheme?Object(a.jsx)(q.a,{style:{color:"#000000"},children:"Formato"}):Object(a.jsx)(q.a,{children:"Formato"}),Object(a.jsx)(ga,{items:xa,type:"Format",legends:!0,colorGraphicToPdf:!1})]}),S&&Object(a.jsxs)("div",{className:e.betweenGraphics,children:[x.darkTheme?Object(a.jsx)(q.a,{style:{color:"#000000"},children:"Modalidad"}):Object(a.jsx)(q.a,{children:"Modalidad"}),Object(a.jsx)(ga,{items:fa,type:"Modality",legends:!0,colorGraphicToPdf:!1})]})]})})]}),Object(a.jsx)(La,{}),v&&Object(a.jsx)(Wa,{imgGraphic:h,setPdfView:y}),d.isResourceModalOpen&&Object(a.jsx)(Qa,{}),d.isEvaluationModalOpen&&Object(a.jsx)(Ga,{})]})})},Za=Object(R.a)((function(e){return{root:{position:"relative",padding:20,width:"49%",marginBottom:10,borderRadius:5,border:"1px solid ".concat(e.palette.divider)},description:{overflow:"hidden",textOverflow:"ellipsis",textAlign:"justify"},actions:{position:"absolute",top:8,right:8}}})),Xa=function(e){var t=e.verb,n=e.description,r=e.index,i=Za(),c=w().socket,s=D().dispatch,o=Hn(),l=o.designState,d=o.dispatch,u=l.design;return Object(a.jsxs)("div",{className:i.root,children:[Object(a.jsx)(q.a,{color:"textSecondary",gutterBottom:!0,variant:"caption",children:"Resultado"}),Object(a.jsx)(q.a,{variant:"body2",children:t}),Object(a.jsx)(q.a,{color:"textSecondary",gutterBottom:!0,variant:"caption",children:"Descripci\xf3n"}),Object(a.jsx)(q.a,{className:i.description,variant:"body2",children:n}),Object(a.jsxs)("div",{className:i.actions,children:[Object(a.jsx)($.a,{className:i.deleteIcon,onClick:function(){var e=l.bloomVerbs,a=l.bloomCategories.find((function(n){return n._id===e.find((function(e){return e.name===t})).category}))._id;d({type:T.design.setCurrentLearningResult,payload:{category:a,verb:t,description:n,editing:!0,index:r}}),s({type:T.ui.toggleModal,payload:"LearningResult"})},children:Object(a.jsx)(De.a,{})}),Object(a.jsx)($.a,{className:i.deleteIcon,onClick:function(){var e=0;u.metadata.results.forEach((function(a,r){a.verb===t&&a.description===n&&(e=r)})),c.emit("delete-learning-result",{designId:u._id,index:e})},children:Object(a.jsx)(re.a,{})})]})]})},Ja=n(1029),Ya=n(1005),_a=n(1019),$a=Object(R.a)((function(e){return{root:{width:"100%",height:300,clipPath:"polygon(50% 0, 0 100%, 100% 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},option:{backgroundColor:e.palette.primary.main,marginBottom:10,width:"100%",display:"flex",justifyContent:"center",alignItems:"center","&:hover":{transition:"box-shadow .3s",cursor:"pointer",boxShadow:"0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)"}},crear:{paddingTop:30,height:"25%"},evaluar:{height:"16.6%"},analizar:{height:"16.6%"},aplicar:{height:"16.6%"},comprender:{height:"16.6%"},recordar:{height:"16.6%"},active:{boxShadow:"0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)",backgroundColor:e.palette.secondary.light,color:"white"}}})),er=function(){var e=$a(),t=Hn(),n=t.designState,r=t.dispatch,i=n.currentLearningResult.category,c=n.bloomCategories;return Object(a.jsx)("div",{className:e.root,children:c.map((function(t){var n=i===t._id;return Object(a.jsx)("div",{onClick:function(){return e=n?null:t._id,void r({type:T.design.setCurrentLearningResultField,payload:{field:"category",value:e}});var e},className:"".concat(e.option," ").concat(e[t.name.toLowerCase()]," ").concat(n&&e.active),children:t.name},t._id)}))})},tr=n(1014),nr=Object(R.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"center"},option:{minWidth:"25%"}}})),ar=function(){var e=nr(),t=Hn(),n=t.designState,r=t.dispatch,i=n.currentLearningResult.category,c=n.currentLearningResult.verb,s=n.bloomVerbs;return Object(a.jsx)("div",{className:e.root,children:s.filter((function(e){return e.category===i})).map((function(t){var n=c===t.name;return Object(a.jsx)(zt.a,{className:e.option,value:t.name,control:Object(a.jsx)(tr.a,{checked:n,onChange:function(e){return n=t.name,void r({type:T.design.setCurrentLearningResultField,payload:{field:"verb",value:n}});var n},value:t.name}),label:t.name},t._id)}))})},rr=Object(R.a)((function(e){return{title:{display:"flex",justifyContent:"space-between"},close:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),ir=function(e){var t,n=e.design,i=e.isOpen,c=rr(),s=w().socket,o=Hn(),l=o.designState,d=o.dispatch,u=D().dispatch,j=l.currentLearningResult,p=j.category,g=j.verb,m=j.editing,h=j.index,x=Object(r.useState)(null!==(t=l.currentLearningResult.description)&&void 0!==t?t:""),f=Object(b.a)(x,2),O=f[0],v=f[1],y=Object(r.useState)(0),k=Object(b.a)(y,2),C=k[0],S=k[1],A=["Selecciona una categor\xeda de bloom","Selecciona un verbo","Proporciona una descripci\xf3n"];Object(r.useEffect)((function(){v(l.currentLearningResult.description)}),[v,l.currentLearningResult.description]);var N=function(){u({type:T.ui.toggleModal,payload:"LearningResult"}),S(0),d({type:T.design.clearCurrentLearningResult})};return Object(a.jsxs)(nt.a,{fullWidth:!0,open:i,onClose:N,"aria-labelledby":"form-dialog-title",children:[Object(a.jsxs)("div",{className:c.title,children:[Object(a.jsx)(at.a,{id:"form-dialog-title",onClose:N,children:m?"Editar resultado de aprendizaje":"Nuevo resultado de aprendizaje"}),Object(a.jsx)($.a,{className:c.close,"aria-label":"close",onClick:N,children:Object(a.jsx)(st.a,{})})]}),Object(a.jsxs)(rt.a,{children:[Object(a.jsx)(Ja.a,{activeStep:C,alternativeLabel:!0,children:A.map((function(e){return Object(a.jsx)(Ya.a,{children:Object(a.jsx)(_a.a,{children:e})},e)}))}),0===C?Object(a.jsx)(er,{}):1===C?Object(a.jsx)(ar,{}):Object(a.jsx)(it.a,{multiline:!0,rows:6,variant:"outlined",name:"description",value:null!==O&&void 0!==O?O:"",onChange:function(e){var t=e.target;return v(t.value)},label:"Descripci\xf3n",type:"text",fullWidth:!0})]}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{disabled:0===C,onClick:function(){S((function(e){return e-1}))},children:"Volver"}),C===A.length-1?Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){if(""===O.trim())return console.log("No se ha ingresado una descripci\xf3n.");d({type:T.design.setCurrentLearningResultField,payload:{field:"description",value:O}}),m?m&&s.emit("edit-learning-result",{designId:n._id,index:h,learningResult:{verb:g,description:O}}):s.emit("add-learning-result",{designId:n._id,learningResult:{verb:g,description:O}}),N()},children:"Finalizar"}):Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:function(){return 0===C&&null===p?console.log("No ha seleccionado una categor\xeda de bloom."):1===C&&""===g?console.log("No ha seleccionado un verbo de bloom."):void S((function(e){return e+1}))},children:"Siguiente"})]})]})},cr=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingTop:15,paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 64px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},title:{display:"flex",justifyContent:"space-between",alignItems:"center"},content:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",marginTop:10,marginBottom:10},grid:{display:"flex",alignItems:"center"},category:{width:"100%"},categoryPopOver:{maxHeight:400},timeField:{marginRight:10,display:"flex",alignItems:"center"},clickHere:{textDecoration:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}}}})),sr=Object(r.forwardRef)((function(e,t){var n,i,c,s,o,l,d=cr(),p=w().socket,g=x().authState,m=Object(r.useRef)(!0),h=D(),f=h.uiState,O=h.dispatch,v=Hn().designState.design,y=v.metadata,k=Object(me.b)().enqueueSnackbar,C=Object(r.useRef)(),A=Object(r.useRef)(),N=Object(r.useRef)(),E=Object(r.useRef)(),I=Object(r.useRef)(),L=Object(r.useRef)(),P=Object(r.useRef)(),R=Ct({name:y.name,category:null!==(n=y.category.name)&&void 0!==n?n:"Sin categor\xeda",classSize:y.classSize,workingTimeDesignHours:null!==(i=y.workingTimeDesign.hours)&&void 0!==i?i:0,workingTimeDesignMinutes:null!==(c=y.workingTimeDesign.minutes)&&void 0!==c?c:0,workingTimeHours:null!==(s=y.workingTime.hours)&&void 0!==s?s:0,workingTimeMinutes:null!==(o=y.workingTime.minutes)&&void 0!==o?o:0,priorKnowledge:y.priorKnowledge,description:y.description,objective:y.objective,isPublic:y.isPublic,keywords:null!==(l=v.keywords)&&void 0!==l?l:[]}),F=Object(b.a)(R,4),B=F[0],M=F[1],W=F[3];Object(r.useImperativeHandle)(t,(function(){return{clearEditors:function(){var e,t,n,a,r,i,c;null===C||void 0===C||null===(e=C.current)||void 0===e||e.clearText(),null===A||void 0===A||null===(t=A.current)||void 0===t||t.clearText(),null===N||void 0===N||null===(n=N.current)||void 0===n||n.clearText(),null===E||void 0===E||null===(a=E.current)||void 0===a||a.clearText(),null===I||void 0===I||null===(r=I.current)||void 0===r||r.clearText(),null===L||void 0===L||null===(i=L.current)||void 0===i||i.clearText(),null===P||void 0===P||null===(c=P.current)||void 0===c||c.clearText()}}})),Object(r.useEffect)((function(){return function(){m.current=!1}}),[]);var V=Object(r.useCallback)((function(e){M({target:{name:"keywords",value:e}})}),[M]);Object(r.useEffect)((function(){m.current&&JSON.stringify(B.keywords)!==JSON.stringify(v.keywords)&&V(Object(jt.a)(v.keywords))}),[v.keywords,B.keywords,V]),Object(r.useEffect)((function(){var e;m.current&&(B.category!==y.category.name&&M({target:{name:"category",value:null!==(e=y.category.name)&&void 0!==e?e:"Sin categor\xeda"}}))}),[y.category,B.category,W,M]),Object(r.useEffect)((function(){m.current&&B.name!==y.name&&M({target:{name:"name",value:y.name}})}),[y.name,B.name,W,M]),Object(r.useEffect)((function(){m.current&&B.classSize!==y.classSize&&M({target:{name:"classSize",value:y.classSize}})}),[y.classSize,B.classSize,W,M]),Object(r.useEffect)((function(){m.current&&B.description!==y.description&&M({target:{name:"description",value:y.description}})}),[y.description,B.description,W,M]),Object(r.useEffect)((function(){m.current&&B.workingTimeDesignHours!==y.workingTimeDesign.hours&&M({target:{name:"workingTimeDesignHours",value:y.workingTimeDesign.hours}})}),[y.workingTimeDesign,B.workingTimeDesignHours,W,M]),Object(r.useEffect)((function(){var e;m.current&&(B.workingTimeDesignMinutes!==y.workingTimeDesign.minutes&&M({target:{name:"workingTimeDesignMinutes",value:null!==(e=y.workingTimeDesign.minutes)&&void 0!==e?e:0}}))}),[y.workingTimeDesign,B.workingTimeDesignMinutes,W,M]),Object(r.useEffect)((function(){var e;m.current&&(B.workingTimeHours!==y.workingTime.hours&&M({target:{name:"workingTimeHours",value:null!==(e=y.workingTime.hours)&&void 0!==e?e:0}}))}),[y.workingTime.hours,B.workingTimeHours,W,M]),Object(r.useEffect)((function(){var e;m.current&&(B.workingTimeMinutes!==y.workingTime.minutes&&M({target:{name:"workingTimeMinutes",value:null!==(e=y.workingTime.minutes)&&void 0!==e?e:0}}))}),[y.workingTime.minutes,B.workingTimeMinutes,W,M]),Object(r.useEffect)((function(){m.current&&B.priorKnowledge!==y.priorKnowledge&&M({target:{name:"priorKnowledge",value:y.priorKnowledge}})}),[y.priorKnowledge,B.priorKnowledge,W,M]),Object(r.useEffect)((function(){m.current&&B.objective!==y.objective&&M({target:{name:"objective",value:y.objective}})}),[y.objective,B.objective,W,M]),Object(r.useEffect)((function(){m.current&&B.isPublic!==y.isPublic&&M({target:{name:"isPublic",value:y.isPublic}})}),[y.isPublic,B.isPublic,W,M]);var Q=B.name,U=B.category,Z=B.classSize,J=B.workingTimeDesignHours,Y=B.workingTimeDesignMinutes,_=B.workingTimeHours,$=B.workingTimeMinutes,ee=B.priorKnowledge,te=B.description,ne=B.objective,ae=B.isPublic,re=B.keywords,ie=Object(K.a)("categories",Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),ce=ie.isLoading,se=ie.isError,oe=ie.data,le=ie.error;if(se)return Object(a.jsx)(q.a,{children:le.message});if(ce)return Object(a.jsx)(q.a,{children:"Cargando..."});var de=function(e){var t=e.target,n=t.name,a=t.value;a="number"!==t.type||isNaN(t.value)?"checkbox"===t.type?t.checked:t.value:parseInt(t.value);var r={target:{name:t.name,value:a}},i=null;switch(n){case"workingTimeHours":n="workingTime",i="hours",a=isNaN(a)?0:a;break;case"workingTimeMinutes":n="workingTime",i="minutes",a=isNaN(a)?0:a;break;case"category":a=oe.categories.find((function(e){return e.name===a}))}p.emit("edit-metadata-field",{designId:v._id,field:n,value:a,subfield:i}),i?v.metadata[n]&&v.metadata[n][i]&&v.metadata[n][i].toString()===a.toString()||M(r):v.metadata[n]&&v.metadata[n].toString()===a.toString()||M(r)},ue=function(){return O({type:T.ui.toggleModal,payload:"LearningResult"})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:d.leftPanel}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:d.workspace,children:[Object(a.jsxs)("div",{className:d.title,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Informaci\xf3n Dise\xf1o"}),Object(a.jsx)(H.a,{variant:"outlined",color:"default",onClick:function(e){p.emit("save-design",{designId:v._id}),k("Su dise\xf1o se ha guardado correctamente",{variant:"success",autoHideDuration:2e3})},children:"Guardar Informaci\xf3n"})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(z.a,{container:!0,spacing:3,className:d.content,children:[Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,sm:9,children:Object(a.jsx)(it.a,{label:"Nombre",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:C,name:"name",placeholder:"Nombre",initialvalue:Q,onChange:de}}})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,sm:3,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(q.a,{variant:"body2",children:"Visibilidad"}),Object(a.jsx)(zt.a,{control:Object(a.jsx)(qt.a,{name:"isPublic",checked:ae,onChange:de,disabled:!(v.owner===g.user.uid)}),label:ae?"P\xfablico":"Privado"})]})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsxs)(Wn.a,{className:d.category,variant:"outlined",children:[Object(a.jsx)(Vn.a,{id:"category-label",children:"Categor\xeda"}),Object(a.jsx)(zn.a,{labelId:"category-label",name:"category",label:"Categor\xeda",value:U,onChange:de,MenuProps:{classes:{paper:d.categoryPopOver}},children:null==oe||0===oe.categories.length?Object(a.jsx)(Ae.a,{value:"Sin categor\xeda",children:"Sin categor\xeda"}):oe.categories.map((function(e){return Object(a.jsx)(Ae.a,{value:e.name,children:e.name},e._id)}))})]})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsx)(it.a,{label:"Tama\xf1o de la clase",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:A,name:"classSize",placeholder:"Tama\xf1o de la clase",initialvalue:null!==Z&&void 0!==Z?Z:0,type:"number",min:0,onChange:de}}})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(q.a,{children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:d.timeField,children:[Object(a.jsx)(it.a,{label:"Horas",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:N,name:"workingTimeHours",placeholder:"Horas",initialvalue:_,type:"number",min:0,onChange:de}}}),Object(a.jsx)(q.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsx)(it.a,{label:"Minutos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:E,name:"workingTimeMinutes",placeholder:"Minutos",initialvalue:$,type:"number",min:0,max:59,onChange:de}}})]})]})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(q.a,{children:" Tiempo dise\xf1ado "}),Object(a.jsxs)("div",{className:d.timeField,children:[Object(a.jsx)(it.a,{variant:"outlined",InputLabelProps:{shrink:!0},name:"workingTimeDesignHours",value:J,label:"Horas",type:"number",disabled:!0,fullWidth:!0}),Object(a.jsx)(q.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsx)(it.a,{variant:"outlined",InputLabelProps:{shrink:!0},name:"workingTimeDesignMinutes",value:Y,label:"Minutos",type:"number",disabled:!0,fullWidth:!0})]})]})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,children:Object(a.jsx)(it.a,{label:"Descripci\xf3n",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:L,name:"description",placeholder:"Descripci\xf3n",initialvalue:null!==te&&void 0!==te?te:"",rowMax:5,onChange:de,multiline:!0}}})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsx)(it.a,{label:"Conocimiento previo",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:I,name:"priorKnowledge",placeholder:"Conocimiento previo",initialvalue:null!==ee&&void 0!==ee?ee:"",rowMax:5,onChange:de,multiline:!0}}})}),Object(a.jsx)(z.a,{item:!0,className:d.grid,xs:12,md:12,lg:6,children:Object(a.jsx)(it.a,{label:"Objetivos",InputLabelProps:{shrink:!0},fullWidth:!0,margin:"none",variant:"outlined",color:"primary",InputProps:{inputComponent:ua,inputProps:{ref:P,name:"objective",placeholder:"Objetivos",initialvalue:null!==ne&&void 0!==ne?ne:"",rowMax:5,onChange:de,multiline:!0}}})})]}),Object(a.jsx)(Cn,{keywords:re,onChangeKeywords:function(e,t,n){"add"===t?p.emit("add-design-keyword",{designId:v._id,keyword:n}):"remove"===t&&p.emit("remove-design-keyword",{designId:v._id,keyword:n})}}),Object(a.jsxs)("div",{className:d.title,children:[Object(a.jsx)(q.a,{variant:"h4",children:"Resultados de aprendizaje"}),Object(a.jsx)(H.a,{variant:"outlined",color:"default",onClick:ue,children:"Agregar"})]}),Object(a.jsx)(G.a,{}),Object(a.jsx)("div",{className:d.content,children:0===y.results.length?Object(a.jsxs)(fe.a,{severity:"info",style:{width:"100%",display:"flex",justifyContent:"center"},children:["Este dise\xf1o a\xfan no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click "," ",Object(a.jsx)(X.a,{className:d.clickHere,onClick:ue,children:"aqu\xed"}),"!"]}):y.results.map((function(e,t){return Object(a.jsx)(Xa,Object(S.a)({index:t},e),"learning-result-".concat(t))}))})]}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2,className:d.rightPanel})]},v._id),Object(a.jsx)(ir,{design:v,isOpen:f.isLearningResultModalOpen})]})})),or=function(e){var t=e.children,n=e.value,r=e.index,i=Object(M.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(S.a)(Object(S.a)({role:"tabpanel",hidden:n!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},i),{},{children:n===r&&Object(a.jsx)(q.a,{component:"span",children:t})}))},lr=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("bloom/category");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error(t.message);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),dr=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("bloom/verb",{category:t},"POST");case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.message);case 5:return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ur=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:{paddingLeft:30,paddingRight:30,background:e.palette.background.workSpace,minHeight:"calc(100vh - 64px)"},rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider)},menu:{borderBottom:"1px solid ".concat(e.palette.divider)},menuLetters:{marginLeft:e.spacing(2),marginBottom:e.spacing(1)},menuLettersSelected:{marginLeft:e.spacing(2),borderBottom:"2px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},usersConnecteds:{display:"flex"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start",minHeight:"calc(100vh - 128px)"}}})),jr=function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}},br=function(){var e=ur(),t=Object(r.useRef)(!0),n=Object(r.useRef)(),i=Object(P.i)().id,c=ea(),s=c.doc,o=c.provider,l=c.connectToDesign,d=c.clearDoc,p=x().authState,g=w(),m=g.socket,h=g.online,f=Object(r.useState)([]),O=Object(b.a)(f,2),v=O[0],y=O[1],k=Object(r.useState)(0),C=Object(b.a)(k,2),A=C[0],N=C[1],D=Hn(),E=D.designState,I=D.dispatch,L=E.design,R=Object(r.useState)(null),F=Object(b.a)(R,2),B=F[0],M=F[1],W=Object(r.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr();case 2:t=e.sent,I({type:T.design.setBloomCategories,payload:t.bloomCategories});case 4:case"end":return e.stop()}}),e)}))),[I]),V=Object(r.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr("");case 2:t=e.sent,I({type:T.design.setBloomVerbs,payload:t.bloomVerbs});case 4:case"end":return e.stop()}}),e)}))),[I]);Object(r.useEffect)((function(){W(),V()}),[W,V]),Object(r.useEffect)((function(){var e=n.current;return function(){null===e||void 0===e||e.clearEditors(),d(),t.current=!1}}),[d]),Object(r.useEffect)((function(){h&&(null===m||void 0===m||m.emit("join-to-design",{user:p.user,designId:i,public:!1},(function(e){if(e.data){var n=e.data.design.privileges.find((function(e){return e.user._id===p.user.uid}));e.ok&&n&&0===n.type?t.current&&(I({type:T.design.updateDesign,payload:e.data.design}),l(i)):M(e.message)}else M(e.message)})))}),[m,p.user,p._id,h,i,I,l]),Object(r.useEffect)((function(){return null===m||void 0===m||m.on("update-design",(function(e){t.current&&I({type:T.design.updateDesign,payload:e})})),null===m||void 0===m||m.on("add-design-keyword",(function(e){t.current&&I({type:T.design.addDesignKeyword,payload:e})})),null===m||void 0===m||m.on("remove-design-keyword",(function(e){t.current&&I({type:T.design.removeDesignKeyword,payload:e})})),null===m||void 0===m||m.on("edit-metadata-field",(function(e){var n=e.field,a=e.value,r=e.subfield;t.current&&I({type:T.design.changeMetadataField,payload:{field:n,value:a,subfield:r}})})),null===m||void 0===m||m.on("edit-task-field",(function(e){var n=e.learningActivityID,a=e.taskID,r=e.field,i=e.value,c=e.subfield;t.current&&I({type:T.design.changeTaskField,payload:{learningActivityID:n,taskID:a,field:r,value:i,subfield:c}})})),null===m||void 0===m||m.on("users",(function(e){t.current&&y(e)})),null===m||void 0===m||m.on("change-design-privileges",(function(e){I({type:T.design.setDesignPrivileges,payload:e})})),null===m||void 0===m||m.on("change-read-only-link",(function(e){t.current&&I({type:T.design.updateReadOnlyLink,payload:e})})),function(){null===m||void 0===m||m.emit("leave-from-design",{user:p.user,designId:i}),null===m||void 0===m||m.off("updateDesign"),null===m||void 0===m||m.off("edit-metadata-field"),null===m||void 0===m||m.off("add-design-keyword"),null===m||void 0===m||m.off("remove-design-keyword"),null===m||void 0===m||m.off("change-read-only-link"),null===m||void 0===m||m.off("edit-task-field"),null===m||void 0===m||m.off("users")}}),[m,p.user,i,I]);return B?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(fe.a,{severity:"error",children:B})}):L&&s&&o?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{container:!0,className:e.menu,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.tabBar,children:[Object(a.jsxs)(In.a,{value:A,onChange:function(e,t){N(t)},"aria-label":"full width tabs example",children:[Object(a.jsx)(Ln.a,Object(S.a)({label:"METADATOS"},jr(0))),Object(a.jsx)(Ln.a,Object(S.a)({label:"DISE\xd1O"},jr(1)))]}),Object(a.jsx)("div",{className:e.usersConnecteds,children:v.map((function(e,t){var n;return Object(a.jsx)(te.a,{alt:ie(e.name,e.lastname),src:null!==(n=e.img)&&void 0!==n?n:"",children:ce(e.name,e.lastname)},e.uid+t)}))})]}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2})]},L._id),Object(a.jsx)(or,{value:A,index:0,children:Object(a.jsx)(sr,{ref:n})}),Object(a.jsx)(or,{value:A,index:1,children:Object(a.jsx)(Ka,{})})]}):Object(a.jsx)(q.a,{children:"Cargando..."})},pr=Object(R.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},titleMargin:{margin:"auto"},bodyMargin:{marginLeft:e.spacing(5),marginRight:e.spacing(5)}}})),gr=function(){var e=pr(),t=D(),n=t.uiState,i=t.dispatch,c=n.confirmModalData,s=c.type,o=c.args,l=c.actionMutation,d=Object(me.b)().enqueueSnackbar,p=w().socket,g=Object(r.useState)(""),m=Object(b.a)(g,2),h=m[0],x=m[1];Object(r.useEffect)((function(){x("carpeta"===s?"\xbfEst\xe1s realmente seguro de que deseas eliminar tu carpeta? Recuerda que se eliminar\xe1n tambi\xe9n las carpetas y dise\xf1os de aprendizaje que se encuentren al interior de esta o de sus carpetas hijas y este proceso no se podr\xe1 deshacer luego de haber elegido la opci\xf3n de eliminar.":"\xbfEst\xe1s realmente seguro de que deseas eliminar tu ".concat(s,"? Este proceso no se podr\xe1 deshacer luego de haber elegido la opci\xf3n de eliminar."))}),[s]);var f=function(){i({type:T.ui.setConfirmData,payload:{type:null,args:null,actionMutation:null}}),i({type:T.ui.toggleModal,payload:"Confirmation"})},O=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dise\xf1o"!==s&&"carpeta"!==s){e.next=5;break}return e.next=3,l.mutate(o);case 3:e.next=6;break;case 5:"actividad"===s?(p.emit("delete-learningActivity",o),d("Su actividad se ha eliminado",{variant:"success",autoHideDuration:2e3})):"tarea"===s?(p.emit("delete-task",o),d("Su tarea se ha eliminado",{variant:"success",autoHideDuration:2e3})):"recurso"===s&&(p.emit("delete-resource-link",o),d("Su recurso se ha eliminado",{variant:"success",autoHideDuration:2e3}));case 6:i({type:T.ui.toggleModal,payload:"Confirmation"});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(nt.a,{onClose:f,open:n.isConfirmationModalOpen,children:[Object(a.jsx)(at.a,{className:e.titleMargin,children:"\xbfEst\xe1s seguro?"}),Object(a.jsx)($.a,{"aria-label":"close",className:e.closeButton,onClick:f,children:Object(a.jsx)(Tt.a,{})}),Object(a.jsx)(rt.a,{dividers:!0,children:Object(a.jsx)(q.a,{children:h})}),Object(a.jsxs)(ct.a,{children:[Object(a.jsx)(H.a,{onClick:f,children:"Cancelar"}),Object(a.jsx)(H.a,{variant:"contained",color:"primary",onClick:O,children:"Eliminar"})]})]})})},mr=Object(R.a)((function(e){return{trashIcon:{display:"flex"},tasksSpacing:{position:"relative",width:"100%",height:"100%",marginTop:e.spacing(1),background:e.palette.background.workSpace},taskBody:{padding:10,position:"relative",left:"5%",width:"95%",height:"100%"},taskSpacingDescription:{marginLeft:e.spacing(2),marginTop:e.spacing(2)},taskSpacingDescriptionBD:{marginBottom:e.spacing(1)},colorLearningType:{position:"absolute",width:"5%",height:"100%"},timeField:Object(C.a)({display:"flex",alignItems:"center",marginRight:10},e.breakpoints.down("md"),{marginRight:0}),grid:{display:"flex",alignItems:"center"},gridContainer:Object(C.a)({display:"grid",gridTemplateColumns:"50% 50%",gridTemplateRows:"auto",gridTemplateAreas:"\n            'learningType modality'\n            'workingTime format'\n            'description description'"},e.breakpoints.down("md"),{gridTemplateAreas:"\n                'learningType learningType'\n                'modality modality'\n                'format format'\n                'workingTime workingTime'\n                'description description'"}),firstRow:{display:"grid",gridTemplateColumns:"auto auto 10%",gridTemplateRows:"auto",gridTemplateAreas:"'learningType modality'"},learningTypeContainer:{gridArea:"learningType",width:"100%",display:"flex"},learningType:Object(C.a)({marginRight:10},e.breakpoints.down("md"),{marginRight:0,marginTop:10}),modality:Object(C.a)({gridArea:"modality",width:"100%"},e.breakpoints.down("md"),{marginTop:10}),format:Object(C.a)({gridArea:"format",alignSelf:"flex-end"},e.breakpoints.down("md"),{marginTop:10})}})),hr=Object(r.forwardRef)((function(e,t){var n=e.index,i=e.task,c=mr(),s=Object(r.useRef)(),o=Object(r.useRef)(),l=Object(r.useRef)();Object(r.useImperativeHandle)(t,(function(){return{clearTexts:function(){null===s||void 0===s||s.current.clearText(),null===o||void 0===o||o.current.clearText(),null===l||void 0===l||l.current.clearText()}}}));return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Se.a,{style:{height:"100%"},children:Object(a.jsx)(Mn.a,{square:!0,className:c.tasksSpacing,children:Object(a.jsx)(Se.a,{children:Object(a.jsxs)(Se.a,{style:{display:"flex",position:"relative",height:"100%",width:"100%"},children:["Investigaci\xf3n"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#57A8E7"}}):"Adquisici\xf3n"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#E95D5D"}}):"Producci\xf3n"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#C8951F"}}):"Discusi\xf3n"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#087A4C"}}):"Colaboraci\xf3n"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#DFDF3F"}}):"Pr\xe1ctica"===i.learningType?Object(a.jsx)("div",{className:c.colorLearningType,style:{backgroundColor:"#A75BCD"}}):void 0,Object(a.jsx)("div",{className:c.taskBody,children:Object(a.jsxs)("div",{className:c.gridContainer,children:[Object(a.jsx)("div",{className:c.learningTypeContainer,children:Object(a.jsxs)(Se.a,{className:c.learningType,children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",children:" Aprendizaje "}),Object(a.jsx)(q.a,{children:i.learningType})]})}),Object(a.jsxs)("div",{className:c.modality,children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",children:" Modalidad "}),Object(a.jsx)(q.a,{children:i.modality})]}),Object(a.jsxs)("div",{style:{width:"100%",gridArea:"workingTime",marginTop:3},children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:" Tiempo de trabajo "}),Object(a.jsxs)("div",{className:c.timeField,children:[Object(a.jsx)(q.a,{children:i.duration.hours}),Object(a.jsx)(q.a,{style:{marginLeft:10,marginRight:10},children:" : "}),Object(a.jsxs)(q.a,{children:[i.duration.minutes," (hrs:mins)"]})]})]}),Object(a.jsxs)(Se.a,{className:c.format,children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",style:{marginBottom:4,marginRight:5},children:" Formato "}),Object(a.jsx)(q.a,{children:i.format})]}),Object(a.jsxs)(Se.a,{style:{gridArea:"description",marginTop:10,wordBreak:"break-word"},children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",children:" Descripci\xf3n "}),Object(a.jsx)(Se.a,{className:c.taskSpacingDescriptionBD,children:Object(a.jsx)(q.a,{children:i.description})})]})]})})]})})})},n)})})),xr=Object(R.a)((function(e){return{unitSpacing:{marginTop:e.spacing(3)},titleUnitSpacing:{display:"flex",paddingLeft:10,paddingRight:10,marginTop:e.spacing(1)},graphicUnitSpacing:{width:"100%",paddingLeft:10,paddingRight:10,display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.spacing(1)},trashIcon:{marginLeft:"auto"},spacingDescriptionlearningActivity:{marginTop:e.spacing(1)},spacingDescription:{marginRight:e.spacing(2)},spacingLinkedResults:{marginTop:e.spacing(2)},buttonPos:{marginTop:e.spacing(1),marginLeft:"auto"},gridTask:{marginTop:e.spacing(1),marginLeft:e.spacing(1)},descriptionContainer:{display:"flex",flexDirection:"column",padding:e.spacing(1)},learningResultList:{display:"flex",flexWrap:"nowrap",flexDirection:"column",paddingLeft:15,maxHeight:200,overflow:"auto",overflowX:!0},taskContainer:{position:"relative"}}})),fr=function(e){var t=e.index,n=e.learningActivity,i=xr(),c=Hn().designState.design,s=Object(r.useRef)([]);return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(z.a,{children:Object(a.jsxs)(Mn.a,{className:i.unitSpacing,children:[Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsx)(z.a,{item:!0,xs:12,sm:5,className:i.titleUnitSpacing,children:Object(a.jsx)(q.a,{children:n.title})}),void ma.forEach((function(e){e.value=0})),Object(a.jsxs)(z.a,{item:!0,xs:12,sm:7,className:i.graphicUnitSpacing,children:[c.data.learningActivities[t]&&c.data.learningActivities[t].tasks&&c.data.learningActivities[t].tasks.forEach((function(e){ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)}))})),Object(a.jsx)(ga,{items:ma,type:"Activity"})]})]}),Object(a.jsx)(G.a,{}),Object(a.jsxs)(z.a,{container:!0,spacing:2,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,sm:8,className:i.taskContainer,children:[Object(a.jsx)(z.a,{className:i.gridTask,children:c.data.learningActivities[t]&&c.data.learningActivities[t].tasks&&c.data.learningActivities[t].tasks.map((function(e,n){return Object(a.jsx)(hr,{ref:function(e){return s.current.push(e)},index:n,task:e,learningActivityIndex:t},"task-".concat(n,"-learningActivity-").concat(t))}))}),Object(a.jsx)(z.a,{container:!0,children:Object(a.jsx)(z.a,{item:!0})})]}),Object(a.jsx)(z.a,{item:!0,xs:12,sm:4,children:Object(a.jsxs)("div",{className:i.descriptionContainer,children:[Object(a.jsx)(q.a,{variant:"body2",className:i.spacingDescriptionlearningActivity,color:"textSecondary",children:" Descripci\xf3n Unidad de aprendizaje "}),Object(a.jsx)(z.a,{className:i.spacingDescription,children:Object(a.jsx)(q.a,{children:n.description})}),Object(a.jsx)(q.a,{variant:"body2",className:i.spacingLinkedResults,color:"textSecondary",children:" Resultados Vinculados "}),Object(a.jsx)("div",{className:i.learningResultList,children:c.metadata.results.map((function(e){return n.learningResults.find((function(t){return t.verb===e.verb}))?Object(a.jsx)(Rn.a,{title:e.description,children:Object(a.jsx)(q.a,{children:e.verb})},"learning-result-".concat(e.verb)):Object(a.jsx)("div",{},"learning-result-".concat(e.verb))}))})]})})]})]})},t)})},Or=Object(R.a)((function(e){return{leftPanel:{display:"flex",flexDirection:"column",borderRight:"1px solid ".concat(e.palette.divider)},workspace:Object(C.a)({paddingLeft:15,paddingRight:15,background:e.palette.background.workSpace,paddingBottom:e.spacing(3),height:"auto"},e.breakpoints.up("md"),{height:"calc(100vh - 177px)",overflow:"auto"}),rightPanel:{display:"flex",flexDirection:"column",borderLeft:"1px solid ".concat(e.palette.divider),background:e.palette.background.paper},textLefPanel:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},spaceData:{marginBottom:e.spacing(1),borderBottom:"2px solid ".concat(e.palette.divider)},LeftPanelMetadata:{marginTop:e.spacing(1),marginLeft:e.spacing(2),marginRight:e.spacing(2)},textLefPanelMetadata:{marginTop:e.spacing(3)},graphicsSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},betweenGraphics:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},workSpaceUnits:Object(C.a)({height:"auto"},e.breakpoints.up("md"),{height:"90%",overflow:"auto",overflowX:"hidden"}),buttonGroupWorkSpace:{height:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1)},"@global":{"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),vr=function(e){e.type;var t=Or(),n=Hn().designState,r=x().authState,i=Object(P.i)(),c=Object(P.g)(),s=Object(l.b)(),o=Object(me.b)().enqueueSnackbar,d=n.design,b=d.metadata,p=!1,g=!1,m=!1,h=Object(Z.a)(ge,{onMutate:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.cancelQueries("recent-designs");case 2:return e.next=4,s.cancelQueries(["designs","/"]);case 4:return e.next=6,s.cancelQueries([r.user.id,"user-public-designs"]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onSettled:function(){s.invalidateQueries("recent-designs"),s.invalidateQueries(["designs","/"]),s.invalidateQueries([r.user.id,"user-public-designs"])},onError:function(e){o(e.message,{variant:"error",autoHideDuration:2e3})},onSuccess:function(e){c.push("/designs/".concat(e.newDesign._id))}});d.data.learningActivities.forEach((function(e){void 0!==e.tasks&&e.tasks.forEach((function(e){""!==e.learningType&&"Seleccionar"!==e.learningType&&(p=!0),""!==e.format&&"Seleccionar"!==e.format&&(g=!0),""!==e.modality&&"Seleccionar"!==e.modality&&(m=!0)}))}));var f=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.mutate({id:i.id});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(z.a,{container:!0,children:[Object(a.jsxs)(z.a,{item:!0,xs:12,md:3,lg:2,className:t.leftPanel,children:[Object(a.jsx)(z.a,{container:!0,alignItems:"center",justify:"center",children:Object(a.jsx)(q.a,{className:t.textLefPanel,children:" INFORMACI\xd3N DISE\xd1O "})}),Object(a.jsx)(G.a,{className:t.spaceData}),Object(a.jsxs)(z.a,{className:t.LeftPanelMetadata,children:[Object(a.jsx)(z.a,{children:b&&b.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",children:" Nombre "}),Object(a.jsx)(q.a,{variant:"body2",children:b.name}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.category&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:"Tema"}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.category.name," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.workingTime&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:" Tiempo de trabajo "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.workingTime.hours," : ",b.workingTime.minutes]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.workingTimeDesign&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:"Tiempo de trabajo Dise\xf1o"}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.workingTimeDesign.hours," : ",b.workingTimeDesign.minutes]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.name&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:" Modo de entrega "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.name," "]}),Object(a.jsx)(G.a,{})]})}),b&&b.classSize&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:" Tama\xf1o de la clase "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.classSize," "]}),Object(a.jsx)(G.a,{})]}),Object(a.jsx)(z.a,{children:b&&b.priorKnowledge&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:" Conocimiento Previo "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.priorKnowledge," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.description&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{variant:"body2",color:"textSecondary",className:t.textLefPanelMetadata,children:" Descripci\xf3n "}),Object(a.jsxs)(q.a,{variant:"body2",children:[" ",b.description," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{children:b&&b.objective&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(q.a,{color:"textSecondary",className:t.textLefPanelMetadata,children:" Objetivos "}),Object(a.jsxs)(q.a,{children:[" ",b.objective," "]}),Object(a.jsx)(G.a,{})]})}),Object(a.jsx)(z.a,{})]})]}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:6,lg:8,className:t.workspace,children:[r.token?Object(a.jsx)("div",{className:t.buttonZone,children:Object(a.jsx)(Q.a,{size:"small","aria-label":"outlined primary button group",className:t.buttonGroupWorkSpace,children:Object(a.jsx)(H.a,{onClick:f,children:" Duplicar "})})}):Object(a.jsx)("div",{}),Object(a.jsx)(z.a,{className:t.workSpaceUnits,children:Object(a.jsx)(z.a,{children:d.data.learningActivities&&d.data.learningActivities.map((function(e,t){return Object(a.jsx)(fr,{index:t,learningActivity:e},"learningActivity-".concat(t))}))})})]}),Object(a.jsxs)(z.a,{item:!0,xs:12,md:3,lg:2,className:t.rightPanel,children:[(ma.forEach((function(e){e.value=0})),ha.forEach((function(e){e.value=0})),xa.forEach((function(e){e.value=0})),void fa.forEach((function(e){e.value=0}))),Object(a.jsxs)(z.a,{className:t.graphicsSpacing,children:[d.data.learningActivities&&d.data.learningActivities.map((function(e){return e.tasks&&e.tasks.forEach((function(e){ma.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),ha.forEach((function(t){t.title===e.learningType&&(t.value=t.value+1)})),xa.forEach((function(t){t.title===e.format&&(t.value=t.value+1)})),fa.forEach((function(t){t.title===e.modality&&(t.value=t.value+1)}))}))})),p&&Object(a.jsx)("div",{className:t.betweenGraphics,children:Object(a.jsx)(Aa,{items:ha,colorGraphicToPdf:!0})}),g&&Object(a.jsxs)("div",{className:t.betweenGraphics,children:[Object(a.jsx)(q.a,{children:"Formato"}),Object(a.jsx)(ga,{items:xa,type:"Format",legends:!0,colorGraphicToPdf:!0})]}),m&&Object(a.jsxs)("div",{className:t.betweenGraphics,children:[Object(a.jsx)(q.a,{children:"Modalidad"}),Object(a.jsx)(ga,{items:fa,type:"Modality",legends:!0,colorGraphicToPdf:!0})]})]})]})]})})},yr=Object(R.a)((function(e){return{menu:{borderBottom:"1px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start",minHeight:"calc(100vh - 128px)"}}})),wr=function(){var e=yr(),t=Object(r.useRef)(!0),n=Object(P.i)().id,i=x().authState,c=w(),s=c.socket,o=c.online,l=Object(r.useState)(0),d=Object(b.a)(l,2),u=d[0],j=d[1],p=Hn(),g=p.designState,m=p.dispatch,h=g.design,f=Object(r.useState)(null),O=Object(b.a)(f,2),v=O[0],y=O[1];Object(r.useEffect)((function(){o&&(null===s||void 0===s||s.emit("join-to-design",{user:i.user,designId:n,public:!0},(function(e){e.ok?t.current&&m({type:T.design.updateDesign,payload:e.data.design}):y(e.message)})))}),[s,i.user,o,n,m]),Object(r.useEffect)((function(){return function(){null===s||void 0===s||s.emit("leave-from-design",{user:i.user,designId:n})}}),[s,i.user,n]);var k;return v?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(fe.a,{severity:"error",children:v})}):h?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{container:!0,className:e.menu,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsx)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.tabBar,children:Object(a.jsx)(In.a,{value:u,onChange:function(e,t){j(t)},"aria-label":"full width tabs example",children:Object(a.jsx)(Ln.a,Object(S.a)({label:"DISE\xd1O"},(k=1,{id:"full-width-tab-".concat(k),"aria-controls":"full-width-tabpanel-".concat(k)})))})}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2})]},h._id),Object(a.jsx)(or,{value:u,index:0,children:Object(a.jsx)(vr,{})})]}):Object(a.jsx)(q.a,{children:"Cargando..."})},kr=Object(R.a)((function(e){return{root:{minHeight:"calc(100vh - 128px)"},content:{borderBottom:"1px solid ".concat(e.palette.divider)},tabBar:{display:"flex",justifyContent:"space-between",alignItems:"center"},error:{display:"flex",justifyContent:"center",padding:20,alignItems:"start"}}})),Cr=function(){var e=kr(),t=Object(P.i)(),n=Object(r.useState)(0),i=Object(b.a)(n,2),c=i[0],s=i[1],o=Hn().dispatch,l=Object(K.a)(["shared-design-by-link",t.link],Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({link:t.link});case 2:return n=e.sent,o({type:T.design.updateDesign,payload:n.design}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),{refetchOnWindowFocus:!1}),d=l.isLoading,p=l.isError,g=l.error,m=l.data,h=function(e,t){s(t)};return Object(a.jsx)("div",{className:e.root,children:d?Object(a.jsx)(q.a,{children:"Cargando..."}):p?Object(a.jsx)("div",{className:e.error,children:Object(a.jsx)(fe.a,{severity:"error",children:g.message})}):m.design==={}?Object(a.jsx)(q.a,{children:"No se ha encontrado dise\xf1o."}):function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{container:!0,className:e.content,children:[Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2}),Object(a.jsx)(z.a,{item:!0,xs:12,md:6,lg:8,className:e.tabBar,children:Object(a.jsx)(In.a,{value:c,onChange:h,"aria-label":"full width tabs example",children:Object(a.jsx)(Ln.a,Object(S.a)({label:"DISE\xd1O"},(t=1,{id:"full-width-tab-".concat(t),"aria-controls":"full-width-tabpanel-".concat(t)})))})}),Object(a.jsx)(z.a,{item:!0,xs:12,md:3,lg:2})]},m.design._id),Object(a.jsx)(or,{value:c,index:0,children:Object(a.jsx)(vr,{type:"shared-link"})})]});var t}()})},Sr=n(912),Tr=n(1010),Ar=n(1007),Nr=n(1008),Dr=n(1009),Er=Object(R.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 128px)",height:"auto"},container:Object(C.a)({display:"flex",flexDirection:"column",alignItems:"center",border:"1px solid ".concat(e.palette.divider),padding:10,borderRadius:e.shape.borderRadius,height:"100%"},e.breakpoints.down("xs"),{borderStyle:"none",padding:0}),backButton:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},buttonZone:Object(C.a)({display:"flex",justifySelf:"flex-end",justifyContent:"flex-end"},e.breakpoints.down("sm"),{marginTop:30,paddingRight:20}),body:Object(C.a)({maxWidth:600,display:"flex",flexDirection:"column",justifyContent:"space-between"},e.breakpoints.up("sm"),{height:450}),content:Object(C.a)({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:20},e.breakpoints.down("sm"),{padding:40}),input:{marginTop:30},codeForm:{width:"100%",display:"flex",marginTop:30},codeButton:{borderTopLeftRadius:0,borderBottomLeftRadius:0},codeInput:{"& fieldset":{borderTopRightRadius:0,borderBottomRightRadius:0}},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ir={value:"",error:null},Lr={value:"",error:null},Pr={password:"",confirm:"",passwordError:null,confirmError:null},Rr=function(){var e=Er(),t=Object(P.g)(),n=Object(me.b)().enqueueSnackbar,i=Object(r.useState)(0),c=Object(b.a)(i,2),s=c[0],o=c[1],l=Object(r.useState)(!1),d=Object(b.a)(l,2),p=d[0],g=d[1],m=Object(r.useState)(null),h=Object(b.a)(m,2),x=h[0],f=h[1],O=Object(r.useState)(null),v=Object(b.a)(O,2),y=v[0],w=v[1],k=Object(r.useState)(Lr),T=Object(b.a)(k,2),A=T[0],N=T[1],D=Object(r.useState)(Ir),E=Object(b.a)(D,2),I=E[0],L=E[1],R=Object(r.useState)(Pr),F=Object(b.a)(R,2),B=F[0],M=F[1],W=[{icon:kt.a,label:"Buscar cuenta por email"},{icon:Ar.a,label:"C\xf3digo de verificaci\xf3n"},{icon:Nr.a,label:"Restablecer contrase\xf1a"},{icon:Dr.a,label:"Contrase\xf1a restablecida"}],V=function(){o((function(e){return e+1}))},z=function(e){var t=e.target;L({value:t.value,error:null})},Q=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I.value.trim().length){e.next=3;break}return e.abrupt("return",L(Object(S.a)(Object(S.a)({},I),{},{error:"Este campo es obligatorio"})));case 3:if(/^[-\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\.){1,125}[A-Z]{2,63}$/i.test(I.value)||(L((function(e){return Object(S.a)(Object(S.a)({},e),{},{error:"El correo debe tener la siguiente estructura: example@example.com"})})),0)){e.next=5;break}return e.abrupt("return");case 5:return g(!0),e.next=8,ft(I.value);case 8:if(a=e.sent,g(!1),a.ok){e.next=12;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 12:n("Se ha enviado un c\xf3digo de verificaci\xf3n a su correo electr\xf3nico.",{variant:"success",autoHideDuration:5e3}),w(a.data.randomCode),f(a.data.user._id),V();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),B.password.trim().length?B.confirm.trim().length?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(B.password)?B.password===B.confirm||(M((function(e){return Object(S.a)(Object(S.a)({},e),{},{passwordError:"Las contrase\xf1as no coinciden.",confirmError:"Las contrase\xf1as no coinciden."})})),0):(M((function(e){return Object(S.a)(Object(S.a)({},e),{},{passwordError:"La contrase\xf1a debe tener al menos un car\xe1cter en min\xfascula, uno en may\xfascula, un n\xfamero y debe tener entre 8 y 16 caract\xe9res de longitud."})})),0):M(Object(S.a)(Object(S.a)({},B),{},{confirmError:"Este campo es obligatorio"})):M(Object(S.a)(Object(S.a)({},B),{},{passwordError:"Este campo es obligatorio"}))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,vt({uid:x,newPassword:B.password});case 5:if((a=e.sent).ok){e.next=8;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 8:n(a.message,{variant:"success",autoHideDuration:5e3}),V();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t,n=e.target;M(Object(S.a)(Object(S.a)({},B),{},(t={},Object(C.a)(t,n.name,n.value),Object(C.a)(t,"passwordError",null),Object(C.a)(t,"confirmError",null),t)))},K=function(e){var t=e.target;N(Object(S.a)(Object(S.a)({},A),{},{value:t.value,error:null}))},Z=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),N(Lr),e.next=4,Ot(I.value);case 4:if(a=e.sent,g(!1),a.ok){e.next=8;break}return e.abrupt("return",n(a.message,{variant:"error",autoHideDuration:5e3}));case 8:n(a.message,{variant:"success",autoHideDuration:2e3}),w(a.data.randomCode);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(pn.a,{className:e.root,children:[Object(a.jsxs)(Se.a,{className:e.container,children:[Object(a.jsx)(Ja.a,{style:{width:"100%"},activeStep:s,alternativeLabel:!0,children:W.map((function(e){return Object(a.jsx)(Ya.a,{children:Object(a.jsx)(_a.a,{children:e.label})},e.label)}))}),Object(a.jsxs)("form",{className:e.body,onSubmit:0===s?Q:1===s?function(e){if(e.preventDefault(),A.value.trim().toUpperCase()!==y.trim().toUpperCase())return N(Object(S.a)(Object(S.a)({},A),{},{error:"El c\xf3digo ingresado no coincide"}));V()}:2===s?G:function(e){e.preventDefault(),t.push("/")},noValidate:!0,children:[function(t){switch(t){case 0:return Object(a.jsxs)(Se.a,{className:e.content,children:[Object(a.jsx)(q.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Busca tu cuenta por correo electr\xf3nico"}),Object(a.jsx)(q.a,{variant:"body1",align:"center",gutterBottom:!0,children:"Introduce la direcci\xf3n de correo electr\xf3nico asociada a tu cuenta para poder identificarte."}),Object(a.jsx)(it.a,{className:e.input,label:"Email",type:"email",value:I.value,error:!!I.error,helperText:I.error,onChange:z,placeholder:"Ingresa correo electr\xf3nico",variant:"outlined",fullWidth:!0,autoFocus:!0})]});case 1:return Object(a.jsxs)(Se.a,{className:e.content,children:[Object(a.jsx)(q.a,{variant:"h5",align:"center",gutterBottom:!0,children:"C\xf3digo de verificaci\xf3n"}),Object(a.jsx)(q.a,{variant:"body1",align:"center",gutterBottom:!0,children:'Introduce el c\xf3digo de verificaci\xf3n que hemos enviado a tu correo electr\xf3nico. Si este no ha llegado a tu correo, puedes reenviar un c\xf3digo haciendo click en el bot\xf3n "Reenviar C\xf3digo".'}),Object(a.jsxs)("div",{className:e.codeForm,children:[Object(a.jsx)(it.a,{className:e.codeInput,value:A.value,error:!!A.error,helperText:A.error,onChange:K,label:"C\xf3digo verificaci\xf3n",type:"text",placeholder:"Ingresa c\xf3digo verificaci\xf3n",variant:"outlined",inputProps:{style:{textTransform:"uppercase"}},fullWidth:!0}),Object(a.jsx)(H.a,{className:e.codeButton,size:"small",variant:"contained",color:"primary",disableElevation:!0,onClick:Z,children:"Reenviar C\xf3digo"})]})]});case 2:return Object(a.jsxs)(Se.a,{className:e.content,children:[Object(a.jsx)(q.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Restablecer contrase\xf1a"}),Object(a.jsx)(q.a,{variant:"body1",align:"center",gutterBottom:!0,children:"Complete el siguiente formulario para reestablecer su contrase\xf1a."}),Object(a.jsx)(it.a,{name:"password",className:e.input,value:B.password,onChange:U,error:!!B.passwordError,helperText:B.passwordError,label:"Nueva contrase\xf1a",type:"password",placeholder:"Ingresa la nueva contrase\xf1a",variant:"outlined",fullWidth:!0}),Object(a.jsx)(it.a,{name:"confirm",className:e.input,value:B.confirm,onChange:U,error:!!B.confirmError,helperText:B.confirmError,label:"Confirmar contrase\xf1a",type:"password",placeholder:"Ingresa nuevamente la nueva contrase\xf1a",variant:"outlined",fullWidth:!0})]});case 3:return Object(a.jsxs)(Se.a,{className:e.content,children:[Object(a.jsx)(q.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Contrase\xf1a restablecida"}),Object(a.jsx)(q.a,{variant:"body1",align:"center",gutterBottom:!0,children:'La contrase\xf1a de su cuenta se ha reestablecido con \xe9xito. Por favor haga click en el boton "Finalizar" para redirigirlo a la p\xe1gina de inicio.'})]});default:return"Unknown step"}}(s),Object(a.jsxs)(Se.a,{className:e.buttonZone,children:[1===s&&Object(a.jsx)(H.a,{disabled:0===s,onClick:function(){o((function(e){return e-1})),w(null),L(Ir)},className:e.backButton,children:"Volver"}),Object(a.jsx)(H.a,{disableElevation:!0,variant:"contained",type:"submit",color:"primary",children:s===W.length-1?"Finalizar":"Siguiente"})]})]})]}),Object(a.jsx)(Sr.a,{className:e.backdrop,open:p,children:Object(a.jsx)(Tr.a,{color:"inherit"})})]})},Fr=Object(R.a)((function(e){return{"@global":{"html, body":{height:"100%"},"*::-webkit-scrollbar":{width:"0.4em"},"*::-webkit-scrollbar-track":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)"},"*::-webkit-scrollbar-thumb":{"-webkit-box-shadow":"inset 0 0 6px rgba(0,0,0,0.2)",borderRadius:"15px",backgroundColor:"rgba(0,0,0,.1)"}}}})),Br=function(){var e=x(),t=e.authState,n=e.verifyToken,i=t.token,c=t.checking;return Fr(),Object(r.useEffect)((function(){n()}),[n]),c?Object(a.jsx)("h1",{children:"Espere..."}):Object(a.jsx)(L.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)($t,{children:[Object(a.jsx)(hn.a,{}),Object(a.jsx)(bn,{}),Object(a.jsxs)(me.a,{maxSnack:3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:xn.a,children:[Object(a.jsxs)(P.d,{children:[Object(a.jsx)(W,{exact:!0,path:"/",component:B,isAuthenticated:!c&&!!i}),Object(a.jsx)(W,{exact:!0,path:"/reset-password",component:Rr,isAuthenticated:!c&&!!i}),Object(a.jsx)(P.b,{exact:!0,path:"/shared-link/:link",component:Cr}),Object(a.jsx)(V,{exact:!0,path:"/profile/:uid",component:Rt,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/my-designs",component:ut,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{path:"/my-designs/:urlPath+/",component:ut,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/shared-with-me",component:On,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/public-repository",component:Tn,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/users/search",component:En,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/designs/:id",component:br,isAuthenticated:!c&&!!i}),Object(a.jsx)(V,{exact:!0,path:"/designs/reader/:id",component:wr,isAuthenticated:!c&&!!i}),Object(a.jsx)(P.a,{to:"/"})]}),Object(a.jsx)(gr,{})]}),Object(a.jsx)(mn,{})]})})})},Mr=new o.a;var Wr=function(){return Object(a.jsx)(l.a,{client:Mr,children:Object(a.jsx)(I,{children:Object(a.jsx)(O,{children:Object(a.jsx)(Un,{children:Object(a.jsx)(k,{children:Object(a.jsx)(ta,{children:Object(a.jsx)(Br,{})})})})})})})};s.a.render(Object(a.jsx)(Wr,{}),document.getElementById("root"))}},[[905,1,2]]]);
//# sourceMappingURL=main.b720f772.chunk.js.map