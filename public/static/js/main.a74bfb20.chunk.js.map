{"version":3,"sources":["utils/fetch.js","contexts/AuthContext.js","contexts/SocketContext.js","hooks/useSocket.js","types/index.js","types/ui.js","types/design.js","contexts/ui/uiReducer.js","contexts/ui/UiContext.js","pages/LandingPage/LandingPage.js","router/PublicRoute.js","router/PrivateRoute.js","utils/textFormatters.js","services/DesignService.js","components/Design.js","components/DesignSkeleton.js","components/DesignsContainer.js","services/FolderService.js","components/RightClickMenu.js","components/DesignsFolder.js","components/FoldersContainer.js","pages/Navigation/LeftPanel.js","pages/Navigation/MyDesigns/DesignsBreadcrumbs.js","hooks/useHorizontalScroll.js","components/HorizontalScrollableContainer.js","pages/Navigation/MyDesigns/RecentDesigns.js","pages/Navigation/MyDesigns/FolderModal.js","components/CustomMenu.js","pages/Navigation/MyDesigns/ImportDesignsModal.js","pages/Navigation/MyDesigns/MyDesignsPage.js","services/UserService.js","hooks/useForm.js","pages/User/UserProfile/EditProfileModal.js","components/UserCard.js","pages/User/UserProfile/ShowContactsModal.js","pages/User/UserProfile/UserProfile.js","assets/img/Logo.png","contexts/UserConfigContext.js","theme/theme.js","components/ModalFormWithImage.js","pages/Auth/LoginModal.js","pages/Auth/RegisterModal.js","contexts/design/designReducer.js","contexts/design/DesignContext.js","components/NavBar.js","components/Footer.js","pages/Navigation/SharedWithMe/SharedWithMePage.js","services/CategoryService.js","components/KeywordManager.js","pages/Navigation/PublicRepository/PublicRepositoryPage.js","components/UserCardSkeleton.js","pages/User/SearchUsersPage/SearchUsersPage.js","contexts/SharedDocContext.js","components/SharedTextFieldTipTapEditor.js","pages/DesignPage/Workspace/Task.js","components/StackedBar.js","assets/resource/items.js","pages/DesignPage/Workspace/LearningActivity.js","components/PieGraphic.js","pages/DesignPage/Workspace/ShareModal.js","pages/DesignPage/PDF/MiniContext.js","utils/dateTimeFormatter.js","pages/DesignPage/PDF/DocumentPDF.js","components/TabPanel.js","pages/DesignPage/PDF/ConfigurationData.js","pages/DesignPage/PDF/ViewAndDownloadPDFModal.js","pages/DesignPage/Workspace/ResourceLink.js","pages/DesignPage/Workspace/ResourceLinksModal.js","pages/DesignPage/Workspace/Evaluation.js","pages/DesignPage/Workspace/EvaluationModal.js","pages/DesignPage/Workspace/DesignWorkspace.js","utils/files.js","pages/DesignPage/Metadata/LearningResult.js","pages/DesignPage/Metadata/BloomPiramid.js","pages/DesignPage/Metadata/BloomVerbList.js","pages/DesignPage/Metadata/LearningResultModal.js","components/TextEditable.js","pages/DesignPage/Metadata/DesignMetadata.js","services/BloomService.js","pages/DesignPage/Workspace/CheckSaveDesignModal.js","components/Commentary.js","components/CommentaryInput.js","components/DesignComments.js","pages/DesignPage/DesignPage.js","components/ConfirmationModal.js","pages/DesignPageReader/DesignReader/TaskReader.js","pages/DesignPageReader/DesignReader/LearningActivityReader.js","pages/DesignPageReader/DesignReader/DesignReader.js","components/AssessmentModal.js","pages/DesignPageReader/DesignPageReader.js","pages/SharedLink/SharedLinkPage.js","pages/Auth/ResetPasswordPage.js","router/AppRouter.js","App.js","index.js"],"names":["baseUrl","process","fetchWithoutToken","endpoint","data","a","method","url","fetch","resp","json","headers","body","JSON","stringify","fetchWithToken","token","localStorage","getItem","uploadFetchWithToken","AuthContext","createContext","useAuthState","context","useContext","undefined","Error","initialState","checking","user","AuthProvider","children","useState","authState","setAuthState","login","email","password","ok","register","userData","verifyToken","useCallback","setItem","useEffect","removeItem","Provider","value","logout","SocketContext","useSocketState","SocketProvider","serverPath","socket","setSocket","online","setOnline","connectSocket","tempSocket","io","connect","transports","autoConnect","forceNew","query","disconnectSocket","disconnect","connected","on","useSocket","useSnackbar","enqueueSnackbar","closeSnackbar","snackbarRef","useRef","current","variant","persist","emitWithTimeout","onSuccess","onTimeout","timeout","called","timer","setTimeout","clearTimeout","args","apply","types","ui","toggleLoginModal","toggleModal","toggleRegisterModal","toggleLearningResultModal","updateFolderPath","toggleConfirmAction","setFolder","setConfirmData","setPDF","setResourceLink","setEvaluation","setPDFConfig","setUserSaveDesign","setHistoryInCheckSaveDesign","setScrollToNewActivity","setScrollToNewTask","design","updateDesign","changeMetadataField","changeTaskField","setCurrentLearningResultField","clearCurrentLearningResult","setCurrentLearningResult","setBloomCategories","setBloomVerbs","setDesignPrivileges","addDesignKeyword","removeDesignKeyword","updateReadOnlyLink","setAssessments","setScoreMean","commentDesign","deleteComment","setConnectedUsers","uiReducer","state","action","type","payload","isRegisterModalOpen","folderPath","toggleWitchOpenModal","setWitchOpenModal","folder","confirmModalData","pdf","typeUserPDF","resourceLink","evaluationData","field","userSaveDesign","historyData","newActivity","newTask","UiContext","useUiState","isLoginModalOpen","isLearningResultModalOpen","isEditProfileModalOpen","isContactsModalOpen","isConfirmationModalOpen","isShareModalOpen","setWichOpenModal","isFolderModalOpen","isPDFModalOpen","isResourceModalOpen","isEvaluationModalOpen","isImportDesignsModalOpen","isCheckSaveDesignModalOpen","isAssessmentModalOpen","_id","name","actionMutation","learningActivityIndex","taskIndex","UiProvider","useReducer","uiState","dispatch","useStyles","makeStyles","theme","root","minHeight","LandingPage","classes","className","PublicRoute","isAuthenticated","Component","component","rest","props","to","PrivateRoute","location","pathname","formatName","lastname","firstName","split","firstLastname","getUserInitials","substring","getRecentDesigns","message","getDesignsByFolder","path","pageParam","from","getPublicDesignsByUser","id","getPublicFilteredDesigns","filter","keywords","categories","getDesignsSharedWithMe","createDesign","isPublic","deleteDesignById","getDesignByLink","link","trim","length","duplicateDesign","importDesign","filename","last","position","border","palette","divider","width","minWidth","borderRadius","cursor","userSelect","backgroundColor","background","boxShadow","designHover","ownerInfo","borderTop","paddingLeft","paddingRight","row","display","rowJustified","justifyContent","col","flexDirection","ellipsis","whiteSpace","overflow","textOverflow","designIcon","marginLeft","fontSize","alignSelf","justifySelf","deleteIcon","top","right","closeButton","spacing","color","grey","Design","title","updatedAt","metadata","owner","privileges","canDelete","queryClient","useQueryClient","history","useHistory","deleteMutation","useMutation","onMutate","cancelQueries","previousDesigns","getQueryData","previousPublicDesigns","keys","includes","setQueryData","oldData","oldPage","pages","find","page","designs","newDesigns","newPage","Object","assign","newPages","indexOf","previousRecentDesigns","onError","error","console","log","onSettled","invalidateQueries","autoHideDuration","handleDeleteDesign","e","stopPropagation","Box","style","padding","Card","elevation","CardActionArea","onClick","privilege","uid","push","CardContent","Description","Tooltip","arrow","placement","Typography","category","workingTime","hours","minutes","marginTop","marginBottom","Date","toLocaleDateString","marginRight","Star","scoreMean","IconButton","Delete","Link","CardActions","Avatar","alt","src","img","occupation","height","margin","paddingTop","alignItems","DesignSkeleton","Skeleton","animation","designsContainer","flexGrow","flexWrap","textAlign","loadMore","clickHere","textDecoration","DesignsContainer","status","isFetchingNextPage","fetchNextPage","hasNextPage","handleCreateDesign","label","Array","map","index","Alert","severity","i","ownerId","Button","getfolderByPath","createFolder","folderName","renameFolder","deleteFolder","mouseX","mouseY","RightClickMenu","options","setState","ref","handleClose","onContextMenu","preventDefault","area","getBoundingClientRect","clientX","x","clientY","y","Menu","keepMounted","open","onClose","anchorReference","anchorPosition","left","option","MenuItem","onSelect","handleSelect","icon","ListItemIcon","fontStyle","paper","content","folderContainer","shape","text","primary","folderBody","more","DesignsFolder","isMenuOpen","setMenuOpen","parentPath","replace","deleteFolderMutation","previousFolders","oldFolders","handleRename","handleDelete","Edit","Folder","currentTarget","MoreVert","onBlur","anchorEl","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","FoldersContainer","LeftPanel","useLocation","createDesignMutation","mutate","List","aria-label","ListItem","button","selected","Home","ListItemText","Divider","Group","Public","default","DesignsBreadcrumbs","Breadcrumbs","newPath","folderList","shift","createBreadcrumbsLinks","useHorizontalScroll","node","setRef","useLayoutEffect","onWheel","deltaY","scrollTo","scrollLeft","behavior","addEventListener","removeEventListener","mouseWheel","overflowX","overflowY","listStyle","paddingBottom","prev","zIndex","disabledBackground","hover","next","HorizontalScrollableContainer","scrollRef","prevRef","nextRef","KeyboardArrowLeft","KeyboardArrowRight","r","recentDesigns","RecentDesigns","n","Math","trunc","useQuery","isLoading","isError","createSkeletons","designList","close","folderNameInput","FolderModal","setError","setName","createFolderMutation","handleCloseModal","renameFolderMutation","handleCreateFolder","toLowerCase","handleRenameFolder","Dialog","fullWidth","aria-labelledby","DialogTitle","Close","DialogContent","TextField","helperText","onChange","target","DialogActions","CustomMenu","Icon","isOpen","setOpen","handleOpen","getContentAnchorEl","previewChip","maxWidth","backdrop","modal","ImportDesignsModal","setDesigns","loading","setLoading","importDesignsMutation","readFile","file","parse","result","prevDesigns","ex","handleImportDesigns","designFile","dividers","getFileLimitExceedMessage","limit","previewGridProps","container","direction","dropzoneText","previewChipProps","acceptedFiles","previewText","getDropRejectMessage","accepteds","maxSize","size","showPreviewsInDropzone","maxFileSize","showAlerts","files","fr","FileReader","onload","readAsText","showPreviews","filesLimit","useChipsForPreview","clearOnUnmount","disabled","Backdrop","CircularProgress","leftPanel","borderRight","workspace","workSpace","breakpoints","down","rightPanel","borderLeft","breadCrumbs","designsAndFoldersContainer","sectionTitle","MyDesignsPage","urlparams","useParams","designsRef","useTheme","isXSDevice","useMediaQuery","setWidth","setHeight","urlPath","designsQuery","useInfiniteQuery","refetchOnWindowFocus","getNextPageParam","lastPage","nPages","foldersQuery","offsetHeight","offsetWidth","handleOpenFolderModal","Grid","item","xs","md","lg","AddCircle","NoteAdd","CreateNewFolder","Publish","getUser","searchUsers","updateContact","contacts","newData","updateProfileInformation","institution","country","city","description","getUserByEmail","resendVerificationCode","changeUserPassword","newPassword","updateUserImage","formData","useForm","values","setValues","reset","handleInputChange","errorContainer","avatarContainer","photoProfile","isHovered","addPhotoIcon","bottom","inputFile","EditProfileModal","React","memo","setHovered","fileInputRef","setFile","imgSource","setImgSource","objectUrl","URL","createObjectURL","revokeObjectURL","updateProfileInformationMutation","previousUserProfile","prevState","handleSaveInformation","FormData","append","handleChangeFile","event","justify","accept","ButtonBase","click","onMouseEnter","onMouseLeave","AddPhotoAlternate","sm","multiline","rows","card","photo","UserCard","handleViewUser","ShowContactsModal","contact","designPanel","spaceFirstDataFirstData","centerGrid","justifyItems","spaceSecondData","spaceData","spaceDesign","spaceIcons","UserProfile","refetch","updateConctactMutation","handleAddContact","handleDeleteContact","align","spaceFirstData","startIcon","PersonAdd","Apartment","Email","UserConfigContext","useUserConfigState","UserConfigProvider","darkTheme","modeAdvanced","userConfig","setUserConfig","isDarkActive","createMuiTheme","dark","orange","light","lightBlue","main","secondary","deepOrange","deepPurple","navbar","ThemeProvider","header","ModalFormWithImage","subtitle","image","actions","disableTypography","CloseRounded","formcontrol","form","logo","footer","initialErrors","emailError","passwordError","LoginModal","formErrors","setFormErrors","errorFromServer","setErrorFromServer","showPassword","setShowPassword","formLoginValues","handleInputFormChange","handleLogin","key","reduce","b","test","Logo","onSubmit","noValidate","InputProps","endAdornment","onMouseDown","Visibility","VisibilityOff","href","nameError","lastnameError","confirmPasswordError","RegisterModal","confirmPassword","handleRegister","designReducer","subfield","learningActivities","forEach","la","learningActivityID","tasks","t","taskID","currentLearningResult","verb","editing","bloomCategories","bloomVerbs","k","readOnlyLink","assessments","comments","existentCommentary","c","toString","users","DesignContext","useDesignState","DesignProvider","designState","brand","search","searchForm","userAndOptions","navbarColor","navbarLetter","menuOptions","NavBar","setFilter","handleLogout","clear","handleChangeUserConfig","checked","handleSearchUsers","handleGoUserProfile","handleGoHomePage","handleMenu","renderUserOptions","textTransform","FormControlLabel","control","Switch","AppBar","Toolbar","OutlinedInput","placeholder","iconButton","Search","ButtonGroup","pos","Footer","Container","SharedWithMePage","sharedDesignsQuery","getCategories","keywordList","keyword","searchContainer","input","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","keywordFilter","KeywordManager","onChangeKeywords","setKeyword","keywordError","setKeywordError","disableElevation","Chip","onDelete","slice","handleRemoveKeyword","up","categoriesContainer","PublicRepositoryPage","setSearch","categoriesFilter","setCategoriesFilter","setKeywords","categoriesQuery","handleSearch","Checkbox","handleToggleCategory","targetKeyword","ocupation","UserCardSkeleton","usersContainer","SearchUsersPage","q","queryString","redirectTo","SharedDocContext","useSharedDocContext","SharedDocProvider","doc","setDoc","provider","setProvider","setUser","setConnected","connectToDesign","yDoc","Y","guid","wsProvider","WebsocketProvider","preparedUser","awareness","setLocalStateField","clearDoc","htmlToText","htmlString","span","document","createElement","innerHTML","textContent","innerText","rowMax","focused","inputContainer","borderWidth","borderStyle","borderColor","editorx","typography","body1","fontFamily","marginBlockStart","marginBlockEnd","outline","float","pointerEvents","SharedTextFieldTipTapEditor","forwardRef","maxLength","initialvalue","max","min","deleteOnRemove","onSynced","isMounted","setFocused","synced","setSynced","editor","setEditor","getText","getHTML","setText","commands","first","setContent","useImperativeHandle","clearText","Editor","editorProps","handleTextInput","view","isNaN","dom","firstChild","match","parseInt","handlePaste","childCount","newValue","extensions","Document","extend","Paragraph","Text","CollaborationCursor","configure","Collaboration","CharacterCount","onUpdate","transaction","docs","onFocus","once","chain","focus","run","val","ArrowDropUp","ArrowDropDown","trashIcon","tasksSpacing","taskBody","taskSpacingDescription","taskSpacingDescriptionBD","colorLearningType","timeField","grid","gridContainer","gridTemplateColumns","gridTemplateRows","gridTemplateAreas","firstRow","learningTypeContainer","gridArea","learningType","modality","format","delete","resourceLinkGrid","fab","maxHeight","Task","task","sumHours","sumMinutes","refTask","hoursRef","minutesRef","descriptionRef","isMediumDevice","timeHours","duration","timeMinutes","timeDesignHours","workingTimeDesign","timeDesignMinutes","groupSize","scrollIntoView","clearTexts","handleEditTaskField","emit","designId","handleOpenResourceModal","handleDeleteTask","handleChangeDropdown","preventDuplicate","Paper","square","FormControl","InputLabel","shrink","Select","labelId","gutterBottom","InputLabelProps","inputComponent","inputProps","classSize","colorBox","colorBoxRightPanel","spacingGraphic","legend","StackedBar","items","legends","colorGraphicToPdf","colors","valueTotal","toFixed","itemsLearningType","itemsLearningTypePie","itemsFormat","itemsModality","unitSpacing","titleUnitSpacing","graphicUnitSpacing","spacingDescriptionlearningActivity","spacingDescription","spacingLinkedResults","buttonPos","gridTask","descriptionContainer","learningResultList","taskContainer","LearningActivity","learningActivity","refActivity","titleRef","taskRefs","refs","createRef","handleDeleteUnit","learningResults","handleAddTask","ObjectID","handleEditLearningActivityField","linkedLearningResult","results","lr","isSelected","indexLearningResults","_indexLearningResults","handleToggleLearningResult","handleOpenMenu","handleOpenModalEvaluation","ListAlt","Fab","Add","PieGraphic","dataSource","argumentField","valueField","verticalAlignment","horizontalAlignment","itemTextPosition","rowCount","enabled","customizeTooltip","arg","argumentText","percent","titleSectionShare","divSectionShare","ShareModal","inputUser","setInputUser","newPrivileges","setNewPrivileges","handleCopyLinkToClipboard","navigator","clipboard","writeText","handleGenerateLink","wordBreak","FileCopy","Autocomplete","blurOnSelect","v","u","handleAddContactInArray","inputValue","onInputChange","newInputUser","getOptionSelected","renderInput","params","p","handleChange","MiniContext","confirmDateConfiguration","setDateConfiguration","now","selectedDate","setSelectedDate","setPrivileges","months","days","formatDate","dateTime","showDayName","year","getFullYear","date","getDate","monthName","getMonth","dayName","getDay","formatTime","showSeconds","hour","minute","second","toLocaleTimeString","DocumentPDF","useBetween","styles","StyleSheet","create","marginVertical","marginHorizontal","box","pageNumber","marginTitle","secondTitle","table","alignContent","cell","flexShrink","flexBasis","breakLine","manyAuthorsSelected","author","wrap","priorKnowledge","objective","evaluationPattern","evaluation","borderBottom","indexTask","borderLeftWidth","resourceLinks","resource","render","fixed","totalPages","TabPanel","other","role","hidden","ConfigurationData","expanded","setExpanded","handleChangePanel","panel","isExpanded","Accordion","AccordionSummary","expandIcon","aria-controls","AccordionDetails","utils","DateFnsUtils","disableToolbar","KeyboardButtonProps","newState","handleChangeSelectAuthor","spaceInit","menu","tabBar","drawer","loadingFile","transitions","easing","easeInOut","animationIterationCount","animationDirection","a11yProps","ViewAndDownloadPDFModal","imgGraphic","setPdfView","setImg","tabIndex","setTabIndex","pdfDocument","setPdfDocument","html2canvas","scrollX","canvas","toDataURL","defineImage","fullScreen","titleMargin","Tabs","indicatorColor","textColor","centered","Tab","fileName","blob","PictureAsPdf","spaceResource","tooltip","ResourceLink","newResource","setNewResource","newTitle","changeTitle","newLink","changeLink","handleDeleteResourceLink","buttonZone","resourceZone","contentSpace","ResourceLinksModal","resources","resourceEvaluationGrid","Evaluation","newEvaluation","setNewEvaluation","newType","changeType","newDescription","changeDescription","handleDeleteResourceEvaluation","EvaluationModal","buttonGroupWorkSpace","textLeftPanel","LeftPanelMetadata","textLeftPanelMetadata","graphicsSpacing","betweenGraphics","workSpaceUnits","origin","DesignWorkspace","openMenuPDF","setOpenMenuPDF","pdfView","showGraphicLearningType","showGraphicFormat","showGraphicModality","activity","handleOpenModalPDF","handleCloseMenu","activities","handleOpenDesign","designToExport","createdAt","auxElement","setAttribute","encodeURIComponent","exportJsonToFile","LearningResult","uiDispatch","designDispatch","clipPath","transition","crear","evaluar","analizar","aplicar","comprender","recordar","active","BloomPiramid","isActive","BloomVerbList","Radio","adornament","steps","stepContent","LearningResultModal","setDescription","activeStep","setActiveStep","Stepper","alternativeLabel","Step","StepLabel","bc","startAdornment","InputAdornment","prevActiveStep","learningResult","TextEditable","onSave","setEditing","handleSave","readOnly","Save","sectionAction","categoryPopOver","DesignMetadata","evaluationPatternRef","nameRef","classSizeRef","priorKnowledgeRef","objectiveRef","evaluationRef","workingTimeDesignHours","workingTimeDesignMinutes","workingTimeHours","workingTimeMinutes","clearEditors","handleChangeMetadataField","handleOpenLearningResultmodal","MenuProps","getBloomCategories","getBloomVerbs","bodyMargin","CheckSaveDesignModal","Commentary","commentary","commentaryInput","setCommentaryInput","handleDeleteCommentary","commentaryId","CardHeader","avatar","subheader","rowsMax","CommentaryInput","setCommentary","toJSON","DesignComments","menuLetters","menuLettersSelected","tabBarGrid","usersConnecteds","transform","DesignPage","isSmDevice","isXsDevice","setUsersList","metadataRef","tabsRef","gridWorkspaceRef","prefetchBloomCategories","prefetchBloomVerbs","metadataComponent","public","res","userInPrivileges","newDesign","mean","off","window","onbeforeunload","renderConnectedUsersButtonMenu","renderConnectedUserList","ConfirmationModal","setMessage","confirmResult","socketEvent","errorMessage","TaskReader","LearningActivityReader","renderLinkedLearningResults","linkedLearningResults","textLefPanel","DesignReader","duplicateDesignMutation","handleDuplicateDesign","handleOpenUserProfile","ratingRoot","labels","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","getInitialScore","existentAssesment","score","AssessmentModal","initialScore","assessment","setAssessment","setHover","Rating","precision","onChangeActive","newHover","rate","DesignPageReader","SharedLinkPage","errorSocket","setErrorSocket","setId","handleOpenAssessmentModal","backButton","instructions","codeForm","codeButton","codeInput","emailInitialValue","codeInitialValue","passwordInitialValue","confirm","confirmError","ResetPasswordPage","setUid","verificationCode","setVerificationCode","setCodeForm","setEmail","passwordForm","setPasswordForm","Code","VpnKey","Done","handleNext","handleChangeEmail","handleSearchAccount","randomCode","handleResetPassword","handleChangePassword","handleChangeCode","handleResendCode","step","toUpperCase","autoFocus","getStepContent","AppRouter","CssBaseline","exact","QueryClient","LearningActivityDesigner","QueryClientProvider","client","maxSnack","TransitionComponent","Grow","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.a74bfb20.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_URL;\r\n//const baseUrl = 'http://localhost:4000/api';\r\nconst fetchWithoutToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url);\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nconst fetchWithToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n    const token = localStorage.getItem('token') || '';\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'x-token': token,\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nconst uploadFetchWithToken = async (endpoint, data, method = 'POST') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n    const token = localStorage.getItem('token') || '';\r\n\r\n    const resp = await fetch(url, {\r\n        method,\r\n        headers: {\r\n            'x-token': token,\r\n        },\r\n        body: data\r\n    });\r\n    return await resp.json();\r\n};\r\n\r\nexport {\r\n    fetchWithoutToken,\r\n    fetchWithToken,\r\n    uploadFetchWithToken,\r\n};\r\n","import React, { useState, useEffect, useContext, createContext, useCallback } from 'react';\r\nimport { fetchWithoutToken, fetchWithToken } from 'utils/fetch';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuthState() {\r\n\tconst context = useContext(AuthContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useAuthState must be used within a AuthProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n    checking: true,\r\n\tuser: null,\r\n\ttoken: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [authState, setAuthState] = useState(initialState);\r\n\r\n\tconst login = async ( email, password ) => {\r\n        const resp = await fetchWithoutToken('auth/login', { email, password }, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst register = async (userData) => {\r\n        const resp = await fetchWithoutToken('auth/register', userData, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst logout = () => {\r\n        setAuthState({\r\n            checking: false,\r\n            user: null,\r\n\t\t\ttoken: null,\r\n        });\r\n    };\r\n\r\n\tconst verifyToken = useCallback( async () => {\r\n        const token = localStorage.getItem('token');\r\n        if(!token){\r\n            setAuthState({\r\n\t\t\t\tuser: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n        const resp = await fetchWithToken('auth/renew');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            localStorage.setItem('token', token);\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n            return true;\r\n        } else {\r\n            setAuthState({\r\n                user: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n    }, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState.token === null) {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', authState.token);\r\n\t\t}\r\n\t}, [authState.token]);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ \r\n\t\t\tauthState,\r\n\t\t\tlogin,\r\n\t\t\tregister,\r\n\t\t\tlogout,\r\n\t\t\tverifyToken,\r\n\t\t\tsetAuthState \r\n\t\t}}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n","import { createContext, useCallback, useContext, useEffect, useRef } from \"react\";\r\nimport { useSocket } from \"hooks/useSocket\";\r\nimport { useAuthState } from \"./AuthContext\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\nexport const SocketContext = createContext();\r\n\r\nexport const useSocketState = () => {\r\n\tconst context = useContext(SocketContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useSocketState must be used within a SocketProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n\r\n    const { authState } = useAuthState();\r\n    const { socket, online, connectSocket, disconnectSocket } = useSocket(process.env.REACT_APP_SOCKET_URL);\r\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n    const snackbarRef = useRef(null);\r\n    useEffect(() => {\r\n        if(!authState.checking && authState.user && !online) {\r\n            if (snackbarRef.current === null) snackbarRef.current = enqueueSnackbar('Se ha perdido la conexión. Intentando reconectar...', { variant: 'warning', persist: true });\r\n        } else {\r\n            if (snackbarRef.current !== null) {\r\n                closeSnackbar(snackbarRef.current);\r\n                snackbarRef.current = null;\r\n            }\r\n        }\r\n    }, [online, snackbarRef, closeSnackbar, enqueueSnackbar, authState.checking, authState.user]);\r\n    \r\n    useEffect(() => {\r\n        const logged = !!authState.token;\r\n        if( logged ) connectSocket();\r\n    }, [ authState.token, connectSocket ]);\r\n\r\n    useEffect(()=>{\r\n        const logged = !!authState.token;\r\n        if( !logged ) disconnectSocket();\r\n    }, [ authState.token, disconnectSocket ]);\r\n\r\n    const emitWithTimeout = useCallback(\r\n        (onSuccess, onTimeout, timeout=3000) => {\r\n            let called = false;\r\n\r\n            const timer = setTimeout(() => {\r\n                if (called) return;\r\n                called = true;\r\n                if(onTimeout) onTimeout();\r\n            }, timeout);\r\n            \r\n            return (...args) => {\r\n                if (called) return;\r\n                called = true;\r\n                clearTimeout(timer);\r\n                if(onSuccess) onSuccess.apply(this, args);\r\n            }\r\n        },\r\n        [],\r\n    )\r\n\r\n    return (\r\n        <SocketContext.Provider value={{ socket, online, emitWithTimeout }}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    );\r\n};","import { useAuthState } from \"contexts/AuthContext\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport const useSocket = (serverPath) => {\r\n    const [socket, setSocket] = useState(null);\r\n    const [online, setOnline] = useState(false);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectSocket = useCallback(() => {\r\n        const token = authState.token;\r\n        const tempSocket = io.connect( serverPath, {\r\n            transports: ['websocket'],\r\n            autoConnect: true,\r\n            forceNew: true,\r\n            query: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        setSocket(tempSocket);\r\n    }, [serverPath, authState.token]);\r\n\r\n    const disconnectSocket = useCallback(() => {\r\n        socket?.disconnect();\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        setOnline( socket?.connected );\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        socket?.on('connect', () => setOnline(true));\r\n        socket?.on('disconnect', () => setOnline(false));\r\n    }, [socket]);\r\n\r\n\r\n    return {\r\n        socket,\r\n        online,\r\n        connectSocket,\r\n        disconnectSocket\r\n    };\r\n};","import ui from 'types/ui';\r\nimport design from 'types/design';\r\n\r\nconst types = {\r\n    ui,\r\n    design,\r\n};\r\n\r\nexport default types;","const ui = {\r\n    toggleLoginModal: '[UI] toggle login modal',\r\n    toggleModal: '[UI] toggle modal',\r\n    toggleRegisterModal: '[UI] toggle register modal',\r\n    toggleLearningResultModal: '[UI] toggle learning result modal',\r\n    updateFolderPath: '[UI] update folder path',\r\n    toggleConfirmAction: '[UI] confirm action',\r\n    setFolder: '[UI] set folder data',\r\n    setConfirmData: '[UI] set confirm data',\r\n    setPDF: '[UI] set pdf',\r\n    setResourceLink: '[UI] set resource link',\r\n    setEvaluation: '[UI] set evaluation',\r\n    setPDFConfig: '[UI] set pdf config',\r\n    setUserSaveDesign: '[UI] set user save design',\r\n    setHistoryInCheckSaveDesign: '[UI] set history check save design',\r\n    setScrollToNewActivity: '[UI] set scroll to new activity',\r\n    setScrollToNewTask: '[UI] set scroll to new task',\r\n};\r\n\r\nexport default ui;","const design = {\r\n    updateDesign: '[DESIGN] toggle login modal',\r\n    changeMetadataField: '[DESIGN] change metadata field',\r\n    changeTaskField: '[DESIGN] change task field',\r\n    setCurrentLearningResultField: '[DESIGN] set learning result field',\r\n    clearCurrentLearningResult: '[DESIGN] clear current learning result',\r\n    setCurrentLearningResult: '[DESIGN] set current learning result',\r\n    setBloomCategories: '[DESIGN] set bloom categories',\r\n    setBloomVerbs: '[DESIGN] set bloom verbs',\r\n    setDesignPrivileges: '[DESIGN] set design privileges',\r\n    addDesignKeyword: '[DESIGN] add design keyword',\r\n    removeDesignKeyword: '[DESIGN] remove design keyword',\r\n    updateReadOnlyLink: '[DESIGN] change read only link',\r\n    setAssessments: '[DESIGN] set assessments',\r\n    setScoreMean: '[DESIGN] set score mean',\r\n    commentDesign: '[DESIGN] add a commentary',\r\n    deleteComment: '[DESIGN] delete a commentary',\r\n    setConnectedUsers: '[DESIGN] set connected users',\r\n};\r\n\r\nexport default design;","import types from \"types\";\r\n\r\n\r\nexport const uiReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.ui.toggleModal:\r\n            return {\r\n                ...state,\r\n                ['is' + action.payload + 'ModalOpen']: !state['is' + action.payload + 'ModalOpen'],\r\n            };\r\n        case types.ui.toggleRegisterModal:\r\n            return {\r\n                ...state,\r\n                isRegisterModalOpen: !state.isRegisterModalOpen,\r\n            };\r\n        case types.ui.updateFolderPath:\r\n            if (state.folderPath !== action.payload) {\r\n                return {\r\n                    ...state,\r\n                    folderPath: action.payload,\r\n                };\r\n            } else return state;\r\n        case types.ui.toggleWitchOpenModal:\r\n            return {\r\n                ...state,\r\n                setWitchOpenModal: !state.setWitchOpenModal,\r\n            };\r\n        case types.ui.setFolder:\r\n            return {\r\n                ...state,\r\n                folder: action.payload,\r\n            };\r\n        case types.ui.setConfirmData:\r\n            return{\r\n                ...state,\r\n                confirmModalData: action.payload,\r\n            };\r\n        case types.ui.setPDF:\r\n            return{\r\n                ...state,\r\n                pdf: {\r\n                    ...state.pdf,\r\n                    typeUserPDF: action.payload\r\n                },\r\n            };\r\n        case types.ui.setResourceLink:\r\n            return{\r\n                ...state,\r\n                resourceLink: action.payload,\r\n            };\r\n        case types.ui.setEvaluation:\r\n            return{\r\n                ...state,\r\n                evaluationData: action.payload,\r\n            };\r\n        case types.ui.setPDFConfig:\r\n            return{\r\n                ...state,\r\n                pdf: {\r\n                    ...state.pdf,\r\n                    [action.payload.field]: action.payload.value\r\n                },\r\n            };\r\n        case types.ui.setUserSaveDesign:\r\n            return {\r\n                ...state,\r\n                userSaveDesign: action.payload,\r\n            };\r\n        case types.ui.setHistoryInCheckSaveDesign:\r\n            return{\r\n                ...state,\r\n                historyData: action.payload,\r\n            };\r\n        case types.ui.setScrollToNewActivity:\r\n            return{\r\n                ...state,\r\n                newActivity: action.payload,\r\n            };\r\n        case types.ui.setScrollToNewTask:\r\n            return{\r\n                ...state,\r\n                newTask: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { uiReducer } from 'contexts/ui/uiReducer';\r\n\r\nconst UiContext = createContext();\r\n\r\nexport function useUiState() {\r\n\tconst context = useContext(UiContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUiState must be used within a UiProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tfolderPath: '/',\r\n\tisLoginModalOpen: false,\r\n\tisRegisterModalOpen: false,\r\n\tisLearningResultModalOpen: false,\r\n\tisEditProfileModalOpen: false,\r\n\tisContactsModalOpen: false,\r\n\tisConfirmationModalOpen: false,\r\n\tisShareModalOpen: false,\r\n\tsetWichOpenModal: false,\r\n\tisFolderModalOpen: false,\r\n\tisPDFModalOpen: false,\r\n\tisResourceModalOpen: false,\r\n\tisEvaluationModalOpen: false,\r\n\tisImportDesignsModalOpen: false,\r\n\tisCheckSaveDesignModalOpen: false,\r\n\tuserSaveDesign: true,\r\n\tisAssessmentModalOpen: false,\r\n\tfolder: {\r\n\t\t_id: null,\r\n\t\tname: '',\r\n\t},\r\n\tconfirmModalData: {\r\n\t\ttype: null,\r\n\t\targs: null,\r\n\t\tactionMutation: null,\r\n\t},\r\n\tpdf: {\r\n\t\ttypeUserPDF: null,\r\n\t},\r\n\tresourceLink:{\r\n\t\tlearningActivityIndex: null,\r\n\t\ttaskIndex: null,\r\n\t},\r\n\tevaluationData:{\r\n\t\tlearningActivityIndex: null,\r\n\t},\r\n\thistoryData:{\r\n\t\turl: null,\r\n\t},\r\n\tnewActivity: false,\r\n\tnewTask: false,\r\n};\r\n\r\nexport const UiProvider = ({ children }) => {\r\n\r\n\tconst [ uiState, dispatch ] = useReducer(uiReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<UiContext.Provider value={ { uiState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</UiContext.Provider>\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 64px)',\r\n    }\r\n}));\r\n\r\nexport const LandingPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h1>LandingPage</h1>\r\n            <hr/>\r\n            \r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( !isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/my-designs\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    localStorage.setItem('lastPath', rest.location.pathname);\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","export const formatName = (name, lastname) => {\r\n    const firstName = name.split(' ')[0];\r\n    const firstLastname = lastname.split(' ')[0];\r\n    return `${firstName} ${firstLastname}`;\r\n};\r\n\r\nexport const getUserInitials = (name, lastname) => {\r\n    return `${name.substring(0, 1) + lastname.substring(0, 1)}`;\r\n};\r\n\r\nexport const capitalize = (word) => {\r\n    if (!word) return;\r\n    return word[0].toUpperCase() + word.slice(1).toLowerCase();\r\n}","import { fetchWithoutToken, fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getRecentDesigns = async () => {\r\n    const resp = await fetchWithToken('design/recent');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsByFolder = async ( path, pageParam ) => {\r\n    const resp = await fetchWithToken('design/user', {\r\n        path,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicDesignsByUser = async ( id, pageParam ) => {\r\n    const resp = await fetchWithToken(`design/public/user/`, {\r\n        id,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicFilteredDesigns = async (filter, keywords, categories, pageParam) => {\r\n    const resp = await fetchWithToken(`design/public-repository`, {\r\n        filter,\r\n        keywords,\r\n        categories,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsSharedWithMe = async ( pageParam ) => {\r\n    const resp = await fetchWithToken(`design/shared-with-user/`, {\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createDesign = async ({ path, isPublic = false }) => {\r\n    const resp = await fetchWithToken(`design`, { path, isPublic }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteDesignById = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/${ id }`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const uptdateUserInDesign = async ({ id, privileges }) =>{\r\n    try {\r\n        const resp = await fetchWithToken(`design/${id}`, { \r\n            newData: { id, privileges }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        };\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const getDesignByLink = async ({ link }) => {\r\n    if(!link || (link && link.trim().length === 0)) return { design: {} };\r\n    const resp = await fetchWithoutToken(`design/shared-link/${link}`, {}, 'GET');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    };\r\n    return resp.data;\r\n};\r\n\r\nexport const duplicateDesign = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/duplicate`, { id }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    };\r\n    return resp.data;\r\n};\r\n\r\nexport const importDesign = async ({ path, filename, design, last }) => {\r\n    const resp = await fetchWithToken(`design/import`, { path, filename, design }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    };\r\n    return resp;\r\n};","import React from 'react';\r\nimport { Avatar, Box, Card, CardActionArea, CardActions, CardContent, IconButton, makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport { Delete, Description, Star } from '@material-ui/icons';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { deleteDesignById } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        borderRadius: 5,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n    },\r\n    row: {\r\n        display: 'flex',\r\n    },\r\n    rowJustified: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n    },\r\n    col: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    ellipsis: {\r\n        width: 200,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    designIcon: {\r\n        marginLeft: -12,\r\n        fontSize: 50,\r\n        alignSelf: 'center',\r\n        justifySelf: 'start',\r\n        width: '20%',\r\n    },\r\n    deleteIcon: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\n\r\nexport const Design = ({ _id, title, updatedAt, metadata, folder, owner, privileges, canDelete = true }) => {\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const history = useHistory();\r\n    //const [hours, minutes] = TimeFormatter.toHoursAndMinutes(metadata.workingTime ?? 0);\r\n\r\n    const deleteMutation = useMutation(deleteDesignById, {\r\n        onMutate: async () => {\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', folder.path]);\r\n            await queryClient.cancelQueries([owner._id, 'user-public-designs']);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousDesigns = queryClient.getQueryData(['designs', folder.path]);\r\n            const previousPublicDesigns = queryClient.getQueryData([owner, 'user-public-designs']);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['designs', folder.path];\r\n            if (!history.location.pathname.includes('/my-designs')) keys = [owner._id, 'user-public-designs'];\r\n            queryClient.setQueryData(keys, oldData => {\r\n                const oldPage = oldData.pages.find(page => page.designs.find(design => design._id === _id));\r\n                const newDesigns = oldPage.designs.filter((design) => design._id !== _id);\r\n                const newPage = Object.assign({}, { ...oldPage, designs: newDesigns });\r\n                let newPages = oldData.pages;\r\n                newPages[oldData.pages.indexOf(oldPage)] = newPage;\r\n                return Object.assign({}, { ...oldData, pages: newPages });\r\n            });\r\n            if (folder.path === '/') {\r\n                const previousRecentDesigns = queryClient.getQueryData('recent-designs');\r\n                // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n                queryClient.setQueryData('recent-designs', oldData => oldData.filter((design) => design._id !== _id));\r\n                return { previousDesigns, previousPublicDesigns, previousRecentDesigns };\r\n            }\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousDesigns, previousPublicDesigns };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, design, context) => {\r\n            // TODO: Emitir notificación para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['designs', folder.path], context.previousDesigns);\r\n            queryClient.setQueryData([owner, 'user-public-designs'], context.previousPublicDesigns);\r\n            if (context.previousRecentDesigns) queryClient.setQueryData('recent-designs', context.previousRecentDesigns);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', folder.path]);\r\n            queryClient.invalidateQueries([owner._id, 'user-public-designs']);\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Su diseño se ha eliminado.', { variant: 'success', autoHideDuration: 2000 });\r\n        }\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDeleteDesign = async (e) => {\r\n        e.stopPropagation();\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'diseño',\r\n                args: { id: _id },\r\n                actionMutation: deleteMutation,\r\n            }\r\n        })\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const handleOpenDesign = () => {\r\n        const inDesign = privileges.find(privilege => authState.user.uid === privilege.user);\r\n        if (inDesign) {\r\n            const typePrivilegeEditor = privileges.find(privilege => authState.user.uid === privilege.user && privilege.type === 0);\r\n            if (typePrivilegeEditor) {\r\n                history.push(`/designs/${_id}`);\r\n            } else {\r\n                history.push(`/designs/reader/${_id}`);\r\n            }\r\n        } else if (metadata.isPublic) {\r\n            history.push(`/designs/reader/${_id}`);\r\n        } else {\r\n            history.push(`/`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box style={{ padding: 5 }}>\r\n            <Card className={classes.root} elevation={0}>\r\n                <CardActionArea onClick={handleOpenDesign}>\r\n                    <CardContent>\r\n                        <div className={classes.row} style={{ width: '100%' }}>\r\n                            <Description className={classes.designIcon} />\r\n                            <div className={classes.col}>\r\n                                <div className={classes.row}>\r\n                                    <Tooltip title={`${title}`} arrow placement=\"top\">\r\n                                        <Typography className={classes.ellipsis} variant='h5' component=\"h2\" >{title}</Typography>\r\n                                    </Tooltip>\r\n                                </div>\r\n                                <div className={classes.row}>\r\n                                    <Typography className={classes.ellipsis} variant=\"body1\" component=\"p\">{metadata.category ? metadata.category.name : 'Sin categoría'}</Typography>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className={classes.rowJustified}>\r\n                            <Typography variant=\"body1\" component=\"p\">Tiempo de diseño: {`${metadata.workingTime.hours ?? 0}:${metadata.workingTime.minutes ?? 0}`} Hrs</Typography>\r\n                        </div>\r\n                        <div className={classes.rowJustified} style={{ marginTop: 10, marginBottom: -5 }}>\r\n                            <Typography color=\"textSecondary\" variant='body2'>Última modificación: {new Date(updatedAt).toLocaleDateString()}</Typography>\r\n                            <div className={classes.row} style={{ marginRight: 4 }}>\r\n                                <Star fontSize='small' />\r\n                                <Typography variant='body2'> {metadata.scoreMean}</Typography>\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </CardActionArea>\r\n                {\r\n                    canDelete && authState.user.uid === owner._id && (<IconButton className={classes.deleteIcon} onClick={handleDeleteDesign}>\r\n                        <Delete />\r\n                    </IconButton>)\r\n                }\r\n                <CardActionArea component={Link} to={`/profile/${owner._id}`}>\r\n                    <CardActions className={classes.ownerInfo}>\r\n                        <Avatar\r\n                            alt={formatName(owner.name, owner.lastname)}\r\n                            src={owner.img && owner.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${owner.img}` : ''}\r\n                        >\r\n                            {getUserInitials(owner.name, owner.lastname)}\r\n                        </Avatar>\r\n                        <div>\r\n                            <Typography color='textPrimary'>{formatName(owner.name, owner.lastname)}</Typography>\r\n                            <Typography color=\"textSecondary\">{owner.occupation ?? 'Sin ocupación'}</Typography>\r\n                        </div>\r\n                    </CardActions>\r\n                </CardActionArea>\r\n            </Card>\r\n        </Box>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Card, CardActions, CardContent, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        //border: `1px solid ${ theme.palette.divider }`,\r\n        //paddingTop: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        width: 325,\r\n        minWidth: 325,\r\n        height: 198,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 10,\r\n        //backgroundColor: theme.palette.divider,\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        paddingTop: 10,\r\n    },\r\n    row: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    col: {\r\n        width: '80%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    }\r\n}));\r\n\r\nexport const DesignSkeleton = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <div className={ classes.row }>\r\n                    <Skeleton variant=\"rect\" width={35} height={43} />\r\n                    <div className={ classes.col }>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={33} width={'80%'}/>\r\n                        </div>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={23} width={'70%'}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={ classes.row }>\r\n                    <Skeleton animation=\"wave\" height={20} width={'70%'}/>  \r\n                </div>\r\n                <div className={ classes.row } >\r\n                    <div className={ classes.row } style={{marginTop:14, marginBottom:-5}}>\r\n                        <Skeleton animation=\"wave\" height={20} width={'70%'} />\r\n                        <Skeleton variant=\"circle\" width={13} height={13} style={{marginTop: 2, marginRight:5}}/>\r\n                    </div>\r\n                    <Skeleton animation=\"wave\" height={20} width={'5%'} style={{marginTop:14, marginBottom:-5}}/>\r\n                </div>\r\n            </CardContent>\r\n            <CardActions className={ classes.ownerInfo } >\r\n                <Skeleton variant=\"circle\" width={40} height={40} style={{marginBottom: 3}}/>\r\n                <div className={ classes.col } style={{marginBottom: 3}}>\r\n                    <Skeleton animation=\"wave\" height={20} width={'100%'}/>\r\n                    <Skeleton animation=\"wave\" height={20} width={'80%'}/>\r\n                </div>\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n}","import React from 'react';\r\nimport { Button, Link, makeStyles } from '@material-ui/core';\r\nimport { Design } from 'components/Design';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { DesignSkeleton } from './DesignSkeleton';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems: 'center',\r\n    },\r\n    loadMore: {\r\n        marginBottom: 50,\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});\r\n\r\nexport const DesignsContainer = ({ data, status, isFetchingNextPage, fetchNextPage, hasNextPage, handleCreateDesign, label }) => {\r\n    const classes = useStyles();\r\n    const { authState } = useAuthState();\r\n\r\n    const designList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.designs.map((design, i) => <Design key={'my-design' + design._id} title={design.metadata.name} {...design} canDelete={label!=='public-repository'} />);\r\n        });\r\n    };\r\n\r\n    const desingSkeletonsList = () => {\r\n        return [...Array(10).keys()].map((index) => {\r\n            return <DesignSkeleton key={`design-skeleton-${index}`} />\r\n        });\r\n    };\r\n\r\n    const alert = () => {\r\n        if(label === 'shared-with-me'){\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseños compartidos. Cuando otros usuarios compartan diseños contigo aparecerán aquí.\r\n                </Alert>\r\n            );\r\n        } else if (label === 'user-profile'){\r\n            if (data.pages[0].ownerId === authState.user.uid) {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        No cuentas con diseños públicos. Crea tu primer diseño público haciendo click {' '}\r\n                        <Link className={classes.clickHere} onClick={handleCreateDesign}>aquí</Link>\r\n                        !\r\n                    </Alert>\r\n                );\r\n            } else {\r\n                return (\r\n                    <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                        Este usuario no cuenta con diseños públicos.\r\n                    </Alert>\r\n                );\r\n            }\r\n        } else if(label === 'public-repository'){\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado resultados para tu búsqueda.\r\n                </Alert>\r\n            );\r\n        } else {\r\n            return (\r\n                <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                    No se han encontrado diseños en este directorio. Crea tu primer diseño haciendo click {' '}\r\n                    <Link className={classes.clickHere} onClick={handleCreateDesign}>aquí</Link>\r\n                    !\r\n                </Alert>\r\n            );\r\n        }\r\n    };\r\n    \r\n    return status === 'loading' ? (\r\n        <div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                { desingSkeletonsList() }\r\n            </div>\r\n        </div>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            Ha ocurrido un problema al intentar obtener los diseños. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n            Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n        </Alert>\r\n    ) : (\r\n        <div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                {\r\n                    data.pages[0].designs.length > 0\r\n                        ? designList()\r\n                        : alert()\r\n                }\r\n            </div>\r\n            {\r\n                data && data.pages[0].designs.length > 0 && hasNextPage &&\r\n                <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                    {\r\n                        isFetchingNextPage\r\n                            ? 'Cargando más...'\r\n                            : 'Cargar Más'\r\n                    }\r\n            </Button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getfolderByPath = async ( path ) => {\r\n    const resp = await fetchWithToken('folder/user', {\r\n        path,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createFolder = async ({ path, folderName }) => {\r\n    const resp = await fetchWithToken('folder/create', {\r\n        path,\r\n        folderName,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const renameFolder = async ({ id, name }) => {\r\n    const resp = await fetchWithToken(`folder/${id}`, {\r\n        name,\r\n    }, 'PUT');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteFolder = async ({ id }) => {\r\n    const resp = await fetchWithToken(`folder/${id}`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import { Box, ListItemIcon, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport React, { useRef, useState } from 'react';\r\n\r\nconst initialState = {\r\n    mouseX: null,\r\n    mouseY: null,\r\n};\r\n\r\nexport const RightClickMenu = ({ options, children }) => {\r\n\r\n    const [state, setState] = useState(initialState);\r\n    const ref = useRef();\r\n\r\n    const handleClick = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const area = ref.current.getBoundingClientRect();\r\n        if(\r\n            (e.clientX >= area.x && e.clientX <= (area.x + area.width)) &&\r\n            (e.clientY >= area.y && e.clientY <= (area.y + area.height))\r\n        ) {\r\n            setState({\r\n                mouseX: e.clientX - 2,\r\n                mouseY: e.clientY - 4,\r\n            });\r\n        } else handleClose();\r\n    };\r\n\r\n    const handleSelect = (e, onSelect) => {\r\n        if(onSelect) onSelect(e);\r\n        handleClose();\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setState(initialState);\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if(options && options.length){\r\n            return options.map((option, index) => {\r\n                return (<MenuItem key={`option-${index}-${option}`} onClick={ (e) => handleSelect(e, option.onSelect)}>\r\n                    {\r\n                        option.icon \r\n                            ?   <ListItemIcon>\r\n                                    { option.icon }\r\n                                </ListItemIcon> \r\n                            : <div></div>\r\n                    }\r\n                    <Typography>{ option.label }</Typography>\r\n                </MenuItem>);\r\n            });\r\n        }else {\r\n            return (\r\n                <Typography component='div'>\r\n                    <Box fontStyle=\"italic\">\r\n                        No hay opciones especificadas.\r\n                    </Box>\r\n                </Typography>\r\n            );\r\n      }\r\n    };\r\n\r\n    return (\r\n        <div ref={ref} onContextMenu={handleClick} style={{width: 325}}>\r\n            {children}\r\n            <Menu\r\n                keepMounted\r\n                open={state.mouseY !== null}\r\n                onClose={handleClose}\r\n                anchorReference=\"anchorPosition\"\r\n                anchorPosition={\r\n                state.mouseY !== null && state.mouseX !== null\r\n                    ? { top: state.mouseY, left: state.mouseX }\r\n                    : undefined\r\n                }\r\n            >   \r\n                { renderContent() }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, IconButton, ListItemIcon, makeStyles, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { Delete, Edit, Folder, MoreVert } from '@material-ui/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport { RightClickMenu } from './RightClickMenu';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { deleteFolder } from 'services/FolderService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        borderRadius: 5,\r\n        margin: '10px 10px 10px 0px',\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.paper,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    folderContainer: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        borderRadius: theme.shape.borderRadius,\r\n        alignItems: 'center',\r\n        width: '100%',\r\n        userSelect: 'none',\r\n        \r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n    },\r\n    folderBody: {\r\n        padding: '15px 10px 15px 20px',\r\n        display: 'flex',\r\n        justifyContent: 'start',\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n    folderName: {\r\n        paddingTop: 3,\r\n        fontSize: 20,\r\n        paddingLeft: 20,\r\n    },\r\n    more: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const DesignsFolder = ({ _id, name, path, ...rest }) => {\r\n    const classes = useStyles();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const { dispatch } = useUiState();\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const parentPath = path !== '/' + name ? path.replace('/' + name, '') : path.replace(name, '');\r\n\r\n    const deleteFolderMutation = useMutation(deleteFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', parentPath]);\r\n            const previousFolders = queryClient.getQueryData(['folders', parentPath]);\r\n            queryClient.setQueryData(['folders', parentPath], oldFolders => oldFolders.filter(folder => folder._id !== _id));\r\n            return { previousFolders };\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', parentPath]);\r\n        },\r\n        onError: (error, folder, context) => {\r\n            queryClient.setQueryData(['folders', parentPath], context.previousFolders);\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Carpeta eliminada con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n        }\r\n    });\r\n\r\n    const handleRename = (e) => {\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setFolder,\r\n            payload: {\r\n                _id,\r\n                name,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder',\r\n        });\r\n    };\r\n\r\n    const handleDelete = async (e) => {\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'carpeta',\r\n                args: { id: _id},\r\n                actionMutation: deleteFolderMutation,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n        //await deleteFolderMutation.mutate({ id: _id });\r\n    };\r\n\r\n    const handleOpenMenu = (e) => {\r\n        e.stopPropagation();\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    return (\r\n        <Box className={classes.root} {...rest} >\r\n            <RightClickMenu options={[\r\n                { icon: <Edit></Edit>, label: 'Cambiar Nombre', onSelect: handleRename },\r\n                { icon: <Delete></Delete>, label: 'Eliminar', onSelect: handleDelete },\r\n            ]}>\r\n                <div className={classes.content}>\r\n                    <Box className={classes.folderContainer} component={Link} to={`/my-designs${path}`} {...rest} >\r\n                        <div className={classes.folderBody}>\r\n                            <Folder fontSize='large' />\r\n                            <Typography className={classes.folderName}>\r\n                                {name}\r\n                            </Typography>\r\n                        </div>\r\n                    </Box>\r\n                    <IconButton className={classes.more} onClick={handleOpenMenu}>\r\n                        <MoreVert />\r\n                    </IconButton>\r\n                    <Menu\r\n                        onBlur={()=>setMenuOpen(null)}\r\n                        anchorEl={isMenuOpen}\r\n                        open={Boolean(isMenuOpen)}\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        keepMounted\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        onClose={()=>setMenuOpen(null)}\r\n                    >\r\n                        <MenuItem onClick={handleRename}>\r\n                            <ListItemIcon>\r\n                                <Edit />\r\n                            </ListItemIcon>\r\n                            <Typography>Cambiar Nombre</Typography>\r\n                        </MenuItem>\r\n                        <MenuItem onClick={handleDelete}>\r\n                            <ListItemIcon>\r\n                                <Delete />\r\n                            </ListItemIcon>\r\n                            <Typography>Eliminar</Typography>\r\n                        </MenuItem>\r\n                    </Menu>\r\n                </div>\r\n            </RightClickMenu>\r\n        </Box>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { DesignsFolder } from 'components/DesignsFolder';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        paddingTop: 15,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    folderContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n    }\r\n});\r\n\r\nexport const FoldersContainer = ({ title, data }) => {\r\n    const classes = useStyles();    \r\n\r\n    const folderList = () => {\r\n        return data.map((folder) => <DesignsFolder key={'my-folder' + folder._id} {...folder} />);\r\n    };\r\n\r\n    return data && data.length > 0 \r\n        ?(<div className={classes.root}>\r\n            <div className={classes.folderContainer}>\r\n                { folderList() }\r\n            </div>\r\n        </div>)\r\n        : (<div></div>);\r\n};\r\n","import React from 'react';\r\nimport { Button, Divider, List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { createDesign } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const LeftPanel = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate( {path:'/'});\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button variant='contained' color='default' style={{ margin: 10 }} onClick={handleCreateDesign}>\r\n                Crear Diseño\r\n            </Button>\r\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                <ListItem button selected={location.pathname.includes('/my-designs')} component={ Link } to='/my-designs'>\r\n                    <Home className={classes.icon} />\r\n                    <ListItemText primary='Mis Diseños'/>\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/shared-with-me')} component={ Link } to='/shared-with-me'>\r\n                    <Group className={classes.icon} />\r\n                    <ListItemText primary='Compartidos Conmigo' />\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/public-repository')} component={ Link } to='/public-repository'>\r\n                    <Public className={classes.icon} />\r\n                    <ListItemText primary='Repositorio Público' />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>\r\n        </>\r\n    )\r\n}\r\n","import { Breadcrumbs, makeStyles, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    link:{\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignsBreadcrumbs = () => {\r\n    const classes = useStyles();\r\n    const { uiState } = useUiState();\r\n    const path = uiState.folderPath;\r\n\r\n    const createBreadcrumbsLinks = () => {\r\n        if (path.length !== 1) {\r\n            let newPath = '';\r\n            const folderList = path.split('/');\r\n            folderList.shift();\r\n            return folderList.map((folderName) => {\r\n                newPath += '/' + folderName;\r\n                const folderPath = newPath;\r\n                return (<div key={folderPath} style={{ display: 'flex' }}>\r\n                    {\r\n                        (path === folderPath)\r\n                            ? <Typography color=\"textPrimary\">{folderName} </Typography>\r\n                            : <Typography className={classes.link} color=\"inherit\" component={Link} to={`/my-designs${folderPath}`} >{folderName} </Typography>\r\n                    }\r\n                </div>);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Breadcrumbs className={classes.root}>\r\n            {\r\n                path.length !== 1\r\n                    ? <Typography className={classes.link} color=\"inherit\" component={Link} to=\"/my-designs\"> Mis Diseños </Typography>\r\n                    : <Typography color=\"textPrimary\"> Mis Diseños </Typography>\r\n            }\r\n            {\r\n                createBreadcrumbsLinks()\r\n            }\r\n        </Breadcrumbs>\r\n    )\r\n}\r\n","import { useLayoutEffect, useState } from 'react';\r\n\r\nexport function useHorizontalScroll() {\r\n    const [node, setRef] = useState(null)\r\n    useLayoutEffect(() => {\r\n        if (node) {\r\n            const onWheel = e => {\r\n                if (e.deltaY === 0) return;\r\n                e.preventDefault();\r\n                node.scrollTo({\r\n                    left: node.scrollLeft + e.deltaY,\r\n                    behavior: 'auto',\r\n                });\r\n            };\r\n            node.addEventListener('wheel', onWheel);\r\n            return () => node.removeEventListener('wheel', onWheel);\r\n        }\r\n    }, [node]);\r\n    return setRef;\r\n}","import { Box, makeStyles } from '@material-ui/core';\r\nimport { KeyboardArrowLeft, KeyboardArrowRight } from '@material-ui/icons';\r\nimport { useHorizontalScroll } from 'hooks/useHorizontalScroll';\r\nimport React, { useRef, useState } from 'react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        width: `100%`,\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        mouseWheel: 'horizontal',\r\n        overflowX: 'auto',\r\n        overflowY: 'hidden',\r\n        listStyle: 'none',\r\n        paddingTop: theme.spacing(0.5),\r\n        paddingBottom: theme.spacing(0.5),\r\n        margin: 0,\r\n        //scrollBehavior: 'smooth',\r\n    },\r\n    prev: {\r\n        position: 'absolute',\r\n        height: 'calc(100% - 0.6em)',\r\n        width: 50,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 10,\r\n        left: 0,\r\n        background: `linear-gradient(270deg, transparent, ${theme.palette.action.disabledBackground} 100%)`,\r\n        '&:hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: theme.palette.action.hover,\r\n        }\r\n    },\r\n    next: {\r\n        position: 'absolute',\r\n        height: 'calc(100% - 0.6em)',\r\n        width: 50,\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        zIndex: 10,\r\n        right: 0,\r\n        background: `linear-gradient(90deg, transparent, ${theme.palette.action.disabledBackground} 100%)`,\r\n        '&:hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const HorizontalScrollableContainer = ({ children }) => {\r\n    const classes = useStyles();\r\n    const scrollRef = useHorizontalScroll();\r\n    const [ref, setRef] = useState(null);\r\n    const prevRef = useRef();\r\n    const nextRef = useRef();\r\n\r\n    const handlePrev = () => {\r\n        if (ref){\r\n            ref.scrollTo({\r\n                left: ref.scrollLeft - 335,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (ref){\r\n            ref.scrollTo({\r\n                left: ref.scrollLeft + 335,\r\n                behavior: 'smooth',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Box position='relative'>\r\n            <Box ref={prevRef} onClick={handlePrev} className={classes.prev}>\r\n                <KeyboardArrowLeft style={{ fontSize: 40 }} />\r\n            </Box>\r\n            <Box ref={nextRef} onClick={handleNext} className={classes.next}>\r\n                <KeyboardArrowRight style={{ fontSize: 40 }} />\r\n            </Box>\r\n            <Box ref={(r)=>{scrollRef(r);setRef(r)}} className={classes.root}>\r\n                {children}\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Divider, makeStyles, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport { Design } from 'components/Design';\r\nimport { DesignSkeleton } from 'components/DesignSkeleton';\r\nimport { getRecentDesigns } from 'services/DesignService';\r\nimport { HorizontalScrollableContainer } from 'components/HorizontalScrollableContainer';\r\n\r\nconst useStyles = makeStyles({\r\n    root:{\r\n        paddingTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    recentDesigns: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'nowrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop:15,\r\n    },\r\n    title: {\r\n        //paddingLeft:10,\r\n        //paddingRight:10,\r\n    }\r\n});\r\n\r\nexport const RecentDesigns = ({ width, height }) => {\r\n    const classes = useStyles();\r\n    const n = Math.trunc(width / 345);\r\n\r\n    const { isLoading, isError, data } = useQuery(\"recent-designs\", async () => {\r\n        return getRecentDesigns();\r\n    });\r\n    \r\n\r\n    if (isError) {\r\n        return <div></div>;\r\n    }\r\n    \r\n    const createSkeletons = () => {\r\n        return Array.from(Array(n).keys()).map( i => {return(<DesignSkeleton key={`recent-design-skeleton-${ i }`}/>)});\r\n    };\r\n\r\n    const designList = () => {\r\n        return data.map((design) => <Design key={'recent' + design._id} title={design.metadata.name} {...design} canDelete={ false } />);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                data && data.length !== 0 \r\n                    ? <div className={classes.title}>\r\n                    <Typography variant='h4'>\r\n                        Diseños recientes\r\n                    </Typography>\r\n                    <Divider />\r\n                </div>\r\n                    : <div></div>\r\n            }\r\n            {\r\n                data && data.length > 0 \r\n                    ? data.length > n ? \r\n                        <HorizontalScrollableContainer>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </HorizontalScrollableContainer>\r\n                        :\r\n                        <div className={classes.recentDesigns}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </div>\r\n                    : <div></div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport { createFolder, renameFolder } from 'services/FolderService';\r\n\r\nimport { Close } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    folderNameInput: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n    }\r\n}));\r\n\r\nexport const FolderModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { folderPath, folder, isFolderModalOpen } = uiState;\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const [error, setError] = useState(null);\r\n    const [name, setName] = useState(folder.name);\r\n\r\n    useEffect(() => {\r\n        setName(folder.name);\r\n    }, [folder.name, setName]);\r\n\r\n    const createFolderMutation = useMutation(createFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', folderPath]);            \r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', folderPath]);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Carpeta creada con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n            handleCloseModal();\r\n        }\r\n    });\r\n\r\n    const renameFolderMutation = useMutation(renameFolder, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries(['folders', folderPath]);            \r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['folders', folderPath]);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            enqueueSnackbar('Nombre de carpeta cambiado con éxito.',  {variant: 'success', autoHideDuration: 2000});\r\n            handleCloseModal();\r\n        }\r\n    });\r\n\r\n    const handleChangeName = ({target}) => {\r\n        if(!!error) setError(null);\r\n        setName(target.value);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder',\r\n        });\r\n        dispatch({\r\n            type: types.ui.setFolder,\r\n            payload: {\r\n                _id: null,\r\n                name: '',\r\n            }\r\n        });\r\n        setName('');\r\n        setError(null);\r\n    };\r\n\r\n    const handleCreateFolder = async (e) => {\r\n        if (name.trim() === '') return setError('Este campo es obligatorio.');\r\n        if (name.trim() === '/' || name.trim().toLowerCase() === 'mis diseños') return setError('Nombre de carpeta no permitido.');\r\n        await createFolderMutation.mutate({path: folderPath, folderName: name.trim()});\r\n    };\r\n    \r\n    const handleRenameFolder = async (e) => {\r\n        if (name.trim() === '') return setError('Este campo es obligatorio.');\r\n        if (name.trim() === '/' || name.trim().toLowerCase() === 'mis diseños') return setError('Nombre de carpeta no permitido.');\r\n        if (name.trim().toLowerCase() === folder.name.trim().toLowerCase()) return handleCloseModal();\r\n        await renameFolderMutation.mutate({id: folder._id, name});\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isFolderModalOpen} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !folder._id ? 'Nueva Carpeta' : 'Editar Carpeta'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Typography style={{marginBottom: 20}}>\r\n                    Usted está por { !folder._id ? 'crear una nueva carpeta' : 'editar una carpeta' }.\r\n                    Por favor ingrese el { !folder._id ? '' : 'nuevo' } nombre para su carpeta en la siguiente entrada de texto.\r\n                </Typography>\r\n                <Typography variant='caption' >\r\n                    IMPORTANTE: No puede existir una carpeta en el directorio con el mismo nombre.\r\n                </Typography>\r\n                <TextField \r\n                    className={classes.folderNameInput}\r\n                    error={!!error}\r\n                    helperText={error}\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    name=\"name\"\r\n                    value={name}\r\n                    onChange={handleChangeName}\r\n                    label=\"Nombre Carpeta\"\r\n                    type=\"text\"\r\n                    fullWidth\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleCloseModal}>\r\n                    Cancelar\r\n                </Button>\r\n                {\r\n                    !folder._id \r\n                        ? <Button variant=\"contained\" color=\"primary\" onClick={handleCreateFolder}>\r\n                            Crear Carpeta\r\n                            </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" onClick={handleRenameFolder}>\r\n                            Editar Carpeta\r\n                        </Button>\r\n                }\r\n                \r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Box, Button, IconButton, ListItemIcon, Menu, MenuItem, Typography } from '@material-ui/core';\r\nimport { MoreVert } from '@material-ui/icons';\r\n\r\nexport const CustomMenu = ({ options, Icon, text, fullWidth = false, children }) => {\r\n    const [isOpen, setOpen] = useState(null);\r\n\r\n    const handleOpen = (e) => {\r\n        setOpen(e.currentTarget);\r\n    };\r\n\r\n    const handleSelect = (e, onSelect) => {\r\n        if(onSelect) onSelect(e);\r\n        handleClose();\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(null);\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if(options && options.length){\r\n            return options.map((option, index) => {\r\n                return (<MenuItem key={`option-${index}-${option}`} onClick={ (e) => handleSelect(e, option.onSelect)}>\r\n                    {\r\n                        option.icon \r\n                            ?   <ListItemIcon>\r\n                                    { option.icon }\r\n                                </ListItemIcon> \r\n                            : <div></div>\r\n                    }\r\n                    <Typography>{ option.label }</Typography>\r\n                </MenuItem>);\r\n            });\r\n        }else if(children){\r\n            return children;\r\n        }else {\r\n            return (\r\n                <Typography component='div'>\r\n                    <Box fontStyle=\"italic\">\r\n                        No hay opciones especificadas.\r\n                    </Box>\r\n                </Typography>\r\n            );\r\n      }\r\n    };\r\n\r\n    return (\r\n        <div style={{width: fullWidth ? '100%': 'auto'}}>\r\n            {\r\n                text \r\n                    ? <Button fullWidth={fullWidth} variant='outlined' onClick={handleOpen}>\r\n                        {Icon}\r\n                        <Typography style={{marginLeft: 10}}>{text}</Typography> \r\n                    </Button>\r\n                    : <IconButton onClick={handleOpen}>\r\n                        {Icon ?? <MoreVert />} \r\n                    </IconButton>\r\n            }\r\n            \r\n            <Menu\r\n                anchorEl={isOpen}\r\n                open={Boolean(isOpen)}\r\n                keepMounted\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                onClose={handleClose}\r\n            >   \r\n                { renderContent() }\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Backdrop, Button, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { Close } from '@material-ui/icons';\r\nimport { DropzoneArea } from 'material-ui-dropzone';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { importDesign } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    previewChip: {\r\n        maxWidth: 210\r\n    },\r\n    backdrop: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        zIndex: theme.zIndex.modal + 1,\r\n        color: '#fff',\r\n    },\r\n}));\r\n\r\n// ImportDesigns\r\n\r\nexport const ImportDesignsModal = () => {\r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { uiState, dispatch } = useUiState();\r\n    const [designs, setDesigns] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const path = uiState.folderPath;\r\n    const maxFileSize = 3145728;\r\n\r\n    const importDesignsMutation = useMutation(importDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', path]);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', path]);\r\n        },\r\n        onError: (error, args) => {\r\n            if(args.last) {\r\n                setLoading(false);\r\n                handleClose();\r\n            }\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: (data, args) => {\r\n            if(args.last) {\r\n                setLoading(false);\r\n                handleClose();\r\n            }\r\n            enqueueSnackbar(data.message,  {variant: 'success', autoHideDuration: 2000});\r\n\r\n        }\r\n    });\r\n\r\n    const handleClose = ( e ) => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'ImportDesigns',\r\n        });\r\n    };\r\n\r\n    const rejectFile = (file, accepteds, maxSize) => {\r\n        let message = `El archivo \"${file.name}\" fue rechazado. `;\r\n        if(!accepteds.includes(file.type)) message += `El tipo de archivo no es compatible. `;\r\n        if(file.size > maxSize) message += `El archivo es demasiado grande. El límite de tamaño es ${maxSize/1024/1024} MB.`;\r\n        return message;\r\n    };\r\n\r\n    const readFile = (file) => {\r\n        return (e) => {\r\n            try {\r\n                const json = JSON.parse(e.target.result);\r\n                setDesigns((prevDesigns) => [...prevDesigns, {filename: file.name, design: json}]);\r\n            } catch (ex) {\r\n                enqueueSnackbar(`Ha ocurrido un error al cargar el diseño \"${file.name}\". El archivo está corrupto.`, { variant: 'error', anchorOrigin: { vertical: 'bottom', horizontal: 'left' }, autoHideDuration: 2000 });\r\n            }\r\n        };\r\n    }; \r\n\r\n    const loadFiles = (files) => {\r\n        setDesigns([]);\r\n        for (const file of files) {\r\n            try {\r\n                const fr = new FileReader();\r\n                fr.onload = readFile(file);\r\n                fr.readAsText(file);\r\n            } catch (error) {\r\n                console.log(error);\r\n                enqueueSnackbar(`Ha ocurrido un error al cargar el diseño \"${file.name}\". El archivo está corrupto.`, { variant: 'error', anchorOrigin: { vertical: 'bottom', horizontal: 'left' }, autoHideDuration: 2000 });\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleImportDesigns = async (e) => {\r\n        setLoading(true);\r\n        for (let index = 0; index < designs.length; index++) {\r\n            const designFile = designs[index];\r\n            await importDesignsMutation.mutate({ filename: designFile.filename, path, design: designFile.design, last: index === designs.length -1 });\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <>\r\n        <Dialog\r\n            open={uiState.isImportDesignsModalOpen}\r\n            maxWidth={'sm'}\r\n            fullWidth\r\n        >\r\n            <DialogTitle >\r\n                Importar Diseños de Aprendizaje\r\n            </DialogTitle>\r\n            <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                <Close />\r\n            </IconButton>\r\n            <DialogContent dividers >\r\n                <Typography style={{ marginBottom: 20 }}>\r\n                    Para importar diseños en su cuenta haga click o arrastre sus archivos a la zona indicada.\r\n                </Typography>\r\n                <DropzoneArea\r\n                    getFileLimitExceedMessage={(limit) => `Se superó el número máximo de archivos. Solo se permiten ${limit}. `}\r\n                    previewGridProps={{ container: { spacing: 1, direction: 'row' } }}\r\n                    dropzoneText='Arrastra y suelta tus archivos o haz click aquí'\r\n                    previewChipProps={{ classes: { root: classes.previewChip } }}\r\n                    acceptedFiles={['application/json']}\r\n                    previewText=\"Archivos Seleccionados\"\r\n                    getDropRejectMessage={rejectFile}\r\n                    showPreviewsInDropzone={false}\r\n                    maxFileSize={maxFileSize}\r\n                    showAlerts={['error']}\r\n                    onChange={loadFiles}\r\n                    showPreviews={true}\r\n                    filesLimit={5}\r\n                    useChipsForPreview\r\n                    clearOnUnmount\r\n                />\r\n                <div style={{ marginTop: 20 }}>\r\n                    <Typography variant='caption'>\r\n                        IMPORTANTE: Solo se admiten archivos con extensión \"json\", por ejemplo \"Diseño de Ejemplo.json\".\r\n                    </Typography>\r\n                </div>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleClose}>\r\n                    Cancelar\r\n                </Button>\r\n                <Button \r\n                    variant='contained' \r\n                    color='primary' \r\n                    onClick={handleImportDesigns}\r\n                    disabled={designs.length === 0}\r\n                >\r\n                    Importar\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n        <Backdrop className={classes.backdrop} open={loading}>\r\n            <CircularProgress color=\"inherit\" />\r\n            <Typography>Subiendo archivos...</Typography>\r\n        </Backdrop>\r\n    </>\r\n)\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Divider, Grid, makeStyles, Typography, useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { useInfiniteQuery, useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { createDesign, getDesignsByFolder } from 'services/DesignService';\r\nimport { getfolderByPath } from 'services/FolderService';\r\nimport { FoldersContainer } from 'components/FoldersContainer';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { DesignsBreadcrumbs } from 'pages/Navigation/MyDesigns/DesignsBreadcrumbs';\r\nimport { RecentDesigns } from 'pages/Navigation/MyDesigns/RecentDesigns';\r\nimport { FolderModal } from './FolderModal';\r\nimport { useSnackbar } from 'notistack';\r\nimport { AddCircle, CreateNewFolder, NoteAdd, Publish } from '@material-ui/icons';\r\nimport { CustomMenu } from 'components/CustomMenu';\r\nimport { ImportDesignsModal } from './ImportDesignsModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n        [theme.breakpoints.down('xs')]: {\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    breadCrumbs: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    designsAndFoldersContainer: {\r\n        paddingTop: 15,\r\n    },\r\n    link: {\r\n        textDecoration: 'none',\r\n    },\r\n    sectionTitle: {\r\n        width: '100%',\r\n        display:'flex',\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between', \r\n        alignItems:'flex-end', \r\n        paddingBottom: 5,\r\n    },\r\n    button: {\r\n        height: 35,\r\n    }\r\n\r\n}));\r\n\r\nexport const MyDesignsPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const designsRef = useRef(null);\r\n    const theme = useTheme();\r\n    const isXSDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const { uiState, dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const [width, setWidth] = useState(0);\r\n    const [height, setHeight] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        dispatch({\r\n            type: types.ui.updateFolderPath,\r\n            payload: urlparams.urlPath ? '/' + urlparams.urlPath : '/',\r\n        });\r\n    }, [dispatch, urlparams]);\r\n\r\n    const path = uiState.folderPath;\r\n    const folderName = !urlparams.urlPath ? 'Mis Diseños' : path.split('/')[path.split('/').length - 1];\r\n\r\n    const designsQuery = useInfiniteQuery(['designs', path], async ({ pageParam = 0 }) => {\r\n        return await getDesignsByFolder(path, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const foldersQuery = useQuery(['folders', path], async () => {\r\n        return await getfolderByPath(path);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', path]);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', path]);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (designsRef.current) {\r\n            setHeight(designsRef.current.offsetHeight);\r\n            setWidth(designsRef.current.offsetWidth);\r\n        }\r\n    }, [designsRef]);\r\n\r\n    const handleCreateDesign = async ( e, path = '/' ) => {\r\n        await createDesignMutation.mutate({path});\r\n    };\r\n\r\n    const handleOpenFolderModal = async (e) => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Folder'\r\n        });\r\n    };\r\n\r\n    const handleImportDesign = (e) => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'ImportDesigns',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} ref={designsRef} className={classes.workspace}>\r\n                    <DesignsBreadcrumbs />\r\n                    {\r\n                        path === '/' && <RecentDesigns id='recent' width={width} height={height} />\r\n                    }\r\n                    <div className={ classes.designsAndFoldersContainer }>\r\n                        <div className={classes.sectionTitle}>\r\n                            <Typography variant='h4'>\r\n                                {path === '/' ? 'Mis Diseños' : folderName}\r\n                            </Typography>\r\n                            <CustomMenu\r\n                                Icon={<AddCircle />}\r\n                                text='Nuevo'\r\n                                fullWidth={isXSDevice}\r\n                                options={[\r\n                                    { icon: <NoteAdd  />, label: 'Nuevo Diseño', onSelect: (e)=>handleCreateDesign(e, path) },\r\n                                    { icon: <CreateNewFolder  />, label: 'Nueva Carpeta', onSelect: handleOpenFolderModal },\r\n                                    { icon: <Publish  />, label: 'Importar Diseños', onSelect: handleImportDesign },\r\n                                ]} \r\n                            />\r\n                        </div>\r\n                        <Divider />\r\n                        <FoldersContainer {...foldersQuery}/>\r\n                        <DesignsContainer {...designsQuery} handleCreateDesign={(e)=>handleCreateDesign(e, path)}/>\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <FolderModal />\r\n            <ImportDesignsModal />\r\n        </>\r\n    );\r\n};","import { fetchWithToken, uploadFetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getUser = async ( id ) => {\r\n    const resp = await fetchWithToken(`user/${id}`);\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const searchUsers = async ( filter, pageParam ) => {\r\n    const resp = await fetchWithToken('user/search/', {\r\n        filter,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const updateContact = async(  {uid, contacts} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n            newData: { contacts }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const updateProfileInformation = async(  {uid, img, name, lastname, occupation, institution, country, city, description} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n           newData: { uid, img, name, lastname, occupation, institution, country, city, description }\r\n        }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const getUserByEmail = async( email ) => {\r\n    try {\r\n        return await fetchWithToken(`user/search-by-email/`, { \r\n           email\r\n        }, 'POST');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const resendVerificationCode = async( email ) => {\r\n    try {\r\n        return await fetchWithToken(`user/resend-code/`, { \r\n            email\r\n        }, 'POST');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const changeUserPassword = async( { uid, newPassword } ) => {\r\n    try {\r\n        return await fetchWithToken(`auth/reset-password/${uid}`, { \r\n            newPassword\r\n        }, 'PUT');\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};\r\n\r\nexport const updateUserImage = async( formData ) => {\r\n    try {\r\n        return await uploadFetchWithToken(`user/update/user-img`, formData, 'PUT', {});\r\n    } catch (error) {\r\n        console.log(error);\r\n        return { ok: false, message: 'Ha ocurrido un error al hacer la petición, compruebe su conexión a internet o vuelva a intentarlo más tarde.'};\r\n    }\r\n};","import { useState } from 'react';\r\n\r\n\r\nexport const useForm = ( initialState = {} ) => {\r\n    \r\n    const [values, setValues] = useState(initialState);\r\n\r\n    const reset = () => {\r\n        setValues( initialState );\r\n    }\r\n\r\n\r\n    const handleInputChange = ({ target }) => {\r\n        setValues({\r\n            ...values,\r\n            [ target.name ]: target.value\r\n        });\r\n\r\n    }\r\n\r\n    return [ values, handleInputChange, reset, setValues ];\r\n\r\n}\r\n","\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { Avatar, Backdrop, Button, ButtonBase, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles, TextField, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateProfileInformation, updateUserImage } from 'services/UserService';\r\nimport { useParams } from 'react-router';\r\nimport { useForm } from 'hooks/useForm';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { AddPhotoAlternate } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems: 'center',\r\n    },\r\n    avatarContainer: {\r\n        position: 'relative',\r\n    },\r\n    photoProfile: ({ isHovered }) => ({\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n        backgroundColor: !isHovered\r\n            ? theme.palette.type === 'dark' ? theme.palette.grey[600] : theme.palette.grey[400]\r\n            : theme.palette.type === 'dark' ? theme.palette.grey[500] : theme.palette.grey[500],\r\n    }),\r\n    addPhotoIcon: ({ isHovered }) => ({\r\n        position: 'absolute',\r\n        bottom: 25,\r\n        right: 25,\r\n        border: `2px solid ${theme.palette.background.paper}`,\r\n        backgroundColor: !isHovered\r\n            ? theme.palette.type === 'dark' ? theme.palette.grey[600] : theme.palette.grey[400]\r\n            : theme.palette.type === 'dark' ? theme.palette.grey[500] : theme.palette.grey[500],\r\n    }),\r\n    inputFile: {\r\n        display: 'none',\r\n    },\r\n    backdrop: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        zIndex: theme.zIndex.modal + 1,\r\n        color: '#fff',\r\n    },\r\n}));\r\n\r\nexport const EditProfileModal = React.memo(() => {\r\n    const [isHovered, setHovered] = useState(false);\r\n    const classes = useStyles({ isHovered });\r\n    const queryClient = useQueryClient();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { authState, setAuthState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const fileInputRef = useRef();\r\n    const [file, setFile] = useState(null);\r\n    const [imgSource, setImgSource] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const uid = urlparams.uid;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    useEffect(() => {\r\n        if(file){\r\n            const objectUrl = URL.createObjectURL(file);\r\n            setImgSource(objectUrl);\r\n            return () => URL.revokeObjectURL(objectUrl);\r\n        }\r\n    }, [file])\r\n\r\n    const { isLoading, isError, data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const [formData, handleInputChange, reset] = useForm({\r\n        name: data.name,\r\n        lastname: data.lastname,\r\n        occupation: data.occupation,\r\n        institution: data.institution,\r\n        country: data.country,\r\n        city: data.city,\r\n        description: data.description,\r\n    });\r\n\r\n    const { name, lastname, occupation, institution, country, city, description } = formData;\r\n\r\n    const updateProfileInformationMutation = useMutation(updateProfileInformation, {\r\n        onMutate: async (args) => {\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries(['user-profile', uid]);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousUserProfile = queryClient.getQueryData(['user-profile', uid]);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            queryClient.setQueryData(['user-profile', uid], oldData => {\r\n                const newData = Object.assign({}, { ...oldData, uid, img: args.img, name, lastname, occupation, institution, country, city, description });\r\n                return newData;\r\n            });\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousUserProfile };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, context) => {\r\n            console.log(error);\r\n            queryClient.setQueryData(['user-profile', uid], context.previousUserProfile);\r\n            setLoading(false);\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'EditProfile',\r\n            });\r\n            setImgSource(null);\r\n            setFile(null);\r\n            enqueueSnackbar(error.message, { variant: 'error', autoHideDuration: 2000 });\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries('designs');\r\n            queryClient.invalidateQueries([uid, 'user-public-designs']);\r\n        },\r\n        onSuccess: (data, args) => {\r\n            setLoading(false);\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'EditProfile',\r\n            });\r\n            setImgSource(null);\r\n            setFile(null);\r\n            enqueueSnackbar('Usuario actualizado correctamente', { variant: 'success', autoHideDuration: 2000 });\r\n            setAuthState((prevState) => ({\r\n                ...prevState,\r\n                user: {\r\n                    ...prevState.user,\r\n                    img: data.value.img\r\n                }\r\n            }));\r\n        }\r\n    });\r\n\r\n    if (isError) {\r\n        return (<div className={classes.errorContainer}>\r\n            <Alert severity='error' className={classes.error}>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        reset();\r\n        setImgSource(null);\r\n        setFile(null);\r\n    };\r\n\r\n    const handleSaveInformation = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        let img = data.img;\r\n        if (file) {\r\n            const formData = new FormData();\r\n            formData.append('img', file);\r\n            const resp = await updateUserImage(formData);\r\n            if (!resp.ok) enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n            else img = resp.data.user.img;\r\n        }\r\n        await updateProfileInformationMutation.mutate({ uid: authState.user.uid, img, name, lastname, occupation, institution, country, city, description });\r\n    };\r\n\r\n    const handleChangeFile = async (event) => {\r\n        var file = event.target.files[0];\r\n        //var reader = new FileReader();\r\n        //reader.onloadend = function (e) {\r\n        //    setImgSource(e.target.result);\r\n        //};\r\n        //reader.readAsDataURL(file);\r\n        setFile(file);\r\n    };\r\n    \r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isEditProfileModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Editar perfil\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    <Grid container spacing={1}>\r\n                        <Grid container alignItems='center' justify='center' className={classes.avatarContainer}>\r\n                            <input\r\n                                ref={fileInputRef}\r\n                                accept=\"image/x-png,image/jpeg\"\r\n                                className={classes.inputFile}\r\n                                type=\"file\"\r\n                                onChange={handleChangeFile}\r\n                            />\r\n                            <div\r\n                                style={{ position: 'relative' }}\r\n                            >\r\n                                <Avatar\r\n                                    component={ButtonBase}\r\n                                    className={classes.photoProfile}\r\n                                    src={\r\n                                        imgSource \r\n                                            ? imgSource\r\n                                            : (data.img && data.img.length > 0 )\r\n                                                ? `${process.env.REACT_APP_URL}uploads/users/${data.img}` \r\n                                                : ''\r\n                                    }\r\n                                    alt={data.name + ' ' + data.lastname}\r\n                                    onClick={(e) => fileInputRef?.current.click()}\r\n                                    onMouseEnter={(e) => { setHovered(true) }}\r\n                                    onMouseLeave={(e) => { setHovered(false) }}\r\n                                />\r\n                                <Avatar\r\n                                    component={ButtonBase}\r\n                                    className={classes.addPhotoIcon}\r\n                                    onClick={(e) => fileInputRef?.current.click()}\r\n                                    onMouseEnter={(e) => { setHovered(true) }}\r\n                                    onMouseLeave={(e) => { setHovered(false) }}\r\n                                >\r\n                                    <AddPhotoAlternate />\r\n                                </Avatar>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='name'\r\n                                value={name}\r\n                                onChange={handleInputChange}\r\n                                label='Nombres'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='lastname'\r\n                                value={lastname}\r\n                                onChange={handleInputChange}\r\n                                label='Apellidos'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='country'\r\n                                value={country ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label='País'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='city'\r\n                                value={city ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label='Ciudad'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='occupation'\r\n                                value={occupation ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label='Ocupación'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='institution'\r\n                                value={institution ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label='Institución'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                multiline\r\n                                variant='outlined'\r\n                                margin='dense'\r\n                                name='description'\r\n                                rows={4}\r\n                                value={description ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label='Descripción'\r\n                                type='text'\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleSaveInformation}>\r\n                        Guardar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n                <Typography>Actualizando información...</Typography>\r\n            </Backdrop>\r\n        </>\r\n    )\r\n});\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Avatar, makeStyles, Typography } from '@material-ui/core';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        marginTop: 10,\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            zIndex: 0.5,\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        //backgroundColor: 'grey',\r\n    },\r\n    body: {\r\n        display: 'flex',\r\n        marginLeft: 10,\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    photo: {\r\n        margin: 10,\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n    },\r\n    name: {\r\n\r\n    },\r\n    location: {\r\n\r\n    }\r\n}));\r\n\r\nexport const UserCard = ({ _id, name, lastname, city, country, scoreMean, img, occupation, onClick }) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n\r\n    const handleViewUser = (e, id) => {\r\n        e.stopPropagation();\r\n        if(onClick) onClick();\r\n        history.push(`/profile/${id}`);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root} onClick={ ( e ) => handleViewUser(e, _id) }>\r\n            <div className={classes.card}>\r\n                <Avatar\r\n                    className={classes.photo}\r\n                    alt={formatName(name, lastname)}\r\n                    src={img && img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${img}` : ''}\r\n                >\r\n                    {getUserInitials(name, lastname)}\r\n                </Avatar>\r\n                <div className={classes.body} >\r\n                    <div className={classes.name}>\r\n                        <Typography variant='h5' color='textPrimary'>\r\n                            {name + ' ' + lastname}\r\n                        </Typography>\r\n                    </div>\r\n                    <div className={classes.location}>\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                city && country \r\n                                    ? city + ', ' + country\r\n                                    : city ?? country ?? 'Sin locación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                    <div >\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                occupation\r\n                                    ? occupation\r\n                                    : 'Sin ocupación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { getUser } from 'services/UserService';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { UserCard } from 'components/UserCard';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const ShowContactsModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n    \r\n    const contactList = () => {\r\n        return data.contacts.map(( contact ) => {\r\n            return <UserCard key={contact._id} {...contact} onClick={handleClose}/>\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isContactsModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Contactos\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    { contactList() }\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cerrar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Grid, Typography, Avatar, makeStyles, Button, Divider, IconButton, } from '@material-ui/core';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateContact } from 'services/UserService';\r\nimport { useQuery, useMutation, useQueryClient, useInfiniteQuery } from 'react-query';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { Star, Apartment, Group, Email, PersonAdd, Edit, Close } from '@material-ui/icons';\r\nimport { Alert, Skeleton } from '@material-ui/lab';\r\n\r\n\r\nimport { EditProfileModal } from 'pages/User/UserProfile/EditProfileModal';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShowContactsModal } from 'pages/User/UserProfile/ShowContactsModal';\r\n\r\nimport { createDesign, getPublicDesignsByUser } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    designPanel:{\r\n        flexDirection: 'column',\r\n        borderLeft:`1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n        [theme.breakpoints.down('md')]: {\r\n            width: theme.spacing(25),\r\n            height: theme.spacing(25),\r\n        },\r\n        [theme.breakpoints.down('sm')]: {\r\n            width: theme.spacing(15),\r\n            height: theme.spacing(15),\r\n        },\r\n    },\r\n    spaceFirstDataFirstData:{ \r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    centerGrid:{\r\n        display: 'flex',\r\n        alignItems: 'center', \r\n        justifyItems:'center',\r\n    },\r\n    spaceSecondData:{\r\n        marginBottom: theme.spacing(2),   \r\n    },\r\n    spaceData:{\r\n        marginLeft: theme.spacing(3),\r\n        marginBottom: theme.spacing(2),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.down('xs')]: {\r\n            marginLeft: theme.spacing(1),\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n    spaceDesign:{\r\n        marginLeft: theme.spacing(7),\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(7),\r\n        [theme.breakpoints.down('xs')]: {\r\n            marginLeft: theme.spacing(1),\r\n            marginRight: theme.spacing(1),\r\n        },\r\n    },\r\n    spaceIcons:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n}));\r\n\r\nexport const UserProfile = () => {\r\n    \r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { authState, setAuthState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const { isLoading, isError, data, refetch } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery([ uid, 'user-public-designs' ], async ({ pageParam = 0 }) => {\r\n        return await getPublicDesignsByUser(uid, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n    \r\n    const updateConctactMutation = useMutation(updateContact, {\r\n        onSuccess: (data, {uid, contacts}, context) => {\r\n            setAuthState((prevState)=>({\r\n                ...prevState, \r\n                user: Object.assign({}, {...prevState.user, contacts})\r\n            }));\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        },\r\n        onError: (error) => {\r\n            console.log(error);\r\n            enqueueSnackbar('No se ha actualizado su lista de contactos',  {variant: 'error', autoHideDuration: 2000},   );\r\n        },\r\n    });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries('designs');\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries('designs');\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            console.log(error);\r\n            enqueueSnackbar('No se han cargado sus diseño',  {variant: 'error', autoHideDuration: 2000},   );\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate({ path: '/', isPublic: true });\r\n    };\r\n    \r\n    if(isError){\r\n        return (<div className={ classes.designPanel }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n\r\n    const handleEditProfile = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n    };\r\n\r\n    const handleShowContacts = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n\r\n    const handleAddContact = async (e) => {\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts:[...authState.user.contacts, uid]});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n        await refetch();\r\n    };\r\n\r\n    const handleDeleteContact = async (e) =>{\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts: authState.user.contacts.filter(contact=>contact!==uid)});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n    };\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item xs={12} sm={3}>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    {\r\n                        isLoading\r\n                            ? <Skeleton animation='wave' variant='circle' className={classes.photoProfile}/>\r\n                            : <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img && data.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${data.img}` : '' }/>\r\n                    }\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    {\r\n                        isLoading\r\n                            ? <Skeleton animation='wave' height={42} width={'80%'}/>\r\n                            : data && <Typography  align='center' variant='h5' component='h2'>{data.name + ' ' + data.lastname}</Typography>\r\n                    }\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    {\r\n                        isLoading\r\n                            ? <Skeleton animation='wave' height={20} width={'50%'}/>\r\n                            : data && data.occupation && <Typography className={classes.spaceFirstData} color='textSecondary'>{data.occupation}</Typography>\r\n                    }\r\n                </Grid> \r\n                <Grid container alignItems='center' justify='center' className={classes.spaceFirstData}>\r\n                    <Grid item >\r\n                        {\r\n                            isLoading\r\n                                ? <Skeleton animation='wave' variant='circle' width={20} height={20}/>\r\n                                : data.contacts.length > 0 \r\n                                    ? <IconButton onClick={ handleShowContacts }>\r\n                                        <Group />\r\n                                    </IconButton>\r\n                                    :\r\n                                    <Group />\r\n                        }\r\n                    </Grid>\r\n                    <Grid item >\r\n                        {\r\n                            isLoading\r\n                                ? <Skeleton animation='wave' width={20} height={20} style={{marginLeft: 5}}/>\r\n                                : <Typography style={{ marginLeft: 8 }}> {data.contacts.length}</Typography>\r\n                        }\r\n                    </Grid>\r\n                    ・\r\n                    <Grid item >\r\n                        {\r\n                            isLoading\r\n                                ? <Skeleton animation='wave' variant='circle' width={20} height={20}/>\r\n                                : <Star/>\r\n                        }\r\n                    </Grid>\r\n                    <Grid item>\r\n                        {\r\n                            isLoading\r\n                                ? <Skeleton animation='wave' width={20} height={20} style={{marginLeft: 5}}/>\r\n                                : <Typography style={{ marginLeft: 8 }}> {data.scoreMean}</Typography>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center' className={classes.spaceSecondData}>\r\n                    {\r\n                        isLoading\r\n                            ? <Skeleton animation='wave' width={'50%'} height={42} style={{marginLeft: 5}}/>\r\n                            : (authState.user.uid===uid) \r\n                                ? <Button variant ='outlined' size='small' onClick={handleEditProfile} startIcon={<Edit />}>Editar perfil</Button> \r\n                                : (authState.user.contacts.includes(uid)) \r\n                                    ? <Button variant ='outlined' size='small' onClick={handleDeleteContact} startIcon={<Close />}>Eliminar de mis contactos</Button> \r\n                                    : <Button variant ='outlined' size='small' onClick={handleAddContact} startIcon={<PersonAdd />} >Agregar a mis contactos</Button>\r\n                    }\r\n                </Grid>\r\n                <Divider className={classes.spaceData}/>\r\n                <Grid className={classes.spaceData}>\r\n                    {\r\n                        isLoading\r\n                            ? <Skeleton animation='wave' width={'100%'} height={40} style={{marginLeft: 5}}/>\r\n                            : data && data.institution && (\r\n                                <Grid container className={classes.spaceSecondData} >\r\n                                    <Grid item >\r\n                                        <Apartment className={classes.spaceIcons}/>\r\n                                    </Grid>\r\n                                    <Grid item >\r\n                                    <Typography className={classes.spaceFirstData} color='textSecondary'>{data.institution}</Typography>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            )\r\n                    }\r\n                    { isLoading\r\n                            ? <Skeleton animation='wave' width={'100%'} height={40} style={{marginLeft: 5}}/>\r\n                            : data && data.city && data.country &&(\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <RoomIcon className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.city + ', ' + data.country}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { isLoading\r\n                            ? <Skeleton animation='wave' width={'100%'} height={40} style={{marginLeft: 5}}/>\r\n                            : data && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Email className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.email}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    <Divider className={classes.spaceSecondData}/>\r\n                    { isLoading\r\n                            ? (<>\r\n                                <Skeleton animation='wave' width={100} height={20} style={{marginLeft: 5}}/>\r\n                                <Skeleton animation='wave' width={'100%'} height={40} style={{marginLeft: 5}}/>\r\n                            </>)\r\n                            : data && data.description &&(\r\n                        <>\r\n                            <Typography color='textSecondary' className={classes.spaceSecondData}>\r\n                                Descripción\r\n                            </Typography>\r\n                            <Typography >\r\n                                {data.description}\r\n                            </Typography> \r\n                        </>\r\n                    )}\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12} sm={9} className={classes.designPanel}>\r\n               \r\n                <Grid className={classes.spaceDesign}>\r\n                    <Typography variant='h4'>\r\n                        Diseños Públicos\r\n                    </Typography>\r\n                    <Divider />\r\n                    {   \r\n                        !isError && !isLoading && (authState.user.uid === uid) && \r\n                            <>\r\n                                <EditProfileModal /> \r\n                            </> \r\n                    }\r\n                    <DesignsContainer {...designsQuery} label='user-profile' handleCreateDesign={handleCreateDesign}/>\r\n                    {!isError && !isLoading && <ShowContactsModal/> }\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n","export default \"data:image/png;base64,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\"","import { ThemeProvider } from '@material-ui/core';\r\nimport React, { useState, useContext, createContext, useEffect } from 'react';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getTheme } from 'theme/theme';\r\n\r\nconst UserConfigContext = createContext();\r\n\r\nexport function useUserConfigState() {\r\n\tconst context = useContext(UserConfigContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUserConfigState must be used within a UserConfigProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const UserConfigProvider = ({ children })=>{\r\n\tconst { authState } = useAuthState();\r\n    const [userConfig, setUserConfig] = useState({\r\n        darkTheme:false,\r\n        modeAdvanced: false\r\n\t});\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst darkTheme = JSON.parse(localStorage.getItem('darkTheme'));\r\n\t\tif(darkTheme !== null ){\r\n\t\t\tsetUserConfig((prevState)=>({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tdarkTheme,\r\n\t\t\t}));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n        if(authState.user !== null){\r\n            localStorage.setItem('darkTheme', JSON.stringify(userConfig.darkTheme));\r\n        }  \r\n    }, [authState.user, userConfig.darkTheme]);\r\n\r\n\tconst theme = getTheme(userConfig.darkTheme);\r\n\r\n\treturn (\r\n\t\t<UserConfigContext.Provider value={ { userConfig, setUserConfig } }>\r\n\t\t\t<ThemeProvider theme = {theme}>\r\n\t\t\t\t{ children }\r\n\t\t\t</ThemeProvider>\r\n\t\t</UserConfigContext.Provider>\r\n\t);\r\n}","import { createMuiTheme } from '@material-ui/core';\r\nimport {\r\n  orange,\r\n  lightBlue,\r\n  deepPurple,\r\n  deepOrange\r\n} from \"@material-ui/core/colors\";\r\n\r\nexport const getTheme = ( isDarkActive ) =>{\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n          type: isDarkActive ? 'dark': 'light',\r\n          primary: {\r\n            dark: orange[500], \r\n            light: lightBlue[500],\r\n            main: isDarkActive? orange[500] : lightBlue[500],\r\n          },\r\n          secondary: {\r\n            dark: deepOrange[900],\r\n            light: deepPurple[500], \r\n            main: isDarkActive? deepOrange[900]: deepPurple[500], \r\n          },\r\n          text:{\r\n            primary: isDarkActive? '#F4F4F4': '#36393F',\r\n          },\r\n          background:{\r\n            default: isDarkActive? '#36393F': '#F4F4F4', //SidePanels,\r\n            paper: isDarkActive? '#36393F': '#F4F4F4', // Menu, Login and Register Modal\r\n            workSpace: isDarkActive? '#2F3136': '#FEFEFE',\r\n            navbar: isDarkActive? '#202225': '#DCDCDC',\r\n            design: isDarkActive? '#36393F': '#F4F4F4',\r\n            designHover: isDarkActive? '#393D46': '#F6F6F6',\r\n          }\r\n        },\r\n    });\r\n    return theme;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogActions,\r\n    Typography,\r\n    IconButton,\r\n    Grid,\r\n} from '@material-ui/core';\r\nimport { CloseRounded } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    close: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 5,\r\n        padding: 15,\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n}));\r\n\r\nexport const ModalFormWithImage = React.memo(({ isOpen, handleClose, maxWidth = 'sm', title = '', subtitle = '', image, content, actions }) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <Dialog\r\n            fullWidth={true}\r\n            maxWidth={maxWidth}\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <DialogTitle className={classes.header} disableTypography>\r\n                <IconButton className={classes.close} onClick={handleClose} color=\"inherit\" size='small'>\r\n                    <CloseRounded />\r\n                </IconButton>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12}>\r\n                        {image}\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='h5' component='p'>\r\n                            {title}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='subtitle1' component='h1'>\r\n                            {subtitle}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {content}\r\n            </DialogContent>\r\n            {\r\n                (actions) && <DialogActions>\r\n                    {actions}\r\n                </DialogActions>\r\n            }\r\n        </Dialog>\r\n    );\r\n});\r\n\r\nModalFormWithImage.propTypes = {\r\n    isOpen: PropTypes.bool.isRequired,\r\n    handleClose: PropTypes.func.isRequired,\r\n    image: PropTypes.object.isRequired,\r\n    content: PropTypes.object,\r\n    actions: PropTypes.object,\r\n}; ","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Link\r\n} from '@material-ui/core';\r\n\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport types from 'types';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formcontrol: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n        overflow: 'auto',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    link: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    emailError: null,\r\n    passwordError: null,\r\n};\r\n\r\nexport const LoginModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { login } = useAuthState();\r\n    const [formErrors, setFormErrors] = useState(initialErrors);\r\n    const [errorFromServer, setErrorFromServer] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [formLoginValues, handleInputChange, reset] = useForm({\r\n        email: '',\r\n        password: ''\r\n    });\r\n    const { email, password } = formLoginValues;\r\n    const { emailError, passwordError } = formErrors;\r\n\r\n    const isFormComplete = () => {\r\n        return Object.keys(formLoginValues).map((key, index) => {\r\n            if (formLoginValues[key].trim() === '') {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    };\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email)) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                emailError: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const isPasswordValid = () => {\r\n        if (password.length >= 8 && password.length <= 16) return true;\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            passwordError: 'La contraseña debe tener entre 8 y 16 caracteres.',\r\n        }));\r\n        return false;\r\n    };\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            [e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!isEmailValid()) return;\r\n        if (!isPasswordValid()) return;\r\n        const resp = await login(email, password);\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else handleClose();\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        reset();\r\n        setFormErrors(initialErrors);\r\n        setShowPassword(false);\r\n        setErrorFromServer(null);\r\n    };\r\n\r\n    const handleClickShowPassword = () => {\r\n        setShowPassword(!showPassword);\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const toRegister = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const toResetPassword = (e) => {\r\n        e.preventDefault();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        history.push('/reset-password');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ModalFormWithImage\r\n                isOpen={uiState.isLoginModalOpen}\r\n                handleClose={handleClose}\r\n                title='¡Bienvenido!'\r\n                subtitle='Completa los campos para ingresar con tu cuenta'\r\n                image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n                content={\r\n                    <form className={classes.form} onSubmit={handleLogin} noValidate>\r\n                        {errorFromServer && <Alert severity=\"error\"> {errorFromServer}</Alert>}\r\n                        <TextField\r\n                            error={!!emailError}\r\n                            helperText={emailError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Email\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            error={!!passwordError}\r\n                            helperText={passwordError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Contraseña\"\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            fullWidth\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    <IconButton\r\n                                        onClick={handleClickShowPassword}\r\n                                        onMouseDown={handleMouseDownPassword}\r\n                                    >\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n\r\n                            }}\r\n                        />\r\n                        <div className={classes.footer}>\r\n                            <Button variant='outlined' type='submit' fullWidth>\r\n                                Iniciar Sesión\r\n                            </Button>\r\n                            <div style={{ paddingTop: 20 }}>\r\n                                <Link href='#' align='center' variant=\"body1\" onClick={toResetPassword}>\r\n                                    ¿Olvidaste tu contraseña?\r\n                                </Link>\r\n                            </div>\r\n                            <div style={{ paddingBottom: 15, paddingTop: 10 }}>\r\n                                <Link href=\"#\" variant=\"body1\" onClick={toRegister}>\r\n                                    ¿No tienes cuenta? Registrate\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                }\r\n            />\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Link,\r\n} from '@material-ui/core';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection:'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    nameError: null,\r\n    lastnameError: null,\r\n    emailError: null,\r\n    passwordError: null,\r\n    confirmPasswordError: null,\r\n};\r\n\r\nexport const RegisterModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { register } = useAuthState();\r\n    const [ errorFromServer, setErrorFromServer ] = useState(null);\r\n    const [ formErrors, setFormErrors ] = useState(initialErrors);\r\n    const [ formData, handleInputChange, reset ] = useForm({\r\n        name: '',\r\n        lastname: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const { name, lastname, email, password, confirmPassword } = formData;\r\n    const { nameError, lastnameError, emailError, passwordError, confirmPasswordError } = formErrors;\r\n    \r\n    const handleClose = () => {\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Register'\r\n        });\r\n        reset();\r\n        setFormErrors(initialErrors);\r\n        setErrorFromServer(null);\r\n    };\r\n    \r\n    const isFormComplete = () => {\r\n        return Object.keys( formData ).map((key, index) => {\r\n            if(formData[key].trim() === ''){\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    }\r\n\r\n    const paswordsMatchs = () => {\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(password)){\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contraseña debe tener al menos un carácter en minúscula, uno en mayúscula, un número y debe tener entre 8 y 16 caractéres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (password.trim() !== confirmPassword.trim()) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseñas no coinciden.',\r\n                confirmPasswordError: 'Las contraseñas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState)=>({\r\n            ...prevState,\r\n            [ e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!paswordsMatchs()) return;\r\n        let resp = await register( formData );\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else handleClose();\r\n    };\r\n\r\n    const toLogin = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Login'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <ModalFormWithImage\r\n            isOpen={ uiState.isRegisterModalOpen }\r\n            handleClose={ handleClose }\r\n            title='¡Bienvenido!'\r\n            subtitle='Completa los campos para registrar tu cuenta'\r\n            image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n            content={\r\n                <form className={classes.form} onSubmit={handleRegister} noValidate>\r\n                    { errorFromServer && <Alert severity=\"error\">{ errorFromServer }</Alert> }\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!nameError}\r\n                        helperText={ nameError } \r\n                        margin=\"dense\" \r\n                        name=\"name\" \r\n                        value={ name } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Nombres\" \r\n                        type=\"text\" \r\n                        fullWidth\r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!lastnameError}\r\n                        helperText={ lastnameError } \r\n                        margin=\"dense\" \r\n                        name=\"lastname\" \r\n                        value={ lastname } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Apellidos\" \r\n                        type=\"text\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!emailError}\r\n                        helperText={ emailError } \r\n                        margin=\"dense\" \r\n                        name=\"email\" \r\n                        value={ email } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Email\" \r\n                        type=\"email\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!passwordError}\r\n                        helperText={ passwordError } \r\n                        margin=\"dense\" \r\n                        name=\"password\" \r\n                        value={ password } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!confirmPasswordError}\r\n                        helperText={ confirmPasswordError } \r\n                        margin=\"dense\" \r\n                        name=\"confirmPassword\" \r\n                        value={ confirmPassword } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Repetir contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    \r\n                    <div className={classes.footer}>\r\n                        <Button color=\"primary\" variant='outlined' type='submit' fullWidth>\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link href='#' style={{paddingTop:20, paddingBottom:15}} variant=\"body1\" onClick={toLogin}>\r\n                            ¿Ya tienes cuenta?\r\n                        </Link>\r\n                    </div>\r\n                    \r\n                </form>\r\n            }\r\n        />\r\n    );\r\n});","import types from \"types\";\r\n\r\n\r\nexport const designReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.design.updateDesign:\r\n            return {\r\n                ...state,\r\n                design: action.payload,\r\n            };\r\n        case types.design.changeMetadataField:\r\n            if(action.payload.subfield !== null){\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: {\r\n                                ...state.design.metadata[action.payload.field],\r\n                                [action.payload.subfield]: action.payload.value,\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n            } else{\r\n                return {\r\n                    ...state,\r\n                    design: {\r\n                        ...state.design,\r\n                        metadata: {\r\n                            ...state.design.metadata,\r\n                            [action.payload.field]: action.payload.value,\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        case types.design.changeTaskField:\r\n            const learningActivities = state.design.data.learningActivities;\r\n            learningActivities.forEach((la, index) => {\r\n                if(la.id === action.payload.learningActivityID){\r\n                    la.tasks.forEach((t, i)=>{\r\n                        if(t.id === action.payload.taskID){\r\n                            if(action.payload.subfield !== null) learningActivities[index].tasks[i][action.payload.field][action.payload.subfield] = action.payload.value;\r\n                            else learningActivities[index].tasks[i][action.payload.field] = action.payload.value;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n            //if (action.payload.subfield !== null) learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field][action.payload.subfield] = action.payload.value;\r\n            //else learningActivities[action.payload.learningActivityIndex].tasks[action.payload.index][action.payload.field] = action.payload.value;\r\n            // learningActivities: [...learningActivities.slice(0, learningActivityIndex), learningActivities[learningActivityIndex].task[], ...learningActivities.slice(learningActivityIndex)] \r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    data: {\r\n                        ...state.design.data,\r\n                        learningActivities,\r\n                    }\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResultField:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    ...state.currentLearningResult,\r\n                    [action.payload.field]: action.payload.value,\r\n                }\r\n            }\r\n        case types.design.clearCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    category: {\r\n                        _id: null,\r\n                        name: null,\r\n                    },\r\n                    verb: null,\r\n                    description: null,\r\n                    editing: false,\r\n                    index: null,\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: action.payload\r\n            }\r\n        case types.design.setBloomCategories:\r\n            return {\r\n                ...state,\r\n                bloomCategories: action.payload\r\n            }\r\n        case types.design.setBloomVerbs:\r\n            return {\r\n                ...state,\r\n                bloomVerbs: action.payload\r\n            }\r\n        case types.design.setDesignPrivileges:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    privileges: action.payload\r\n                }\r\n            }\r\n        case types.design.addDesignKeyword:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    keywords: [...state.design.keywords, action.payload],\r\n                }\r\n            };\r\n        case types.design.removeDesignKeyword:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    keywords: [...state.design.keywords.filter(k => k !== action.payload)],\r\n                }\r\n            };\r\n\r\n        case types.design.updateReadOnlyLink:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    readOnlyLink: action.payload,\r\n                }\r\n            };\r\n        case types.design.setAssessments:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    assessments: action.payload,\r\n                }\r\n            };\r\n        case types.design.setScoreMean:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    metadata: {\r\n                        ...state.design.metadata,\r\n                        scoreMean: action.payload,\r\n                    },\r\n                }\r\n            };\r\n        case types.design.commentDesign:\r\n            const comments = [...state.design.comments];\r\n            const existentCommentary = comments.find(c => c._id.toString() === action.payload._id.toString());\r\n            const index = comments.indexOf(existentCommentary);\r\n            if(existentCommentary && index !== -1) comments[index] = action.payload;\r\n            else comments.push(action.payload);\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    comments,\r\n                }\r\n            };\r\n        case types.design.deleteComment:\r\n            return {\r\n                ...state,\r\n                design: {\r\n                    ...state.design,\r\n                    comments: state.design.comments.filter(c => c._id.toString() !== action.payload.toString()),\r\n                }\r\n            };\r\n        case types.design.setConnectedUsers:\r\n            return {\r\n                ...state,\r\n                users: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { designReducer } from 'contexts/design/designReducer';\r\n\r\nconst DesignContext = createContext();\r\n\r\nexport function useDesignState() {\r\n\tconst context = useContext(DesignContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useDesignState must be used within a DesignProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tdesign: null,\r\n\tusers: [],\r\n\tcurrentLearningResult: {\r\n\t\tcategory: {\r\n\t\t\t_id: null,\r\n\t\t\tname: null,\r\n\t\t},\r\n\t\tverb: null,\r\n\t\tdescription: null,\r\n\t\tediting: false,\r\n\t\tindex: null,\r\n\t},\r\n\tbloomCategories: [],\r\n\tbloomVerbs: [],\r\n};\r\n\r\nexport const DesignProvider = ({ children }) => {\r\n\r\n\tconst [ designState, dispatch ] = useReducer(designReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<DesignContext.Provider value={ { designState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</DesignContext.Provider>\r\n\t);\r\n};\r\n","import React, { useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useQueryClient } from 'react-query';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { Avatar, Typography, Toolbar, AppBar, Button, ButtonGroup, IconButton, Menu, MenuItem, Switch, FormControlLabel, OutlinedInput, Grid, useMediaQuery } from '@material-ui/core';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport types from 'types';\r\nimport { LoginModal } from 'pages/Auth/LoginModal';\r\nimport { RegisterModal } from 'pages/Auth/RegisterModal';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n    },\r\n    title: {\r\n        color: theme.palette.text.primary\r\n    },\r\n    logo: {\r\n        width: theme.spacing(5),\r\n        height: theme.spacing(5),\r\n        //margin: 'auto',\r\n    },\r\n    brand: {\r\n        marginLeft: 10,\r\n        [theme.breakpoints.down('xs')]: {\r\n            marginLeft: 0,\r\n        },\r\n    },\r\n    search: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n    },\r\n    searchForm: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    userAndOptions: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        [theme.breakpoints.down('xs')]: {\r\n            justifyContent: 'center',\r\n        },\r\n    },\r\n    navbarColor: {\r\n        background: theme.palette.background.navbar,\r\n    },\r\n    navbarLetter: {\r\n        textDecoration: 'none',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        whiteSpace: 'nowrap',\r\n        color: theme.palette.text.primary,\r\n        cursor: 'pointer'\r\n    },\r\n    menuOptions: {\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('xs')]: {\r\n            marginRight: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const NavBar = () => {\r\n    const queryClient = useQueryClient();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const theme = useTheme();\r\n    const isXSDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const { userConfig, setUserConfig } = useUserConfigState();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { authState, logout } = useAuthState();\r\n    const [filter, setFilter] = useState('');\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const handleLogout = () => {\r\n        queryClient.clear();\r\n        setMenuOpen(null);\r\n        logout();\r\n    };\r\n\r\n    const handleOpenLoginModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleOpenRegisterModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setMenuOpen(null);\r\n    };\r\n\r\n    const handleChangeUserConfig = (event) => {\r\n        setUserConfig({ ...userConfig, [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    const handleInputFormChange = ({ target }) => {\r\n        setFilter(target.value);\r\n    };\r\n\r\n    const handleSearchUsers = async (e) => {\r\n        e.preventDefault();\r\n        if (filter.trim().length > 0) {\r\n            if(design !== null && !location.pathname.includes('reader') && !location.pathname.includes('shared-link') && !uiState.userSaveDesign){\r\n                dispatch({\r\n                    type: types.ui.toggleModal,\r\n                    payload: 'CheckSaveDesign'\r\n                })\r\n                dispatch({\r\n                    type: types.ui.setHistoryInCheckSaveDesign,\r\n                    payload: {\r\n                        url: `/users/search?q=${filter.trim()}`,\r\n                    }\r\n                })\r\n            } else{\r\n                history.push(`/users/search?q=${filter.trim()}`);\r\n            }\r\n            setFilter('');\r\n        }\r\n    };\r\n\r\n    const handleGoUserProfile = async (e) =>{\r\n        e.preventDefault();\r\n        if(design !== null && !location.pathname.includes('reader') && !location.pathname.includes('shared-link') && !uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'CheckSaveDesign'\r\n            })\r\n            dispatch({\r\n                type: types.ui.setHistoryInCheckSaveDesign,\r\n                payload: {\r\n                    url: `/profile/${authState.user.uid}`,\r\n                }\r\n            })\r\n        } else{\r\n            history.push(`/profile/${authState.user.uid}`);\r\n        }\r\n    }\r\n\r\n    const handleGoHomePage = async (e) =>{\r\n        e.preventDefault();\r\n        if(design !== null && !location.pathname.includes('reader') && !location.pathname.includes('shared-link') && !uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'CheckSaveDesign'\r\n            })\r\n            dispatch({\r\n                type: types.ui.setHistoryInCheckSaveDesign,\r\n                payload: {\r\n                    url: `/`,\r\n                }\r\n            })\r\n        } else{\r\n            history.push(`/`);\r\n        }\r\n    }\r\n\r\n    const handleMenu = (e) => {\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    const renderUserOptions = () => {\r\n        return (<Grid item xs={!isXSDevice ? 12 : 6} sm={4} lg={2} className={classes.userAndOptions}>\r\n            <Button size='small' onClick = {handleGoUserProfile} style={{ display: 'flex', alignItems: 'center', textTransform: 'none' }}>\r\n                <Avatar\r\n                    style={{ marginRight: 10, width: 30, height: 30 }}\r\n                    alt={formatName(authState.user.name, authState.user.lastname)}\r\n                    src={authState.user.img && authState.user.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${authState.user.img}` : ''}\r\n                >\r\n                    {getUserInitials(authState.user.name, authState.user.lastname)}\r\n                </Avatar>\r\n                <Typography className={classes.navbarLetter}>\r\n                    {formatName(authState.user.name, authState.user.lastname)}\r\n                </Typography>\r\n            </Button>\r\n            <IconButton onClick={handleMenu} className={classes.menuOptions}>\r\n                <SettingsIcon />\r\n            </IconButton>\r\n            <Menu\r\n                anchorEl={isMenuOpen}\r\n                open={Boolean(isMenuOpen)}\r\n                keepMounted\r\n                getContentAnchorEl={null}\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                }}\r\n                onClose={handleClose}\r\n\r\n            >\r\n                <MenuItem>\r\n                    <FormControlLabel\r\n                        control={<Switch checked={userConfig.darkTheme} onChange={handleChangeUserConfig} name=\"darkTheme\" />}\r\n                        label=\"Tema Oscuro\"\r\n                    />\r\n                </MenuItem>\r\n                <MenuItem>\r\n                    <FormControlLabel\r\n                        control={<Switch checked={userConfig.modeAdvanced} onChange={handleChangeUserConfig} name=\"modeAdvanced\" />}\r\n                        label=\"Modo Avanzado\"\r\n                    />\r\n                </MenuItem>\r\n                <MenuItem>\r\n                    <Button color=\"primary\" onClick={handleLogout}>\r\n                        Cerrar sesión\r\n                    </Button>\r\n                </MenuItem>\r\n\r\n            </Menu>\r\n        </Grid>);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"static\" className={classes.navbarColor} elevation={0}>\r\n                <Toolbar style={{ padding: 0 }}>\r\n                    <Grid container>\r\n                        <Grid item xs={!isXSDevice ? 12 : 6} sm={3} lg={2}>\r\n                            <Button size='small' onClick={handleGoHomePage} className={classes.brand}>\r\n                                <Avatar className={classes.logo} src={Logo} alt=\"Logo\" />\r\n                                <Typography variant=\"h6\" className={classes.title}>\r\n                                    LAD\r\n                                </Typography>\r\n                            </Button>\r\n                        </Grid>\r\n                        { isXSDevice && authState.token && renderUserOptions() }\r\n                        {\r\n                            (!authState.token)\r\n                                ? <Grid item xs={12} sm={9} lg={10} className={classes.userAndOptions}>\r\n                                    <ButtonGroup variant=\"text\" aria-label=\"text primary button group\">\r\n                                        <Button onClick={handleOpenLoginModal} >\r\n                                            Ingresar\r\n                                            </Button>\r\n                                        <Button onClick={handleOpenRegisterModal}>\r\n                                            Registrarme\r\n                                            </Button>\r\n                                    </ButtonGroup>\r\n                                </Grid>\r\n                                : <>\r\n                                    <Grid item xs={12} sm={5} lg={8}>\r\n                                        <div className={classes.search}>\r\n                                            <form className={classes.searchForm} onSubmit={handleSearchUsers} noValidate>\r\n                                                <OutlinedInput\r\n                                                    margin='dense'\r\n                                                    variant=\"outlined\"\r\n                                                    name=\"filter\"\r\n                                                    value={filter}\r\n                                                    type=\"text\"\r\n                                                    placeholder='Buscar usuario'\r\n                                                    onChange={handleInputFormChange}\r\n                                                />\r\n                                                <IconButton type=\"submit\" className={classes.iconButton} aria-label=\"search\">\r\n                                                    <Search />\r\n                                                </IconButton>\r\n                                            </form>\r\n                                        </div>\r\n                                    </Grid>\r\n                                    { !isXSDevice && renderUserOptions() }\r\n                                </>\r\n                        }\r\n                    </Grid>\r\n                </Toolbar>\r\n            </AppBar>\r\n            <LoginModal />\r\n            <RegisterModal />\r\n            \r\n        </div>\r\n    );\r\n}","import {  Typography, Toolbar, AppBar, Container, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    pos:{\r\n        width: 'fit-content',\r\n    }\r\n    \r\n  }));\r\nexport const Footer = () =>{\r\n    const classes = useStyles();\r\n    return (\r\n        <AppBar position=\"static\" color=\"default\"> \r\n          <Container maxWidth=\"md\" className={classes.pos}>\r\n            <Toolbar>\r\n              <Typography variant=\"body1\">\r\n                © 2021 Universidad Católica de Temuco\r\n              </Typography>\r\n            </Toolbar>\r\n          </Container>\r\n        </AppBar>\r\n    )\r\n};","import React from 'react';\r\nimport { Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport { getDesignsSharedWithMe } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 20,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const SharedWithMePage = () => {\r\n    const classes = useStyles();\r\n    \r\n\r\n    const sharedDesignsQuery = useInfiniteQuery(['shared-designs'], async ({ pageParam = 0 }) => {\r\n        return await getDesignsSharedWithMe(pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4' style={{marginBottom: 5}}>Compartidos conmigo</Typography>\r\n                        <Divider />\r\n                        <DesignsContainer {...sharedDesignsQuery} label='shared-with-me'/>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getCategories = async () => {\r\n    const resp = await fetchWithToken('category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React, { useState } from 'react';\r\nimport { Box, Button, Chip, makeStyles, TextField } from '@material-ui/core';\r\nimport { useHorizontalScroll } from 'hooks/useHorizontalScroll';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    keywordList: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        height: 48,\r\n        mouseWheel: 'horizontal',\r\n        overflowX: 'auto',\r\n        overflowY: 'hidden',\r\n        listStyle: 'none',\r\n        padding: theme.spacing(0.5),\r\n        margin: 0,\r\n    },\r\n    keyword: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    searchContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginBottom: 15,\r\n    },\r\n    input: {\r\n        height: 40,\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    button: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n        height: 40,\r\n    },\r\n    keywordFilter: {\r\n        paddingLeft: 0,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: theme.shape.borderRadius,\r\n    }\r\n}));\r\n\r\nexport const KeywordManager = ({ keywords, onChangeKeywords }) => {\r\n    const classes = useStyles();\r\n    const [keyword, setKeyword] = useState('');\r\n    const [keywordError, setKeywordError] = useState(null);\r\n    const scrollRef = useHorizontalScroll();\r\n\r\n    const handleAddKeyword = (e) => {\r\n        e.preventDefault();\r\n        if(keyword.trim().length && !keywords.includes(keyword.toLowerCase())){\r\n            onChangeKeywords([...keywords, keyword.toLowerCase()], 'add', keyword.toLowerCase());\r\n            setKeyword('');\r\n        } else if (keywords.includes(keyword.toLowerCase())){\r\n            setKeywordError('La palabra clave ya se encuentra agregada al filtro.');\r\n        }\r\n    };\r\n\r\n    const handleRemoveKeyword = (index) => {\r\n        if(index === keywords.length - 1) onChangeKeywords([...keywords.slice(0, index)], 'remove', keywords[index]);\r\n        else onChangeKeywords([...keywords.slice(0, index), ...keywords.slice(index + 1, keywords.length)], 'remove', keywords[index]);\r\n    };\r\n\r\n    const handleKeywordInputChange = ({ target }) => {\r\n        setKeyword(target.value);\r\n        if(keywordError) setKeywordError(null);\r\n    };\r\n\r\n    return (\r\n        <Box ref={scrollRef} component='ul' className={classes.keywordFilter}>\r\n            <form onSubmit={handleAddKeyword} className={classes.searchContainer}>\r\n                <TextField\r\n                    className={classes.input}\r\n                    size='small'\r\n                    variant='outlined'\r\n                    value={keyword}\r\n                    onChange={handleKeywordInputChange}\r\n                    label='Palabra Clave'\r\n                    error={!!keywordError}\r\n                    helperText={keywordError}\r\n                    fullWidth\r\n                />\r\n                <Button variant='contained' disableElevation color='primary' type='submit' className={classes.button} >\r\n                    Agregar\r\n                </Button>\r\n            </form>\r\n            <div className={classes.keywordList}>\r\n                {\r\n                    keywords.map((keyword, index) => {\r\n                        return (\r\n                            <li key={`keyword-${index}`}>\r\n                            <Chip\r\n                                label={keyword}\r\n                                onDelete={(e) => handleRemoveKeyword(index)}\r\n                                className={classes.keyword}\r\n                                />\r\n                            </li>\r\n                        );\r\n                    })\r\n                }\r\n            </div>\r\n        </Box>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, IconButton, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { useInfiniteQuery, useQuery } from 'react-query';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { getPublicFilteredDesigns } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { Close } from '@material-ui/icons';\r\nimport { KeywordManager } from 'components/KeywordManager';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'stretch',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n        position: 'relative',\r\n        [theme.breakpoints.up('sm')]: {\r\n            height: 'calc(100vh - 128px)',\r\n        },\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    sectionTitle: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n    },\r\n    category: {\r\n        width: '100%',\r\n        paddingLeft: 20,\r\n    },\r\n    categoriesContainer: {\r\n        [theme.breakpoints.up('sm')]: {\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    keywordList: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-start',\r\n        height: 48,\r\n        mouseWheel: 'horizontal',\r\n        overflowX: 'auto',\r\n        overflowY: 'hidden',\r\n        listStyle: 'none',\r\n        padding: theme.spacing(0.5),\r\n        margin: 0,\r\n    },\r\n    keyword: {\r\n        margin: theme.spacing(0.5),\r\n    },\r\n    searchContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: 20,\r\n        marginBottom: 15,\r\n    },\r\n    input: {\r\n        height: 40,\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    button: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n        height: 40,\r\n    },\r\n    keywordFilter: {\r\n        paddingLeft: 0,\r\n        backgroundColor: theme.palette.background.paper,\r\n        borderRadius: theme.shape.borderRadius,\r\n    }\r\n}));\r\n\r\nexport const PublicRepositoryPage = () => {\r\n    const classes = useStyles();\r\n    const [search, setSearch] = useState('');\r\n    const [filter, setFilter] = useState('');\r\n    const [categoriesFilter, setCategoriesFilter] = useState([]);\r\n    const [keywords, setKeywords] = useState([]);\r\n    const categoriesQuery = useQuery('categories', async () => {\r\n        const resp = await getCategories();\r\n        setCategoriesFilter(resp.categories.map(category => ({ ...category, selected: false })));\r\n        return resp;\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery(['filtered-designs', filter, ...keywords, ...categoriesFilter], async ({ pageParam = 0 }) => {\r\n        const resp = await getPublicFilteredDesigns(search, keywords, categoriesFilter.filter(c => c.selected), pageParam);\r\n        return resp;\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const handleChangeKeywords = (keywords, type, targetKeyword) => {\r\n        setKeywords(keywords);\r\n    };\r\n\r\n    const handleSearch = () => {\r\n        setFilter(search);\r\n    };\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        handleSearch();\r\n    };\r\n\r\n    const handleToggleCategory = (index) => {\r\n        const categories = [...categoriesFilter];\r\n        categories[index].selected = !categories[index].selected;\r\n        setCategoriesFilter(categories);\r\n        handleSearch();\r\n    };\r\n\r\n    const handleClearSearch = () => {\r\n        setSearch('');\r\n        setFilter('');\r\n    };\r\n\r\n    const categoriesSkeletonsList = () => {\r\n        return [...Array(10).keys()].map((index) => (\r\n            <div key={`category-skeleton-${index}`} style={{margin: 10, display: 'flex', alignItems: 'center'}}>\r\n                <Skeleton style={{borderRadius: 4, marginRight: 5 }} variant=\"rect\" height={20} width={20} animation='wave'/>\r\n                <div style={{width: '100%'}}>\r\n                    <Skeleton style={{borderRadius: 4}} variant=\"rect\" height={20} animation='wave'/>\r\n                </div>\r\n            </div>\r\n        ));\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                    <Typography style={{ marginTop: 20, marginLeft: 20 }}>Categorías</Typography>\r\n                    <div className={classes.categoriesContainer}>\r\n                        {\r\n                            categoriesQuery.isLoading\r\n                                ? categoriesSkeletonsList()\r\n                                : categoriesFilter && categoriesFilter.map((category, index) => (\r\n                                        <FormControlLabel\r\n                                            className={classes.category}\r\n                                            key={category._id}\r\n                                            control={\r\n                                                <Checkbox\r\n                                                    checked={category.selected}\r\n                                                    onChange={(e) => handleToggleCategory(index)}\r\n                                                />\r\n                                            }\r\n                                            label={category.name}\r\n                                        />\r\n                                    )\r\n                                )\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.sectionTitle}>\r\n                        <Typography variant='h4'>Buscar Diseño</Typography>\r\n                        <Divider />\r\n                    </div>\r\n                    <form onSubmit={handleSubmit} className={classes.searchContainer}>\r\n                        <TextField\r\n                            className={classes.input}\r\n                            size='small'\r\n                            variant='outlined'\r\n                            value={search}\r\n                            onChange={({ target }) => setSearch(target.value)}\r\n                            label='Nombre/Propietario'\r\n                            onBlur={handleSearch}\r\n                            placeholder='Ingresa el nombre o propietario para buscar diseños'\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    search.trim().length ?(<IconButton\r\n                                        size='small'\r\n                                        onClick={handleClearSearch}\r\n                                        onMouseDown={(e)=>e.preventDefault()}\r\n                                    >\r\n                                        {<Close /> }\r\n                                    </IconButton>) : (<div></div>)\r\n\r\n                            }}\r\n                            fullWidth\r\n                        />\r\n                        <Button\r\n                            className={classes.button}\r\n                            variant='contained' \r\n                            color='primary'\r\n                            type='submit'\r\n                            disableElevation\r\n                        >\r\n                            Buscar\r\n                        </Button>\r\n                    </form>\r\n                    <KeywordManager keywords={keywords} onChangeKeywords={handleChangeKeywords}/>\r\n                    <div className={classes.sectionTitle}>\r\n                        <Typography variant='h4'>Repositorio Público</Typography>\r\n                        <Divider />\r\n                        {\r\n                            (categoriesQuery.isError) \r\n                                ? <Typography>{categoriesQuery.error.message}</Typography>\r\n                                : (designsQuery.isError) \r\n                                    ? <Typography>{designsQuery.error.message}</Typography>\r\n                                    : <DesignsContainer {...designsQuery} label='public-repository'/>\r\n                        }                        \r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react'\r\nimport { makeStyles, useTheme } from '@material-ui/core';\r\nimport { Skeleton } from '@material-ui/lab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        marginTop: 10,\r\n        backgroundColor: theme.palette.background.design,\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n        width: '100%',\r\n    },\r\n    body: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        marginLeft: 10,\r\n        marginRight: 10,\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-start',\r\n    },\r\n    photo: {\r\n        margin: 10,\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n    },\r\n    name: {\r\n        width: '50%',\r\n        [theme.breakpoints.down('sm')]: {\r\n            width: '70%',\r\n        },\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '100%',\r\n        },\r\n    },\r\n    location: {\r\n        width: '35%',\r\n        [theme.breakpoints.down('sm')]: {\r\n            width: '50%',\r\n        },\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '80%',\r\n        },\r\n    },\r\n    ocupation: {\r\n        width: '35%',\r\n        [theme.breakpoints.down('sm')]: {\r\n            width: '50%',\r\n        },\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '80%',\r\n        },\r\n    }\r\n}));\r\n\r\nexport const UserCardSkeleton = () => {\r\n    const classes = useStyles();\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.card}>\r\n                <div className={classes.photo}>\r\n                    <Skeleton  width={theme.spacing(8)} height={theme.spacing(8)} variant=\"circle\" animation='wave' />\r\n                </div>\r\n                <div className={classes.body} >\r\n                    <Skeleton className={classes.name} animation='wave' height={42} style={{borderRadius: 4}} />\r\n                    <Skeleton className={classes.location} animation='wave' height={20} style={{borderRadius: 4}} />\r\n                    <Skeleton className={classes.ocupation} animation='wave' height={20} style={{borderRadius: 4}} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport queryString from 'query-string';\r\nimport { Button, Divider, Grid, List, ListItem, ListItemText, makeStyles, Typography } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { searchUsers } from 'services/UserService';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { UserCard } from 'components/UserCard';\r\nimport { UserCardSkeleton } from 'components/UserCardSkeleton';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingBottom: 50,\r\n        background: theme.palette.background.workSpace,\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: 'calc(100vh - 128px)',\r\n            overflow: 'auto'\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    usersContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        paddingTop: 15,\r\n    },\r\n    errorContainer: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        minWidth: '50%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    loadMore: {\r\n        marginTop: 50,\r\n    }\r\n}));\r\n\r\nexport const SearchUsersPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { q } = queryString.parse(location.search);\r\n\r\n    const redirectTo = (path) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const { data, status, error, isFetchingNextPage, fetchNextPage, hasNextPage } = useInfiniteQuery('search-users', async ({ pageParam = 0 }) => {\r\n        return await searchUsers(q, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if (lastPage.nPages === pages.length) return undefined;\r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const userList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.users.map((user, i) => <UserCard key={user._id} {...user} />);\r\n        });\r\n    };\r\n\r\n    const usersSkeletonsList = () => {\r\n        return [...Array(6).keys()].map((index) => (\r\n            <UserCardSkeleton key={`user-skeleton-${index}`} />\r\n        ));\r\n    };\r\n\r\n    if (!q) {\r\n        return (\r\n            <div className={classes.errorContainer}>\r\n                <Alert severity='error' className={classes.error}>\r\n                    No se ha ingresado filtro para la búsqueda de usuarios. Por favor ingrese información en la entrada de texto de la barra de navegación para buscar usuarios\r\n                    y presione 'enter' o el ícono de búsqueda.\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    return <>\r\n        <Grid container>\r\n            <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                    <ListItem button onClick={() => redirectTo('/my-designs')}>\r\n                        <Home className={classes.icon} />\r\n                        <ListItemText primary=\"Mis Diseños\" />\r\n                    </ListItem>\r\n                    <Divider />\r\n                    <ListItem button onClick={() => redirectTo('/shared-with-me')}>\r\n                        <Group className={classes.icon} />\r\n                        <ListItemText primary=\"Compartidos Conmigo\" />\r\n                    </ListItem>\r\n                    <Divider />\r\n                    <ListItem button onClick={() => redirectTo('/public-repository')}>\r\n                        <Public className={classes.icon} />\r\n                        <ListItemText primary=\"Repositorio Público\" />\r\n                    </ListItem>\r\n                    <Divider />\r\n                </List>\r\n            </Grid>\r\n            <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                \r\n                {\r\n                    status === 'loading' ? (\r\n                        <div style={{ paddingTop: 15 }}>\r\n                            <Typography variant='h4'>Buscando usuarios...</Typography>\r\n                            <div>\r\n                                { usersSkeletonsList() }\r\n                            </div>\r\n                        </div>\r\n                    ) : status === 'error' ? (\r\n                        <Alert severity='error' className={classes.error}>\r\n                            { error.message}\r\n                        </Alert>\r\n                    ) : (\r\n                        <div style={{ paddingTop: 15 }}>\r\n                            <Typography variant='h4'>Usuarios encontrados</Typography>\r\n                            {\r\n                                data.pages[0].users.length > 0\r\n                                    ? (<>\r\n                                        <div className={classes.usersContainer}>\r\n                                            {userList()}\r\n                                            {\r\n                                                data && hasNextPage && <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                                                    {\r\n                                                        isFetchingNextPage\r\n                                                            ? 'Cargando más...'\r\n                                                            : 'Cargar Más'\r\n                                                    }\r\n                                                </Button>\r\n                                            }\r\n                                        </div></>)\r\n                                    : <Alert severity='error' className={classes.error}>\r\n                                        No se han encontrado coincidencias.\r\n                                </Alert>\r\n                            }\r\n                        </div>\r\n                    )\r\n                }\r\n            </Grid>\r\n            <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n        </Grid>\r\n    </>\r\n}\r\n","import React, { createContext, useCallback, useContext, useState } from 'react';\r\nimport * as Y from 'yjs';\r\nimport { WebsocketProvider } from 'y-websocket';\r\nimport { useAuthState } from './AuthContext';\r\nimport { formatName } from 'utils/textFormatters';\r\n\r\nconst SharedDocContext = createContext();\r\n\r\nexport function useSharedDocContext() {\r\n    const context = useContext(SharedDocContext);\r\n    if (context === undefined) {\r\n        throw new Error('SharedDocContext must be used within a SharedDocProvider');\r\n    }\r\n    return context;\r\n}\r\n\r\nexport const SharedDocProvider = ({ children }) => {\r\n    const [doc, setDoc] = useState(null);\r\n    const [provider, setProvider] = useState(null);\r\n    const [user, setUser] = useState(null);\r\n    const [connected, setConnected] = useState(false);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectToDesign = useCallback(\r\n        ( id ) => {\r\n            if (provider) return false;\r\n            if (!authState.user) return false;\r\n            const yDoc = new Y.Doc({guid: id});\r\n            setDoc(yDoc);\r\n            const wsProvider = new WebsocketProvider(process.env.REACT_APP_Y_WEBSOCKET_SERVER, id, yDoc);\r\n            const preparedUser = {\r\n                name: formatName(authState.user.name, authState.user.lastname),\r\n                color: authState.user.color,\r\n            };\r\n            wsProvider.awareness.setLocalStateField('user', preparedUser);\r\n            wsProvider.on('status', event => {\r\n                if(event.status === 'connected'){\r\n                    setConnected(true);\r\n                } else {\r\n                    setConnected(false);\r\n                }\r\n            });\r\n            setProvider(wsProvider);\r\n            setUser(preparedUser);\r\n        },\r\n        [provider, authState.user],\r\n    );\r\n\r\n    const clearDoc = useCallback(\r\n        () => {\r\n            setDoc(null);\r\n            setProvider(null);\r\n            setUser(null);\r\n        },\r\n        [setDoc, setProvider, setUser],\r\n    );\r\n\r\n    return (\r\n        <SharedDocContext.Provider value={{\r\n            doc,\r\n            provider,\r\n            connectToDesign,\r\n            clearDoc,\r\n            user,\r\n            connected,\r\n        }}>\r\n            {children}\r\n        </SharedDocContext.Provider>\r\n    );\r\n}","import { useEffect, useState, useCallback, forwardRef, useImperativeHandle, useRef } from 'react'\r\nimport { Editor } from '@tiptap/core'\r\nimport Collaboration from '@tiptap/extension-collaboration'\r\nimport CollaborationCursor from '@tiptap/extension-collaboration-cursor'\r\nimport { EditorContent } from '@tiptap/react'\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext'\r\nimport './sharedTextField.css';\r\nimport { Box, ButtonBase, Divider, makeStyles } from '@material-ui/core'\r\nimport Document from '@tiptap/extension-document'\r\nimport Paragraph from '@tiptap/extension-paragraph'\r\nimport Text from '@tiptap/extension-text'\r\nimport CharacterCount from '@tiptap/extension-character-count'\r\nimport { ArrowDropUp, ArrowDropDown } from '@material-ui/icons'\r\n\r\nfunction htmlToText(htmlString) {\r\n    var span = document.createElement('span');\r\n    span.innerHTML = htmlString;\r\n    return span.textContent || span.innerText;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: ({ multiline, rowMax, focused }) => ({\r\n        width: '100%',\r\n        display: 'flex',\r\n    }),\r\n    inputContainer: ({ multiline, rowMax, focused, type }) => ({\r\n        width: '100%',\r\n        cursor: 'text',\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 34px)`,\r\n        overflow: 'auto',\r\n    }),\r\n    actions: () => ({\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: 70,\r\n        justifyContent: 'space-between',\r\n        borderWidth: 1,\r\n        borderStyle: 'solid',\r\n        borderColor: theme.palette.action.disabled,\r\n        borderTopRightRadius: 5,\r\n        borderBottomRightRadius: 5,\r\n    }),\r\n    action: () => ({\r\n        height: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n    }),\r\n    editorx: ({ multiline, rowMax }) => ({\r\n        height: multiline && rowMax === 1 ? 'auto' : `calc(22px * ${rowMax} + 34px)`,\r\n    }),\r\n    '@global': {\r\n        '.ProseMirror': ({ multiline, rowMax }) => ({\r\n            height: '100%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n            width: '100%',\r\n            fontSize: theme.typography.body1.fontSize,\r\n            fontFamily: theme.typography.fontFamily,\r\n            fontStyle: 'normal',\r\n            paddingTop: '1rem',\r\n            paddingBottom: '1rem',\r\n            paddingLeft: 10,\r\n            paddingRight: 10,\r\n        }),\r\n        '.ProseMirror p': {\r\n            marginBlockStart: 0,\r\n            marginBlockEnd: 0,\r\n        },\r\n        '.ProseMirror:focus': {\r\n            outline: 'none',\r\n        },\r\n        '.ProseMirror p.is-editor-empty:first-child::before': {\r\n            content: 'attr(data-empty-text)',\r\n            float: 'left',\r\n            color: theme.palette.type === 'dark' ? theme.palette.grey[400] : theme.palette.grey[600],\r\n            pointerEvents: 'none',\r\n            height: 0,\r\n        },\r\n    },\r\n}));\r\n\r\nexport const SharedTextFieldTipTapEditor = forwardRef(({name,\r\n    multiline,\r\n    rowMax = 1,\r\n    maxLength,\r\n    onChange,\r\n    placeholder = '',\r\n    initialvalue = '',\r\n    type = 'text',\r\n    max,\r\n    min,\r\n    deleteOnRemove = false,\r\n    onSynced,\r\n}, ref) => {\r\n    const isMounted = useRef(true);\r\n    const [focused, setFocused] = useState(false);\r\n    const classes = useStyles({\r\n        multiline,\r\n        rowMax,\r\n        focused,\r\n        type,\r\n    });\r\n    const [synced, setSynced] = useState(false);\r\n    const { doc, provider, user } = useSharedDocContext();\r\n    const [editor, setEditor] = useState(null);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    const getText = useCallback(\r\n        () => {\r\n            return htmlToText(editor?.getHTML().toString()).trim().toString();\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    const setText = useCallback(\r\n        (value) => {\r\n            editor?.commands.first(({ commands }) => [\r\n                () => commands.setContent(value.toString()),\r\n            ]);\r\n        },\r\n        [editor],\r\n    );\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearText: () => {\r\n                if (!doc || !editor) return;\r\n                setText('');\r\n            },\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (!doc || !editor || !deleteOnRemove) return;\r\n            setText('');\r\n        }\r\n    }, [doc, editor, setText, deleteOnRemove]);\r\n\r\n    useEffect(() => {\r\n        if(!editor){\r\n            if(isMounted.current){\r\n                setEditor(new Editor({\r\n                    editorProps: type === 'number' ? {\r\n                        handleTextInput: (view, from, to, text) => {\r\n                            if (isNaN(text) && text !== '-') return true;\r\n                            if (text === '0' && view.dom.firstChild.textContent === '00') return true;\r\n                            if (\r\n                                (text === '-' && view.dom.firstChild.textContent.match(/-/g).length > 1) || \r\n                                (text === '-' && min !== null && min >= 0) ||\r\n                                (text === '-' && view.dom.firstChild.textContent.indexOf('-') !== 0) \r\n                            ) return true;\r\n                            if (max !== null && parseInt(view.dom.firstChild.textContent) > max) return true;\r\n                            if (min !== null && parseInt(view.dom.firstChild.textContent) < min) return true;\r\n                            return false;\r\n                        },\r\n                        handlePaste: (view, event, slice) => {\r\n                            if (slice.content.childCount !== 1) return true;\r\n                            if (isNaN(slice.content.firstChild.textContent)) return true;\r\n                            const prevValue = view.dom.firstChild.textContent;\r\n                            const newValue = prevValue + slice.content.firstChild.textContent;\r\n                            if (\r\n                                (newValue.includes('-') && newValue.match(/-/g)?.length > 1) ||\r\n                                (newValue.includes('-') && newValue.indexOf('-') !== 0)\r\n                            ) return true;                    \r\n                            if (max !== null && parseInt(newValue) > max) return true;\r\n                            if (min !== null && parseInt(newValue) < min) return true;\r\n                            return false;\r\n                        },\r\n                    } : {},\r\n                    extensions: [\r\n                        Document.extend({\r\n                            content: multiline ? 'block+' : 'block',\r\n                        }),\r\n                        Paragraph,\r\n                        Text,\r\n                        CollaborationCursor.configure({\r\n                            provider: provider,\r\n                            user,\r\n                        }),\r\n                        Collaboration.configure({\r\n                            document: doc,\r\n                            field: name,\r\n                        }),\r\n                        CharacterCount.configure({\r\n                            limit: maxLength,\r\n                        }),\r\n                    ],\r\n                    onUpdate: (event) => {\r\n                        const text = htmlToText(event.editor.getHTML().toString());\r\n                        let value = (type === 'number' && !isNaN(text)) ? parseInt(text) : text;\r\n                        if(onChange && event.transaction.docs[0].textContent !== text) onChange({\r\n                            target : {\r\n                                name,\r\n                                type,\r\n                                value: (type === 'number' && isNaN(value)) ? 0 : value,\r\n                            }\r\n                        });\r\n                    },\r\n                    onFocus: ({editor, event}) => {\r\n                        if(isMounted.current) setFocused(true);\r\n                    },\r\n                    onBlur: ({editor, event}) => {\r\n                        if(isMounted.current) setFocused(false);\r\n                    },\r\n                }));\r\n            }\r\n        }\r\n    }, [editor, doc, max, maxLength, min, multiline, name, onChange, provider, type, user]);\r\n\r\n    useEffect(() => {\r\n        if (provider.synced) {\r\n            if(!synced){\r\n                if (getText() === '') {\r\n                    setText(initialvalue);\r\n                    if(onSynced) onSynced();\r\n                    if(isMounted.current) setSynced(true);\r\n                }\r\n            }\r\n        } else {\r\n            provider.once('synced', () => {\r\n                if(!synced){\r\n                    if (getText() === '') {\r\n                        setText(initialvalue);\r\n                        if(onSynced) onSynced();\r\n                        if(isMounted.current) setSynced(true);\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }, [provider.synced, getText, initialvalue, onSynced, provider, setText, synced]);\r\n\r\n    if(!editor){\r\n        return (<div>Conectando...</div>);\r\n    }\r\n\r\n    const handleIncrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (max !== null && (val + 1 > max)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val + 1,\r\n            }\r\n        });\r\n        return setText(val + 1);\r\n    };\r\n\r\n    const handleDecrement = () => {\r\n        let val = getText();\r\n        if (!editor || type !== 'number') return;\r\n        if (!val.length || val === '-') return setText(min ?? 0);\r\n        val = parseInt(val);\r\n        if (min !== null && (val - 1 < min)) return;\r\n        if(onChange) onChange({\r\n            target : {\r\n                name,\r\n                type,\r\n                value: (type === 'number' && isNaN(val)) ? 0 : val - 1,\r\n            }\r\n        });\r\n        return setText(val - 1);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div className={classes.inputContainer} onClick={() => {\r\n                if (!focused) editor.chain().focus('end').run()\r\n            }}>\r\n                <EditorContent editor={editor} className={`${classes.editorx}`} />\r\n            </div>\r\n            {\r\n                type === 'number' && (\r\n                    <div className={classes.actions}>\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleIncrement}>\r\n                            <ArrowDropUp />\r\n                        </Box>\r\n                        <Divider />\r\n                        <Box className={classes.action} component={ButtonBase} onClick={handleDecrement}>\r\n                            <ArrowDropDown />\r\n                        </Box>\r\n                    </div>\r\n                )\r\n            }\r\n        </div>\r\n    )\r\n})\r\n","import React, { forwardRef, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { IconButton, makeStyles, Typography, Tooltip, Paper, MenuItem, FormControl, Select, TextField, Box, InputLabel, useTheme, useMediaQuery, Button } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Delete } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskBody: {\r\n        padding: 10,\r\n        position: 'relative',\r\n        left: '5%',\r\n        width: '95%',\r\n        height: '100%',\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        position: 'absolute',\r\n        width: '5%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n        },\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    gridContainer: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '50% 50%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `\r\n            'learningType modality'\r\n            'workingTime format'\r\n            'description description'`,\r\n        [theme.breakpoints.down('md')]: {\r\n            gridTemplateAreas: `\r\n                'learningType learningType'\r\n                'modality modality'\r\n                'format format'\r\n                'workingTime workingTime'\r\n                'description description'`,\r\n        },\r\n    },\r\n    firstRow: {\r\n        display: 'grid',\r\n        gridTemplateColumns: 'auto auto 10%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `'learningType modality'`,\r\n    },\r\n    learningTypeContainer:{\r\n        gridArea: 'learningType',\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    learningType:{\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    modality: {\r\n        gridArea: 'modality',\r\n        width: '100%',\r\n        display: 'flex',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    format: {\r\n        gridArea: 'format',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignSelf: 'flex-end',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    delete: {\r\n        alignSelf: 'flex-start',\r\n        justifySelf: 'center',\r\n    },\r\n    resourceLinkGrid:{\r\n        display: 'grid',\r\n        gridTemplateColumns: '25% 75%',\r\n    },\r\n    fab: {\r\n        maxHeight: \"20px\",\r\n        minHeight: \"20px\",\r\n        minWidth: \"20px\",\r\n        maxWidth: \"20px\",\r\n    },\r\n    icon:{\r\n        maxHeight: \"15px\",\r\n        minHeight: \"15px\",\r\n        minWidth: \"15px\",\r\n        maxWidth: \"15px\",\r\n    }\r\n}));\r\n\r\nexport const Task = forwardRef(({ learningActivityIndex, index, task, learningActivityID, sumHours, sumMinutes, refTask, ...rest }, ref) => {\r\n    const classes = useStyles();\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const isMounted = useRef(true);\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { uiState, dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isMediumDevice = useMediaQuery(theme.breakpoints.down('md'));\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        description: task.description,\r\n        learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n        modality: task.modality && task.modality.trim() !== '' ? task.modality : 'Seleccionar',\r\n        format: task.format && task.format.trim() !== '' ? task.format : 'Seleccionar',\r\n        timeHours: task.duration.hours ?? 0,\r\n        timeMinutes: task.duration.minutes ?? 0,\r\n        timeDesignHours: metadata.workingTimeDesign.hours ?? 0,\r\n        timeDesignMinutes: metadata.workingTimeDesign.minutes ?? 0,\r\n        groupSize: task.groupSize && task.groupSize !== 2 ? task.groupSize : 2,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if(uiState.newTask && refTask.current !== null){\r\n            refTask.current.scrollIntoView(false);\r\n            dispatch({\r\n                type: types.ui.setScrollToNewTask,\r\n                payload: false\r\n            })\r\n        }\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearTexts: () => {\r\n                hoursRef?.current?.clearText();\r\n                minutesRef?.current?.clearText();\r\n                descriptionRef?.current?.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.description !== task.description) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    description: task.description,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.description, task.description, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.learningType !== task.learningType) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    learningType: task.learningType && task.learningType.trim() !== '' ? task.learningType : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.learningType, task.learningType, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.modality !== task.modality) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    modality: task.modality && task.modality.trim() !== '' ? task.modality : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.modality, task.modality, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.format !== task.format) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    format: task.format && task.format.trim() !== '' ? task.format : 'Seleccionar',\r\n                }));\r\n            }\r\n        }\r\n    }, [form.format, task.format, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.timeHours !== task.duration.hours) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeHours: task.duration.hours ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeHours, task.duration.hours, setValues]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.timeMinutes !== task.duration.minutes) {\r\n                setValues((prevState) => ({\r\n                    ...prevState,\r\n                    timeMinutes: task.duration.minutes ?? 0,\r\n                }));\r\n            }\r\n        }\r\n    }, [form.timeMinutes, task.duration.minutes, setValues]);\r\n\r\n    const { description, learningType, modality, format, timeHours, timeMinutes, groupSize } = form;\r\n\r\n    const handleEditTaskField = ({ target }) => {\r\n        let { name: field, value } = target;\r\n        let subfield = null;\r\n        if (field.includes('description')) field = 'description';\r\n        else if (field.includes('timeHours')) {\r\n            field = 'duration';\r\n            subfield = 'hours';\r\n            value = isNaN(value) ? 0 : value;\r\n        } else if (field.includes('timeMinutes')) {\r\n            field = 'duration';\r\n            subfield = 'minutes';\r\n            value = isNaN(value) ? 0 : value;\r\n        }\r\n        if(isMounted.current) handleInputChange({ target });\r\n        socket?.emit('edit-task-field', { designId: design._id, learningActivityID, taskID: task.id, field, value, subfield, sumHours, sumMinutes}, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n            },\r\n            () => enqueueSnackbar(\r\n                subfield ? `Error al editar el campo \"${subfield}\" del campo \"${field}\". Por favor revise su conexión. Tiempo de espera excedido.` : `Error al editar el campo \"${field}\". Por favor revise su conexión. Tiempo de espera excedido.`, \r\n                { variant: 'error', autoHideDuration: 2000 }\r\n            ),\r\n        ));\r\n    };\r\n\r\n    const handleOpenResourceModal = () => {\r\n        dispatch({\r\n            type: types.ui.setResourceLink,\r\n            payload: {\r\n                learningActivityIndex: learningActivityIndex,\r\n                taskIndex: index,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource',\r\n        });\r\n    }\r\n\r\n    const handleDeleteTask = (index) => {\r\n        if (description === \"\" && learningType === 'Seleccionar' && modality === 'Seleccionar' && format === 'Seleccionar' && timeHours === 0 && timeMinutes === 0) {\r\n            hoursRef?.current?.clearText();\r\n            minutesRef?.current?.clearText();\r\n            descriptionRef?.current?.clearText();\r\n            socket?.emit('delete-task', { designId: design._id, learningActivityID, taskID: task.id }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(resp.ok && uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                    return enqueueSnackbar(resp.message, { variant: resp.ok ? 'success': 'error', autoHideDuration: 2000 });\r\n                },\r\n                () => enqueueSnackbar('Error al eliminar la tarea. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        } else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'tarea',\r\n                    args: { designId: design._id, learningActivityID, taskID: task.id },\r\n                    actionMutation: null,\r\n                }\r\n            });\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleChangeDropdown = (e) => {\r\n        if (isMounted.current) handleInputChange(e);\r\n        socket?.emit('edit-task-field', { designId: design._id, learningActivityID, taskID: task.id, field: e.target.name, value: e.target.value, subfield: null }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n            },\r\n            () => enqueueSnackbar(\r\n                `Error al editar el campo \"${e.target.name}\". Por favor revise su conexión. Tiempo de espera excedido.`, \r\n                { variant: 'error', autoHideDuration: 2000 }\r\n            ),\r\n        ));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(design.metadata.workingTimeDesign.hours >= design.metadata.workingTime.hours){\r\n            if(design.metadata.workingTimeDesign.hours > design.metadata.workingTime.hours){\r\n                enqueueSnackbar('Su tiempo de trabajo de diseño es mayor al tiempo de trabajo definido, por favor disminuya el tiempo de trabajo asignado en las tareas o aumente el tiempo en los metadatos.', { variant: 'warning', autoHideDuration: 5000, preventDuplicate: true });\r\n            } else {\r\n                if(design.metadata.workingTimeDesign.minutes > design.metadata.workingTime.minutes){\r\n                    enqueueSnackbar('Su tiempo de trabajo de diseño es mayor al tiempo de trabajo definido, por favor disminuya el tiempo de trabajo asignado en las tareas o aumente el tiempo en los metadatos.', { variant: 'warning', autoHideDuration: 5000, preventDuplicate: true });\r\n                }\r\n            }\r\n        }\r\n    }, [design.metadata.workingTimeDesign.hours, design.metadata.workingTime.hours, design.metadata.workingTimeDesign.minutes, design.metadata.workingTime.minutes, enqueueSnackbar])\r\n\r\n    const listTasksArray = () => {\r\n        return (\r\n            <Box key={index} style={{ height: '100%' }} ref = {refTask}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Box style={{ display: 'flex', position: 'relative', height: '100%', width: '100%' }}>\r\n                        {(() => {\r\n                            if (task.learningType === 'Investigación') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Adquisición') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Producción') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Discusión') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Colaboración') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></Box>\r\n                                )\r\n                            } else if (task.learningType === 'Práctica') {\r\n                                return (\r\n                                    <Box className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></Box>\r\n                                )\r\n                            }\r\n                        })()}\r\n                        <div className={classes.taskBody}>\r\n                            <div className={classes.gridContainer}>\r\n                                <div className={classes.learningTypeContainer}>\r\n                                    <FormControl fullWidth variant='outlined' className={classes.learningType}>\r\n                                        <InputLabel id={`learningType-task-${task.id}-learningActivity-${learningActivityID}`} shrink>Aprendizaje</InputLabel>\r\n                                        <Select\r\n                                            labelId={`learningType-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Aprendizaje'\r\n                                            name='learningType'\r\n                                            value={learningType}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Investigación'}> Investigación </MenuItem>\r\n                                            <MenuItem value={'Adquisición'}> Adquisición </MenuItem>\r\n                                            <MenuItem value={'Producción'}> Producción </MenuItem>\r\n                                            <MenuItem value={'Discusión'}> Discusión </MenuItem>\r\n                                            <MenuItem value={'Colaboración'}> Colaboración </MenuItem>\r\n                                            <MenuItem value={'Práctica'}> Práctica </MenuItem>\r\n\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    {isMediumDevice && (<Tooltip title=\"Eliminar tarea\" className={classes.delete}>\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>)}\r\n                                </div>\r\n                                <div className={classes.modality}>\r\n                                    <FormControl fullWidth variant='outlined'>\r\n                                        <InputLabel id={`modality-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Modalidad </InputLabel>\r\n                                        <Select\r\n                                            labelId={`modality-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Aprendizaje'\r\n                                            name='modality'\r\n                                            value={modality}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Presencial-Asíncrono'}> Presencial-Asíncrono</MenuItem>\r\n                                            <MenuItem value={'Presencial-Síncrono'}> Presencial-Síncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Asíncrono'}> Online-Asíncrono</MenuItem>\r\n                                            <MenuItem value={'Online-Síncrono'}> Online-Síncrono</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    {!isMediumDevice && (<Tooltip title=\"Eliminar tarea\" className={classes.delete}>\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>)}\r\n                                </div>\r\n                                <div style={{ width: '100%', gridArea: 'workingTime', marginTop: 3 }}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom> Tiempo de trabajo </Typography>\r\n                                    <div className={classes.timeField}>\r\n                                        <TextField\r\n                                            label='Horas'\r\n                                            InputLabelProps = {{shrink: true}}\r\n                                            fullWidth\r\n                                            margin='none'\r\n                                            variant='outlined'\r\n                                            color='primary'\r\n                                            InputProps={{\r\n                                                inputComponent: SharedTextFieldTipTapEditor,\r\n                                                inputProps: {\r\n                                                    ref: hoursRef,\r\n                                                    name: `timeHours-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                    placeholder: 'Horas',\r\n                                                    initialvalue: timeHours,\r\n                                                    onChange: handleEditTaskField,\r\n                                                    type: 'number',\r\n                                                    min: 0,\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                        <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                        <TextField\r\n                                            label='Minutos'\r\n                                            InputLabelProps = {{shrink: true}}\r\n                                            fullWidth\r\n                                            margin='none'\r\n                                            variant='outlined'\r\n                                            color='primary'\r\n                                            InputProps={{\r\n                                                inputComponent: SharedTextFieldTipTapEditor,\r\n                                                inputProps: {\r\n                                                    ref: minutesRef,\r\n                                                    name: `timeMinutes-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                                    placeholder: 'Minutos',\r\n                                                    initialvalue: timeMinutes,\r\n                                                    onChange: handleEditTaskField,\r\n                                                    type: 'number',\r\n                                                    min: 0,\r\n                                                    max: 59,\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                <div style={{marginTop: 20}}>\r\n                                    <Button variant={'outlined'} onClick={handleOpenResourceModal}> Administrar recursos</Button>\r\n                                </div>\r\n                                <div className={classes.format}>\r\n                                    <FormControl fullWidth variant='outlined' >\r\n                                        <InputLabel id={`format-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Formato </InputLabel>\r\n                                        <Select\r\n                                            labelId={`format-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                            label='Formato'\r\n                                            name='format'\r\n                                            value={format}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Grupal'}> Grupal</MenuItem>\r\n                                            <MenuItem value={'Individual'}> Individual</MenuItem>\r\n                                            <MenuItem value={'Toda la clase'}> Toda la clase</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    { (format === 'Grupal') &&\r\n                                        (design.metadata.classSize > 1) &&\r\n                                            <FormControl fullWidth variant='outlined'>\r\n                                                <InputLabel id={`group-task-${task.id}-learningActivity-${learningActivityID}`} shrink> Personas </InputLabel>\r\n                                                <Select\r\n                                                    labelId={`group-quantity-task-${task.id}-learningActivity-${learningActivityID}`}\r\n                                                    label='Cantidad'\r\n                                                    name='groupSize'\r\n                                                    value={groupSize}\r\n                                                    onChange={handleChangeDropdown}\r\n                                                    type = 'number'\r\n                                                >\r\n                                                {/* \r\n                                                    Array.from({ length: (design.metadata.classSize-1)}, (_, i) => (\r\n                                                            {i}\r\n                                                    ))\r\n                                                */}\r\n                                                <MenuItem value={2}> {2} </MenuItem>\r\n                                                <MenuItem value={3}> {3} </MenuItem>\r\n                                                <MenuItem value={4}> {4} </MenuItem>\r\n                                                <MenuItem value={5}> {5} </MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                    }\r\n                                </div>\r\n                                <TextField\r\n                                    style={{ gridArea: 'description', marginTop: 10, }}\r\n                                    InputLabelProps = {{shrink: true}}\r\n                                    label='Descripción'\r\n                                    fullWidth\r\n                                    margin='none'\r\n                                    variant='outlined'\r\n                                    color='primary'\r\n                                    InputProps={{\r\n                                        inputComponent: SharedTextFieldTipTapEditor,\r\n                                        inputProps: {\r\n                                            ref: descriptionRef,\r\n                                            name: `description-task-${task.id}-learning-activity-${learningActivityID}`, // TODO: Cambiar y utilizar id generada en mongo como nombre de dato compartido.\r\n                                            placeholder: 'Descripción',\r\n                                            initialvalue: description,\r\n                                            onChange: handleEditTaskField,\r\n                                            multiline: true,\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </Box>\r\n                </Paper>\r\n            </Box >\r\n        )\r\n    }\r\nreturn (\r\n    <>\r\n        {\r\n            listTasksArray()\r\n        }\r\n    </>\r\n)\r\n})\r\n","import React from 'react';\r\nimport { makeStyles, Tooltip, Typography } from '@material-ui/core';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        height: '100%',\r\n    },\r\n    title:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    colorBox: {\r\n        width: 10,\r\n        height: 10,\r\n        marginRight: 5,\r\n        border: `1px solid #dddddd`,\r\n    },\r\n    colorBoxRightPanel: {\r\n        width: 13,\r\n        height: 13,\r\n        marginRight: 5,\r\n    },\r\n    spacingGraphic:{\r\n        marginTop: theme.spacing(1),\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    legend:{\r\n        marginTop: theme.spacing(0.5),\r\n        marginLeft: theme.spacing(0.5),\r\n        marginRight: theme.spacing(0.5),\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\nexport const StackedBar = ({ height = 25, items, type, legends, colorGraphicToPdf }) => {\r\n    const classes = useStyles();\r\n    const { userConfig } = useUserConfigState();\r\n    let colors = [];\r\n    let valueTotal = 0;\r\n    \r\n    items.map ((item) =>( valueTotal = item.value + valueTotal));\r\n    \r\n    if( type === 'Activity' ){ (userConfig.darkTheme) ? colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : colors = ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'];}\r\n    else if( type === 'Format'){ (userConfig.darkTheme) ? colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'] : colors = ['rgba(61, 156, 65, 0.8)', 'rgba(224, 243, 225, 0.8)', 'rgba(102, 242, 108, 0.75)'];}\r\n    else if( type === 'Modality' ){ (userConfig.darkTheme) ? colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3'] : colors = ['#A6CAF6', '#6996CD', '#5FA2EF', '#135BB3']};\r\n    \r\n    return (\r\n        <>  \r\n            <div className={classes.root} style={{height}} >\r\n                {   \r\n                    items.map( (item, index) => (\r\n                        <Tooltip \r\n                            key={`nombreGrafico${index}`} \r\n                            title={\r\n                                <div className={classes.title}>\r\n                                    <div className={classes.colorBox} style={{backgroundColor: colors[index]}}></div>\r\n                                    {`${item.title}: ${((item.value * 100)/valueTotal).toFixed(1)}%`}\r\n                                </div>\r\n                            } \r\n                            arrow\r\n                        >\r\n                            <div\r\n                                style={{\r\n                                    width: `${item.value * 100}%`, \r\n                                    height: '100%', \r\n                                    backgroundColor: colors[index]\r\n                                    }}\r\n                                >\r\n                            </div>\r\n                        </Tooltip>\r\n                    ))\r\n                }\r\n            </div>\r\n            {   \r\n                (legends) && \r\n                <div className={classes.spacingGraphic}>\r\n                    { items.map ((item, index) =>( \r\n                        <div className={classes.legend} key = {`legends-${index}`}  >\r\n                            <div className={classes.colorBoxRightPanel} style={{backgroundColor: colors[index]}}></div>\r\n                            {colorGraphicToPdf ? \r\n                                <Typography variant=\"caption\" > {item.title} </Typography> \r\n                                :\r\n                                <Typography variant=\"caption\" style={{color: \"#000000\"}}> {item.title} </Typography>\r\n                            }\r\n                        </div>)\r\n                    )}\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n};\r\n","export let itemsLearningType = [{\r\n    title: 'Investigación',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Adquisición',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Producción',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Discusión',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Colaboración',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Práctica',\r\n    value: 0,\r\n    minutes: 0,\r\n}];\r\n\r\nexport let itemsLearningTypePie = [{\r\n    title: 'Investigación',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Adquisición',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Producción',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Discusión',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Colaboración',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Práctica',\r\n    value: 0,\r\n    minutes: 0,\r\n}];\r\n\r\nexport let itemsFormat = [{\r\n    title: 'Grupal',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Individual',\r\n    value:0,\r\n    minutes: 0\r\n},{\r\n    title: 'Toda la clase',\r\n    value:0,\r\n    minutes: 0,\r\n}];\r\n\r\nexport let itemsModality = [{\r\n    title: 'Presencial-Asíncrono',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Presencial-Síncrono',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Online-Asíncrono',\r\n    value: 0,\r\n    minutes: 0,\r\n},{\r\n    title: 'Online-Síncrono',\r\n    value: 0,\r\n    minutes: 0,\r\n}];","import React, { createRef, forwardRef, useEffect, useRef, useState } from 'react';\r\nimport { Box, Checkbox, Divider, Fab, FormControlLabel, Grid, IconButton, makeStyles, Menu, MenuItem, Paper, TextField, Tooltip, Typography, useMediaQuery, useTheme } from '@material-ui/core'\r\nimport { Task } from 'pages/DesignPage/Workspace/Task';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { itemsLearningType } from 'assets/resource/items'\r\nimport { Add, Delete, ListAlt, MoreVert } from '@material-ui/icons';\r\nimport ObjectID from 'bson-objectid';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    descriptionContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    },\r\n    delete: {\r\n        alignSelf: 'center',\r\n        justifySelf: 'center',\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing(-5),\r\n        right: theme.spacing(2),\r\n    },\r\n    taskContainer: {\r\n        position: 'relative', \r\n        marginBottom: theme.spacing(6),\r\n    },\r\n    ellipsis: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n}));\r\n\r\nexport const LearningActivity = forwardRef(({ index, learningActivity, sumHours, sumMinutes, refActivity, }, ref) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isXSDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const isMounted = useRef(true);\r\n    \r\n    const titleRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const taskRefs = useRef([]);\r\n\r\n    const refs = learningActivity.tasks.reduce((task, value) => {\r\n        task[value.id] = createRef();\r\n        return task;\r\n    }, {});\r\n    \r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        title: learningActivity.title,\r\n        description: learningActivity.description,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if(uiState.newActivity && refActivity.current !== null){\r\n            refActivity.current.scrollIntoView(false);\r\n            dispatch({\r\n                type: types.ui.setScrollToNewActivity,\r\n                payload: false\r\n            })\r\n        }\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            title: learningActivity.title,\r\n            description: learningActivity.description,\r\n        });\r\n    }, [design, setValues, learningActivity]);\r\n\r\n    const { title, description } = form;\r\n    \r\n    const handleDeleteUnit = () => {\r\n        if (title === \"\" && description === \"\" && learningActivity.learningResults.length === 0 && (learningActivity.tasks === undefined || learningActivity.tasks.length === 0)) {\r\n            taskRefs?.current?.forEach(task => task?.clearTexts());\r\n            titleRef?.current?.clearText();\r\n            descriptionRef?.current?.clearText();\r\n            socket?.emit('delete-learningActivity', { designId: design._id, learningActivityID: learningActivity.id }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(resp.ok && uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                    return enqueueSnackbar(resp.message, { variant: resp.ok ? 'success': 'error', autoHideDuration: 2000 });\r\n                },\r\n                () => enqueueSnackbar('Error al eliminar la actividad. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        } else {\r\n            dispatch({\r\n                type: types.ui.setConfirmData,\r\n                payload: {\r\n                    type: 'actividad',\r\n                    args: { designId: design._id, learningActivityID: learningActivity.id },\r\n                    actionMutation: null,\r\n                }\r\n            });\r\n            dispatch({\r\n                type: types.ui.toggleModal,\r\n                payload: 'Confirmation',\r\n            });\r\n        }\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const resetItems = () => {\r\n        itemsLearningType.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n    };\r\n    \r\n    const handleAddTask = () => {\r\n        const id = ObjectID().toString();        \r\n        socket?.emit('new-task', { designId: design._id, learningActivityID: learningActivity.id, id }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n            },\r\n            () => enqueueSnackbar('Error al agregar la tarea. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        dispatch({\r\n            type: types.ui.setScrollToNewTask,\r\n            payload: true\r\n        });\r\n    };\r\n\r\n    const handleToggleLearningResult = (e, isSelected, result) => {\r\n        if (isSelected) {\r\n            let indexLearningResults = 0;\r\n            learningActivity.learningResults.forEach((r, _indexLearningResults) => {\r\n                if (r.verb === result.verb && r.description === result.description) indexLearningResults = _indexLearningResults;\r\n            });\r\n            socket?.emit('delete-learning-result-from-learningActivity', {\r\n                designId: design._id,\r\n                learningActivityID: learningActivity.id,\r\n                indexLearningResults\r\n            }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                    if(uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                },\r\n                () => enqueueSnackbar('Error al desvincular el resultado de aprendizaje de la actividad. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        } else {\r\n            socket?.emit('add-learning-result-to-learningActivity', {\r\n                designId: design._id,\r\n                learningActivityID: learningActivity.id,\r\n                result\r\n            }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                    if(uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                },\r\n                () => enqueueSnackbar('Error al vincular el resultado de aprendizaje a la actividad. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        }\r\n    };\r\n\r\n    const handleEditLearningActivityField = ({ target }) => {\r\n        let field = target.name;\r\n        if (target.name.includes('title')) field = 'title';\r\n        else if (target.name.includes('description')) field = 'description';\r\n        socket?.emit('edit-unit-field', { designId: design._id, learningActivityID: learningActivity.id, field, value: target.value }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n            },\r\n            () => enqueueSnackbar(`Error al editar el campo ${field} de la actividad. Por favor revise su conexión. Tiempo de espera excedido.`, { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        if (isMounted.current) handleInputChange({ target: { ...target, name: field } });\r\n        \r\n    };\r\n\r\n    const linkedLearningResult = () => {\r\n        const learningResults = design.metadata.results.map(result => (\r\n                <FormControlLabel\r\n                    key={`learning-result-${result.verb}`}\r\n                    classes={{label: classes.ellipsis}}\r\n                    label={<Tooltip title={result.verb + ' ' + result.description} arrow>\r\n                        <Typography className={classes.ellipsis}>{result.verb + ' ' + result.description}</Typography>\r\n                    </Tooltip>}\r\n                    control={\r\n                        <Checkbox\r\n                            checked={!!learningActivity.learningResults.find(lr => lr.verb === result.verb)}\r\n                            onChange={(e) => handleToggleLearningResult(e,\r\n                                !!learningActivity.learningResults.find(lr => lr.verb === result.verb),\r\n                                result\r\n                            )}\r\n                        />\r\n                    }\r\n                />\r\n        ));\r\n        if (learningResults.length === 0) return <Box style={{marginLeft: -15, paddingRight: 10}} fontSize='caption.fontSize' fontStyle='italic' textAlign='justify'>\r\n            No hay resultados de aprendizaje en este diseño. Para agregar resultados de aprendeizaje, por favor ve a la pestaña de metadatos.\r\n        </Box>;\r\n        return learningResults;\r\n    };\r\n\r\n    const handleOpenMenu = (e) => {\r\n        e.stopPropagation();\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n    \r\n    const handleOpenModalEvaluation = () =>{\r\n        setMenuOpen(null);\r\n        dispatch({\r\n            type: types.ui.setEvaluation,\r\n            payload: {\r\n                learningActivityIndex: index,\r\n            },\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Evaluation',\r\n        });\r\n    };\r\n\r\n    const listlearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index} ref = {refActivity}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <TextField\r\n                                label='Título'\r\n                                InputLabelProps = {{shrink: true}}\r\n                                fullWidth\r\n                                margin='none'\r\n                                variant='outlined'\r\n                                color='primary'\r\n                                InputProps={{\r\n                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                    inputProps: {\r\n                                        ref: titleRef,\r\n                                        name: `title-learning-activity-${learningActivity.id}`,\r\n                                        placeholder: 'Título',\r\n                                        initialvalue: title,\r\n                                        onChange: handleEditLearningActivityField,\r\n                                    }\r\n                                }}\r\n                            />\r\n                            {isXSDevice && <>\r\n                                    <IconButton onClick={handleOpenMenu}>\r\n                                        <MoreVert />\r\n                                    </IconButton>\r\n                                    <Menu\r\n                                        onBlur={()=>setMenuOpen(null)}\r\n                                        anchorEl={isMenuOpen}\r\n                                        open={Boolean(isMenuOpen)}\r\n                                        anchorOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        keepMounted\r\n                                        transformOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        onClose={()=>setMenuOpen(null)}\r\n                                    >\r\n                                        <MenuItem onClick={handleOpenModalEvaluation}>\r\n                                            <ListAlt fontSize = 'small'/>\r\n                                            <Typography>Definir Evaluación</Typography>\r\n                                        </MenuItem>\r\n                                        <MenuItem onClick={handleDeleteUnit}>\r\n                                            <Delete fontSize=\"small\" />\r\n                                            <Typography>Eliminar</Typography>\r\n                                        </MenuItem>\r\n                                    </Menu>\r\n                                </>}\r\n                        </Grid>\r\n                        {resetItems()}\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            {\r\n                                design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.forEach((task) => {\r\n                                    itemsLearningType.forEach((item) => {\r\n                                        if (item.title === task.learningType) {\r\n                                            item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                            item.value = item.value + item.minutes;\r\n                                        }\r\n                                    });\r\n                                }\r\n                                )\r\n                            }\r\n                            <StackedBar items={itemsLearningType} type={'Activity'} />\r\n                            {!isXSDevice &&\r\n                                <>\r\n                                    <IconButton onClick={handleOpenMenu}>\r\n                                        <MoreVert />\r\n                                    </IconButton>\r\n                                    <Menu\r\n                                        onBlur={()=>setMenuOpen(null)}\r\n                                        anchorEl={isMenuOpen}\r\n                                        open={Boolean(isMenuOpen)}\r\n                                        anchorOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        keepMounted\r\n                                        transformOrigin={{\r\n                                            vertical: 'top',\r\n                                            horizontal: 'right',\r\n                                        }}\r\n                                        onClose={()=>setMenuOpen(null)}\r\n                                    >\r\n                                        <MenuItem onClick={handleOpenModalEvaluation}>\r\n                                            <ListAlt fontSize = 'small' style={{marginRight: 8}}/>\r\n                                            <Typography>Definir Evaluación</Typography>\r\n                                        </MenuItem>\r\n                                        <MenuItem onClick={handleDeleteUnit}>\r\n                                            <Delete fontSize=\"small\" style={{marginRight: 8}}/>\r\n                                            <Typography>Eliminar Actividad</Typography>\r\n                                        </MenuItem>\r\n                                    </Menu>\r\n                                </>\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8} className={classes.taskContainer}>\r\n                            <Grid id='tasks' className={classes.gridTask}>\r\n                                {\r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i) => <Task ref={(ref) => taskRefs.current.push(ref)} refTask = {refs[task.id]} key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index} learningActivityID={learningActivity.id} sumHours={sumHours} sumMinutes={sumMinutes}/>)\r\n                                }\r\n                            </Grid>\r\n                            <Tooltip title='Agregar tarea' arrow>\r\n                                <Fab aria-label='add-task' className={classes.fab} size='small' color='primary' onClick={handleAddTask}>\r\n                                    <Add fontSize='small'/>\r\n                                </Fab>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <div className={classes.descriptionContainer}>\r\n                                <Grid className={classes.spacingDescription}>\r\n                                    <TextField\r\n                                        label='Descripción'\r\n                                        InputLabelProps = {{shrink: true}}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: descriptionRef,\r\n                                                name: `description-learning-activity-${learningActivity.id}`,\r\n                                                placeholder: 'Descripción',\r\n                                                initialvalue: description,\r\n                                                rowMax: 3,\r\n                                                multiline: true,\r\n                                                onChange: handleEditLearningActivityField,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </Grid>\r\n                                <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                                <div className={classes.learningResultList}>\r\n                                    {\r\n                                        linkedLearningResult()\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listlearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n})\r\n","import React from 'react'\r\nimport PieChart, {\r\n    Legend,\r\n    Series,\r\n    Tooltip,\r\n  } from 'devextreme-react/pie-chart';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\n\r\nexport const PieGraphic = ({items, colorGraphicToPdf}) => {\r\n    const { userConfig } = useUserConfigState();\r\n    \r\n    const customizeTooltip = (arg) =>{\r\n        return {\r\n          text: `${arg.argumentText} - ${(arg.percent * 100).toFixed(1)}%`\r\n        };\r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <div >\r\n                <PieChart\r\n                    id='pie'\r\n                    palette = {(userConfig.darkTheme) ? ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD'] : ['#57A8E7', '#E95D5D', '#C8951F', '#087A4C', '#DFDF3F', '#A75BCD']}\r\n                    dataSource={items}\r\n                    title = 'Análisis'\r\n                    theme = {(userConfig.darkTheme && colorGraphicToPdf) ? 'generic.contrast' : 'generic.light'}\r\n                >   \r\n                    <Series argumentField='title' valueField = 'value'/>\r\n                    <Legend\r\n                        verticalAlignment='bottom'\r\n                        horizontalAlignment='center'\r\n                        itemTextPosition='right'\r\n                        rowCount={2}\r\n                    />\r\n                    <Tooltip enabled={true} customizeTooltip={customizeTooltip} zIndex={2}>\r\n                    </Tooltip>\r\n                </PieChart>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useRef, useState } from 'react'\r\nimport { Avatar, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Divider, FormControl, Grid, IconButton, Link as MaterialLink, makeStyles, MenuItem, Select, TextField, Typography } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport types from 'types';\r\nimport { Alert, Autocomplete } from '@material-ui/lab';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useQuery } from 'react-query';\r\nimport { getUser } from 'services/UserService';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { Link } from 'react-router-dom';\r\nimport { Add, FileCopy } from '@material-ui/icons';\r\nimport { CustomMenu } from 'components/CustomMenu';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleSectionShare: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    divSectionShare: {\r\n        padding: 20,\r\n    },\r\n}));\r\n\r\nexport const ShareModal = () => {\r\n    const classes = useStyles();\r\n    const isMounted = useRef(true);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [user] = useState('');\r\n    const [inputUser, setInputUser] = useState('');\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const [newPrivileges, setNewPrivileges] = useState([...design.privileges]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        }\r\n    }, []);\r\n\r\n    const { data, error, isError, isLoading } = useQuery(['user-profile', design.owner], async () => {\r\n        return await getUser(design.owner);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const handleAddContactInArray = (v) => {\r\n        if (!v) return;\r\n        const user = data.contacts.find(u => u.name === v);\r\n        if (!user) return;\r\n        const isInDesignContacts = design.privileges.map(privilege => privilege.user._id === user._id).reduce((a, b) => a || b);\r\n        if (!isInDesignContacts) {\r\n            if (isMounted.current)setNewPrivileges([...newPrivileges, { user, type: 1 }]);\r\n        } else {\r\n            enqueueSnackbar('El usuario ya se encuentra agregado', { variant: 'error', anchorOrigin: { vertical: 'bottom', horizontal: 'center' }, autoHideDuration: 2000 });\r\n        };\r\n        if(isMounted.current) setInputUser('');\r\n    };\r\n\r\n    const handleClose = () => {\r\n        if(isMounted.current) setNewPrivileges([...design.privileges]);\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n    };\r\n\r\n    const handleAddContactInDesign = () => {\r\n        socket?.emit('change-design-privileges', { designId: design._id, privileges: [...newPrivileges] }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) if(isMounted.current) setNewPrivileges([...design.privileges]);\r\n                enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 });\r\n            },\r\n            () => {\r\n                if(isMounted.current) setNewPrivileges([...design.privileges]);\r\n                enqueueSnackbar('Error al compartir el diseño. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 });\r\n            },\r\n        ));\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        });\r\n    };\r\n\r\n    const handleCopyLinkToClipboard = () => {\r\n        navigator.clipboard.writeText(process.env.REACT_APP_URL + 'shared-link/' + design.readOnlyLink);\r\n        enqueueSnackbar('Enlace copiado.', { variant: 'success', anchorOrigin: { vertical: 'bottom', horizontal: 'left' }, autoHideDuration: 2000 });\r\n    };\r\n\r\n    const handleGenerateLink = () => {\r\n        socket?.emit('generate-new-share-link', { designId: design._id }, emitWithTimeout(\r\n            (resp) => enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 }),\r\n            () => enqueueSnackbar('Error al generar el nuevo enlace. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n    };\r\n\r\n    const handleChange = (e, type, index) => {\r\n        const v = e.target.value;\r\n        if (v === type) return;\r\n        if (v === 'Quitar') {\r\n            if (index === newPrivileges.length - 1) {\r\n                if (isMounted.current) setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                ]);\r\n            } else {\r\n                if (isMounted.current) setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ]);\r\n            }\r\n        } else {\r\n            const p = { ...newPrivileges[index] };\r\n            p.type = v;\r\n            if (index === newPrivileges.length - 1) {\r\n                if(isMounted.current) setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                ]);\r\n            } else {\r\n                if(isMounted.current) setNewPrivileges([\r\n                    ...newPrivileges.slice(0, index),\r\n                    p,\r\n                    ...newPrivileges.slice(index + 1, newPrivileges.length)\r\n                ]);\r\n            }\r\n        };\r\n    };\r\n\r\n    if (error) {\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    {error}\r\n                </Alert>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (!design || !data) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const content = () => {\r\n        if (isLoading) {\r\n            return <Typography>Cargando...</Typography>\r\n        } else if (isError) {\r\n            return (\r\n                <div className={classes.error}>\r\n                    <Alert severity='error'>\r\n                        {error}\r\n                    </Alert>\r\n                </div>)\r\n        } else {\r\n            return (\r\n                <>\r\n\r\n                    <div className={classes.divSectionShare}>\r\n                        <div className={classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir mediante enlace </Typography>\r\n                        </div>\r\n                        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', marginTop: 10, paddingLeft: 10, paddingRight: 10 }}>\r\n                            <Typography align='justify'> Mediante el siguiente enlace puedes compartir este diseño en modo solo lectura: </Typography>\r\n                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                <MaterialLink\r\n                                    style={{ wordBreak: 'break-word' }}\r\n                                    component={Link}\r\n                                    to={`/shared-link/${design.readOnlyLink}`}\r\n                                    onClick={handleClose}\r\n                                    align='center'\r\n                                >\r\n                                    {process.env.REACT_APP_URL + 'shared-link/' + design.readOnlyLink}\r\n                                </MaterialLink>\r\n                                <CustomMenu options={[\r\n                                    { icon: <FileCopy fontSize='small' />, label: 'Copiar enlace', onSelect: handleCopyLinkToClipboard },\r\n                                    { icon: <Add />, label: 'Generar nuevo enlace', onSelect: handleGenerateLink },\r\n                                ]} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.divSectionShare}>\r\n                        <div className={classes.titleSectionShare}>\r\n                            <Typography color='textSecondary'> Compartir a contactos </Typography>\r\n                        </div>\r\n                        <div>\r\n                            <Autocomplete\r\n                                value={user}\r\n                                blurOnSelect\r\n                                onChange={(e, v) => {\r\n                                    handleAddContactInArray(v)\r\n                                }}\r\n                                inputValue={inputUser}\r\n                                onInputChange={(event, newInputUser) => {\r\n                                    if(isMounted.current) setInputUser(newInputUser);\r\n                                }}\r\n                                options={data.contacts.map(contact => {\r\n                                    return contact.name\r\n                                })}\r\n                                getOptionSelected={(option, value) => option.id === value.id}\r\n                                renderInput={(params) =>\r\n                                    <TextField\r\n                                        {...params}\r\n                                        label=\"Buscar Contacto\"\r\n                                        margin=\"normal\"\r\n                                        variant=\"outlined\"\r\n                                        InputProps={{ ...params.InputProps }}\r\n                                    />\r\n                                }\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <Divider style={{ marginBottom: 10 }} />\r\n                            {newPrivileges.map((privilege, i) => {\r\n                                return (\r\n                                    <Grid container style={{ marginBottom: 10 }} key={`privilege-${i}`}>\r\n                                        <Grid item xs={12} style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', flexWrap: 'wrap' }}>\r\n                                            <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                                <Box style={{ justifyContent: 'space-between' }}>\r\n                                                    <Avatar style={{ marginRight: 7 }} />\r\n                                                </Box>\r\n                                                <Box style={{ justifyContent: 'space-between' }}>\r\n                                                    <Typography>{privilege.user.name + ' ' + privilege.user.lastname}</Typography>\r\n                                                    <Typography color={'textSecondary'}>{privilege.user.email}</Typography>\r\n                                                </Box>\r\n                                            </div>\r\n                                            <Box >\r\n                                                {(privilege.user._id === design.owner) ?\r\n                                                    <Typography>Propietario</Typography>\r\n                                                    :\r\n                                                    <FormControl variant='outlined' size='small'>\r\n                                                        <Select\r\n                                                            key={`privileges-action-${i}`}\r\n                                                            name='type'\r\n                                                            value={privilege.type}\r\n                                                            onChange={(e) => { handleChange(e, privilege.type, i) }}\r\n                                                        >\r\n                                                            <MenuItem value={0}> Editor </MenuItem>\r\n                                                            <MenuItem value={1}> Lector</MenuItem>\r\n                                                            <MenuItem value={'Quitar'}> Quitar</MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                }\r\n                                            </Box>\r\n                                        </Grid>\r\n                                    </Grid>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                open={uiState.isShareModalOpen}\r\n                onClose={handleClose}\r\n                maxWidth={'sm'}\r\n                fullWidth\r\n            >\r\n                <DialogTitle >\r\n                    Compartir Diseño\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers style={{ padding: 0 }}>\r\n                    {content()}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddContactInDesign}>\r\n                        Listo\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import { useState } from \"react\";\r\n\r\nexport const MiniContext = () => {\r\n    const [ confirmDateConfiguration, setDateConfiguration] = useState(false);\r\n    const [ selectedDate, setSelectedDate ] = useState(new Date(Date.now()));\r\n    const [ privileges, setPrivileges ] = useState([]);\r\n    \r\n\r\n    return {\r\n        confirmDateConfiguration,\r\n        setDateConfiguration,\r\n        selectedDate,\r\n        setSelectedDate,\r\n        privileges, \r\n        setPrivileges\r\n    }\r\n}\r\n","\r\nconst months = [\r\n    'Enero',\r\n    'Febrero',\r\n    'Marzo',\r\n    'Abril',\r\n    'Mayo',\r\n    'Junio',\r\n    'Julio',\r\n    'Agosto',\r\n    'Septiembre',\r\n    'Octubre',\r\n    'Noviembre',\r\n    'Diciembre'\r\n]\r\n\r\nconst days = [\r\n    'Domingo',\r\n    'Lunes',\r\n    'Martes',\r\n    'Miércoles',\r\n    'Jueves',\r\n    'Viernes',\r\n    'Sábado'\r\n];\r\n\r\n\r\nexport const formatDate = ( dateTime, showDayName = false ) => {\r\n    const year = dateTime.getFullYear();\r\n    const date = dateTime.getDate();\r\n    const monthName = months[dateTime.getMonth()];\r\n    const dayName = days[dateTime.getDay()];\r\n    if (showDayName) return `${dayName}, ${date} de ${monthName} de ${year}`;\r\n    return `${date} de ${monthName} de ${year}`;\r\n};\r\n\r\nexport const formatTime = ( dateTime, showSeconds = false ) => {\r\n    const options = { hour: 'numeric', minute: 'numeric'};\r\n    if (showSeconds) options.second = 'numeric';\r\n    return dateTime.toLocaleTimeString('es-ES', options);\r\n};","import React, { useEffect, useRef } from 'react';\r\nimport { Page, Text, View, Document, StyleSheet, Image, Link } from '@react-pdf/renderer';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { useBetween } from 'use-between';\r\nimport { MiniContext } from './MiniContext';\r\nimport { formatDate } from 'utils/dateTimeFormatter';\r\n\r\nexport const DocumentPDF = ({design, img, typeUserPDF}) => {\r\n    const { selectedDate, privileges} = useBetween(MiniContext);\r\n    const styles = StyleSheet.create({\r\n        logo: {\r\n            width: 100,\r\n            height: 100,\r\n            marginVertical: 15,\r\n            marginHorizontal: 250\r\n        }, \r\n        title: {\r\n            fontSize: 20,\r\n            textAlign: 'center',\r\n            marginBottom: 25,\r\n        }, \r\n        box: { \r\n            width: '100%',\r\n        }, \r\n        pageNumber: {\r\n            position: 'absolute',\r\n            fontSize: 12,\r\n            bottom: 30,\r\n            left: 0,\r\n            right: 0,\r\n            textAlign: 'center',\r\n            color: 'grey',\r\n        },\r\n        date:{ \r\n            position: 'absolute',\r\n            fontSize: 12,\r\n            bottom: 50,\r\n            textAlign: 'center',\r\n        },  \r\n        marginTitle:{\r\n            fontSize: 15,\r\n            marginLeft: 35,\r\n            marginTop: 15,\r\n        }, \r\n        secondTitle:{\r\n            fontSize: 17,\r\n            textAlign: 'center',\r\n            marginBottom: 15,\r\n            marginLeft: 16,\r\n            marginRight: 16\r\n        },\r\n        body:{\r\n            paddingTop: 35,\r\n            paddingBottom: 65,\r\n        }, \r\n        table: {\r\n            display: \"table\",\r\n            flexDirection: \"column\",\r\n            marginLeft: 15,\r\n            marginBottom: 10,\r\n            marginRight: 15,\r\n            justifyContent: \"flex-start\",\r\n            alignContent: \"stretch\",\r\n            flexWrap: \"nowrap\",\r\n            alignItems: \"stretch\",\r\n          },\r\n        row: {\r\n            display: \"flex\",\r\n            flexDirection: \"row\",\r\n            justifyContent: \"space-around\",\r\n            fontSize: 12,\r\n        }, \r\n        cell: {\r\n            flexGrow: 1,\r\n            flexShrink: 1,\r\n            marginLeft: 16,\r\n            marginRight: 16,\r\n            marginBottom: 3,\r\n            flexBasis: \"auto\",\r\n            alignSelf: \"stretch\"\r\n        },\r\n        breakLine:{\r\n            width: '100%', \r\n            height: 400,\r\n        }\r\n    });\r\n    const isMounted = useRef(true);\r\n    let manyAuthorsSelected = 0;\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    privileges.forEach( author => {\r\n        if(author.selected) \r\n            manyAuthorsSelected = manyAuthorsSelected + 1\r\n        }\r\n    )\r\n    return (\r\n        <>\r\n            <Document >\r\n                <Page size=\"A4\" wrap style={styles.body}>\r\n                    <View style={styles.box} >\r\n                        <Image\r\n                            src={Logo}\r\n                            style = {styles.logo}\r\n                        />\r\n                        {(design.metadata.name === '') \r\n                            ? <Text style={styles.title}> Nombre no definido. </Text>\r\n                            : <Text style={styles.title}> {design.metadata.name}. </Text>\r\n                        }\r\n                        <View style={{textAlign: 'center', marginBottom: 15}}>\r\n                            {\r\n                                (privileges.map((author)=> author.selected).reduce((a, b)=> a || b) && \r\n                                    (manyAuthorsSelected === 1) \r\n                                    ? <Text style={{fontSize: 12, color: '#979797'}}>Autor</Text>\r\n                                    : (manyAuthorsSelected > 1) \r\n                                    && <Text style={{fontSize: 12, color: '#979797'}}>Autores</Text>\r\n                                ) \r\n                            }\r\n                            {privileges.map((author, i) =>\r\n                                {   \r\n                                    if (!author.selected) {\r\n                                        return <div key= {`author-${i}`}></div>\r\n                                    }\r\n                                    return (\r\n                                    <div key= {`author-${i}`}>   \r\n                                        <Text style={{fontSize: 12, marginLeft: 10}}>{author.user.name + ' ' + author.user.lastname}</Text>\r\n                                    </div> \r\n                                )}\r\n                            )}\r\n                        </View>\r\n                        <View style={styles.table}>\r\n                            {(typeUserPDF === 'teacher') &&\r\n                            <> \r\n                                <View style={[styles.row]}>\r\n                                    <Text style={[styles.cell, {color: '#979797'}]}>Nombre</Text>\r\n                                    <Text style={[styles.cell, {color: '#979797'}]}>Área disciplinar</Text>\r\n                                </View>\r\n                                <View style={[styles.row]}>\r\n                                    {(design.metadata.name === '') \r\n                                        ? <Text style={styles.cell}>No especificado</Text>\r\n                                        : <Text style={styles.cell}>{design.metadata.name}.</Text>\r\n                                    }\r\n                                    <Text style={styles.cell}>{design.metadata.category.name}.</Text>\r\n                                </View>\r\n\r\n                                <View style={[styles.row]}>\r\n                                    <Text style={[styles.cell, {color: '#979797'}]}>Tiempo de trabajo</Text>\r\n                                    <Text style={[styles.cell, {color: '#979797'}]}>Tamaño de la clase</Text>\r\n                                </View>\r\n                                <View style={[styles.row]}>\r\n                                    <Text style={styles.cell}>{design.metadata.workingTime.hours} hrs : {design.metadata.workingTime.minutes} min.</Text>\r\n                                    <Text style={styles.cell}>{design.metadata.classSize}.</Text>\r\n                                </View>\r\n                            </>\r\n                            }\r\n                            <View style={[styles.row]}>\r\n                                <Text style={[styles.cell, {color: '#979797'}]}>Conocimiento Previo</Text>\r\n                                <Text style={[styles.cell, {color: '#979797'}]}>Objetivos</Text>\r\n                            </View>\r\n                            <View style={[styles.row]}>\r\n                                {(design.metadata.priorKnowledge === '') \r\n                                    ? <Text style={styles.cell}>No especificado</Text>\r\n                                    : <Text style={styles.cell}>{design.metadata.priorKnowledge}.</Text>\r\n                                }\r\n                                {(design.metadata.objective === '') \r\n                                    ? <Text style={styles.cell}>No especificado</Text>\r\n                                    : <Text style={styles.cell}>{design.metadata.objective}.</Text>\r\n                                }\r\n                            </View>\r\n                            <View style = {{marginLeft: 16, marginRight: 16}}>\r\n                                <Text style={{fontSize: 12, color: '#979797', marginTop: 5, marginBottom: 5}} >Descripción</Text>\r\n                                {\r\n                                    (design.metadata.description === '') ? \r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                    :\r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{design.metadata.description}</Text>\r\n                                } \r\n                            </View>\r\n                            <View style = {{marginLeft: 16, marginRight: 16}}>\r\n                                <Text style={{fontSize: 12, color: '#979797', marginTop: 5, marginBottom: 5}} >Pauta de evaluación</Text>\r\n                                {\r\n                                    (design.metadata.evaluationPattern === '') ? \r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                    :\r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center', color:'#5564eb'}} >{design.metadata.evaluationPattern}</Text>\r\n                                } \r\n                            </View>\r\n                            <View style = {{marginLeft: 16, marginRight: 16}}>\r\n                                <Text style={{fontSize: 12, color: '#979797', marginTop: 5, marginBottom: 5}} >Evaluación</Text>\r\n                                {\r\n                                    (design.metadata.evaluation === '') ? \r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                    :\r\n                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{design.metadata.evaluation}</Text>\r\n                                } \r\n                            </View>\r\n                        </View>\r\n                        <View style = {[styles.table, {marginLeft: 16, marginRight: 16, height: 650}]} wrap={false}>\r\n                            <Text style ={[styles.secondTitle, {borderBottom: 1, borderColor: '#979797'}]}> Resultados de aprendizaje</Text>\r\n                            {design.metadata.results.length === 0 \r\n                            ? <Text style={{fontSize: 12, marginBottom: 5, marginLeft: 16}} >No han sido proporcionados.</Text>\r\n                            : design.metadata.results.map((result, i) =>\r\n                                <View key = {`learning-result-${i}`}>\r\n                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 2, marginBottom: 2, marginLeft: 16}} >Resultado de aprendizaje número {i + 1}:</Text>\r\n                                    <Text style={{fontSize: 12, marginBottom: 2, marginLeft: 16}} >{result.verb + ' ' + result.description}</Text>\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n                        <View style={[styles.table]} wrap={false}>\r\n                            <Text style ={[styles.secondTitle, {borderBottom: 1, borderColor: '#979797'}]}> Actividades</Text>\r\n                            { design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) =>\r\n                                <View key = {`learning-activity-${index}`} style = {{marginBottom: 20}} wrap = {(index >= 1) ? false : true}>\r\n                                    <View style = {{ marginBottom: 5 }}>\r\n                                        <Text style={{color: '#979797', fontSize: 14, marginLeft: 16}}>Título</Text>\r\n                                        {(learningActivity.title === '') \r\n                                        ? <Text style={{fontSize: 13, marginLeft: 16}}> No definido. </Text>\r\n                                        : <Text style={{fontSize: 13, marginLeft: 16}}> {learningActivity.title} </Text>\r\n                                        }\r\n                                    </View>\r\n                                    <View style = {{marginLeft: 16, marginRight: 20, marginBottom: 10}}>\r\n                                        {\r\n                                            (learningActivity.evaluation.length <= 1 ) \r\n                                            ? <Text style={{fontSize: 14, color: '#979797', marginTop: 5}} >Evaluación.</Text>\r\n                                            : <Text style={{fontSize: 14, color: '#979797', marginTop: 5}} >Evaluaciones.</Text>\r\n                                        }\r\n                                        { (learningActivity.evaluation.length === 0 )\r\n                                            ? <Text style={{fontSize: 13}}> No se ha especificado.</Text>\r\n                                            : learningActivity.evaluation.map((evaluation, i) => \r\n                                                <View key = {`evaluation-${i}`}>\r\n                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 5}} >Tipo</Text>\r\n                                                    {(evaluation.type === 'Seleccionar')\r\n                                                    ? <Text style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                                    : <Text style={{fontSize: 12, justifyContent: 'center'}}>{evaluation.type}</Text>}\r\n                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 10, marginBottom: 7}} >Descripción</Text>\r\n                                                    {(evaluation.description === '') ?\r\n                                                    <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No definido.</Text>\r\n                                                    :\r\n                                                    <Text wrap style={{fontSize: 12, justifyContent: 'flex-end'}}>{evaluation.description}</Text>}\r\n                                                </View> \r\n                                            )\r\n                                        }\r\n                                    </View>\r\n                                    { learningActivity.tasks && learningActivity.tasks.map((task, indexTask) =>\r\n                                        <View key = {`task-${indexTask}`} >\r\n                                            <View style={[styles.table, { \r\n                                                    borderColor: \r\n                                                        task.learningType === 'Investigación' \r\n                                                        ? '#57A8E7' \r\n                                                        : task.learningType === 'Adquisición'\r\n                                                        ? '#E95D5D' \r\n                                                        : task.learningType === 'Producción'\r\n                                                        ? '#C8951F'\r\n                                                        : task.learningType === 'Discusión'\r\n                                                        ? '#087A4C'\r\n                                                        : task.learningType === 'Colaboración'\r\n                                                        ? '#DFDF3F'\r\n                                                        : task.learningType === 'Práctica'\r\n                                                        ? '#A75BCD'\r\n                                                        : task.learningType === 'Seleccionar'\r\n                                                        && '#979797',\r\n                                                    borderLeftWidth: 40}]}>\r\n                                                <View style={[styles.row, {marginTop: 5}]}>\r\n                                                    <Text style={[styles.cell, {color: '#979797'}]}>Aprendizaje</Text>\r\n                                                    <Text style={[styles.cell, {color: '#979797'}]}>Tiempo</Text>\r\n                                                    <Text style={[styles.cell, {color: '#979797'}]}>Modalidad</Text>\r\n                                                </View>\r\n                                                <View style={[styles.row]}>\r\n                                                    {task.learningType === 'Seleccionar' \r\n                                                        ? <Text style={[styles.cell]}>No especificado.</Text>\r\n                                                        : <Text style={[styles.cell]}>{task.learningType}</Text>\r\n                                                    }\r\n                                                    <Text style={[styles.cell]}>{task.duration.hours} hrs : {task.duration.minutes} min.</Text>\r\n                                                    {(task.modality === 'Seleccionar' || task.modality.trim().length === 0) \r\n                                                        ? <Text style={[styles.cell]}> No especificado. </Text> \r\n                                                        : <Text style={[styles.cell]}> {task.modality} </Text>\r\n                                                    }\r\n                                                </View>\r\n                                                <View style={[styles.row]}>\r\n                                                    <Text style={[styles.cell, {color: '#979797'}]}>Formato</Text>\r\n                                                    {  (task.format === 'Grupal') \r\n                                                        && <>\r\n                                                            <Text style={[styles.cell, {color: '#979797'}]}>Número de integrantes</Text>\r\n                                                            <Text style={[styles.cell, {color: '#979797'}]}></Text>\r\n                                                        </>\r\n                                                    }\r\n                                                </View>\r\n                                                <View style={[styles.row]}>\r\n                                                    {(task.format === 'Seleccionar' || task.format.trim().length === 0) \r\n                                                        ? <Text style={[styles.cell]}>No especificado.</Text>\r\n                                                        : <Text style={[styles.cell]}>{task.format}</Text>\r\n                                                    }\r\n                                                    {  (task.format === 'Grupal') \r\n                                                        && <>\r\n                                                            <Text style={styles.cell}> {task.groupSize}</Text> \r\n                                                            <Text style={[styles.cell, {color: '#979797'}]}></Text>\r\n                                                        </> \r\n                                                    }\r\n                                                </View>\r\n                                                <View style={{marginLeft: 16, marginRight: 16}}>\r\n                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 20, marginBottom: 5}} >Descripción</Text>\r\n                                                    {(task.description === '') \r\n                                                        ? <Text wrap style={{fontSize: 12, justifyContent: 'center'}}> No especificado. </Text> \r\n                                                        : <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>{task.description}</Text>\r\n                                                    }\r\n                                                    <Text style={{fontSize: 12, color: '#979797', marginTop: 20, marginBottom: 5}} >Enlace de recursos</Text>\r\n                                                    { (task.resourceLinks.length === 0) \r\n                                                        ? <Text wrap style={{fontSize: 12, justifyContent: 'center'}}>No se han proporcionado recursos</Text>\r\n                                                        : (task.resourceLinks.map((resource, i) =>\r\n                                                            <div key = {`resource-${i}-task-${indexTask}-learningnActivity${index}`}>\r\n                                                                <Text style={{fontSize: 10, color: '#979797', marginBottom: 5}} >Título</Text>\r\n                                                                {(resource.title === '') \r\n                                                                    ? <Text wrap style={{fontSize: 10, justifyContent: 'center'}}>No definido.</Text>\r\n                                                                    : <Text wrap style={{fontSize: 10, justifyContent: 'center'}}>{resource.title}</Text>\r\n                                                                }\r\n                                                                <Text style={{fontSize: 10, color: '#979797', marginTop: 10, marginBottom: 5}} >Enlace</Text>\r\n                                                                {(resource.link === '') \r\n                                                                    ? <Text wrap style={{fontSize: 10, justifyContent: 'center'}}>No definido.</Text>\r\n                                                                    : <Link wrap style={{fontSize: 10, justifyContent: 'center', color:'#5564eb'}}>{resource.link}</Link>\r\n                                                                }\r\n                                                            </div> \r\n                                                        ))\r\n                                                    }\r\n                                                </View>\r\n                                            </View>\r\n                                        </View>\r\n                                    )}\r\n                                </View>\r\n                            )}\r\n                        </View>\r\n                        <View style = {{marginTop: 15}} wrap={false}>\r\n                            {(typeUserPDF === 'teacher' ) &&\r\n                                <Image\r\n                                    src={img}\r\n                                />\r\n                            }\r\n                        </View>\r\n                    </View>\r\n                    <Text style={styles.date} render={({ pageNumber }) => (\r\n                        (pageNumber === 1) && formatDate(new Date(selectedDate), true)\r\n                    )} fixed />\r\n                    <Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => (\r\n                        `${pageNumber} / ${totalPages}`\r\n                    )} fixed />\r\n                </Page>\r\n            </Document>\r\n        </>\r\n    )\r\n}","import PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport const TabPanel = ({ children, value, index, ...other }) => {\r\n    return (\r\n      <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`full-width-tabpanel-${index}`}\r\n        aria-labelledby={`full-width-tab-${index}`}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n            <Typography component={'span'}>{children}</Typography>\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired,\r\n};\r\n","import { Accordion, AccordionDetails, AccordionSummary, Avatar, Box, Checkbox, FormControl, FormControlLabel, Grid, Typography, makeStyles } from '@material-ui/core'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { useBetween } from 'use-between';\r\nimport { MiniContext } from './MiniContext';\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker, } from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport types from 'types';\r\n  \r\nconst useStyles = makeStyles((theme) => ({\r\n    author: {\r\n        padding: '15px 10px 15px 20px',\r\n        display: 'flex',\r\n        justifyContent: 'start',\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n}));\r\n\r\nexport const ConfigurationData = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const {\r\n        selectedDate, \r\n        setSelectedDate, \r\n        privileges,\r\n        setPrivileges,\r\n    } = useBetween(MiniContext);\r\n    const [ expanded, setExpanded] = useState(false);\r\n    const isMounted = useRef(true);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n    \r\n    const handleDateChange = (date) => {\r\n        if (isMounted.current){\r\n            setSelectedDate(date);\r\n        }\r\n    };\r\n\r\n    const handleChangeSelectAuthor = (event, index) => {\r\n        if (isMounted.current){\r\n            const newState = JSON.parse(JSON.stringify(privileges));\r\n            newState[index].selected = !newState[index].selected;\r\n            setPrivileges(newState);\r\n            dispatch({\r\n                type: types.ui.setPDFConfig,\r\n                payload: {\r\n                    field: 'privileges',\r\n                    value: newState\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    const handleChangePanel = (panel, /*isChecked*/) =>(event, isExpanded) =>{\r\n        if (isMounted.current){\r\n            setExpanded(isExpanded ? panel : false);\r\n        }\r\n        //if (panel === 'panel1') {\r\n            //if(isChecked){\r\n            //    setDateConfiguration(event.target.checked);\r\n            //} else {\r\n            //    if(!confirmDateConfiguration){\r\n            //        setDateConfiguration(true)\r\n            //    }else if(confirmDateConfiguration){\r\n            //        setDateConfiguration(false)\r\n            //    }\r\n            //}\r\n        //    dispatch({\r\n        //        type: types.ui.setPDFConfig,\r\n        //        payload: {\r\n        //            field: 'confirmDateConfiguration',\r\n        //            value: confirmDateConfiguration\r\n        //        }\r\n        //    })\r\n            //dispatch({\r\n            //    type: types.ui.setPDFConfig,\r\n            //    payload: {\r\n            //        field: 'expanded',\r\n            //        value: isExpanded\r\n            //    }\r\n            //})\r\n        //}\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Box>\r\n                <Accordion expanded={expanded === 'panel1'} onChange={handleChangePanel('panel1', false)}>\r\n                    <AccordionSummary\r\n                    expandIcon={<ExpandMoreIcon />}\r\n                    aria-controls=\"panel1bh-content\"\r\n                    id=\"panel1bh-header\"\r\n                    >\r\n                    <Typography >Definir fecha que se mostrará en el documento PDF generado.</Typography>\r\n                    {/*<FormControlLabel\r\n                        aria-label=\"Acknowledge\"\r\n                        onClick={(event) => event.stopPropagation()}\r\n                        onFocus={(event) => event.stopPropagation()}\r\n                        control={<Switch\r\n                            checked = {confirmDateConfiguration}\r\n                           onChange={ handleChangePanel('panel1', true) }\r\n                        />}\r\n                        label=\"Desea la fecha en su PDF?\"\r\n                        />*/\r\n                    }\r\n                    </AccordionSummary>\r\n                    <AccordionDetails>\r\n                        <div>\r\n                            <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                                <Grid container>\r\n                                    <KeyboardDatePicker\r\n                                    disableToolbar\r\n                                    variant=\"inline\"\r\n                                    format=\"dd/MM/yyyy\"\r\n                                    margin=\"normal\"\r\n                                    id=\"date-picker-inline\"\r\n                                    label=\"Definir fecha\"\r\n                                    value={selectedDate}\r\n                                    onChange={handleDateChange}\r\n                                    KeyboardButtonProps={{\r\n                                        'aria-label': 'change date',\r\n                                    }}\r\n                                    />\r\n                                </Grid>\r\n                            </MuiPickersUtilsProvider>\r\n                        </div>\r\n                    </AccordionDetails>\r\n                </Accordion>\r\n                <Accordion expanded={expanded === 'panel2'} onChange={handleChangePanel('panel2')}>\r\n                    <AccordionSummary\r\n                    expandIcon={<ExpandMoreIcon />}\r\n                    aria-controls=\"panel2bh-content\"\r\n                    id=\"panel2bh-header\"\r\n                    >\r\n                    <Typography >Definir autores en el documento</Typography>\r\n                    </AccordionSummary>\r\n                    <AccordionDetails>\r\n                        <div style={{marginTop: 10}}>\r\n                            <FormControl component=\"fieldset\">\r\n                                    { uiState.pdf.privileges.map((author, i) => \r\n                                        <div key = {`authors-${i}`} style={{marginTop: 10}}>\r\n                                        {(author.type === 0) &&\r\n                                            <div>\r\n                                                <div className={classes.author}>\r\n                                                    <FormControlLabel \r\n                                                        control={\r\n                                                        <Checkbox\r\n                                                            checked = {author.selected}\r\n                                                            onChange={(e) => handleChangeSelectAuthor(e, i)}\r\n                                                            />\r\n                                                        } \r\n                                                    />\r\n                                                    <Avatar\r\n                                                        alt={formatName(author.user.name, author.user.lastname)}\r\n                                                        src={author.user.img ?? ''}\r\n                                                    >\r\n                                                        {getUserInitials(author.user.name, author.user.lastname)}\r\n                                                    </Avatar>\r\n                                                    <Typography style ={{marginLeft: 10, marginRight: 10}}>{author.user.name + ' ' + author.user.lastname}</Typography>\r\n                                                    \r\n                                                </div>\r\n                                            </div>    \r\n                                        }\r\n                                    </div>\r\n                                    )\r\n                                }\r\n                            </FormControl>\r\n                        </div>\r\n                    </AccordionDetails>\r\n                </Accordion>\r\n            </Box>    \r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { PDFViewer, PDFDownloadLink } from '@react-pdf/renderer';\r\nimport { DocumentPDF } from './DocumentPDF';\r\nimport { Backdrop, Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport html2canvas from 'html2canvas';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { ConfigurationData } from './ConfigurationData';\r\nimport { useBetween } from 'use-between';\r\nimport { MiniContext } from './MiniContext';\r\nimport { PictureAsPdf } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceInit: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    container: {\r\n        display: \"flex\",\r\n        height: \"100%\",\r\n        width: \"100%\"\r\n    },\r\n    panel: {\r\n        width: \"100%\"\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    loadingFile: {\r\n        '-webkit-backface-visibility': 'hidden',\r\n        animation: `$scaleAnimation 1000ms ${theme.transitions.easing.easeInOut}`,\r\n        animationIterationCount: 'infinite',\r\n        animationDirection: 'alternate',\r\n    },\r\n    \"@keyframes scaleAnimation\": {\r\n        from: {\r\n            height: 300,\r\n            width: 300,\r\n            //transform: 'rotate(0deg)',\r\n        },\r\n        to: {\r\n            height: 150,\r\n            width: 150,\r\n            //transform: 'rotate(360deg)',\r\n        }\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const ViewAndDownloadPDFModal = ({ imgGraphic, setPdfView }) => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { typeUserPDF } = uiState.pdf;\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [img, setImg] = useState(null);\r\n    const [tabIndex, setTabIndex] = useState(0);\r\n    const { setPrivileges } = useBetween(MiniContext);\r\n    const [pdfDocument, setPdfDocument] = useState(null);\r\n    const isMounted = useRef(true);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current){\r\n            const privileges = [];\r\n            design.privileges.forEach(privilege => {\r\n                const p = JSON.parse(JSON.stringify(privilege));\r\n                p.selected = false;\r\n                privileges.push(p);\r\n            })\r\n            setPrivileges(privileges);\r\n            dispatch({\r\n                type: types.ui.setPDFConfig,\r\n                payload: {\r\n                    field: 'privileges',\r\n                    value: privileges\r\n                }\r\n    \r\n            })\r\n        }\r\n    }, [design.privileges, dispatch, setPrivileges]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current){\r\n            if(img && design && typeUserPDF) setPdfDocument(<DocumentPDF design={design} img={img} typeUserPDF={typeUserPDF} />);\r\n        }\r\n    }, [design, img, typeUserPDF, setPdfDocument]);\r\n\r\n    const defineImage = async () => {\r\n        if (isMounted.current){\r\n            const canvas = await html2canvas(imgGraphic.current, {\r\n                width: 800,\r\n                height: 700,\r\n                scrollX: 279\r\n            })\r\n            setImg(canvas.toDataURL('image/jpeg'));\r\n        }\r\n    }\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.setPDF,\r\n            payload: null\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'PDF',\r\n        });\r\n        setPdfView(false);\r\n    };\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n\r\n    if (!img) {\r\n        defineImage();\r\n    }\r\n\r\n    if (!img || !pdfDocument){\r\n        return (\r\n            <Backdrop className={classes.backdrop} open={true}>\r\n                <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <Box width={300} height={300} style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                        <PictureAsPdf className={classes.loadingFile} />\r\n                    </Box>\r\n                    <Typography>Generando archivo pdf...</Typography>\r\n                </Box>\r\n            </Backdrop>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} open={uiState.isPDFModalOpen} fullScreen>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    Exportar diseño\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        aria-label=\"full width tabs\"\r\n                        centered\r\n                    >\r\n                        <Tab label=\"CONFIGURACIÓN\" {...a11yProps(0)} />\r\n                        <Tab label=\"VISTA PREVIA\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <Box className={classes.container}>\r\n                        <TabPanel value={tabIndex} index={0} className={classes.panel}>\r\n                            <ConfigurationData />\r\n                        </TabPanel>\r\n                        <TabPanel value={tabIndex} index={1} className={classes.panel} >\r\n                            <PDFViewer width={'100%'} height={'100%'} >\r\n                                {(imgGraphic && pdfDocument) &&\r\n                                    pdfDocument\r\n                                }\r\n                            </PDFViewer>\r\n                        </TabPanel>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <div className={classes.spaceInit}>\r\n                        <PDFDownloadLink style={{ textDecoration: 'none' }} document={pdfDocument} fileName=\"designdata.pdf\">\r\n                            {({ blob, url, loading, error }) =>\r\n                                <Button variant={'contained'} disabled={loading}> Descargar </Button>\r\n                            }\r\n                        </PDFDownloadLink>\r\n                    </div>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import { Box, Divider, Grid, IconButton, makeStyles, TextField, Tooltip } from '@material-ui/core'\r\nimport React, { useEffect, useRef } from 'react'\r\nimport { Delete } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceResource:{\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    tooltip: {\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    icon:{\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    resourceLinkGrid:{\r\n        display: 'grid',\r\n        gridTemplateColumns: '95% 5%',\r\n    },\r\n}));\r\n\r\nexport const ResourceLink = ({index, resource, newResource, setNewResource}) => {\r\n    const classes = useStyles();\r\n    \r\n    const { uiState, dispatch } = useUiState();\r\n    \r\n    const isMounted = useRef(true);\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        }\r\n    }, []);\r\n\r\n    const changeTitle = (event) => {\r\n        const newTitle = event.target.value;\r\n        if (isMounted.current) setNewResource( newResource => newResource.map((resource, i) => {\r\n            if ( i === index ) {\r\n                resource.title = newTitle;\r\n            }\r\n            return resource;\r\n        }));\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const changeLink = (event) => {\r\n        const newLink = event.target.value;\r\n        if (isMounted.current) setNewResource( newResource => newResource.map((resource, i) => {\r\n            if ( i === index ) {\r\n                resource.link = newLink;\r\n            }\r\n            return resource;\r\n        }));\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n    \r\n    const handleDeleteResourceLink = (index) =>{\r\n        if (index === newResource.length - 1) {\r\n            if (isMounted.current) setNewResource([\r\n                ...newResource.slice(0, index),\r\n            ])\r\n        } else {\r\n            if (isMounted.current) setNewResource([\r\n                ...newResource.slice(0, index),\r\n                ...newResource.slice(index + 1, newResource.length)\r\n            ])\r\n        };\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const resourceLink = () =>{\r\n        return (\r\n            <div key={index} className={classes.spaceResource}>\r\n                <Grid >\r\n                    <div className={classes.resourceLinkGrid}>\r\n                        <div >\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='title' \r\n                                value={ resource.title } \r\n                                onChange={ (e) => changeTitle(e) } \r\n                                label='Título' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='link' \r\n                                value={ resource.link } \r\n                                onChange={ (e)=>changeLink(e)} \r\n                                label='Enlace' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                        </div>\r\n                        <div>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n                                    <Box>\r\n                                        <Tooltip title=\"Eliminar recurso\" className= {classes.tooltip}>\r\n                                            <IconButton onClick={() => handleDeleteResourceLink(index)}>\r\n                                                <Delete className={classes.icon} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Box>\r\n                                </Box>\r\n                        </div>\r\n                    </div>\r\n                <Divider style={{marginTop: 10}}/>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                resourceLink()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles } from '@material-ui/core';\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { ResourceLink } from './ResourceLink';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceInit:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },buttonZone: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.down('xs')]: {\r\n            flexWrap: 'wrap',\r\n        },\r\n    },resourceZone: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: '90%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },contentSpace:{\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(6),\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: 'calc(100vh - 500px)',\r\n            overflow: 'auto'\r\n        },\r\n    }\r\n}));\r\n\r\nexport const ResourceLinksModal = () => {\r\n    const classes = useStyles();\r\n    const isMounted = useRef(true);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { learningActivityIndex, taskIndex } = uiState.resourceLink;\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const [newResource, setNewResource] = useState([...design.data.learningActivities[learningActivityIndex].tasks[taskIndex].resourceLinks]);\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        }\r\n    }, []);\r\n\r\n    const handleClose = () => {\r\n        if (isMounted.current) setNewResource([...design.data.learningActivities[learningActivityIndex].tasks[taskIndex].resourceLinks]);\r\n        dispatch({\r\n            type: types.ui.setResourceLink,\r\n            payload: {\r\n                learningActivityIndex: null,\r\n                taskIndex: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource',\r\n        });\r\n    };\r\n    \r\n    const handleAddResource = () =>{\r\n        const newLinks = {\r\n            title: '',\r\n            link: '',\r\n        }\r\n        if (isMounted.current) setNewResource([...newResource, newLinks]);\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const handleAddResourceInDesign = () =>{\r\n        socket?.emit('change-resource-in-task', { designId: design._id, learningActivityIndex, taskIndex, resources: [...newResource] }, emitWithTimeout(\r\n            (resp) => {\r\n                enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 });\r\n            },\r\n            () => enqueueSnackbar('Error al modificar los recursos en la tarea. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Resource'\r\n        });\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            <Dialog onClose={handleClose} open={uiState.isResourceModalOpen} fullWidth={true} maxWidth={'md'} >\r\n                <DialogTitle >\r\n                    Administrar Recursos\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon/>\r\n                </IconButton>\r\n                <DialogContent dividers >\r\n                    <Grid className={classes.contentSpace}>\r\n                        <div className={classes.buttonZone}>\r\n                            <Button variant={'outlined'} color = {'primary'} onClick = {handleAddResource}>Agregar recurso</Button>\r\n                        </div>\r\n                        <Box className={classes.resourceZone}>\r\n                            <Box >\r\n                            {\r\n                                newResource.map((resource, i) => <ResourceLink key={`resource-${i}-task-${taskIndex}-learningActivity-${learningActivityIndex}`} index={i} resource = {resource} newResource={newResource} setNewResource={setNewResource}/>)\r\n                            }\r\n                            </Box>\r\n                        </Box>\r\n                        \r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions >\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddResourceInDesign}>\r\n                        Guardar recursos\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import { Box, Divider, FormControl, Grid, IconButton, InputLabel, makeStyles, MenuItem, Select, TextField, Tooltip } from '@material-ui/core'\r\nimport React from 'react'\r\nimport { Delete } from '@material-ui/icons';\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceResource:{\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    tooltip: {\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    icon:{\r\n        maxHeight: \"25px\",\r\n        minHeight: \"25px\",\r\n        minWidth: \"25px\",\r\n        maxWidth: \"25px\",\r\n    },\r\n    resourceEvaluationGrid:{\r\n        display: 'grid',\r\n        gridTemplateColumns: '95% 5%',\r\n    },\r\n}));\r\n\r\nexport const Evaluation = ({index, evaluation, newEvaluation, setNewEvaluation, learningActivityIndex}) => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n\r\n    const changeType = (event) => {\r\n        const newType = event.target.value;\r\n        setNewEvaluation( newEvaluation => newEvaluation.map((evaluation, i) => {\r\n            if ( i === index ) {\r\n                evaluation.type = newType;\r\n            }\r\n            return evaluation;\r\n        }));\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const changeDescription = (event) => {\r\n        const newDescription = event.target.value;\r\n        setNewEvaluation( newEvaluation => newEvaluation.map((evaluation, i) => {\r\n            if ( i === index ) {\r\n                evaluation.description = newDescription;\r\n            }\r\n            return evaluation;\r\n        }));\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n    \r\n    const handleDeleteResourceEvaluation = (index) =>{\r\n        if (index === newEvaluation.length - 1) {\r\n            setNewEvaluation([\r\n                ...newEvaluation.slice(0, index),\r\n            ])\r\n        } else {\r\n            setNewEvaluation([\r\n                ...newEvaluation.slice(0, index),\r\n                ...newEvaluation.slice(index + 1, newEvaluation.length)\r\n            ])\r\n        };\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const evaluationActivity= () =>{\r\n        return (\r\n            <div key={index} className={classes.spaceResource}>\r\n                <Grid >\r\n                    <div className={classes.resourceEvaluationGrid}>\r\n                        <div>\r\n                            <FormControl fullWidth variant='outlined'>\r\n                                <InputLabel id={`evaluation-${index}-learningActivity-${learningActivityIndex}`}> Tipo de evaluación </InputLabel>\r\n                                <Select\r\n                                    labelId={`evaluationtype-${index}-learningActivity-${learningActivityIndex}`}\r\n                                    label='Tipo de evaluación'\r\n                                    name='type'\r\n                                    value={ evaluation.type }\r\n                                    onChange ={ (e) => changeType(e) }\r\n                                >\r\n                                    <MenuItem value = {'Seleccionar'}> Seleccionar </MenuItem>\r\n                                    <MenuItem value = {'Diagnostico'}> Diagnostico</MenuItem>\r\n                                    <MenuItem value = {'Formativa'}> Formativa</MenuItem>\r\n                                    <MenuItem value = {'Sumativa'}> Sumativa</MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='description' \r\n                                value={ evaluation.description } \r\n                                onChange={ (e) => changeDescription(e) } \r\n                                label='Descripción' \r\n                                type = 'text'\r\n                                fullWidth\r\n                                multiline \r\n                                rows = {4}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n                                    <Box>\r\n                                        <Tooltip title=\"Eliminar evaluación\" className= {classes.tooltip}>\r\n                                            <IconButton onClick={() => handleDeleteResourceEvaluation(index)}>\r\n                                                <Delete className={classes.icon} />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </Box>\r\n                                </Box>\r\n                        </div>\r\n                    </div>\r\n                <Divider style={{marginTop: 10}}/>\r\n                </Grid>\r\n            </div>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                evaluationActivity()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles, Typography } from '@material-ui/core'\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport React, { useState } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Evaluation } from './Evaluation';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceInit:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },buttonZone: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.down('xs')]: {\r\n            flexWrap: 'wrap',\r\n        },\r\n    },resourceZone: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: '100%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },contentSpace:{\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(6),\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: 'calc(100vh - 500px)',\r\n            overflow: 'auto'\r\n        },\r\n    }\r\n}));\r\n\r\nexport const EvaluationModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const { learningActivityIndex } = uiState.evaluationData;\r\n    const [ newEvaluation, setNewEvaluation ] = useState([...design.data.learningActivities[learningActivityIndex].evaluation]);\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleClose = () => {\r\n        setNewEvaluation(design.data.learningActivities[learningActivityIndex].evaluation);\r\n        dispatch({\r\n            type: types.ui.setEvaluation,\r\n            payload: {\r\n                learningActivityIndex: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Evaluation',\r\n        });\r\n    };\r\n\r\n    const handleAddEvaluation = () =>{\r\n        const newEvaluationInArray = {\r\n            type: 'Seleccionar',\r\n            description: '',\r\n        }\r\n        setNewEvaluation([...newEvaluation, newEvaluationInArray]);\r\n        if(uiState.userSaveDesign){\r\n            dispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    const handleAddEvaluationInDesign = () =>{\r\n        socket?.emit('add-evaluation-in-activity', \r\n            { designId: design._id, learningActivityID: design.data.learningActivities[learningActivityIndex].id, evaluation: [...newEvaluation]}, \r\n            emitWithTimeout(\r\n                (resp) => {\r\n                    if(resp.ok && uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                    enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 });\r\n                },\r\n                () => enqueueSnackbar('Error al modificar las evaluaciones de la actividad de aprendizaje. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            )\r\n        );\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} open={uiState.isEvaluationModalOpen} fullWidth={true} maxWidth={'md'} >\r\n                <DialogTitle >\r\n                    Evaluación de la actividad.\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon/>\r\n                </IconButton>\r\n                <DialogContent dividers >\r\n                    <Typography color='textSecondary' style={{marginBottom: 10}}> En el siguiente apartado el docente deberá definir las evaluaciones que el estudiante deberá realizar en cada actividad, se tienen 3 tipos de evaluaciones. La primera evaluación es de tipo diagnostico. La segunda de tipo Formativa. La tercera será de tipo sumativa.</Typography>\r\n                    <div className={classes.buttonZone}>\r\n                        <Button variant={'outlined'} color = {'primary'} onClick = {handleAddEvaluation}>Agregar evaluación</Button>\r\n                    </div>\r\n                    <Grid className={classes.contentSpace}>\r\n                        <Box className={classes.resourceZone}>\r\n                            <Box >\r\n                            {\r\n                                newEvaluation.map((evaluation, i) => <Evaluation key={`evaluation-${i}-learningActivity-${learningActivityIndex}`} index={i} evaluation = {evaluation} newEvaluation={newEvaluation} setNewEvaluation={setNewEvaluation} learningActivityIndex = {learningActivityIndex}/>)\r\n                            }\r\n                            </Box>\r\n                        </Box>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions >\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleAddEvaluationInDesign}>\r\n                        Guardar evaluación.\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { createRef, useRef, useState } from 'react';\r\nimport { Avatar, Box, Button, ButtonGroup, Card, CardActionArea, Divider, Fab, Grid, makeStyles, Menu, MenuItem, Tooltip, Typography, useMediaQuery } from '@material-ui/core';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { LearningActivity } from 'pages/DesignPage/Workspace/LearningActivity';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { PieGraphic } from 'components/PieGraphic';\r\nimport { itemsLearningType, itemsFormat, itemsModality, itemsLearningTypePie } from 'assets/resource/items'\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShareModal } from './ShareModal';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { Add, Description } from '@material-ui/icons';\r\nimport ObjectID from 'bson-objectid';\r\nimport { ViewAndDownloadPDFModal } from 'pages/DesignPage/PDF/ViewAndDownloadPDFModal';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport { ResourceLinksModal } from './ResourceLinksModal';\r\nimport { EvaluationModal } from './EvaluationModal';\r\nimport { exportJsonToFile } from 'utils/files';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root:{\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 412px)',\r\n    },\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.paper,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        position: 'relative',\r\n        background: theme.palette.background.workSpace,\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(2),\r\n        [theme.breakpoints.up('md')]: {\r\n            height: 'calc(100vh - 212px)',\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        position: 'relative',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.paper\r\n    },\r\n    buttonGroupWorkSpace: {\r\n        height: 'auto',\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    textLeftPanel: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData: {\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata: {\r\n        marginTop: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(2),\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(1),\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: 'calc(100vh - 235px)',\r\n            overflow: 'auto'\r\n        },\r\n    },\r\n    textLeftPanelMetadata: {\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    graphicsSpacing: {\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    betweenGraphics: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    workSpaceUnits: {\r\n        width: '100%',\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: '85%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    buttonZone: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 15,\r\n        [theme.breakpoints.down('md')]: {\r\n            flexWrap: 'wrap',\r\n        },\r\n    },\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: 5,\r\n        right: theme.spacing(2),\r\n    },\r\n    origin: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        borderRadius: 4,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    }\r\n}));\r\n\r\nexport const DesignWorkspace = () => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { authState } = useAuthState();\r\n    const history = useHistory();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isMediumDevice = useMediaQuery(theme.breakpoints.down('md'));\r\n    const { uiState, dispatch } = useUiState();\r\n    const [openMenuPDF, setOpenMenuPDF] = useState(null);\r\n    const imgGraphic = useRef();\r\n    const { userConfig } = useUserConfigState();\r\n    const [pdfView, setPdfView] = useState(false);\r\n    let showGraphicLearningType = false;\r\n    let showGraphicFormat = false;\r\n    let showGraphicModality = false;\r\n    let sumHours = 0;\r\n    let sumMinutes = 0;\r\n\r\n    const refs = design.data.learningActivities.reduce((activity, value) => {\r\n        activity[value.id] = createRef();\r\n        return activity;\r\n    }, {});\r\n    \r\n    const handleSaveDesign = (e) => {\r\n        socket?.emit('save-design', { designId: design._id }, emitWithTimeout(\r\n            (resp) => {\r\n                if(resp.ok && !uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: true,\r\n                    })\r\n                }\r\n                enqueueSnackbar(resp.message, { variant: 'success', autoHideDuration: 2000 });\r\n            },\r\n            () => enqueueSnackbar('Error al intentar guardar el diseño. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n    };\r\n\r\n    const handleNewUA = () => {\r\n        const id = ObjectID().toString();        \r\n        socket?.emit('new-learningActivity', { designId: design._id, id }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n                \r\n            },\r\n            () => enqueueSnackbar('Error al agregar la nueva actividad de aprendizaje. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        dispatch({\r\n            type: types.ui.setScrollToNewActivity,\r\n            payload: true\r\n        });\r\n    };\r\n\r\n    const handleOpenModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Share'\r\n        })\r\n    };\r\n\r\n    const handleOpenModalPDF = (type) => {\r\n        setPdfView(true);\r\n        handleCloseMenu();\r\n        dispatch({\r\n            type: types.ui.setPDF,\r\n            payload: type,\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'PDF'\r\n        });\r\n    };\r\n\r\n    const resetItems = () => {\r\n        itemsLearningType.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n        itemsLearningTypePie.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n\r\n        itemsFormat.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n        itemsModality.forEach((item) => {\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleOpenMenu = (event) => {\r\n        setOpenMenuPDF(event.currentTarget);\r\n    };\r\n\r\n    const handleCloseMenu = () => {\r\n        setOpenMenuPDF(null);\r\n    };\r\n\r\n    const handleExportToFile = (e) => {\r\n        const designToExport = JSON.parse(JSON.stringify(design));\r\n        designToExport.comments = [];\r\n        designToExport.assessments = [];\r\n        designToExport.folder = '';\r\n        designToExport.origin = designToExport._id;\r\n        designToExport.privileges = [];\r\n        designToExport.owner = '';\r\n        designToExport.metadata.scoreMean = 0;\r\n        for (const learningActivity of designToExport.data.learningActivities) {\r\n            learningActivity.id = ObjectID().toString();\r\n            for (const task of learningActivity.tasks) {\r\n                task.id = ObjectID().toString();\r\n            }\r\n        }\r\n        delete designToExport._id;\r\n        delete designToExport.createdAt;\r\n        delete designToExport.updatedAt;\r\n        delete designToExport.readOnlyLink;\r\n        exportJsonToFile(designToExport, `${design.metadata.name.trim().length === 0 ? 'Diseño sin nombre' : design.metadata.name.trim()}.json`);\r\n        handleCloseMenu();\r\n    };\r\n\r\n    const handleOpenDesign = (design) =>{\r\n        const inDesign = design.privileges.find(privilege => authState.user.uid === privilege.user._id);\r\n        if (inDesign) {\r\n            const typePrivilegeEditor = design.privileges.find(privilege => authState.user.uid === privilege.user && privilege.type === 0);\r\n            if (typePrivilegeEditor) {\r\n                history.push(`/designs/${design._id}`);\r\n            } else {\r\n                history.push(`/designs/reader/${design._id}`);\r\n            }\r\n        } else if(design.metadata.isPublic){\r\n            history.push(`/designs/reader/${design._id}`);\r\n        } else {\r\n            enqueueSnackbar('Usted no tiene acceso a este diseño.', { variant: 'error', autoHideDuration: 2000 });\r\n        }\r\n    };\r\n\r\n    design.data.learningActivities.forEach((activities) => {\r\n        if (activities.tasks !== undefined) {\r\n            activities.tasks.forEach(task => {\r\n                if (task.learningType !== '' && task.learningType !== 'Seleccionar') {\r\n                    showGraphicLearningType = true;\r\n                }\r\n                if (task.format !== '' && task.format !== 'Seleccionar') {\r\n                    showGraphicFormat = true;\r\n                }\r\n                if (task.modality !== '' && task.modality !== 'Seleccionar') {\r\n                    showGraphicModality = true;\r\n                }\r\n            })\r\n        }\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.root}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLeftPanel}> INFORMACIÓN DISEÑO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData} />\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            {metadata && metadata.name && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary'> Nombre </Typography>\r\n                                    <Typography variant='body2'>{metadata.name}</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.category && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}>Tema</Typography>\r\n                                    <Typography variant='body2'> {metadata.category.name} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.workingTime && (\r\n                                <>\r\n                                    <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                    <Typography variant=\"body2\"> {metadata.workingTime.hours} (hrs) : {metadata.workingTime.minutes} (min)</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.workingTimeDesign && (\r\n                                <>\r\n                                    <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}>Tiempo de trabajo Diseño</Typography>\r\n                                    <Typography variant=\"body2\"> {metadata.workingTimeDesign.hours} (hrs) : {metadata.workingTimeDesign.minutes} (min)</Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Tamaño de la clase </Typography>\r\n                                    <Typography variant='body2'> {metadata.classSize} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.priorKnowledge && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Conocimiento Previo </Typography>\r\n                                    <Typography variant='body2' > {metadata.priorKnowledge} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.description && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Descripción </Typography>\r\n                                    <Typography variant='body2'> {metadata.description} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.objective && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Objetivos </Typography>\r\n                                    <Typography variant='body2'> {metadata.objective} </Typography>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.scoreMean !== null && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Valoración media (0 - 5) </Typography>\r\n                                    <Box display='flex' justifyContent='flex-start' alignItems='center'>\r\n                                        { metadata.scoreMean }\r\n                                    </Box>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.results &&(\r\n                                <div className={classes.textLeftPanelMetadata}>\r\n                                        { metadata.results.map((result, i) => \r\n                                            <div key={`learning-result-${i}`} > \r\n                                                <Typography variant='body2' color={'textSecondary'}>Resultado de aprendizaje {i + 1}</Typography>\r\n                                                <Typography variant='body2' gutterBottom >{ result.verb + ' ' + result.description}</Typography>\r\n                                            </div>\r\n                                        )}\r\n                                        <Divider/>\r\n                                </div>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {design.origin && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Derivado del diseño: </Typography>\r\n                                    <Card className={classes.origin} elevation={0}>\r\n                                        <CardActionArea onClick={()=>handleOpenDesign(design.origin)}>\r\n                                            <Box style={{ display: 'flex', alignItems: 'center', padding: 5 }}>\r\n                                                <Description style={{ marginBottom: 5 }} />\r\n                                                <Typography style={{ marginLeft: 10 }} variant='body2'>{design.origin.metadata.name}</Typography>\r\n                                            </Box>\r\n                                        </CardActionArea>\r\n                                        <Divider />\r\n                                        <CardActionArea component={Link} to={`/profile/${design.origin.owner._id}`}>\r\n                                            <Box style={{ display: 'flex', alignItems: 'center', padding: 5 }}>\r\n                                                <Avatar\r\n                                                    style={{ width: 25, height: 25, fontSize: 15 }}\r\n                                                    alt={formatName(design.origin.owner.name, design.origin.owner.lastname)}\r\n                                                    src={design.origin.owner.img && design.origin.owner.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${design.origin.owner.img}` : ''}\r\n                                                >\r\n                                                    {getUserInitials(design.origin.owner.name, design.origin.owner.lastname)}\r\n                                                </Avatar>\r\n                                                <Typography style={{ marginLeft: 10 }} variant='body2'>{formatName(design.origin.owner.name, design.origin.owner.lastname)}</Typography>\r\n                                            </Box>\r\n                                        </CardActionArea>\r\n\r\n                                    </Card>\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.buttonZone}>\r\n                        <Menu\r\n                            variant={'selectedMenu'}\r\n                            anchorEl={openMenuPDF}\r\n                            keepMounted\r\n                            open={Boolean(openMenuPDF)}\r\n                            onClose={handleCloseMenu}\r\n                        >\r\n                            <MenuItem onClick={() => handleOpenModalPDF('teacher')}>PDF Docente</MenuItem>\r\n                            <MenuItem onClick={() => handleOpenModalPDF('student')}>PDF Estudiante</MenuItem>\r\n                            <MenuItem onClick={handleExportToFile}>Respaldar Diseño</MenuItem>\r\n                        </Menu>\r\n                        <ButtonGroup size='small' fullWidth={isMediumDevice} className={classes.buttonGroupWorkSpace}>\r\n                            <Button onClick={handleOpenMenu}>Exportar</Button>\r\n                            <Button onClick={handleOpenModal}>Compartir</Button>\r\n                            <Button onClick={handleSaveDesign}>Guardar</Button>\r\n                        </ButtonGroup>\r\n                    </div>\r\n                    <Box id='learningActivities' className={classes.workSpaceUnits}>\r\n                        <Box>\r\n                            <Grid className={classes.workSpaceUnits}>\r\n                                <Grid >\r\n                                    {\r\n                                        design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => \r\n                                            <LearningActivity key={`learningActivity-${index}`} refActivity = {refs[learningActivity.id]} index={index} learningActivity={learningActivity} sumHours={sumHours} sumMinutes={sumMinutes} />\r\n                                    )}\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Box>\r\n                    </Box>\r\n                    <Tooltip title='Agregar actividad de aprendizaje' arrow>\r\n                        <Fab color=\"primary\" className={classes.fab} onClick={handleNewUA}>\r\n                            <Add />\r\n                        </Fab>\r\n                    </Tooltip>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}>\r\n                    {resetItems()}\r\n                    <div style={{ position: 'absolute', zIndex: 1, width: '100%' }}>\r\n                        <Grid className={classes.graphicsSpacing} >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity) =>\r\n                                    learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                        itemsLearningType.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsLearningTypePie.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsFormat.forEach((item) => {\r\n                                            if (item.title === task.format) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsModality.forEach((item) => {\r\n                                            if (item.title === task.modality) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                    }))\r\n                            }\r\n                            {showGraphicLearningType &&\r\n                                <div className={classes.betweenGraphics} >\r\n                                    <PieGraphic items={itemsLearningTypePie} colorGraphicToPdf={true}></PieGraphic>\r\n                                </div>\r\n                            }\r\n                            {showGraphicFormat &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <Typography>Formato</Typography>\r\n                                    <StackedBar items={itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={true} ></StackedBar>\r\n                                </div>\r\n                            }\r\n                            {showGraphicModality &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <Typography>Modalidad</Typography>\r\n                                    <StackedBar items={itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                                </div>\r\n                            }\r\n                        </Grid>\r\n                    </div>\r\n                    <div style={{ zIndex: 0, width: '100%' }}>\r\n                        <Grid className={classes.graphicsSpacing} ref={imgGraphic}>\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity) =>\r\n                                    learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                        itemsLearningType.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsLearningTypePie.forEach((item) => {\r\n                                            if (item.title === task.learningType) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsFormat.forEach((item) => {\r\n                                            if (item.title === task.format) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                        itemsModality.forEach((item) => {\r\n                                            if (item.title === task.modality) {\r\n                                                item.minutes = (task.duration.hours * 60) + task.duration.minutes;\r\n                                                item.value = item.value + item.minutes;\r\n                                            }\r\n                                        });\r\n                                    }))\r\n                            }\r\n                            {showGraphicLearningType &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    <PieGraphic items={itemsLearningTypePie} colorGraphicToPdf={false}></PieGraphic>\r\n                                </div>\r\n                            }\r\n                            {showGraphicFormat &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    {\r\n                                        userConfig.darkTheme ? <Typography style={{ color: '#000000' }}>Formato</Typography> : <Typography >Formato</Typography>\r\n                                    }\r\n\r\n                                    <StackedBar items={itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={false}></StackedBar>\r\n                                </div>\r\n                            }\r\n                            {showGraphicModality &&\r\n                                <div className={classes.betweenGraphics}>\r\n                                    {\r\n                                        userConfig.darkTheme ? <Typography style={{ color: '#000000' }}>Modalidad</Typography> : <Typography >Modalidad</Typography>\r\n                                    }\r\n                                    <StackedBar items={itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={false} ></StackedBar>\r\n                                </div>\r\n                            }\r\n                        </Grid>\r\n                    </div>\r\n                </Grid>\r\n                <ShareModal />\r\n                {\r\n                    (pdfView) &&\r\n                    <ViewAndDownloadPDFModal imgGraphic={imgGraphic} setPdfView={setPdfView} />\r\n                }\r\n                {\r\n                    (uiState.isResourceModalOpen) &&\r\n                    <ResourceLinksModal />\r\n                }\r\n                {\r\n                    (uiState.isEvaluationModalOpen) &&\r\n                    <EvaluationModal />\r\n                }\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","\r\n\r\nexport const exportJsonToFile = (json='', filename = 'example.json') => {\r\n    if(typeof json === 'object') json = JSON.stringify(json);\r\n    let auxElement = document.createElement('a');\r\n    auxElement.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(json));\r\n    auxElement.setAttribute('download', filename);\r\n    auxElement.click();\r\n}","import React from 'react';\r\nimport { IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        padding: 20,\r\n        width: '49%',\r\n        marginBottom: 10,\r\n        borderRadius: 5,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '100%'\r\n        }\r\n    },\r\n    description: {\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        textAlign: 'justify',\r\n    },\r\n    actions: {\r\n        width: 96,\r\n        display: 'flex',\r\n        alignItems: 'flex-start'\r\n    }\r\n}));\r\n\r\nexport const LearningResult = ({ category, verb, description, index}) => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch: uiDispatch } = useUiState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const handleEdit = () => {\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResult,\r\n            payload: {\r\n                category,\r\n                verb,\r\n                description,\r\n                editing: true,\r\n                index,\r\n            }\r\n        });\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        uiDispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'resultado de aprendizaje',\r\n                args: { designId: design._id, index },\r\n                actionMutation: null,\r\n            }\r\n        });\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n        if(uiState.userSaveDesign){\r\n            uiDispatch({\r\n                type: types.ui.setUserSaveDesign,\r\n                payload: false,\r\n            })\r\n        };\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <div style={{width: '100%'}}>\r\n                <Typography color=\"textSecondary\" gutterBottom variant='caption'>Resultado</Typography>\r\n                <Typography variant='body2'>{verb} {description}</Typography>\r\n            </div>\r\n            <div className={classes.actions}>\r\n                <IconButton className={classes.deleteIcon} onClick={handleEdit} >\r\n                    <Edit />\r\n                </IconButton>\r\n                <IconButton className={classes.deleteIcon} onClick={handleDelete} >\r\n                    <Delete />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: 300,\r\n        clipPath: 'polygon(50% 0, 0 100%, 100% 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    option: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        marginBottom: 10,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        '&:hover': {\r\n            transition: 'box-shadow .3s',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)'\r\n        }\r\n    },\r\n    crear: {\r\n        paddingTop: 30,\r\n        height: '25%'\r\n    },\r\n    evaluar: {\r\n        height: '16.6%'\r\n    },\r\n    analizar: {\r\n        height: '16.6%'\r\n    },\r\n    aplicar: {\r\n        height: '16.6%'\r\n    },\r\n    comprender: {\r\n        height: '16.6%'\r\n    },\r\n    recordar: {\r\n        height: '16.6%'\r\n    },\r\n    active: {\r\n        boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)',\r\n        backgroundColor: theme.palette.secondary.light,\r\n        color: 'white',\r\n    }\r\n}));\r\n\r\nexport const BloomPiramid = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const active = designState.currentLearningResult.category;\r\n    const { bloomCategories } = designState;\r\n\r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'category',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomCategories.map( option => {\r\n            const isActive = active._id === option._id;\r\n            return (\r\n                <div \r\n                    key={option._id}\r\n                    onClick={()=> handleSelectOption(isActive ? null : option)}\r\n                    className={`${classes.option} ${classes[option.name.toLowerCase()]} ${isActive && classes.active}`}\r\n                >\r\n                    { option.name }\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            { createOptionList() }\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { FormControlLabel, makeStyles, Radio } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    option: {\r\n        minWidth: '25%'\r\n    }\r\n}));\r\n\r\nexport const BloomVerbList = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const category = designState.currentLearningResult.category;\r\n    const active = designState.currentLearningResult.verb;\r\n    const { bloomVerbs } = designState;\r\n    \r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'verb',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomVerbs.filter((verb) => verb.category === category._id).map(option => {\r\n            const isActive = active === option.name;\r\n            return (\r\n            <FormControlLabel \r\n                className={classes.option}\r\n                key={option._id}\r\n                value={option.name}\r\n                control={<Radio\r\n                    checked={isActive}\r\n                    onChange={(e)=> handleSelectOption(option.name)}\r\n                    value={option.name}\r\n                />}\r\n                label={option.name}\r\n            />\r\n        )});\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            {createOptionList()}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, InputAdornment, makeStyles, Step, StepLabel, Stepper, TextField, Typography } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { BloomPiramid } from 'pages/DesignPage/Metadata/BloomPiramid';\r\nimport { BloomVerbList } from 'pages/DesignPage/Metadata/BloomVerbList';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        color: theme.palette.grey[500],\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    adornament: {\r\n        display: 'flex',\r\n        alignItems: 'flex-start'\r\n    },\r\n    steps: {\r\n        padding: 0,\r\n        marginTop: 30,\r\n        marginBottom: 30,\r\n    },\r\n    stepContent: {\r\n        margin: 20,\r\n        [theme.breakpoints.down('xs')]: {\r\n            margin: 10\r\n        },\r\n    }\r\n}));\r\n\r\nexport const LearningResultModal = ({ design, isOpen }) => {\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket/*, online*/, emitWithTimeout } = useSocketState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { uiState, dispatch: uiDispatch } = useUiState();\r\n    const { category, verb, editing, index } = designState.currentLearningResult;\r\n    const [ description, setDescription ] = useState(designState.currentLearningResult.description ?? '');\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const steps = ['Selecciona una categoría de bloom', 'Selecciona un verbo', 'Proporciona una descripción'];\r\n\r\n    const isMounted = useRef(true);\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if(isMounted.current) setDescription(designState.currentLearningResult.description);\r\n    }, [setDescription, designState.currentLearningResult.description]);\r\n\r\n    const handleNext = () => {\r\n        if(activeStep === 0 && category._id === null && category.name === null) return console.log('No ha seleccionado una categoría de bloom.');\r\n        else if (activeStep === 1 && (verb === '' || !verb)) return console.log('No ha seleccionado un verbo de bloom.');\r\n        if (isMounted.current) setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        if (isMounted.current) setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleClose = (e) => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        handleClose();\r\n        if (isMounted.current) setActiveStep(0);\r\n        setDescription('');\r\n        designDispatch({ type: types.design.clearCurrentLearningResult });\r\n    };\r\n    \r\n    const handleFinish = () => {\r\n        if(!description || (description && description.trim() === '')) return console.log('No se ha ingresado una descripción.');\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'description',\r\n                value: description,\r\n            }\r\n        });\r\n        if(!editing) socket?.emit('add-learning-result', { designId: design._id, learningResult: { category: category, verb, description } }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    uiDispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                };\r\n                handleCloseModal();\r\n            },\r\n            () => enqueueSnackbar('Error al agregar el resultado de aprendizaje. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        else if (editing){\r\n            socket?.emit('edit-learning-result', { designId: design._id, index, learningResult: { category: category, verb, description } }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                    if(uiState.userSaveDesign){\r\n                        uiDispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    };\r\n                    handleCloseModal();\r\n                },\r\n                () => enqueueSnackbar('Error al editar el resultado de aprendizaje. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        };\r\n        \r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isOpen} onClose={handleCloseModal} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle style={{padding: '5px 5px 5px 16px'}}>\r\n                <Box className={classes.title}>\r\n                    <Box className={classes.ellipsis}>\r\n                        {\r\n                            !editing ? 'Nuevo resultado de aprendizaje' : 'Editar resultado de aprendizaje'\r\n                        }\r\n                    </Box>\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleCloseModal}>\r\n                        <Close />\r\n                    </IconButton>\r\n                </Box>\r\n            </DialogTitle>\r\n            <DialogContent dividers style={{padding: 0}}>\r\n                <Stepper \r\n                    classes={{root: classes.steps}}\r\n                    activeStep={activeStep} \r\n                    alternativeLabel\r\n                >\r\n                    {steps.map((label) => (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                {\r\n                    (activeStep === 0)\r\n                        ? <Box className={classes.stepContent}>\r\n                            <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                En la siguiente pirámide se encuentran las distintas categorías o habilidades de pensamiento descritas según la taxonomía de Benjamín Bloom.\r\n                            </Typography>\r\n                            <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                Por favor seleccione la categoría que más sentido tenga con el resultado de aprendizaje que desea crear.\r\n                            </Typography>\r\n                            <BloomPiramid />\r\n                        </Box>\r\n                        : (activeStep === 1)\r\n                            ? <Box className={classes.stepContent}>\r\n                                <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                    En la siguiente lista se encuentran los distintos verbos descritos por la taxonomía de Bloom disponibles para la categoría \"{designState.bloomCategories.find(bc => bc._id === category._id).name }\". \r\n                                </Typography>\r\n                                <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                    Por favor seleccione el verbo que más sentido tenga con el resultado de aprendizaje que desea crear.\r\n                                </Typography>\r\n                                <BloomVerbList />\r\n                            </Box>\r\n                            : <Box className={classes.stepContent}>\r\n                                <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                    Usted ha seleccionado el verbo \"{verb}\" correspondiente a la categoría \"{designState.bloomCategories.find(bc => bc._id === category._id).name }\".\r\n                                </Typography>\r\n                                <Typography style={{marginLeft: 10, marginRight: 10, marginBottom:10}} align='justify'>\r\n                                    Por favor complete la descripción del resultado de aprendizaje.\r\n                                </Typography>\r\n                                <TextField\r\n                                    multiline\r\n                                    classes={{}}\r\n                                    rows={6}\r\n                                    variant=\"outlined\"\r\n                                    name=\"description\"\r\n                                    value={description ?? ''}\r\n                                    onChange={({target})=> setDescription(target.value)}\r\n                                    label=\"Descripción\"\r\n                                    type=\"text\"\r\n                                    InputProps={{\r\n                                        style: {display: 'flex', alignItems: 'flex-start'},\r\n                                        startAdornment: <InputAdornment \r\n                                            position=\"start\" \r\n                                            style={{height: '100%'}}\r\n                                            classes={{root: classes.adornament}}\r\n                                        >\r\n                                            <div style={{width: '100%', height: '100%'}}>\r\n                                                {verb}\r\n                                            </div>\r\n                                        </InputAdornment>,\r\n                                    }}\r\n                                    fullWidth\r\n                                />\r\n                            </Box>\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    disabled={activeStep === 0}\r\n                    onClick={handleBack}\r\n                >\r\n                    Volver\r\n                </Button>\r\n                {\r\n                    (activeStep === steps.length - 1)\r\n                        ? <Button variant=\"contained\" color=\"primary\" disabled = {activeStep === 2 && (description === null || description === '')} onClick={handleFinish}>\r\n                            Finalizar\r\n                        </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" disabled = {activeStep === 0 ? category._id === null : activeStep === 1 && verb === null} onClick={handleNext}>\r\n                            Siguiente\r\n                        </Button>\r\n                }\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { IconButton, TextField } from '@material-ui/core';\r\nimport { Edit, Save } from '@material-ui/icons';\r\n\r\nexport const TextEditable = forwardRef(({ name, value, onSave, ...rest }, ref) => {\r\n    const [editing, setEditing] = useState(false);\r\n    const [text, setText] = useState(value);\r\n\r\n    useEffect(() => {\r\n        setText(value);\r\n    }, [value, setText]);\r\n\r\n    const handleSave = useCallback(\r\n        () => {\r\n            const e  = {\r\n                target: { name, value: text }\r\n            };\r\n            if(onSave) onSave(e);\r\n            setEditing(false);\r\n        },\r\n        [name, onSave, text],\r\n    );\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            editing,\r\n            handleSave\r\n        }),\r\n    );\r\n\r\n    const handleEdit = () => {\r\n        setEditing(true);\r\n    };\r\n\r\n    const handleChange = ({target}) => {\r\n        setText(target.value);\r\n    };\r\n\r\n    return (\r\n        <TextField\r\n            name={name}\r\n            disabled={!editing}\r\n            value={text}\r\n            onChange={handleChange}\r\n            InputProps={{\r\n                readOnly: !editing,\r\n                endAdornment:\r\n                    <IconButton\r\n                        onClick={editing ? handleSave : handleEdit }\r\n                        onMouseDown={(e) => e.preventDefault()}\r\n                    >\r\n                        {editing ? <Save /> : <Edit />}\r\n                    </IconButton>\r\n            }}\r\n            {...rest}\r\n        />\r\n    )\r\n})\r\n","import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef } from 'react';\r\nimport { Box, Button, Divider, FormControl, FormControlLabel, Grid, InputLabel, Link, makeStyles, MenuItem, Select, Switch, TextField, Typography } from '@material-ui/core'\r\nimport { useQuery } from 'react-query';\r\nimport { Alert, Skeleton } from '@material-ui/lab';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { LearningResult } from 'pages/DesignPage/Metadata/LearningResult';\r\nimport { LearningResultModal } from 'pages/DesignPage/Metadata/LearningResultModal';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { SharedTextFieldTipTapEditor } from 'components/SharedTextFieldTipTapEditor';\r\nimport { useSnackbar } from 'notistack';\r\nimport { KeywordManager } from 'components/KeywordManager';\r\nimport { Star } from '@material-ui/icons';\r\nimport { TextEditable } from 'components/TextEditable';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 15,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 177px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    sectionAction: {\r\n        [theme.breakpoints.down('xs')]: {\r\n            width: '100%',\r\n        }\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    category: {\r\n        width: '100%',\r\n    },\r\n    categoryPopOver: {\r\n        maxHeight: 400,\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    learningResults: {\r\n        flexWrap: 'wrap',\r\n    }\r\n}));\r\n\r\nexport const DesignMetadata = forwardRef(({ evaluationPatternRef }, ref) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/, emitWithTimeout } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const isMounted = useRef(true);\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const nameRef = useRef();\r\n    const classSizeRef = useRef();\r\n    const hoursRef = useRef();\r\n    const minutesRef = useRef();\r\n    const priorKnowledgeRef = useRef();\r\n    const descriptionRef = useRef();\r\n    const objectiveRef = useRef();\r\n    const evaluationRef = useRef();\r\n    \r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        name: metadata.name,\r\n        category: metadata.category.name ?? 'Sin categoría',\r\n        classSize: metadata.classSize,\r\n        workingTimeDesignHours: metadata.workingTimeDesign.hours ?? 0,\r\n        workingTimeDesignMinutes: metadata.workingTimeDesign.minutes ?? 0,\r\n        workingTimeHours: metadata.workingTime.hours ?? 0,\r\n        workingTimeMinutes: metadata.workingTime.minutes ?? 0,\r\n        priorKnowledge: metadata.priorKnowledge,\r\n        description: metadata.description,\r\n        objective: metadata.objective,\r\n        isPublic: metadata.isPublic,\r\n        evaluation: metadata.evaluation,\r\n        evaluationPattern: metadata.evaluationPattern,\r\n        keywords: design.keywords ?? [],\r\n    });\r\n\r\n    useImperativeHandle(\r\n        ref,\r\n        () => ({\r\n            clearEditors: () => {\r\n                nameRef?.current?.clearText();\r\n                classSizeRef?.current?.clearText();\r\n                hoursRef?.current?.clearText();\r\n                minutesRef?.current?.clearText();\r\n                priorKnowledgeRef?.current?.clearText();\r\n                descriptionRef?.current?.clearText();\r\n                objectiveRef?.current?.clearText();\r\n            }\r\n        }),\r\n    );\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    const setKeywords = useCallback(\r\n        (keywords) => {\r\n            if (isMounted.current) handleInputChange({ target: { name: 'keywords', value: keywords } });\r\n        },\r\n        [handleInputChange],\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (JSON.stringify(form.keywords) !== JSON.stringify(design.keywords)) {\r\n                setKeywords([...design.keywords]);\r\n            }\r\n        }\r\n    }, [design.keywords, form.keywords, setKeywords]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.category !== metadata.category.name) {\r\n                handleInputChange({ target: { name: 'category', value: metadata.category.name ?? 'Sin categoría' } });\r\n            }\r\n        }\r\n    }, [metadata.category, form.category, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.evaluation !== metadata.evaluation) {\r\n                handleInputChange({ target: { name: 'evaluation', value: metadata.evaluation ?? '' } });\r\n            }\r\n        }\r\n    }, [metadata.evaluation, form.evaluation, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.name !== metadata.name) {\r\n                handleInputChange({ target: { name: 'name', value: metadata.name } });\r\n            }\r\n        }\r\n    }, [metadata.name, form.name, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.classSize !== metadata.classSize) {\r\n                handleInputChange({ target: { name: 'classSize', value: metadata.classSize } });\r\n            }\r\n        }\r\n    }, [metadata.classSize, form.classSize, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.description !== metadata.description) {\r\n                handleInputChange({ target: { name: 'description', value: metadata.description } });\r\n            }\r\n        }\r\n    }, [metadata.description, form.description, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeDesignHours !== metadata.workingTimeDesign.hours) {\r\n                handleInputChange({ target: { name: 'workingTimeDesignHours', value: metadata.workingTimeDesign.hours } });\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignHours, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeDesignMinutes !== metadata.workingTimeDesign.minutes) {\r\n                handleInputChange({ target: { name: 'workingTimeDesignMinutes', value: metadata.workingTimeDesign.minutes ?? 0 } });\r\n            }\r\n        }\r\n    }, [metadata.workingTimeDesign, form.workingTimeDesignMinutes, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeHours !== metadata.workingTime.hours) {\r\n                handleInputChange({ target: { name: 'workingTimeHours', value: metadata.workingTime.hours ?? 0 } });\r\n            }\r\n        }\r\n    }, [metadata.workingTime.hours, form.workingTimeHours, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.workingTimeMinutes !== metadata.workingTime.minutes) {\r\n                handleInputChange({ target: { name: 'workingTimeMinutes', value: metadata.workingTime.minutes ?? 0 } });\r\n            }\r\n        }\r\n    }, [metadata.workingTime.minutes, form.workingTimeMinutes, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.priorKnowledge !== metadata.priorKnowledge) {\r\n                handleInputChange({ target: { name: 'priorKnowledge', value: metadata.priorKnowledge } });\r\n            }\r\n        }\r\n    }, [metadata.priorKnowledge, form.priorKnowledge, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.objective !== metadata.objective) {\r\n                handleInputChange({ target: { name: 'objective', value: metadata.objective } });\r\n            }\r\n        }\r\n    }, [metadata.objective, form.objective, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.isPublic !== metadata.isPublic) {\r\n                handleInputChange({ target: { name: 'isPublic', value: metadata.isPublic } });\r\n            }\r\n        }\r\n    }, [metadata.isPublic, form.isPublic, setValues, handleInputChange]);\r\n\r\n    useEffect(() => {\r\n        if (isMounted.current) {\r\n            if (form.evaluationPattern !== metadata.evaluationPattern) {\r\n                handleInputChange({ target: { name: 'evaluationPattern', value: metadata.evaluationPattern } });\r\n            }\r\n        }\r\n    }, [metadata.evaluationPattern, form.evaluationPattern, setValues, handleInputChange]);\r\n\r\n    const { name,\r\n        category,\r\n        classSize,\r\n        workingTimeDesignHours,\r\n        workingTimeDesignMinutes,\r\n        workingTimeHours,\r\n        workingTimeMinutes,\r\n        priorKnowledge,\r\n        description,\r\n        objective,\r\n        isPublic,\r\n        keywords,\r\n        evaluation,\r\n        evaluationPattern\r\n    } = form;\r\n    \r\n    const { isLoading, isError, data, error } = useQuery('categories', async () => {\r\n        return await getCategories();\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    if (isError) {\r\n        return (<Typography>{error.message}</Typography>);\r\n    }\r\n\r\n    const createCategoryList = () => {\r\n        if (data == null || data.categories.length === 0) return (<MenuItem value='Sin categoría'>Sin categoría</MenuItem>);\r\n        return data.categories.map(c => <MenuItem key={c._id} value={c.name}>{c.name}</MenuItem>);\r\n    };\r\n\r\n    const handleChangeMetadataField = ({ target }) => {\r\n        let { name: field, value } = target;\r\n        value = (target.type === 'number' && !isNaN(target.value)) ? parseInt(target.value) : (target.type === 'checkbox') ? target.checked : target.value;\r\n        let e = { target: { name: target.name, value } };\r\n        let subfield = null;\r\n        switch (field) {\r\n            case 'workingTimeHours':\r\n                field = 'workingTime';\r\n                subfield = 'hours';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'workingTimeMinutes':\r\n                field = 'workingTime';\r\n                subfield = 'minutes';\r\n                value = isNaN(value) ? 0 : value;\r\n                break;\r\n            case 'category':\r\n                value = data.categories.find(c => c.name === value);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        socket?.emit('edit-metadata-field', { designId: design._id, field, value, subfield }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                if(uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: false,\r\n                    });\r\n                }\r\n            },\r\n            () => enqueueSnackbar('Error al editar el diseño. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        if (subfield) {\r\n            if (\r\n                (metadata[field] === undefined || metadata[field] === null) ||\r\n                (metadata[field][subfield] === undefined || metadata[field][subfield] === null)\r\n                || metadata[field][subfield].toString() !== value.toString()\r\n            ) {\r\n                if (isMounted.current) handleInputChange(e);\r\n            }\r\n        } else {\r\n            if (\r\n                (metadata[field] === undefined || metadata[field] === null) ||\r\n                metadata[field].toString() !== value.toString()\r\n            ) {\r\n                if (isMounted.current) handleInputChange(e);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleSaveDesign = (e) => {\r\n        if(evaluationPatternRef.current.editing) evaluationPatternRef.current.handleSave();\r\n        socket?.emit('save-design', { designId: design._id }, emitWithTimeout(\r\n            (resp) => {\r\n                if(resp.ok && !uiState.userSaveDesign){\r\n                    dispatch({\r\n                        type: types.ui.setUserSaveDesign,\r\n                        payload: true,\r\n                    })\r\n                }\r\n                enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 });\r\n            },\r\n            () => enqueueSnackbar('Error al intentar guardar el diseño. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n    };\r\n\r\n    const handleOpenLearningResultmodal = () => dispatch({\r\n        type: types.ui.toggleModal,\r\n        payload: 'LearningResult',\r\n    });\r\n\r\n    const handleChangeKeywords = (keywords, type, targetKeyword) => {\r\n        if (type === 'add') socket?.emit('add-design-keyword', { designId: design._id, keyword: targetKeyword }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n            },\r\n            () => enqueueSnackbar('Error al agregar la palabra clave. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n        else if (type === 'remove') socket?.emit('remove-design-keyword', { designId: design._id, keyword: targetKeyword }, emitWithTimeout(\r\n            (resp) => {\r\n                if(!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n            },\r\n            () => enqueueSnackbar('Error al eliminar la palabra clave. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n        ));\r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <Grid container key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.title}>\r\n                        {\r\n                            isLoading\r\n                                ? (<>\r\n                                    <Skeleton width={300} height={50} />\r\n                                    <Skeleton width={150} height={50} />\r\n                                </>)\r\n                                : (<>\r\n                                    <Typography variant='h4'>Información Diseño</Typography>\r\n                                    <Button className={classes.sectionAction} variant='outlined' color='default' onClick={handleSaveDesign}>Guardar Información</Button>\r\n                                </>)\r\n                        }\r\n                    </div>\r\n                    <Divider />\r\n                    <Grid container spacing={3} className={classes.content}>\r\n                        <Grid item className={classes.grid} xs={12} sm={12} md={6} lg={8}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : (<TextField\r\n                                        label='Nombre'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: nameRef,\r\n                                                name: 'name',\r\n                                                placeholder: 'Nombre',\r\n                                                initialvalue: name,\r\n                                                onChange: handleChangeMetadataField,\r\n                                            }\r\n                                        }}\r\n                                    />)\r\n                            }\r\n\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={6} sm={6} md={3} lg={2}>\r\n                            <div style={{ width: '100%' }}>\r\n                                {\r\n                                    isLoading\r\n                                        ? (<>\r\n                                            <Skeleton width={80} height={20} />\r\n                                            <div style={{ display: 'flex', width: '100%', alignItems: 'center' }}>\r\n                                                <Skeleton width={40} height={20} style={{ marginRight: 10 }} />\r\n                                                <Skeleton width={'100%'} height={20} />\r\n                                            </div>\r\n                                        </>)\r\n                                        : (<>\r\n                                            <Typography variant='body2'>Visibilidad</Typography>\r\n                                            <FormControlLabel\r\n                                                control={<Switch\r\n                                                    name='isPublic'\r\n                                                    checked={isPublic}\r\n                                                    onChange={handleChangeMetadataField}\r\n                                                    disabled={!(design.owner === authState.user.uid)}\r\n                                                />}\r\n                                                label={isPublic ? 'Público' : 'Privado'}\r\n                                            />\r\n                                        </>)\r\n                                }\r\n\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={6} sm={6} md={3} lg={2}>\r\n                            <div style={{ width: '100%', display: 'flex', alignItems: 'flex-start' }}>\r\n                                {\r\n                                    isLoading\r\n                                        ? (<>\r\n                                            <Skeleton width={80} height={20} />\r\n                                            <div style={{ display: 'flex', width: '100%', alignItems: 'center' }}>\r\n                                                <Skeleton width={40} height={20} style={{ marginRight: 10 }} />\r\n                                                <Skeleton width={'100%'} height={20} />\r\n                                            </div>\r\n                                        </>)\r\n                                        : (<Box style={{marginTop: -10}}>\r\n                                            <Typography variant='body2' gutterBottom>Valoración media </Typography>\r\n                                            <Box display='flex' >\r\n                                                <Star style={{marginRight: 10}}/> { metadata.scoreMean }\r\n                                            </Box>\r\n                                        </Box>)\r\n                                }\r\n\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : (<FormControl className={classes.category} variant='outlined' >\r\n                                        <InputLabel id=\"category-label\">Categoría</InputLabel>\r\n                                        <Select\r\n                                            labelId=\"category-label\"\r\n                                            name='category'\r\n                                            label='Categoría'\r\n                                            value={category}\r\n                                            onChange={handleChangeMetadataField}\r\n                                            MenuProps={{ classes: { paper: classes.categoryPopOver } }}\r\n                                        >\r\n                                            {createCategoryList()}\r\n                                        </Select>\r\n                                    </FormControl>)\r\n                            }\r\n\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : (<TextField\r\n                                        label='Tamaño de la clase'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: classSizeRef,\r\n                                                name: 'classSize',\r\n                                                placeholder: 'Tamaño de la clase',\r\n                                                initialvalue: classSize ?? 0,\r\n                                                type: \"number\",\r\n                                                min: 0,\r\n                                                onChange: handleChangeMetadataField,\r\n                                            }\r\n                                        }}\r\n                                    />)\r\n                            }\r\n\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                {\r\n                                    isLoading ? (<Skeleton width={150} height={20} />)\r\n                                        : <Typography > Tiempo de trabajo </Typography>\r\n                                }\r\n                                <div className={classes.timeField}>\r\n                                    {\r\n                                        isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                            : (<TextField\r\n                                                label='Horas'\r\n                                                InputLabelProps={{ shrink: true }}\r\n                                                fullWidth\r\n                                                margin='none'\r\n                                                variant='outlined'\r\n                                                color='primary'\r\n                                                InputProps={{\r\n                                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                                    inputProps: {\r\n                                                        ref: hoursRef,\r\n                                                        name: 'workingTimeHours',\r\n                                                        placeholder: 'Horas',\r\n                                                        initialvalue: workingTimeHours,\r\n                                                        type: \"number\",\r\n                                                        min: 0,\r\n                                                        onChange: handleChangeMetadataField,\r\n                                                    }\r\n                                                }}\r\n                                            />)\r\n                                    }\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    {\r\n                                        isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                            : (<TextField\r\n                                                label='Minutos'\r\n                                                InputLabelProps={{ shrink: true }}\r\n                                                fullWidth\r\n                                                margin='none'\r\n                                                variant='outlined'\r\n                                                color='primary'\r\n                                                InputProps={{\r\n                                                    inputComponent: SharedTextFieldTipTapEditor,\r\n                                                    inputProps: {\r\n                                                        ref: minutesRef,\r\n                                                        name: 'workingTimeMinutes',\r\n                                                        placeholder: 'Minutos',\r\n                                                        initialvalue: workingTimeMinutes,\r\n                                                        type: \"number\",\r\n                                                        min: 0,\r\n                                                        max: 59,\r\n                                                        onChange: handleChangeMetadataField,\r\n                                                    }\r\n                                                }}\r\n                                            />)\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                {\r\n                                    isLoading ? (<Skeleton width={150} height={20} />)\r\n                                        : <Typography > Tiempo diseñado </Typography>\r\n                                }\r\n                                <div className={classes.timeField}>\r\n                                    {\r\n                                        isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                            : <TextField\r\n                                                //margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                InputLabelProps={{ shrink: true }}\r\n                                                name=\"workingTimeDesignHours\"\r\n                                                value={workingTimeDesignHours}\r\n                                                label=\"Horas\"\r\n                                                type=\"number\"\r\n                                                disabled\r\n                                                fullWidth\r\n                                            />\r\n                                    }\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    {\r\n                                        isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                            : <TextField\r\n                                                //margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                InputLabelProps={{ shrink: true }}\r\n                                                name=\"workingTimeDesignMinutes\"\r\n                                                value={workingTimeDesignMinutes}\r\n                                                label=\"Minutos\"\r\n                                                type=\"number\"\r\n                                                disabled\r\n                                                fullWidth\r\n                                            />\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : <TextField\r\n                                        label='Descripción'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: descriptionRef,\r\n                                                name: 'description',\r\n                                                placeholder: 'Descripción',\r\n                                                initialvalue: description ?? '',\r\n                                                rowMax: 5,\r\n                                                onChange: handleChangeMetadataField,\r\n                                                multiline: true,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                            }\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : <TextField\r\n                                        label='Conocimiento previo'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: priorKnowledgeRef,\r\n                                                name: 'priorKnowledge',\r\n                                                placeholder: 'Conocimiento previo',\r\n                                                initialvalue: priorKnowledge ?? '',\r\n                                                rowMax: 5,\r\n                                                onChange: handleChangeMetadataField,\r\n                                                multiline: true,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                            }\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : <TextField\r\n                                        label='Objetivos'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: objectiveRef,\r\n                                                name: 'objective',\r\n                                                placeholder: 'Objetivos',\r\n                                                initialvalue: objective ?? '',\r\n                                                rowMax: 5,\r\n                                                onChange: handleChangeMetadataField,\r\n                                                multiline: true,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                            }\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : <TextField\r\n                                        label='Evaluación'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        color='primary'\r\n                                        InputProps={{\r\n                                            inputComponent: SharedTextFieldTipTapEditor,\r\n                                            inputProps: {\r\n                                                ref: evaluationRef,\r\n                                                name: 'evaluation',\r\n                                                placeholder: 'Evaluación',\r\n                                                initialvalue: evaluation ?? '',\r\n                                                rowMax: 5,\r\n                                                onChange: handleChangeMetadataField,\r\n                                                multiline: true,\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                            }\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            {\r\n                                isLoading ? (<Skeleton width={'100%'} height={70} />)\r\n                                    : <TextEditable\r\n                                        ref={evaluationPatternRef}\r\n                                        label='Pauta/Rúbrica de evaluación'\r\n                                        name='evaluationPattern'\r\n                                        InputLabelProps={{ shrink: true }}\r\n                                        fullWidth\r\n                                        margin='none'\r\n                                        variant='outlined'\r\n                                        value={evaluationPattern}\r\n                                        onSave={handleChangeMetadataField}\r\n                                        //onSave={handleChangeMetadataField}\r\n                                        //onChange={handleInputChange}\r\n                                        //value={value}\r\n                                        //onChange={handleChange}\r\n                                        color='primary'\r\n                                    />\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                    {\r\n                        isLoading ? (<>\r\n                            <div style={{ display: 'flex', width: '100%' }}>\r\n                                <Skeleton width={'100%'} height={70} style={{ marginRight: 10 }} />\r\n                                <Skeleton width={'10%'} height={70} />\r\n                            </div>\r\n                            <Skeleton width={'100%'} height={30} />\r\n                        </>)\r\n                            : <KeywordManager keywords={keywords} onChangeKeywords={handleChangeKeywords} />\r\n                    }\r\n                    {\r\n                        !isLoading ? (<>\r\n                            <div className={classes.title}>\r\n                                <Typography variant='h4'>Resultados de aprendizaje</Typography>\r\n                                <Button className={classes.sectionAction} variant='outlined' color='default' onClick={handleOpenLearningResultmodal}>Agregar</Button>\r\n                            </div>\r\n                            <Divider />\r\n                            <div className={`${classes.content} ${classes.learningResults}`}>\r\n                                {\r\n                                    metadata.results.length === 0\r\n                                        ? <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                            Este diseño aún no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click {' '}\r\n                                            {<Link className={classes.clickHere} onClick={handleOpenLearningResultmodal}>aquí</Link>}\r\n                                    !\r\n                                </Alert>\r\n                                        : metadata.results.map((result, index) => (\r\n                                            <LearningResult key={`learning-result-${index}`} index={index} {...result} />\r\n                                        ))\r\n\r\n                                }\r\n                            </div></>)\r\n                            : (<div></div>)\r\n                    }\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <LearningResultModal design={design} isOpen={uiState.isLearningResultModalOpen} />\r\n        </>\r\n    )\r\n})\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getBloomCategories = async () => {\r\n    const resp = await fetchWithToken('bloom/category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getBloomVerbs = async ( category ) => {\r\n    const resp = await fetchWithToken('bloom/verb', { category }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React from 'react'\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useHistory } from 'react-router-dom';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleMargin: {\r\n        margin: 'auto',\r\n    },\r\n    bodyMargin: {\r\n        marginLeft: theme.spacing(5),\r\n        marginRight: theme.spacing(5)\r\n    }\r\n}));\r\n\r\nexport const CheckSaveDesignModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { url } = uiState.historyData;\r\n    const history = useHistory();\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'CheckSaveDesign',\r\n        });\r\n    };\r\n\r\n    const handleHistoryPush = () =>{\r\n        dispatch({\r\n            type: types.ui.setUserSaveDesign,\r\n            payload: true,\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'CheckSaveDesign',\r\n        });\r\n        history.push(`${url}`);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Dialog onClose={handleClose} open={uiState.isCheckSaveDesignModalOpen}>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    Está apunto de salir del diseño\r\n                </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <Typography align = 'center' style ={{marginTop: 15, marginBottom: 25}}>\r\n                        Usted está intentando salir del diseño actual, pero existen cambios que no han sido guardados. ¿Desea continuar sin guardar?\r\n                    </Typography>\r\n                    <Typography  variant = 'caption'>\r\n                        IMPORTANTE: Al aceptar realizar esta acción los cambios no se guardaran.\r\n                    </Typography>\r\n                    <Box>\r\n                        <Typography  variant = 'caption'>\r\n                            RECOMENDACIÓN: Guarde sus cambios antes de salir de esta página.\r\n                        </Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                        </Button>\r\n                    <Button onClick={handleHistoryPush}>\r\n                        Aceptar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import { Avatar, Box, Button, Card, CardContent, CardHeader, makeStyles, TextField, Typography } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport { CustomMenu } from 'components/CustomMenu';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useSnackbar } from 'notistack';\r\nimport React, { useState } from 'react';\r\nimport types from 'types';\r\nimport { formatDate, formatTime } from 'utils/dateTimeFormatter';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: ({ editing }) => ({\r\n        marginBottom: 10,\r\n        boxShadow: editing ? '0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)': 'none',\r\n    }),\r\n    header: {\r\n        paddingBottom: 0,\r\n    }\r\n}));\r\n\r\nexport const Commentary = ({ data }) => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { authState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const { design } = designState;\r\n    const { user, date, commentary } = data;\r\n    const [ editing, setEditing] = useState(false);\r\n    const [ commentaryInput, setCommentaryInput ] = useState(commentary);\r\n    const classes = useStyles({editing});\r\n\r\n    const handleEditCommentary = ( e ) => {\r\n        e.preventDefault();\r\n        console.log();\r\n        if(commentary.trim() !== commentaryInput.trim()){\r\n            if(online){\r\n                socket?.emit('comment-design', { \r\n                    designId: design._id, \r\n                    commentary: {\r\n                        ...data,\r\n                        commentary: commentaryInput.trim()\r\n                    }\r\n                }, emitWithTimeout(\r\n                    (resp) => {\r\n                        if(!resp.ok){\r\n                            enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                        }\r\n                    },\r\n                    () => {\r\n                        setCommentaryInput(commentary);\r\n                        enqueueSnackbar('Error al editar el comentario. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 });\r\n                    },\r\n                ));\r\n            }\r\n        }\r\n        setEditing(false);\r\n        \r\n    };\r\n\r\n    const handleDeleteCommentary = () => {\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: 'comentario',\r\n                args: { \r\n                    designId: design._id, \r\n                    commentaryId: data._id,\r\n                },\r\n                actionMutation: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const getOptions = () => {\r\n        if (authState.user.uid === user._id) {\r\n            return <CustomMenu\r\n                options={[\r\n                    { icon: <Edit />, label: 'Editar', onSelect: () => setEditing(true) },\r\n                    { icon: <Delete />, label: 'Eliminar', onSelect: handleDeleteCommentary },\r\n                ]}\r\n            />;\r\n        } else if (authState.user.uid === design.owner) {\r\n            return <CustomMenu\r\n                options={[\r\n                    { icon: <Delete />, label: 'Eliminar', onSelect: handleDeleteCommentary },\r\n                ]}\r\n            />;\r\n        } else return <div></div>;\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.root} elevation={0}>\r\n            <CardHeader\r\n                className={classes.header}\r\n                avatar={\r\n                    <Avatar\r\n                        alt={formatName(user.name, user.lastname)}\r\n                        src={user.img && user.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${user.img}` : ''}\r\n                    >\r\n                        {getUserInitials(user.name, user.lastname)}\r\n                    </Avatar>\r\n                }\r\n                action={\r\n                    authState.user ? getOptions() : null\r\n                }\r\n                title={user.name + ' ' + user.lastname}\r\n                subheader={formatDate(new Date(date)) + ' a las ' + formatTime(new Date(date))}\r\n            />\r\n            <CardContent>\r\n                {\r\n                    editing\r\n                        ? <form onSubmit={handleEditCommentary} noValidate>\r\n                            <TextField\r\n                                multiline\r\n                                rowsMax={6}\r\n                                variant=\"outlined\"\r\n                                name=\"commentary\"\r\n                                value={commentaryInput ?? ''}\r\n                                onChange={({ target }) => setCommentaryInput(target.value)}\r\n                                label=\"Editar Comentario\"\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                            <Box style={{ display: 'flex', justifyContent: 'flex-end', marginTop: 10 }}>\r\n                                <Button type='submit' variant='contained' color='primary' disabled={!commentaryInput.length} disableElevation>\r\n                                    Guardar\r\n                                </Button>\r\n                            </Box>\r\n                        </form>\r\n                        : <Typography >{commentary}</Typography>\r\n                }\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Avatar, Box, Button, Card, CardContent, Link, makeStyles, TextField, Typography, useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles({\r\n    clickHere: {\r\n        textDecoration: 'none',\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});\r\n\r\nexport const CommentaryInput = () => {\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const theme = useTheme();\r\n    const isXSDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const { dispatch } = useUiState();\r\n    const { authState } = useAuthState();\r\n    const { designState } = useDesignState();\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const [commentary, setCommentary] = useState('');\r\n    const { design } = designState;\r\n    const { user } = authState;\r\n\r\n    const handleComment = (e) => {\r\n        e.preventDefault();\r\n        if(online){\r\n            socket?.emit('comment-design', {\r\n                designId: design._id,\r\n                commentary: {\r\n                    user: {\r\n                        _id: user.uid,\r\n                        name: user.name,\r\n                        lastname: user.lastname,\r\n                        img: user.img,\r\n                    },\r\n                    date: new Date().toJSON(),\r\n                    commentary: commentary.trim(),\r\n                }\r\n            }, emitWithTimeout(\r\n                (resp) => {\r\n                    if(!resp.ok){\r\n                        enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 2000 });\r\n                    }\r\n                },\r\n                () => enqueueSnackbar('Error al agregar el comentario. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n            reset();\r\n        }\r\n    };\r\n\r\n    const reset = () => {\r\n        setCommentary('');\r\n    };\r\n\r\n    const handleOpenLoginModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Card elevation={0} style={{ marginBottom: 10 }}>\r\n            <CardContent>\r\n                {\r\n                    authState.user\r\n                        ? (<form onSubmit={handleComment} noValidate>\r\n                            <Box style={{ display: 'flex', marginBottom: 10 }}>\r\n                                {\r\n                                    !isXSDevice && <Avatar\r\n                                        style={{ marginRight: 10, marginTop: 5 }}\r\n                                        alt={formatName(user.name, user.lastname)}\r\n                                        src={user.img && user.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${user.img}` : ''}\r\n                                    >\r\n                                        {getUserInitials(user.name, user.lastname)}\r\n                                    </Avatar>\r\n                                }\r\n                                <TextField\r\n                                    multiline\r\n                                    variant=\"outlined\"\r\n                                    name=\"commentary\"\r\n                                    InputLabelProps={{ shrink: true }}\r\n                                    placeholder='Ingresa tu comentario'\r\n                                    value={commentary}\r\n                                    onChange={({ target }) => setCommentary(target.value)}\r\n                                    label=\"Nuevo Comentario\"\r\n                                    type=\"text\"\r\n                                    fullWidth\r\n                                />\r\n                            </Box>\r\n                            <Box style={{ display: 'flex', justifyContent: 'flex-end' }}>\r\n                                <Button type='submit' variant='contained' color='primary' disabled={!commentary.length} disableElevation>\r\n                                    Comentar\r\n                                </Button>\r\n                            </Box>\r\n                        </form>)\r\n                        : <Typography align='center'>Para poder comentar este diseño debes <Link className={classes.clickHere} onClick={handleOpenLoginModal}>ingresar sesión</Link>.</Typography>\r\n                }\r\n            </CardContent>\r\n        </Card>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Commentary } from './Commentary';\r\nimport { CommentaryInput } from './CommentaryInput';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\n\r\nexport const DesignComments = () => {\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    return (<div>\r\n        {\r\n            design.comments.length !== 0 && design.comments.map((commentary) => <Commentary key={commentary._id} data={commentary}/>)\r\n        }\r\n        <CommentaryInput />\r\n    </div>)\r\n}\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Avatar, Tabs, Tab, Typography, Backdrop, Box, useTheme, useMediaQuery, Divider } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { DesignWorkspace } from 'pages/DesignPage/Workspace/DesignWorkspace';\r\nimport { DesignMetadata } from 'pages/DesignPage/Metadata/DesignMetadata';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { getBloomCategories, getBloomVerbs } from 'services/BloomService';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useSharedDocContext } from 'contexts/SharedDocContext';\r\nimport { Description, Group } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { CheckSaveDesignModal } from './Workspace/CheckSaveDesignModal';\r\nimport { DesignComments } from 'components/DesignComments';\r\nimport { CustomMenu } from 'components/CustomMenu';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menuLetters: {\r\n        marginLeft: theme.spacing(2),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    menuLettersSelected: {\r\n        marginLeft: theme.spacing(2),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    tabBarGrid: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        [theme.breakpoints.down('xs')]: {\r\n            justifyContent: 'center'\r\n        }\r\n    },\r\n    usersConnecteds: {\r\n        display: 'flex',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    backdrop: {\r\n        zIndex: 1000,\r\n        color: '#fff',\r\n    },\r\n    loadingFile: {\r\n        '-webkit-backface-visibility': 'hidden',\r\n        animation: `$spinAndScale 3000ms ${theme.transitions.easing.easeInOut}`,\r\n        animationIterationCount: 'infinite',\r\n        animationDirection: 'alternate',\r\n    },\r\n    comments: {\r\n        paddingTop: 10,\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 177px)',\r\n    },\r\n    user: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: 10,\r\n    },\r\n    \"@keyframes spinAndScale\": {\r\n        from: {\r\n            height: 300,\r\n            width: 300,\r\n            transform: 'rotate(0deg)',\r\n        },\r\n        to: {\r\n            height: 150,\r\n            width: 150,\r\n            transform: 'rotate(360deg)',\r\n        }\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPage = () => {\r\n    const classes = useStyles();\r\n    const { id } = useParams();\r\n    const theme = useTheme();\r\n    const isSmDevice = useMediaQuery(theme.breakpoints.down('sm'));\r\n    const isXsDevice = useMediaQuery(theme.breakpoints.down('xs'));\r\n    const { doc, provider, connectToDesign, clearDoc, connected } = useSharedDocContext();\r\n    const { authState } = useAuthState();\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const { designState, dispatch } = useDesignState();\r\n    const { uiState } = useUiState();\r\n    const [users, setUsersList] = useState([]);\r\n    const [tabIndex, setTabIndex] = useState(0);\r\n    const [error, setError] = useState(null);\r\n    const { design } = designState;\r\n    const isMounted = useRef(true);\r\n    const metadataRef = useRef();\r\n    const evaluationPatternRef = useRef();\r\n    const tabsRef = useRef();\r\n    const gridWorkspaceRef = useRef();\r\n\r\n    const prefetchBloomCategories = useCallback(async () => {\r\n        const data = await getBloomCategories();\r\n        dispatch({\r\n            type: types.design.setBloomCategories,\r\n            payload: data.bloomCategories,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    const prefetchBloomVerbs = useCallback(async () => {\r\n        const data = await getBloomVerbs('');\r\n        dispatch({\r\n            type: types.design.setBloomVerbs,\r\n            payload: data.bloomVerbs,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        prefetchBloomCategories();\r\n        prefetchBloomVerbs();\r\n    }, [prefetchBloomCategories, prefetchBloomVerbs]);\r\n\r\n    useEffect(() => {\r\n        let metadataComponent = metadataRef.current;\r\n        return () => {\r\n            metadataComponent?.clearEditors();\r\n            clearDoc();\r\n            isMounted.current = false;\r\n            dispatch({\r\n                type: types.design.updateDesign,\r\n                payload: null,\r\n            });\r\n        };\r\n    }, [clearDoc, dispatch]);\r\n    \r\n    useEffect(() => {\r\n        if (online) {\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id, public: false }, emitWithTimeout(\r\n                (res) => {\r\n                    if (res.ok) {\r\n                        const userInPrivileges = res.data.design.privileges.find(privilege => privilege.user._id === authState.user.uid);\r\n                        if (userInPrivileges && userInPrivileges.type === 0) {\r\n                            if (isMounted.current) {\r\n                                dispatch({\r\n                                    type: types.design.updateDesign,\r\n                                    payload: res.data.design,\r\n                                });\r\n                                connectToDesign(id);\r\n                            }\r\n                        } else {\r\n                            setError('Ha ocurrido un error, el diseño no existe o usted no tiene privilegios para editar este diseño.');\r\n                        };\r\n    \r\n                    } else {\r\n                        setError(res.message);\r\n                    };\r\n                },\r\n                () => {\r\n                    setError('Error al intentar ingresar al diseño. Por favor revise su conexión. Tiempo de espera excedido.');\r\n                },\r\n            ));\r\n        }\r\n    }, [socket, authState.user, online, id, dispatch, connectToDesign, emitWithTimeout]);\r\n\r\n    useEffect(() => {\r\n        socket?.on('update-design', (newDesign) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateDesign,\r\n                    payload: newDesign\r\n                });\r\n            }\r\n        });\r\n        socket?.on('add-design-keyword', (keyword) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.addDesignKeyword,\r\n                    payload: keyword,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('remove-design-keyword', (keyword) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.removeDesignKeyword,\r\n                    payload: keyword,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-metadata-field', ({ field, value, subfield }) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeMetadataField,\r\n                    payload: { field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('edit-task-field', ({ learningActivityID, taskID, field, value, subfield }) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.changeTaskField,\r\n                    payload: { learningActivityID, taskID, field, value, subfield },\r\n                });\r\n            }\r\n        });\r\n        socket?.on('users', (users) => {\r\n            if (isMounted.current) setUsersList(users);\r\n        });\r\n        socket?.on('change-design-privileges', (privileges) => {\r\n            dispatch({\r\n                type: types.design.setDesignPrivileges,\r\n                payload: privileges\r\n            });\r\n        });\r\n        socket?.on('change-read-only-link', (newLink) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateReadOnlyLink,\r\n                    payload: newLink\r\n                });\r\n            }\r\n        });\r\n        socket?.on('update-design-rate', ({ assessments, mean }) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.setAssessments,\r\n                    payload: assessments,\r\n                });\r\n                dispatch({\r\n                    type: types.design.setScoreMean,\r\n                    payload: mean,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('comment-design', (commentary) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.commentDesign,\r\n                    payload: commentary,\r\n                });\r\n            }\r\n        });\r\n\r\n        socket?.on('delete-comment', (commentaryId) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.deleteComment,\r\n                    payload: commentaryId,\r\n                });\r\n            }\r\n        });\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n            socket?.off('updateDesign');\r\n            socket?.off('edit-metadata-field');\r\n            socket?.off('add-design-keyword');\r\n            socket?.off('remove-design-keyword');\r\n            socket?.off('change-read-only-link');\r\n            socket?.off('edit-task-field');\r\n            socket?.off('users');\r\n            socket?.off('update-design-rate');\r\n            socket?.off('comment-design');\r\n            socket?.off('delete-comment');\r\n        };\r\n    }, [socket, authState.user, id, dispatch]);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        if (evaluationPatternRef.current && evaluationPatternRef?.current.editing) evaluationPatternRef.current.handleSave();\r\n        setTabIndex(newValue);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!uiState.userSaveDesign) {\r\n            window.onbeforeunload = function (e) {\r\n                return '¿Seguro que quieres salir?'\r\n            };\r\n        }\r\n        return () => window.onbeforeunload = null;\r\n    }, [uiState]);\r\n\r\n    if (error) {\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    {error}\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design || !doc || !provider) {\r\n        return (<Box className={classes.workspace}>\r\n            <Backdrop className={classes.backdrop} open={true}>\r\n                <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <Box width={300} height={300} style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                        <Description className={classes.loadingFile} />\r\n                    </Box>\r\n\r\n                    <Typography>Cargando Diseño de Aprendizaje...</Typography>\r\n                </Box>\r\n            </Backdrop>\r\n        </Box>);\r\n    }\r\n\r\n    const renderConnectedUsersButtonMenu = () => {\r\n        return <div className={classes.usersConnecteds}>\r\n            <CustomMenu Icon={<Group />} text={users.length}>\r\n                <Typography style={{ paddingLeft: 10, paddingTop: 5 }} gutterBottom>Usuarios conectados</Typography>\r\n                <Divider />\r\n                <Box style={{ padding: 10 }}>\r\n                    {renderConnectedUserList()}\r\n                </Box>\r\n            </CustomMenu>\r\n        </div>;\r\n    };\r\n\r\n    const renderConnectedUserList = () => {\r\n        return users.map((user, index) => {\r\n            return <Box key={user.uid + index} className={classes.user}>\r\n                <Avatar\r\n                    style={{ border: `3px solid ${user.color}`, backgroundColor: user.color, marginRight: 10 }}\r\n                    alt={formatName(user.name, user.lastname)}\r\n                    src={user.img && user.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${user.img}` : ''}\r\n                >\r\n                    {getUserInitials(user.name, user.lastname)}\r\n                </Avatar>\r\n                <Box>\r\n                    <Typography color='textPrimary'>{user.name + ' ' + user.lastname}</Typography>\r\n                    <Typography color=\"textSecondary\">{user.privilege}</Typography>\r\n                </Box>\r\n            </Box>;\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} >\r\n                    <Box width='100%' height='100%' display='flex' justifyContent='flex-end' alignItems='center'>\r\n                        {\r\n                            isXsDevice && renderConnectedUsersButtonMenu()\r\n                        }\r\n                    </Box>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid ref={gridWorkspaceRef} item xs={12} md={6} lg={8} className={classes.tabBarGrid}>\r\n                    <Tabs\r\n                        ref={tabsRef}\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"METADATOS\" {...a11yProps(0)} />\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(1)} />\r\n                        <Tab label=\"COMENTARIOS\" {...a11yProps(2)} />\r\n                    </Tabs>\r\n                    {\r\n                        !isXsDevice && isSmDevice && renderConnectedUsersButtonMenu()\r\n                    }\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}>\r\n                    <Box width='100%' height='100%' display='flex' justifyContent='flex-end' alignItems='center'>\r\n                        {\r\n                            !isXsDevice && !isSmDevice && renderConnectedUsersButtonMenu()\r\n                        }\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0}>\r\n                <DesignMetadata ref={metadataRef} evaluationPatternRef={evaluationPatternRef} />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1}>\r\n                <DesignWorkspace />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={2}>\r\n                <Grid container>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.comments}>\r\n                        <DesignComments />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n            </TabPanel>\r\n            {\r\n                (uiState.isCheckSaveDesignModalOpen) && <CheckSaveDesignModal />\r\n            }\r\n            <Backdrop className={classes.backdrop} open={!online || !connected}>\r\n                <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <Box width={300} height={300} style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                        <Description className={classes.loadingFile} />\r\n                    </Box>\r\n\r\n                    <Typography align='center'>Se ha perdido la conexión con el servidor. Intentando reconectar...</Typography>\r\n                </Box>\r\n            </Backdrop>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    titleMargin: {\r\n        margin: 'auto',\r\n    },\r\n    bodyMargin: {\r\n        marginLeft: theme.spacing(5),\r\n        marginRight: theme.spacing(5)\r\n    }\r\n}));\r\n\r\nexport const ConfirmationModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { type, args, actionMutation } = uiState.confirmModalData;\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket, emitWithTimeout } = useSocketState();\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        if(type === 'carpeta') setMessage(`¿Estás realmente seguro de que deseas eliminar tu carpeta? `);\r\n        else setMessage(`¿Estás realmente seguro de que deseas eliminar tu ${type}?`);\r\n    }, [type]);\r\n    \r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.setConfirmData,\r\n            payload: {\r\n                type: null,\r\n                args: null,\r\n                actionMutation: null,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Confirmation',\r\n        });\r\n    };\r\n\r\n    const confirmResult = async () => {\r\n        let socketEvent = null;\r\n        let errorMessage = null;\r\n        if (type === 'diseño' || type === 'carpeta') {\r\n            await actionMutation.mutate(args);\r\n        } else if (type === 'actividad') {\r\n            socketEvent = 'delete-learningActivity';\r\n            errorMessage = 'Error al eliminar la actividad.';\r\n        } else if (type === 'tarea') {\r\n            socketEvent = 'delete-task';\r\n            errorMessage = 'Error al eliminar la tarea.';\r\n        } else if (type === 'comentario') {\r\n            socketEvent = 'delete-comment';\r\n            errorMessage = 'Error al eliminar el comentario.';\r\n        } else if (type === 'resultado de aprendizaje') {\r\n            socketEvent = 'delete-learning-result';\r\n            errorMessage = 'Error al eliminar el resultado de aprendizaje.';\r\n        }\r\n        if(socketEvent){\r\n            socket?.emit(socketEvent, args, emitWithTimeout(\r\n                (resp) => {\r\n                    if(resp.ok && uiState.userSaveDesign){\r\n                        dispatch({\r\n                            type: types.ui.setUserSaveDesign,\r\n                            payload: false,\r\n                        });\r\n                    }\r\n                    return enqueueSnackbar(resp.message, { variant: resp.ok ? 'success': 'error', autoHideDuration: 2000 });\r\n                },\r\n                () => enqueueSnackbar(errorMessage + ' Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n            ));\r\n        }\r\n        handleClose();\r\n    };\r\n\r\n    const renderConfirmationModal = () => {\r\n        return (\r\n            <Dialog onClose={handleClose} open={uiState.isConfirmationModalOpen}>\r\n                <DialogTitle className={classes.titleMargin} >\r\n                    Eliminar {type}\r\n                    </DialogTitle>\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                <DialogContent dividers>\r\n                    <Typography align = 'center' style ={{marginTop: 15, marginBottom: 25}}>\r\n                        {message}    \r\n                    </Typography>\r\n                    <Typography align = 'center' variant = 'caption'>\r\n                        { (type !== 'carpeta') \r\n                            ? 'IMPORTANTE: Este proceso no se podrá deshacer luego de haber elegido la opción de eliminar.'\r\n                            : 'IMPORTANTE: Recuerda que se eliminarán también las carpetas y diseños de aprendizaje que se encuentren al interior de esta o de sus carpetas hijas y este proceso no se podrá deshacer luego de haber elegido la opción de eliminar.' }  \r\n                    </Typography>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                        </Button>\r\n                    <Button variant='contained' color='primary' onClick={confirmResult}>\r\n                        Eliminar\r\n                        </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                renderConfirmationModal()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles, Typography, Paper, Box, } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskBody: {\r\n        padding: 10,\r\n        position: 'relative',\r\n        left: '5%',\r\n        width: '95%',\r\n        height: '100%',\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        position: 'absolute',\r\n        width: '5%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n        },\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    gridContainer: {\r\n        display: 'grid',\r\n        gridTemplateColumns: '50% 50%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `\r\n            'learningType modality'\r\n            'workingTime format'\r\n            'description description'`,\r\n        [theme.breakpoints.down('md')]: {\r\n            gridTemplateAreas: `\r\n                'learningType learningType'\r\n                'modality modality'\r\n                'format format'\r\n                'workingTime workingTime'\r\n                'description description'`,\r\n        },\r\n    },\r\n    firstRow: {\r\n        display: 'grid',\r\n        gridTemplateColumns: 'auto auto 10%',\r\n        gridTemplateRows: 'auto',\r\n        gridTemplateAreas: `'learningType modality'`,\r\n    },\r\n    learningTypeContainer:{\r\n        gridArea: 'learningType',\r\n        width: '100%',\r\n        display: 'flex',\r\n    },\r\n    learningType:{\r\n        marginRight: 10,\r\n        [theme.breakpoints.down('md')]: {\r\n            marginRight: 0,\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    modality: {\r\n        gridArea: 'modality',\r\n        width: '100%',\r\n        //display: 'flex',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    format: {\r\n        gridArea: 'format',\r\n        alignSelf: 'flex-end',\r\n        [theme.breakpoints.down('md')]: {\r\n            marginTop: 10,\r\n        },\r\n    },\r\n    \r\n}));\r\n\r\nexport const TaskReader = ({ index, task }) => {\r\n    const classes = useStyles();\r\n\r\n    const listTasksArray = () => {\r\n        return (\r\n            <Box key={index} style={{ height: '100%' }}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Box>\r\n                        <Box style={{ display: 'flex', position: 'relative', height: '100%', width: '100%' }}>\r\n                            {(() => {\r\n                                if (task.learningType === 'Investigación') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Adquisición') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Producción') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Discusión') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Colaboración') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Práctica') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></div>\r\n                                    )\r\n                                }\r\n                            })()}\r\n\r\n                            <div className={classes.taskBody}>\r\n                                <div className={classes.gridContainer}>\r\n                                    <div className={classes.learningTypeContainer}>\r\n                                        <Box className={classes.learningType}>\r\n                                            <Typography variant=\"body2\" color=\"textSecondary\" > Aprendizaje </Typography>\r\n                                            <Typography>{task.learningType}</Typography>\r\n                                        </Box>\r\n                                    </div>\r\n                                    <div className={classes.modality}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Modalidad </Typography>\r\n                                        <Typography>{task.modality}</Typography>\r\n                                    </div>\r\n                                    <div style={{ width: '100%', gridArea: 'workingTime', marginTop: 3 }}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" gutterBottom> Tiempo de trabajo </Typography>\r\n                                        <div className={classes.timeField}>\r\n                                            <Typography>{task.duration.hours}</Typography>\r\n                                            <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                            <Typography>{task.duration.minutes} (hrs:mins)</Typography>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Box className={classes.format}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginBottom: 4, marginRight: 5 }}> Formato </Typography>\r\n                                        <Typography>{task.format}</Typography>\r\n                                    </Box>\r\n                                    <Box style={{ gridArea: 'description', marginTop: 10, wordBreak: 'break-word'}}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" > Descripción </Typography>\r\n                                        <Box className={classes.taskSpacingDescriptionBD}>\r\n                                            <Typography>{task.description}</Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </div>\r\n                            </div>\r\n                        </Box>\r\n                    </Box>\r\n                </Paper>\r\n            </Box>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                listTasksArray()\r\n            }\r\n        </>\r\n    )\r\n};\r\n","import React from 'react';\r\nimport { Box, Divider, Grid, makeStyles, Paper, Tooltip, Typography } from '@material-ui/core'\r\nimport { TaskReader } from 'pages/DesignPageReader/DesignReader/TaskReader';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { itemsLearningType } from 'assets/resource/items'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    descriptionContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        padding: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    },\r\n    taskContainer: {\r\n        position: 'relative',\r\n    },\r\n    learningResult: {\r\n        marginBottom: 10,\r\n        userSelect: 'none',\r\n    },\r\n    ellipsis: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n}));\r\n\r\nexport const LearningActivityReader = ({ index, learningActivity }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const renderLinkedLearningResults = () => {\r\n        const linkedLearningResults = [];\r\n        design.metadata.results.forEach((result, index) => {\r\n            if(!!learningActivity.learningResults.find(lr=> lr.verb === result.verb && lr.description === result.description)) linkedLearningResults.push(result);\r\n        });\r\n        return linkedLearningResults.map((result, i) => (\r\n            <Box key={`learning-result-${i}-learning-activity-${index}`} className={classes.learningResult}>\r\n                <Tooltip title={result.verb + ' ' + result.description} arrow>\r\n                    <Typography className={classes.ellipsis}>{(i + 1)  + '. ' + result.verb + ' ' + result.description}</Typography>\r\n                </Tooltip>\r\n            </Box>\r\n        ));\r\n    };\r\n\r\n    const listLearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <Typography>{learningActivity.title}</Typography>\r\n                        </Grid>\r\n                        {resetItems()}\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            {   \r\n                                design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.forEach((task)=>\r\n                                {   \r\n                                    itemsLearningType.forEach((item) =>{ \r\n                                        if( item.title === task.learningType ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                } \r\n                                )\r\n                            }\r\n                            <StackedBar items = {itemsLearningType} type = {'Activity'}/>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8} className={classes.taskContainer}>\r\n                            <Grid className={classes.gridTask}>\r\n                                {\r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i)=> <TaskReader key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index}/> ) \r\n                                }\r\n                            </Grid>\r\n                            <Grid container>\r\n                                <Grid item />\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <div className={classes.descriptionContainer}>\r\n                                <Typography variant=\"body2\" className={classes.spacingDescriptionlearningActivity} color=\"textSecondary\"> Descripción Unidad de aprendizaje </Typography>\r\n                                <Grid className={classes.spacingDescription}>\r\n                                    <Typography>{learningActivity.description}</Typography>\r\n                                </Grid>\r\n                                <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                                <div className={classes.learningResultList}>\r\n                                    { renderLinkedLearningResults() }\r\n                                </div>\r\n\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listLearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Avatar, Box, Button, ButtonGroup, Card, CardActionArea, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { PieGraphic } from 'components/PieGraphic';\r\nimport { itemsLearningType, itemsFormat, itemsModality, itemsLearningTypePie } from 'assets/resource/items'\r\nimport { LearningActivityReader } from './LearningActivityReader';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { duplicateDesign } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { Description } from '@material-ui/icons';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root:{\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 112px)',\r\n    },\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n        height: 'auto',\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        background: theme.palette.background.workSpace,\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(1),\r\n        [theme.breakpoints.up('md')]: {\r\n            height: 'calc(100vh - 112px)',\r\n        },\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.paper,\r\n    },\r\n    textLefPanel:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData:{\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata:{\r\n        marginTop: theme.spacing(1),\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(2),\r\n        height: 'auto',\r\n        paddingBottom: theme.spacing(1),\r\n        [theme.breakpoints.up('xs')]: {\r\n            height: 'calc(100vh - 200px)',\r\n            overflow: 'auto'\r\n        },\r\n    },\r\n    textLeftPanelMetadata:{\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    graphicsSpacing:{\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    betweenGraphics:{\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    workSpaceUnits: {\r\n        height: 'auto',\r\n        [theme.breakpoints.up('md')]: {\r\n            height: '90%',\r\n            overflow: 'auto',\r\n            overflowX: 'hidden',\r\n        },\r\n    },\r\n    buttonGroupWorkSpace: {\r\n        height: 'auto',\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    origin: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        borderRadius: 4,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n      \r\n}));\r\n\r\nexport const DesignReader = ({ type }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { authState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const history = useHistory();\r\n    const queryClient = useQueryClient();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    \r\n    let showGraphicLearningType = false;\r\n    let showGraphicFormat = false;\r\n    let showGraphicModality = false;\r\n\r\n    const duplicateDesignMutation = useMutation(duplicateDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            enqueueSnackbar(error.message,  {variant: 'error', autoHideDuration: 2000});\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.newDesign._id}`);\r\n        }\r\n    });\r\n\r\n    const handleOpenDesign = (design) =>{\r\n        if(!authState.user) return enqueueSnackbar('Debe ingresar sesión para poder realizar esta acción.', { variant: 'error', autoHideDuration: 2000 });\r\n        const inDesign = design.privileges.find(privilege => authState.user.uid === privilege.user._id);\r\n        if (inDesign) {\r\n            const typePrivilegeEditor = design.privileges.find(privilege => authState.user.uid === privilege.user._id && privilege.type === 0);\r\n            if (typePrivilegeEditor) {\r\n                history.push(`/designs/${design._id}`);\r\n            } else {\r\n                history.push(`/designs/reader/${design._id}`);\r\n            }\r\n        } else if(design.metadata.isPublic){\r\n            history.push(`/designs/reader/${design._id}`);\r\n        } else {\r\n            enqueueSnackbar('Usted no tiene acceso a este diseño.', { variant: 'error', autoHideDuration: 2000 });\r\n        }\r\n    };\r\n\r\n    const handleOpenUserProfile = (design) => {\r\n        if(!authState.user) return enqueueSnackbar('Debe ingresar sesión para poder realizar esta acción.', { variant: 'error', autoHideDuration: 2000 });\r\n        history.push(`/profile/${design.owner._id}`);\r\n    };\r\n    \r\n    design.data.learningActivities.forEach((activities) => {\r\n        if (activities.tasks !== undefined) {\r\n            activities.tasks.forEach(task=>{\r\n                if (task.learningType !== '' && task.learningType !== 'Seleccionar' ) {\r\n                    showGraphicLearningType  = true;\r\n                }\r\n                if (task.format !== '' && task.format !== 'Seleccionar') {\r\n                    showGraphicFormat = true;\r\n                }\r\n                if (task.modality !== '' && task.modality !== 'Seleccionar') {\r\n                    showGraphicModality = true;\r\n                }\r\n            })\r\n        }\r\n    });\r\n\r\n    const resetItems = () =>{\r\n        itemsLearningType.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsLearningTypePie.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        \r\n        itemsFormat.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n        itemsModality.forEach((item) =>{\r\n            item.value = 0;\r\n        });\r\n    };\r\n\r\n    const handleDuplicateDesign = async (e) => {\r\n        await duplicateDesignMutation.mutate({ id: urlparams.id });\r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <Grid container className={classes.root}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLefPanel}> INFORMACIÓN DISEÑO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData}/>\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary'> Nombre </Typography>\r\n                                        <Typography variant='body2'>{ metadata.name }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.category &&(\r\n                                <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}>Tema</Typography>\r\n                                        <Typography variant='body2'> { metadata.category.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTime &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTime.hours } (hrs) : {metadata.workingTime.minutes} (min)</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTimeDesign &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLeftPanelMetadata}>Tiempo de trabajo Diseño</Typography>\r\n                                        <Typography variant=\"body2\"> {metadata.workingTimeDesign.hours} (hrs) : {metadata.workingTimeDesign.minutes} (min)</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.classSize &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Tamaño de la clase </Typography>\r\n                                        <Typography variant='body2'> { metadata.classSize } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.priorKnowledge &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Conocimiento Previo </Typography>\r\n                                        <Typography variant='body2' > { metadata.priorKnowledge } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.description &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Descripción </Typography>\r\n                                        <Typography variant='body2'> { metadata.description } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.objective &&(\r\n                                    <>\r\n                                        <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Objetivos </Typography>\r\n                                        <Typography variant='body2' > { metadata.objective } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {metadata && metadata.scoreMean !== null && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Valoración media (0 - 5) </Typography>\r\n                                    <Box display='flex' justifyContent='flex-start' alignItems='center'>\r\n                                        { metadata.scoreMean }\r\n                                    </Box>\r\n                                    <Divider />\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.results &&(\r\n                                <div className={classes.textLeftPanelMetadata}>\r\n                                        { metadata.results.map((result, i) => \r\n                                            <div key={`learning-result-${i}`} > \r\n                                                <Typography variant='body2' color={'textSecondary'}>Resultado de aprendizaje {i + 1}</Typography>\r\n                                                <Typography variant='body2' gutterBottom >{ result.verb + ' ' + result.description}</Typography>\r\n                                            </div>\r\n                                        )}\r\n                                        <Divider/>\r\n                                </div>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            {design.origin && (\r\n                                <>\r\n                                    <Typography variant='body2' color='textSecondary' className={classes.textLeftPanelMetadata}> Derivado del diseño: </Typography>\r\n                                    <Card className={classes.origin} elevation={0}>\r\n                                        <CardActionArea onClick={()=>handleOpenDesign(design.origin)}>\r\n                                            <Box style={{ display: 'flex', alignItems: 'center', padding: 5 }}>\r\n                                                <Description style={{ marginBottom: 5 }} />\r\n                                                <Typography style={{ marginLeft: 10 }} variant='body2'>{design.origin.metadata.name}</Typography>\r\n                                            </Box>\r\n                                        </CardActionArea>\r\n                                        <Divider />\r\n                                        <CardActionArea onClick={()=>handleOpenUserProfile(design.origin)}>\r\n                                            <Box style={{ display: 'flex', alignItems: 'center', padding: 5 }}>\r\n                                                <Avatar\r\n                                                    style={{ width: 25, height: 25, fontSize: 15 }}\r\n                                                    alt={formatName(design.origin.owner.name, design.origin.owner.lastname)}\r\n                                                    src={design.origin.owner.img && design.origin.owner.img.length > 0 ? `${process.env.REACT_APP_URL}uploads/users/${design.origin.owner.img}` : ''}\r\n                                                >\r\n                                                    {getUserInitials(design.origin.owner.name, design.origin.owner.lastname)}\r\n                                                </Avatar>\r\n                                                <Typography style={{ marginLeft: 10 }} variant='body2'>{formatName(design.origin.owner.name, design.origin.owner.lastname)}</Typography>\r\n                                            </Box>\r\n                                        </CardActionArea>\r\n\r\n                                    </Card>\r\n                                </>\r\n                            )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    { (!!authState.token) \r\n                        ? <div className={classes.buttonZone}>\r\n                            <ButtonGroup size='small' aria-label='outlined primary button group' className={classes.buttonGroupWorkSpace}>\r\n                                <Button onClick={handleDuplicateDesign}> Duplicar </Button>\r\n                            </ButtonGroup>\r\n                        </div> \r\n                        : <div></div>}\r\n                    <Grid className={classes.workSpaceUnits}>\r\n                        <Grid >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => <LearningActivityReader key={`learningActivity-${index}`} index={index} learningActivity={learningActivity}/> )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}>\r\n                {resetItems()}\r\n                    <Grid className={classes.graphicsSpacing}>\r\n                        {   \r\n                            design.data.learningActivities && design.data.learningActivities.map((learningActivity) => \r\n                                learningActivity.tasks && learningActivity.tasks.forEach((task) => {\r\n                                    itemsLearningType.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsLearningTypePie.forEach((item) =>{\r\n                                        if( item.title === task.learningType){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsFormat.forEach((item) =>{ \r\n                                        if( item.title === task.format ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                    itemsModality.forEach((item) =>{ \r\n                                        if( item.title === task.modality ){\r\n                                            item.value = item.value + 1;\r\n                                        }\r\n                                    });\r\n                                }))\r\n                            }\r\n                        { showGraphicLearningType && \r\n                            <div className={classes.betweenGraphics}>\r\n                                <PieGraphic items = { itemsLearningTypePie} colorGraphicToPdf={true}></PieGraphic>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicFormat &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Formato</Typography>\r\n                                <StackedBar items = {itemsFormat} type={'Format'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                        {   showGraphicModality &&\r\n                            <div className={classes.betweenGraphics}>\r\n                                <Typography>Modalidad</Typography>\r\n                                <StackedBar items = {itemsModality} type={'Modality'} legends={true} colorGraphicToPdf={true}></StackedBar>\r\n                            </div>\r\n                        }\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { Rating } from '@material-ui/lab';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        color: theme.palette.grey[500],\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    ellipsis: {\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    bodyMargin: {\r\n        marginLeft: theme.spacing(5),\r\n        marginRight: theme.spacing(5)\r\n    },\r\n    ratingRoot: {\r\n        fontSize: 90,\r\n        [theme.breakpoints.down('xs')]: {\r\n            fontSize: 40,\r\n        },\r\n    },\r\n}));\r\n\r\nconst labels = {\r\n    0.5: 'Pésimo',\r\n    1:   'Muy malo',\r\n    1.5: 'Malo',\r\n    2:   'Menos que bueno',\r\n    2.5: 'Bueno',\r\n    3:   'Más que bueno',\r\n    3.5: 'Muy bueno',\r\n    4:   'Extraordinario',\r\n    4.5: 'Casi excelente',\r\n    5:   'Excelente',\r\n};\r\n\r\nconst getInitialScore = (assessments, uid) => {\r\n    const existentAssesment = assessments.find((a) => a.user === uid);\r\n    if(existentAssesment) return existentAssesment.score;\r\n    return null;\r\n};\r\n\r\nexport const AssessmentModal = () => {\r\n    const classes = useStyles();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    let initialScore = getInitialScore(design.assessments, authState.user.uid);\r\n    const [ assessment, setAssessment] = useState(initialScore);\r\n    const [hover, setHover] = useState(-1);\r\n\r\n    useEffect(() => {\r\n        setAssessment(getInitialScore(design.assessments, authState.user.uid));\r\n    }, [design.assessments, setAssessment, authState.user.uid]);\r\n\r\n    const handleClose = () => {\r\n        setAssessment(initialScore);\r\n        setHover(-1);\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Assessment',\r\n        });\r\n    };\r\n\r\n    const handleRate = () => {\r\n        if(assessment){\r\n            if (assessment === initialScore) return handleClose();\r\n            if(online){\r\n                socket?.emit('rate-design', {\r\n                    designId: design._id,\r\n                    rate: {\r\n                        user: authState.user.uid,\r\n                        score: assessment,\r\n                    },\r\n                }, emitWithTimeout(\r\n                    (resp) => enqueueSnackbar(resp.message, { variant: resp.ok ? 'success' : 'error', autoHideDuration: 2000 }),\r\n                    () => enqueueSnackbar('Error al valorar el diseño. Por favor revise su conexión. Tiempo de espera excedido.', { variant: 'error', autoHideDuration: 2000 }),\r\n                ));\r\n                handleClose();\r\n            }\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <Dialog style={{padding: 0}} open={uiState.isAssessmentModalOpen}>\r\n            <DialogTitle style={{padding: '5px 5px 5px 16px'}}>\r\n                <Box className={classes.title}>\r\n                    <Box className={classes.ellipsis}>\r\n                        Valorar diseño\r\n                    </Box>\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                        <Close />\r\n                    </IconButton>\r\n                </Box>\r\n            </DialogTitle>\r\n            <DialogContent dividers>\r\n                <Typography align='center' style={{marginBottom: 20}}>\r\n                    En esta ventana usted puede valorar o cambiar su valoración del diseño de aprendizaje que está visualizando\r\n                    haciendo click en alguna de las estrellas a continuación:\r\n                </Typography>\r\n                <Box style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n                    <Rating\r\n                        classes={{root: classes.ratingRoot}}\r\n                        name=\"hover-feedback\"\r\n                        value={assessment}\r\n                        precision={0.5}\r\n                        onChange={(event, newValue) => {\r\n                            setAssessment(newValue);\r\n                        }}\r\n                        onChangeActive={(event, newHover) => {\r\n                            setHover(newHover);\r\n                        }}\r\n                    />\r\n                    <Box style={{minHeight: 50, marginTop: 20}}>\r\n                        <Typography>\r\n                            { hover !== -1 ? labels[hover] : assessment ? labels[assessment] : 'No valorado' }\r\n                        </Typography>\r\n                    </Box>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleClose}> Cancelar </Button>\r\n                <Button variant='contained' color='primary' onClick={handleRate} disabled={!assessment}> Valorar </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Tabs, Tab, Typography, Backdrop, Box, Button } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { DesignReader } from './DesignReader/DesignReader';\r\nimport { Description, Star } from '@material-ui/icons';\r\nimport { AssessmentModal } from 'components/AssessmentModal';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { DesignComments } from 'components/DesignComments';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    comments: {\r\n        paddingTop: 10,\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 177px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    loadingFile: {\r\n        '-webkit-backface-visibility': 'hidden',\r\n        animation: `$spinAndScale 3000ms ${theme.transitions.easing.easeInOut}`,\r\n        animationIterationCount: 'infinite',\r\n        animationDirection: 'alternate',\r\n    },\r\n    \"@keyframes spinAndScale\": {\r\n        from: {\r\n            height: 300,\r\n            width: 300,\r\n            transform: 'rotate(0deg)',\r\n        },\r\n        to: {\r\n            height: 150,\r\n            width: 150,\r\n            transform: 'rotate(360deg)',\r\n        }\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPageReader = () => {\r\n    const classes = useStyles();\r\n    const { id } = useParams();\r\n    const isMounted = useRef(true);\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const { designState, dispatch } = useDesignState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const [ tabIndex, setTabIndex ] = useState(0);\r\n    const { design } = designState;\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (online) {\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id, public: true }, emitWithTimeout(\r\n                (res) => {\r\n                    if (res.ok){\r\n                        if(isMounted.current) {\r\n                            dispatch({\r\n                                type: types.design.updateDesign,\r\n                                payload: res.data.design\r\n                            });\r\n                        }\r\n                    } \r\n                    else setError(res.message);\r\n                },\r\n                () => {\r\n                    setError('Error al intentar ingresar al diseño. Por favor revise su conexión. Tiempo de espera excedido.');\r\n                },\r\n            ));\r\n        }\r\n    }, [socket, authState.user, online, id, dispatch, emitWithTimeout]);\r\n\r\n    useEffect(() => {\r\n        socket?.on('update-design-rate', ({assessments, mean}) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.setAssessments,\r\n                    payload: assessments,\r\n                });\r\n                dispatch({\r\n                    type: types.design.setScoreMean,\r\n                    payload: mean,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('comment-design', (commentary) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.commentDesign,\r\n                    payload: commentary,\r\n                });\r\n            }\r\n        });\r\n        socket?.on('delete-comment', (commentaryId) => {\r\n            if (isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.deleteComment,\r\n                    payload: commentaryId,\r\n                });\r\n            }\r\n        });\r\n        return () => {\r\n            socket?.off('update-design-rate');\r\n            socket?.off('comment-design');\r\n            socket?.off('delete-comment');\r\n        };\r\n    }, [socket, dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n        }\r\n    }, [socket, authState.user, id]);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n    \r\n    if(error){\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    { error }\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design) {\r\n        return (\r\n            <Backdrop className={classes.backdrop} open={true}>\r\n                <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <Box width={300} height={300} style={{display: 'flex', justifyContent: 'center', alignItems: 'center'}}>\r\n                        <Description className={classes.loadingFile} />\r\n                    </Box>\r\n                    <Typography>Cargando Diseño de Aprendizaje...</Typography>\r\n                </Box>\r\n            </Backdrop>\r\n        );\r\n    }\r\n\r\n    const handleOpenAssessmentModal = () => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Assessment',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(0)} />\r\n                        <Tab label=\"COMENTARIOS\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                    { \r\n                        authState.user && authState.user.uid !== design.owner && <Button variant='outlined' color='default' onClick={handleOpenAssessmentModal}>\r\n                            <Star style={{marginRight: 10, marginTop: -3}}/> Valorar Diseño\r\n                        </Button>\r\n                    }\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} ></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0} >\r\n                <DesignReader />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1} >\r\n                <Grid container>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.comments}>\r\n                        <DesignComments />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n            </TabPanel>\r\n            <AssessmentModal />\r\n        </>\r\n    )\r\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport { Backdrop, Box, Button, Grid, makeStyles, Tab, Tabs, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { getDesignByLink } from 'services/DesignService';\r\nimport { DesignReader } from 'pages/DesignPageReader/DesignReader/DesignReader';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { Description, Star } from '@material-ui/icons';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { AssessmentModal } from 'components/AssessmentModal';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { DesignComments } from 'components/DesignComments';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    comments: {\r\n        paddingTop: 10,\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 177px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    content: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n    loadingFile: {\r\n        '-webkit-backface-visibility': 'hidden',\r\n        animation: `$spinAndScale 3000ms ${theme.transitions.easing.easeInOut}`,\r\n        animationIterationCount: 'infinite',\r\n        animationDirection: 'alternate',\r\n    },\r\n    \"@keyframes spinAndScale\": {\r\n        from: {\r\n            height: 300,\r\n            width: 300,\r\n            transform: 'rotate(0deg)',\r\n        },\r\n        to: {\r\n            height: 150,\r\n            width: 150,\r\n            transform: 'rotate(360deg)',\r\n        }\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const SharedLinkPage = () => {\r\n    const classes = useStyles();\r\n    const urlparams = useParams();\r\n    const isMounted = useRef(true);\r\n    const { socket, online, emitWithTimeout } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const { designState, dispatch } = useDesignState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const [ tabIndex, setTabIndex ] = useState(0);\r\n    const { design } = designState;\r\n    const [errorSocket, setErrorSocket] = useState(null);\r\n    const [id, setId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if(authState.user){\r\n            if(online && id){\r\n                socket?.emit('join-to-design', { user: authState.user, designId: id, public: true }, emitWithTimeout(\r\n                    (res) => {\r\n                        if (res.ok){\r\n                            if(isMounted.current) {\r\n                                dispatch({\r\n                                    type: types.design.updateDesign,\r\n                                    payload: res.data.design\r\n                                });\r\n                            }\r\n                        } \r\n                        else setErrorSocket(res.message);\r\n                    },\r\n                    () => {\r\n                        setErrorSocket('Error al intentar ingresar al diseño. Por favor revise su conexión. Tiempo de espera excedido.');\r\n                    },\r\n                ));\r\n            }\r\n        }\r\n    }, [socket, authState.user, online, dispatch, id, emitWithTimeout]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if(authState.user){\r\n                socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n            }\r\n        }\r\n    }, [socket, authState.user, id]);\r\n    \r\n    useEffect(() => {\r\n        if(authState.user){\r\n            socket?.on('update-design-rate', ({assessments, mean}) => {\r\n                if (isMounted.current) {\r\n                    dispatch({\r\n                        type: types.design.setAssessments,\r\n                        payload: assessments,\r\n                    });\r\n                    dispatch({\r\n                        type: types.design.setScoreMean,\r\n                        payload: mean,\r\n                    });\r\n                }\r\n            });\r\n            socket?.on('comment-design', (commentary) => {\r\n                if (isMounted.current) {\r\n                    dispatch({\r\n                        type: types.design.commentDesign,\r\n                        payload: commentary,\r\n                    });\r\n                }\r\n            });\r\n            socket?.on('delete-comment', (commentaryId) => {\r\n                if (isMounted.current) {\r\n                    dispatch({\r\n                        type: types.design.deleteComment,\r\n                        payload: commentaryId,\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        return () => {\r\n            if(authState.user) {\r\n                socket?.off('update-design-rate');\r\n\r\n            }\r\n            socket?.off('comment-design');\r\n            socket?.off('delete-comment');\r\n        };\r\n    }, [socket, dispatch, authState.user]);\r\n\r\n    const { isLoading, isError, error, data } = useQuery(['shared-design-by-link', urlparams.link], async () => {\r\n        const resp = await getDesignByLink({ link: urlparams.link });\r\n        if(authState.user) {\r\n            setId(resp.design._id);\r\n            return resp;\r\n        }\r\n        dispatch({\r\n            type: types.design.updateDesign,\r\n            payload: resp.design,\r\n        });\r\n        return resp;\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n\r\n    const renderError = () => {\r\n        return <div className={classes.error}>\r\n            <Alert severity='error'>\r\n                {error.message}\r\n            </Alert>\r\n        </div>;\r\n    };\r\n\r\n    const handleOpenAssessmentModal = () => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Assessment',\r\n        });\r\n    };\r\n\r\n    const renderContent = () => {\r\n        return <>\r\n            <Grid container className={classes.content} key={data.design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(0)} />\r\n                        <Tab label=\"COMENTARIOS\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                    {\r\n                        authState.user && authState.user.uid !== design.owner && <Button variant='outlined' color='default' onClick={handleOpenAssessmentModal}>\r\n                            <Star style={{ marginRight: 10, marginTop: -3 }} /> Valorar Diseño</Button>\r\n                    }\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0} >\r\n                <DesignReader type='shared-link' />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1} >\r\n                <Grid container>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.comments}>\r\n                        <DesignComments />\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n            </TabPanel>\r\n            { authState.user && <AssessmentModal /> }\r\n        </>;\r\n    };\r\n\r\n    const renderLoading = () => {\r\n        return (\r\n            <Backdrop className={classes.backdrop} open={true}>\r\n                <Box style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n                    <Box width={300} height={300} style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                        <Description className={classes.loadingFile} />\r\n                    </Box>\r\n\r\n                    <Typography>Cargando Diseño de Aprendizaje...</Typography>\r\n                </Box>\r\n            </Backdrop>\r\n        );\r\n    };\r\n\r\n    const renderNotFoundMessage = () => {\r\n        return <div className={classes.error}>\r\n            <Alert severity='error'>\r\n                No se ha encontrado diseño.\r\n            </Alert>\r\n        </div>;\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                isError || errorSocket\r\n                    ? renderError()\r\n                    : isLoading || !design\r\n                        ? renderLoading()\r\n                        : data.design === {}\r\n                                ? renderNotFoundMessage()\r\n                                : renderContent()\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { Backdrop, Box, Button, CircularProgress, Container, makeStyles, Step, StepLabel, Stepper, TextField, Typography } from '@material-ui/core';\r\nimport { Code, Done, Email, VpnKey } from '@material-ui/icons';\r\nimport React, { useState } from 'react';\r\nimport { changeUserPassword, getUserByEmail, resendVerificationCode } from 'services/UserService';\r\nimport { useSnackbar } from 'notistack';\r\nimport { useHistory } from 'react-router';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        minHeight: 'calc(100vh - 128px)',\r\n        height: 'auto',\r\n    },\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        padding: 10,\r\n        borderRadius: theme.shape.borderRadius,\r\n        height: '100%',\r\n        [theme.breakpoints.down('xs')]: {\r\n            borderStyle: 'none',\r\n            padding: 0,\r\n        },\r\n    },\r\n    backButton: {\r\n        marginRight: theme.spacing(1),\r\n    },\r\n    instructions: {\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    buttonZone: {\r\n        display: 'flex',\r\n        justifySelf: 'flex-end',\r\n        justifyContent: 'flex-end',\r\n        [theme.breakpoints.down('sm')]: {\r\n            marginTop: 30,\r\n            paddingRight: 20,\r\n        },\r\n    },\r\n    body: {\r\n        maxWidth: 600,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        [theme.breakpoints.up('sm')]: {\r\n            height: 450,\r\n        },\r\n    },\r\n    content: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        padding: 20,\r\n        [theme.breakpoints.down('sm')]: {\r\n            padding: 40,\r\n        },\r\n    },\r\n    input: {\r\n        marginTop: 30,\r\n    },\r\n    codeForm: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        marginTop: 30,\r\n    },\r\n    codeButton: {\r\n        borderTopLeftRadius: 0,\r\n        borderBottomLeftRadius: 0,\r\n    },\r\n    codeInput: {\r\n        '& fieldset': {\r\n            borderTopRightRadius: 0,\r\n            borderBottomRightRadius: 0,\r\n        }\r\n    },\r\n    backdrop: {\r\n        zIndex: theme.zIndex.drawer + 1,\r\n        color: '#fff',\r\n    },\r\n}));\r\n\r\nconst emailInitialValue = {\r\n    value: '',\r\n    error: null\r\n};\r\n\r\nconst codeInitialValue = {\r\n    value: '',\r\n    error: null\r\n};\r\n\r\nconst passwordInitialValue = {\r\n    password: '',\r\n    confirm: '',\r\n    passwordError: null,\r\n    confirmError: null\r\n};\r\n\r\nexport const ResetPasswordPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [uid, setUid] = useState(null);\r\n    const [verificationCode, setVerificationCode] = useState(null);\r\n    const [codeForm, setCodeForm] = useState(codeInitialValue);\r\n    const [email, setEmail] = useState(emailInitialValue);\r\n    const [passwordForm, setPasswordForm] = useState(passwordInitialValue);\r\n    const steps = [\r\n        { icon: Email, label: 'Buscar cuenta por email' },\r\n        { icon: Code, label: 'Código de verificación' },\r\n        { icon: VpnKey, label: 'Restablecer contraseña' },\r\n        { icon: Done, label: 'Contraseña restablecida' },\r\n    ];\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email.value)) {\r\n            setEmail((prevState) => ({\r\n                ...prevState,\r\n                error: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const paswordsMatchs = () => {\r\n        if (!passwordForm.password.trim().length) return setPasswordForm({\r\n            ...passwordForm,\r\n            passwordError: 'Este campo es obligatorio',\r\n        });\r\n        if (!passwordForm.confirm.trim().length) return setPasswordForm({\r\n            ...passwordForm,\r\n            confirmError: 'Este campo es obligatorio',\r\n        });\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(passwordForm.password)){\r\n            setPasswordForm((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contraseña debe tener al menos un carácter en minúscula, uno en mayúscula, un número y debe tener entre 8 y 16 caractéres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (passwordForm.password !== passwordForm.confirm) {\r\n            setPasswordForm((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseñas no coinciden.',\r\n                confirmError: 'Las contraseñas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleNext = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n        setVerificationCode(null);\r\n        setEmail(emailInitialValue);\r\n    };\r\n\r\n    const handleChangeEmail = ({ target }) => {\r\n        setEmail({\r\n            value: target.value,\r\n            error: null,\r\n        });\r\n    };\r\n\r\n    const handleSearchAccount = async (e) => {\r\n        e.preventDefault();\r\n        if (!email.value.trim().length) return setEmail({\r\n            ...email,\r\n            error: 'Este campo es obligatorio',\r\n        });\r\n        if (!isEmailValid()) return;\r\n        setLoading(true);\r\n        const resp = await getUserByEmail(email.value);\r\n        setLoading(false);\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar('Se ha enviado un código de verificación a su correo electrónico.', { variant: 'success', autoHideDuration: 5000 });\r\n        setVerificationCode(resp.data.randomCode);\r\n        setUid(resp.data.user._id);\r\n        handleNext();\r\n    };\r\n\r\n    const handleVerifyCode = (e) => {\r\n        e.preventDefault();\r\n        if(codeForm.value.trim().toUpperCase() !== verificationCode.trim().toUpperCase()) return setCodeForm({\r\n            ...codeForm,\r\n            error: 'El código ingresado no coincide'\r\n        });\r\n        handleNext();\r\n    };\r\n\r\n    const handleResetPassword = async (e) => {\r\n        e.preventDefault();\r\n        if(!paswordsMatchs()) return;\r\n        const resp = await changeUserPassword({ uid, newPassword: passwordForm.password });\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar(resp.message, { variant: 'success', autoHideDuration: 5000 });\r\n        handleNext();\r\n    };\r\n\r\n    const handleChangePassword = ({target}) => {\r\n        setPasswordForm({\r\n            ...passwordForm,\r\n            [target.name]: target.value,\r\n            passwordError: null,\r\n            confirmError: null,\r\n        });\r\n    }\r\n    \r\n    const handleChangeCode = ({target}) => {\r\n        setCodeForm({\r\n            ...codeForm,\r\n            value: target.value,\r\n            error: null,\r\n        });\r\n    }\r\n\r\n    const handleResendCode = async (e) => {\r\n        setLoading(true);\r\n        setCodeForm(codeInitialValue);\r\n        const resp = await resendVerificationCode(email.value);\r\n        setLoading(false);\r\n        if (!resp.ok) return enqueueSnackbar(resp.message, { variant: 'error', autoHideDuration: 5000 });\r\n        enqueueSnackbar(resp.message, { variant: 'success', autoHideDuration: 2000 });\r\n        setVerificationCode(resp.data.randomCode);\r\n    }\r\n    \r\n    const handleFinish = (e) => {\r\n        e.preventDefault();\r\n        history.push('/');\r\n    };\r\n\r\n    const emailForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Busca tu cuenta por correo electrónico\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Introduce la dirección de correo electrónico asociada a tu cuenta para poder identificarte.\r\n                </Typography>\r\n                <TextField\r\n                    className={classes.input}\r\n                    label='Email'\r\n                    type='email'\r\n                    value={email.value}\r\n                    error={!!email.error}\r\n                    helperText={email.error}\r\n                    onChange={handleChangeEmail}\r\n                    placeholder='Ingresa correo electrónico'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                    autoFocus\r\n                />\r\n            </Box>\r\n        );\r\n    };\r\n    \r\n    const verificationCodeForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Código de verificación\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Introduce el código de verificación que hemos enviado a tu correo electrónico.\r\n                    Si este no ha llegado a tu correo, puedes reenviar un código haciendo click en el botón \"Reenviar Código\".\r\n                </Typography>\r\n                <div className={classes.codeForm}>\r\n                    <TextField\r\n                        className={classes.codeInput}\r\n                        value={codeForm.value}\r\n                        error={!!codeForm.error}\r\n                        helperText={codeForm.error}\r\n                        onChange={handleChangeCode}\r\n                        label='Código verificación'\r\n                        type='text'\r\n                        placeholder='Ingresa código verificación'\r\n                        variant='outlined'\r\n                        inputProps={{ style: { textTransform: \"uppercase\"} }}\r\n                        fullWidth\r\n                        />\r\n                    <Button\r\n                        className={classes.codeButton}\r\n                        size='small'\r\n                        variant=\"contained\" \r\n                        color=\"primary\"\r\n                        disableElevation \r\n                        onClick={handleResendCode}\r\n                    >\r\n                        Reenviar Código\r\n                    </Button>\r\n                </div>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const resetPasswordForm = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Restablecer contraseña\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    Complete el siguiente formulario para reestablecer su contraseña.\r\n                </Typography>\r\n                <TextField\r\n                    name='password'\r\n                    className={classes.input}\r\n                    value={passwordForm.password}\r\n                    onChange={handleChangePassword}\r\n                    error={!!passwordForm.passwordError}\r\n                    helperText={passwordForm.passwordError}\r\n                    label='Nueva contraseña'\r\n                    type='password'\r\n                    placeholder='Ingresa la nueva contraseña'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                />\r\n                <TextField\r\n                    name='confirm'\r\n                    className={classes.input}\r\n                    value={passwordForm.confirm}\r\n                    onChange={handleChangePassword}\r\n                    error={!!passwordForm.confirmError}\r\n                    helperText={passwordForm.confirmError}\r\n                    label='Confirmar contraseña'\r\n                    type='password'\r\n                    placeholder='Ingresa nuevamente la nueva contraseña'\r\n                    variant='outlined'\r\n                    fullWidth\r\n                />\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const finishStep = () => {\r\n        return (\r\n            <Box className={classes.content}>\r\n                <Typography variant='h5' align='center' gutterBottom>\r\n                    Contraseña restablecida\r\n                </Typography>\r\n                <Typography variant='body1' align='center' gutterBottom>\r\n                    La contraseña de su cuenta se ha reestablecido con éxito.\r\n                    Por favor haga click en el boton \"Finalizar\" para redirigirlo a la página de inicio.\r\n                </Typography>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const getStepContent = (step) => {\r\n        switch (step) {\r\n            case 0:\r\n                return emailForm();\r\n            case 1:\r\n                return verificationCodeForm();\r\n            case 2:\r\n                return resetPasswordForm();\r\n            case 3:\r\n                return finishStep();\r\n            default:\r\n                return 'Unknown step';\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Container className={classes.root}>\r\n            <Box className={classes.container}>\r\n                <Stepper style={{width:'100%'}} activeStep={activeStep} alternativeLabel>\r\n                    {steps.map((step) => (\r\n                        <Step key={step.label}>\r\n                            <StepLabel>{step.label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                <form className={classes.body} onSubmit={activeStep === 0 ? handleSearchAccount : activeStep === 1 ? handleVerifyCode : activeStep === 2 ? handleResetPassword : handleFinish } noValidate>\r\n                    {getStepContent(activeStep)}\r\n                        <Box className={classes.buttonZone}>\r\n                            {activeStep === 1 && (<Button\r\n                                disabled={activeStep === 0}\r\n                                onClick={handleBack}\r\n                                className={classes.backButton}\r\n                                >\r\n                                Volver\r\n                            </Button>)}\r\n                            <Button disableElevation variant=\"contained\" type='submit' color=\"primary\">\r\n                                {activeStep === steps.length - 1 ? 'Finalizar': 'Siguiente'}\r\n                            </Button>\r\n                        </Box>\r\n                </form>\r\n            </Box>\r\n            <Backdrop className={classes.backdrop} open={loading}>\r\n                <CircularProgress color=\"inherit\" />\r\n            </Backdrop>\r\n        </Container>\r\n    );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Redirect,\r\n    Route\r\n} from 'react-router-dom';\r\nimport { LandingPage } from 'pages/LandingPage/LandingPage';\r\nimport { PublicRoute } from 'router/PublicRoute';\r\nimport { PrivateRoute } from 'router/PrivateRoute';\r\nimport { MyDesignsPage } from 'pages/Navigation/MyDesigns/MyDesignsPage';\r\nimport { UserProfile } from 'pages/User/UserProfile/UserProfile';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { NavBar } from 'components/NavBar';\r\nimport { UserConfigProvider } from 'contexts/UserConfigContext';\r\nimport { Footer } from 'components/Footer';\r\nimport { CssBaseline, makeStyles } from '@material-ui/core';\r\nimport { SharedWithMePage } from 'pages/Navigation/SharedWithMe/SharedWithMePage';\r\nimport { PublicRepositoryPage } from 'pages/Navigation/PublicRepository/PublicRepositoryPage';\r\nimport { SearchUsersPage } from 'pages/User/SearchUsersPage/SearchUsersPage';\r\nimport { DesignPage } from 'pages/DesignPage/DesignPage';\r\nimport { ConfirmationModal } from 'components/ConfirmationModal';\r\nimport { DesignPageReader } from 'pages/DesignPageReader/DesignPageReader'\r\nimport { SharedLinkPage } from 'pages/SharedLink/SharedLinkPage';\r\nimport { ResetPasswordPage } from 'pages/Auth/ResetPasswordPage';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    '@global': {\r\n        'html, body':\r\n        {\r\n            height: '100%',\r\n        },\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            height: '0.6em',\r\n            width: '0.6em',\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n\r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n}));\r\n\r\nexport const AppRouter = () => {\r\n    const { authState, verifyToken } = useAuthState();\r\n    const { token, checking } = authState;\r\n    useStyles();\r\n\r\n    useEffect(() => {\r\n        verifyToken();\r\n    }, [verifyToken]);\r\n\r\n    if (checking) {\r\n        return <h1>Espere...</h1>;\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <div>\r\n                <UserConfigProvider>\r\n                    <CssBaseline />\r\n                    <NavBar />\r\n                        <Switch>\r\n                            <PublicRoute exact path=\"/\" component={LandingPage} isAuthenticated={!checking && !!token} />\r\n                            <PublicRoute exact path=\"/reset-password\" component={ResetPasswordPage} isAuthenticated={!checking && !!token} />\r\n                            <Route exact path=\"/shared-link/:link\" component={SharedLinkPage} />\r\n                            <PrivateRoute exact path=\"/profile/:uid\" component={UserProfile} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/my-designs\" component={MyDesignsPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute path=\"/my-designs/:urlPath+/\" component={MyDesignsPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/shared-with-me\" component={SharedWithMePage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/public-repository\" component={PublicRepositoryPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/users/search\" component={SearchUsersPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/designs/:id\" component={DesignPage} isAuthenticated={!checking && !!token} />\r\n                            <PrivateRoute exact path=\"/designs/reader/:id\" component={DesignPageReader} isAuthenticated={!checking && !!token} />\r\n                            <Redirect to=\"/\" />\r\n                        </Switch>\r\n                        <ConfirmationModal />\r\n                    <Footer />\r\n                </UserConfigProvider>\r\n            </div>\r\n        </Router>\r\n    );\r\n};","import 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\nimport { AuthProvider } from \"contexts/AuthContext\";\r\nimport { SocketProvider } from \"contexts/SocketContext\";\r\nimport { UiProvider } from \"contexts/ui/UiContext\";\r\nimport { AppRouter } from \"router/AppRouter\";\r\nimport { DesignProvider } from \"contexts/design/DesignContext\";\r\nimport { SharedDocProvider } from \"contexts/SharedDocContext\";\r\nimport { SnackbarProvider } from 'notistack';\r\nimport { Grow } from '@material-ui/core';\r\n\r\n\r\nconst queryClient = new QueryClient()\r\n\r\nfunction LearningActivityDesigner() {\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <SnackbarProvider maxSnack={3} anchorOrigin={{ vertical: 'bottom', horizontal: 'left', }} TransitionComponent={Grow}>\r\n                <UiProvider>\r\n                    <AuthProvider>\r\n                        <DesignProvider>\r\n                            <SocketProvider>\r\n                                <SharedDocProvider>\r\n                                    <AppRouter />\r\n                                </SharedDocProvider>\r\n                            </SocketProvider>\r\n                        </DesignProvider>\r\n                    </AuthProvider>\r\n                </UiProvider>\r\n            </SnackbarProvider>\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n\r\nexport default LearningActivityDesigner;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport LearningActivityDesigner from './App';\r\n\r\nReactDOM.render(\r\n    <LearningActivityDesigner />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}