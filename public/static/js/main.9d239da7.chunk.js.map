{"version":3,"sources":["utils/fetch.js","contexts/AuthContext.js","contexts/SocketContext.js","hooks/useSocket.js","types/index.js","types/ui.js","types/design.js","contexts/ui/uiReducer.js","contexts/ui/UiContext.js","assets/img/Logo.png","hooks/useForm.js","components/ModalFormWithImage.js","pages/LandingPage/LoginModal.js","pages/LandingPage/RegisterModal.js","pages/LandingPage/LandingPage.js","router/PublicRoute.js","router/PrivateRoute.js","utils/textFormatters.js","services/DesignService.js","utils/timeFormatters.js","components/Design.js","components/DesignsContainer.js","services/FolderService.js","components/DesignsFolder.js","components/FoldersContainer.js","pages/Navigation/LeftPanel.js","pages/Navigation/MyDesigns/DesignsBreadcrumbs.js","components/DesignSkeleton.js","pages/Navigation/MyDesigns/RecentDesigns.js","pages/Navigation/MyDesigns/MyDesignsPage.js","services/UserService.js","pages/User/UserProfile/EditProfileModal.js","components/UserCard.js","pages/User/UserProfile/ShowContactsModal.js","pages/User/UserProfile/UserProfile.js","contexts/UserConfigContext.js","theme/theme.js","components/NavBar.js","components/Footer.js","pages/Navigation/SharedWithMe/SharedWithMePage.js","pages/Navigation/PublicRepository/PublicRepositoryPage.js","pages/User/SearchUsersPage/SearchUsersPage.js","pages/DesignPage/Workspace/DesignGraphic.js","contexts/design/designReducer.js","contexts/design/DesignContext.js","pages/DesignPage/Workspace/Task.js","components/StackedBar.js","pages/DesignPage/Workspace/LearningActivity.js","pages/DesignPage/Workspace/DesignWorkspace.js","services/CategoryService.js","pages/DesignPage/Metadata/LearningResult.js","pages/DesignPage/Metadata/BloomPiramid.js","pages/DesignPage/Metadata/BloomVerbList.js","pages/DesignPage/Metadata/LearningResultModal.js","pages/DesignPage/Metadata/DesignMetadata.js","components/TabPanel.js","services/BloomService.js","pages/DesignPage/DesignPage.js","router/AppRouter.js","App.js","index.js"],"names":["baseUrl","process","REACT_APP_API","fetchWithoutToken","endpoint","data","a","method","url","fetch","resp","json","headers","body","JSON","stringify","fetchWithToken","token","localStorage","getItem","AuthContext","createContext","useAuthState","context","useContext","undefined","Error","initialState","checking","user","AuthProvider","children","useState","authState","setAuthState","login","email","password","ok","register","userData","verifyToken","useCallback","setItem","useEffect","removeItem","Provider","value","logout","SocketContext","useSocketState","SocketProvider","serverPath","socket","setSocket","online","setOnline","connectSocket","tempSocket","io","connect","transports","autoConnect","forceNew","query","disconnectSocket","disconnect","connected","on","useSocket","types","ui","toggleLoginModal","toggleModal","toggleRegisterModal","toggleLearningResultModal","updateFolderPath","design","updateDesign","setCurrentLearningResultField","clearCurrentLearningResult","setCurrentLearningResult","setBloomCategories","setBloomVerbs","uiReducer","state","action","type","payload","isRegisterModalOpen","folderPath","UiContext","useUiState","isLoginModalOpen","isLearningResultModalOpen","isEditProfileModalOpen","isContactsModalOpen","UiProvider","useReducer","uiState","dispatch","useForm","values","setValues","reset","handleInputChange","target","name","useStyles","makeStyles","theme","close","position","top","right","padding","header","display","justifyContent","alignItems","ModalFormWithImage","React","memo","isOpen","handleClose","maxWidth","title","subtitle","image","content","actions","classes","Dialog","fullWidth","open","onClose","DialogTitle","className","disableTypography","IconButton","onClick","color","size","CloseRounded","Grid","container","spacing","item","xs","Typography","align","variant","component","DialogContent","DialogActions","formcontrol","flexDirection","margin","width","form","marginLeft","marginRight","overflow","logo","marginTop","marginBottom","footer","paddingTop","paddingBottom","link","borderRadius","backgroundColor","initialErrors","emailError","passwordError","LoginModal","formErrors","setFormErrors","errorFromServer","setErrorFromServer","showPassword","setShowPassword","formLoginValues","handleInputFormChange","e","prevState","handleLogin","preventDefault","Object","keys","map","key","index","trim","reduce","b","test","length","message","src","Logo","alt","onSubmit","noValidate","Alert","severity","TextField","error","helperText","onChange","label","InputProps","endAdornment","onMouseDown","event","Visibility","VisibilityOff","Button","style","Link","href","console","log","nameError","lastnameError","confirmPasswordError","RegisterModal","lastname","confirmPassword","formData","handleRegister","root","minHeight","LandingPage","PublicRoute","isAuthenticated","Component","rest","props","to","PrivateRoute","location","pathname","formatName","firstName","split","firstLastname","getUserInitials","substring","getRecentDesigns","getDesignsByFolder","path","pageParam","from","getPublicDesignsByUser","id","createDesign","deleteDesignById","TimeFormatter","toHoursAndMinutes","timeInMinutes","hours","Math","floor","minutes","round","toMinutes","parseInt","border","palette","divider","minWidth","cursor","userSelect","background","boxShadow","designHover","ownerInfo","borderTop","paddingLeft","paddingRight","row","rowJustified","col","ellipsis","whiteSpace","textOverflow","designIcon","fontSize","alignSelf","justifySelf","deleteIcon","Design","_id","updatedAt","metadata","folder","owner","canDelete","queryClient","useQueryClient","history","useHistory","workingTime","deleteMutation","useMutation","onMutate","cancelQueries","previousDesigns","getQueryData","previousPublicDesigns","includes","setQueryData","oldData","oldPage","pages","find","page","designs","newDesigns","filter","newPage","assign","newPages","indexOf","previousRecentDesigns","onError","onSettled","invalidateQueries","handleDeleteDesign","stopPropagation","mutate","Card","elevation","CardActionArea","CardContent","Description","category","Date","toLocaleDateString","Star","uid","Delete","CardActions","Avatar","occupation","designsContainer","flexGrow","flexWrap","textAlign","loadMore","DesignsContainer","status","isFetchingNextPage","fetchNextPage","hasNextPage","i","ownerId","getfolderByPath","paper","textDecoration","text","primary","folderBody","folderName","DesignsFolder","Box","Folder","FoldersContainer","icon","LeftPanel","useLocation","createDesignMutation","onSuccess","push","handleCreateDesign","List","aria-label","ListItem","button","selected","Home","ListItemText","Divider","Group","Public","default","DesignsBreadcrumbs","Breadcrumbs","newPath","folderList","shift","createBreadcrumbsLinks","height","DesignSkeleton","Skeleton","animation","recentDesigns","RecentDesigns","n","trunc","useQuery","isLoading","isError","createSkeletons","Array","designList","leftPanel","borderRight","workspace","workSpace","rightPanel","borderLeft","breadCrumbs","designsAndFoldersContainer","MyDesignsPage","urlparams","useParams","designsRef","useRef","setWidth","setHeight","urlPath","designsQuery","useInfiniteQuery","refetchOnWindowFocus","getNextPageParam","lastPage","nPages","foldersQuery","current","offsetHeight","offsetWidth","md","lg","ref","getUser","searchUsers","updateContact","contacts","newData","updateProfileInformation","institution","country","city","description","res","closeButton","grey","photoProfile","errorContainer","EditProfileModal","updateProfileInformationMutation","previousUserProfile","handleSaveInformation","aria-labelledby","dividers","justify","img","sm","multiline","rows","zIndex","card","photo","UserCard","scoreMean","handleViewUser","ShowContactsModal","contact","designPanel","spaceFirstDataFirstData","centerGrid","justifyItems","spaceSecondData","spaceData","spaceDesign","spaceIcons","UserProfile","refetch","updateConctactMutation","handleAddContact","handleDeleteContact","spaceFirstData","startIcon","Edit","Close","PersonAdd","Apartment","Email","UserConfigContext","UserConfigProvider","darkTheme","modeAdvanced","userConfig","setUserConfig","parse","isDarkActive","createMuiTheme","dark","orange","light","lightBlue","main","secondary","deepOrange","deepPurple","navbar","ThemeProvider","brand","navbarColor","navbarLetter","menuColor","menu","NavBar","isMenuOpen","setMenuOpen","useUserConfigState","setFilter","handleChangeUserConfig","checked","handleSearchUsers","AppBar","Toolbar","OutlinedInput","placeholder","iconButton","Search","currentTarget","Menu","anchorEl","Boolean","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","FormControlLabel","control","Switch","clear","ButtonGroup","pos","Footer","Container","SharedWithMePage","PublicRepositoryPage","usersContainer","SearchUsersPage","q","queryString","search","redirectTo","users","spaceGraphic","spaceTasks","DesignGraphic","learningResultPie","activityFormatBar","activityModalityBar","ctx","document","getElementById","Chart","labels","datasets","borderWidth","options","legend","boxWidth","scales","xAxes","gridLines","stacked","yAxes","layout","left","bottom","designReducer","currentLearningResult","field","verb","editing","bloomCategories","bloomVerbs","DesignContext","useDesignState","DesignProvider","designState","taskSpacing","trashIcon","tasksSpacing","taskSpacingDescription","taskSpacingDescriptionBD","colorLearningType","timeField","grid","Task","learningActivityIndex","task","learningType","modality","format","timeHours","duration","timeMinutes","editTask","emit","designId","handleChangeDropdown","Paper","square","FormControl","Select","Tooltip","onBlur","inputProps","min","max","colorBox","StackedBar","items","colors","arrow","unitSpacing","titleUnitSpacing","graphicUnitSpacing","spacingDescriptionlearningActivity","spacingDescription","spacingLinkedResults","buttonPos","gridTask","learningResultList","maxHeight","overflowX","LearningActivity","learningActivity","editUnit","handleDeleteUnit","handleAddTask","maxLength","learningActivities","tasks","results","result","Checkbox","learningResults","lr","isSelected","indexLearningResults","forEach","r","_indexLearningResults","handleToggleLearningResult","buttonGroupWorkSpace","textLefPanel","borderBottom","LeftPanelMetadata","textLefPanelMetadata","workSpaceUnits","DesignWorkspace","workingTimeDesign","classSize","priorKnowledge","objective","getCategories","LearningResult","uiDispatch","designDispatch","gutterBottom","v","_index","clipPath","option","transition","crear","evaluar","analizar","aplicar","comprender","recordar","active","BloomPiramid","isActive","toLowerCase","BloomVerbList","Radio","LearningResultModal","setDescription","activeStep","setActiveStep","steps","handleCloseModal","Stepper","alternativeLabel","Step","StepLabel","disabled","prevActiveStep","learningResult","categoryPopOver","DesignMetadata","workingTimeDesignHours","workingTimeDesignMinutes","workingTimeHours","workingTimeMinutes","isPublic","editDesign","InputLabel","labelId","categories","c","MenuProps","TabPanel","other","role","hidden","getBloomCategories","getBloomVerbs","menuLetters","menuLettersSelected","tabBar","usersConnecteds","a11yProps","DesignPage","isMounted","setUsersList","tabIndex","setTabIndex","setError","prefetchBloomCategories","prefetchBloomVerbs","off","Tabs","newValue","Tab","AppRouter","CssBaseline","exact","QueryClient","LearningActivityDesigner","QueryClientProvider","client","ReactDOM","render"],"mappings":"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","file":"static/js/main.9d239da7.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API;\r\n//const baseUrl = 'http://localhost:4000/api';\r\nconst fetchWithoutToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url);\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nconst fetchWithToken = async (endpoint, data, method = 'GET') => {\r\n    const url = `${baseUrl}/${endpoint}`;\r\n    const token = localStorage.getItem('token') || '';\r\n    if (method === 'GET') {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        return await resp.json();\r\n    } else {\r\n        const resp = await fetch(url, {\r\n            method,\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'x-token': token,\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n        return await resp.json();\r\n    }\r\n};\r\n\r\nexport {\r\n    fetchWithoutToken,\r\n    fetchWithToken,\r\n};\r\n","import React, { useState, useEffect, useContext, createContext, useCallback } from 'react';\r\nimport { fetchWithoutToken, fetchWithToken } from 'utils/fetch';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function useAuthState() {\r\n\tconst context = useContext(AuthContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useAuthState must be used within a AuthProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n    checking: true,\r\n\tuser: null,\r\n\ttoken: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n\tconst [authState, setAuthState] = useState(initialState);\r\n\r\n\tconst login = async ( email, password ) => {\r\n        const resp = await fetchWithoutToken('auth/login', { email, password }, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst register = async (userData) => {\r\n        const resp = await fetchWithoutToken('auth/register', userData, 'POST');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n        }\r\n        return resp;\r\n    };\r\n\r\n\tconst logout = () => {\r\n        setAuthState({\r\n            checking: false,\r\n            user: null,\r\n\t\t\ttoken: null,\r\n        });\r\n    };\r\n\r\n\tconst verifyToken = useCallback( async () => {\r\n        const token = localStorage.getItem('token');\r\n        if(!token){\r\n            setAuthState({\r\n\t\t\t\tuser: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n        const resp = await fetchWithToken('auth/renew');\r\n        if(resp.ok){\r\n            const { user, token } = resp.data;\r\n            localStorage.setItem('token', token);\r\n            setAuthState({\r\n                user: user,\r\n                token: token,\r\n                checking: false,\r\n            });\r\n            return true;\r\n        } else {\r\n            setAuthState({\r\n                user: null,\r\n                token: null,\r\n                checking: false,\r\n            });\r\n            return false;\r\n        }\r\n    }, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authState.token === null) {\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t} else {\r\n\t\t\tlocalStorage.setItem('token', authState.token);\r\n\t\t}\r\n\t}, [authState.token]);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ \r\n\t\t\tauthState,\r\n\t\t\tlogin,\r\n\t\t\tregister,\r\n\t\t\tlogout,\r\n\t\t\tverifyToken,\r\n\t\t\tsetAuthState \r\n\t\t}}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n};\r\n","import { createContext, useContext, useEffect } from \"react\";\r\nimport { useSocket } from \"hooks/useSocket\";\r\nimport { useAuthState } from \"./AuthContext\";\r\n\r\nexport const SocketContext = createContext();\r\n\r\nexport const useSocketState = () => {\r\n\tconst context = useContext(SocketContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useSocketState must be used within a SocketProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const SocketProvider = ({ children }) => {\r\n\r\n    const { authState } = useAuthState();\r\n    const { socket, online, connectSocket, disconnectSocket } = useSocket('http://localhost:4000');\r\n    \r\n    useEffect(() => {\r\n        const logged = !!authState.token;\r\n        if( logged ) connectSocket();\r\n    }, [ authState.token, connectSocket ]);\r\n\r\n    useEffect(()=>{\r\n        const logged = !!authState.token;\r\n        if( !logged ) disconnectSocket();\r\n    }, [ authState.token, disconnectSocket ]);\r\n\r\n    return (\r\n        <SocketContext.Provider value={{ socket, online }}>\r\n            { children }\r\n        </SocketContext.Provider>\r\n    );\r\n};","import { useAuthState } from \"contexts/AuthContext\";\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport const useSocket = (serverPath) => {\r\n    const [socket, setSocket] = useState(null);\r\n    const [online, setOnline] = useState(false);\r\n    const { authState } = useAuthState();\r\n\r\n    const connectSocket = useCallback(() => {\r\n        const token = authState.token;\r\n        const tempSocket = io.connect( serverPath, {\r\n            transports: ['websocket'],\r\n            autoConnect: true,\r\n            forceNew: true,\r\n            query: {\r\n                'x-token': token,\r\n            },\r\n        });\r\n        setSocket(tempSocket);\r\n    }, [serverPath, authState.token]);\r\n\r\n    const disconnectSocket = useCallback(() => {\r\n        socket?.disconnect();\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        setOnline( socket?.connected );\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        socket?.on('connect', () => setOnline(true));\r\n        socket?.on('disconnect', () => setOnline(false));\r\n    }, [socket]);\r\n\r\n\r\n    return {\r\n        socket,\r\n        online,\r\n        connectSocket,\r\n        disconnectSocket\r\n    };\r\n};","import ui from 'types/ui';\r\nimport design from 'types/design';\r\n\r\nconst types = {\r\n    ui,\r\n    design,\r\n};\r\n\r\nexport default types;","const ui = {\r\n    toggleLoginModal: '[UI] toggle login modal',\r\n    toggleModal: '[UI] toggle modal',\r\n    toggleRegisterModal: '[UI] toggle register modal',\r\n    toggleLearningResultModal: '[UI] toggle learning result modal',\r\n    updateFolderPath: '[UI] update folder path',\r\n};\r\n\r\nexport default ui;","const design = {\r\n    updateDesign: '[DESIGN] toggle login modal',\r\n    setCurrentLearningResultField: '[DESIGN] set learning result field',\r\n    clearCurrentLearningResult: '[DESIGN] clear current learning result',\r\n    setCurrentLearningResult: '[DESIGN] set current learning result',\r\n    setBloomCategories: '[DESIGN] set bloom categories',\r\n    setBloomVerbs: '[DESIGN] set bloom verbs',\r\n};\r\n\r\nexport default design;","import types from \"types\";\r\n\r\n\r\nexport const uiReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.ui.toggleModal:\r\n            return {\r\n                ...state,\r\n                ['is' + action.payload + 'ModalOpen']: !state['is' + action.payload + 'ModalOpen'],\r\n            };\r\n        case types.ui.toggleRegisterModal:\r\n            return {\r\n                ...state,\r\n                isRegisterModalOpen: !state.isRegisterModalOpen,\r\n            };\r\n        case types.ui.updateFolderPath:\r\n            if (state.folderPath !== action.payload) {\r\n                return {\r\n                    ...state,\r\n                    folderPath: action.payload,\r\n                };\r\n            } else return state;\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { uiReducer } from 'contexts/ui/uiReducer';\r\n\r\nconst UiContext = createContext();\r\n\r\nexport function useUiState() {\r\n\tconst context = useContext(UiContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUiState must be used within a UiProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tfolderPath: '/',\r\n\tisLoginModalOpen: false,\r\n\tisRegisterModalOpen: false,\r\n\tisLearningResultModalOpen: false,\r\n\tisEditProfileModalOpen: false,\r\n\tisContactsModalOpen: false,\r\n};\r\n\r\nexport const UiProvider = ({ children }) => {\r\n\r\n\tconst [ uiState, dispatch ] = useReducer(uiReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<UiContext.Provider value={ { uiState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</UiContext.Provider>\r\n\t);\r\n};\r\n","export default \"data:image/png;base64,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\"","import { useState } from 'react';\r\n\r\n\r\nexport const useForm = ( initialState = {} ) => {\r\n    \r\n    const [values, setValues] = useState(initialState);\r\n\r\n    const reset = () => {\r\n        setValues( initialState );\r\n    }\r\n\r\n\r\n    const handleInputChange = ({ target }) => {\r\n        setValues({\r\n            ...values,\r\n            [ target.name ]: target.value\r\n        });\r\n\r\n    }\r\n\r\n    return [ values, handleInputChange, reset, setValues ];\r\n\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    DialogActions,\r\n    Typography,\r\n    IconButton,\r\n    Grid,\r\n} from '@material-ui/core';\r\nimport { CloseRounded } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    close: {\r\n        position: 'absolute',\r\n        top: 5,\r\n        right: 5,\r\n        padding: 15,\r\n    },\r\n    header: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    }\r\n}));\r\n\r\nexport const ModalFormWithImage = React.memo(({ isOpen, handleClose, maxWidth = 'sm', title = '', subtitle = '', image, content, actions }) => {\r\n    const classes = useStyles();\r\n    return (\r\n        <Dialog\r\n            fullWidth={true}\r\n            maxWidth={maxWidth}\r\n            open={isOpen}\r\n            onClose={handleClose}\r\n        >\r\n            <DialogTitle className={classes.header} disableTypography>\r\n                <IconButton className={classes.close} onClick={handleClose} color=\"inherit\" size='small'>\r\n                    <CloseRounded />\r\n                </IconButton>\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={12}>\r\n                        {image}\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='h5' component='p'>\r\n                            {title}\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Typography align='center' variant='subtitle1' component='h1'>\r\n                            {subtitle}\r\n                        </Typography>\r\n                    </Grid>\r\n                </Grid>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                {content}\r\n            </DialogContent>\r\n            {\r\n                (actions) && <DialogActions>\r\n                    {actions}\r\n                </DialogActions>\r\n            }\r\n        </Dialog>\r\n    );\r\n});\r\n\r\nModalFormWithImage.propTypes = {\r\n    isOpen: PropTypes.bool.isRequired,\r\n    handleClose: PropTypes.func.isRequired,\r\n    image: PropTypes.object.isRequired,\r\n    content: PropTypes.object,\r\n    actions: PropTypes.object,\r\n}; ","import React, { useState } from 'react';\r\nimport {\r\n    Button,\r\n    makeStyles,\r\n    IconButton,\r\n    TextField,\r\n    Link\r\n} from '@material-ui/core';\r\n\r\nimport { Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    formcontrol: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        margin: 'auto',\r\n        width: 'fit-content',\r\n    },\r\n    margin: {\r\n        margin: theme.spacing(1),\r\n    },\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n        overflow: 'auto',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    link: {\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    emailError: null,\r\n    passwordError: null,\r\n};\r\n\r\nexport const LoginModal = () => {\r\n\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { login } = useAuthState();\r\n    const [formErrors, setFormErrors] = useState(initialErrors);\r\n    const [errorFromServer, setErrorFromServer] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [formLoginValues, handleInputChange, reset] = useForm({\r\n        email: 'aguzman2016@alu.uct.cl',\r\n        password: 'Mameluco123'\r\n    });\r\n    const { email, password } = formLoginValues;\r\n    const { emailError, passwordError } = formErrors;\r\n\r\n    const isFormComplete = () => {\r\n        return Object.keys(formLoginValues).map((key, index) => {\r\n            if (formLoginValues[key].trim() === '') {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState) => ({\r\n                    ...prevState,\r\n                    [key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    };\r\n\r\n    const isEmailValid = () => {\r\n        if (!/^[-\\w.%+]{1,64}@(?:[A-Z0-9]{1,63}\\.){1,125}[A-Z]{2,63}$/i.test(email)) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                emailError: 'El correo debe tener la siguiente estructura: example@example.com',\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const isPasswordValid = () => {\r\n        if (password.length >= 8 && password.length <= 16) return true;\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            passwordError: 'La contraseña debe tener entre 8 y 16 caracteres.',\r\n        }));\r\n        return false;\r\n    };\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState) => ({\r\n            ...prevState,\r\n            [e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!isEmailValid()) return;\r\n        if (!isPasswordValid()) return;\r\n        const resp = await login(email, password);\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n        reset();\r\n    };\r\n\r\n    const recoverPassword = (e) => {\r\n        e.preventDefault();\r\n        console.log('Redirigir a recuperar contraseña...');\r\n    }\r\n\r\n    const handleClickShowPassword = () => {\r\n        setShowPassword(!showPassword);\r\n    };\r\n\r\n    const handleMouseDownPassword = (event) => {\r\n        event.preventDefault();\r\n    };\r\n\r\n    const toRegister = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <ModalFormWithImage\r\n                isOpen={uiState.isLoginModalOpen}\r\n                handleClose={handleClose}\r\n                title='¡Bienvenido!'\r\n                subtitle='Completa los campos para ingresar con tu cuenta'\r\n                image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n                content={\r\n                    <form className={classes.form} onSubmit={handleLogin} noValidate>\r\n                        {errorFromServer && <Alert severity=\"error\"> {errorFromServer}</Alert>}\r\n                        <TextField\r\n                            error={!!emailError}\r\n                            helperText={emailError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"email\"\r\n                            value={email}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Email\"\r\n                            type=\"email\"\r\n                            fullWidth\r\n                        />\r\n                        <TextField\r\n                            error={!!passwordError}\r\n                            helperText={passwordError}\r\n                            margin=\"dense\"\r\n                            variant=\"outlined\"\r\n                            name=\"password\"\r\n                            value={password}\r\n                            onChange={handleInputFormChange}\r\n                            label=\"Contraseña\"\r\n                            type={showPassword ? 'text' : 'password'}\r\n                            fullWidth\r\n                            InputProps={{\r\n                                endAdornment:\r\n                                    <IconButton\r\n                                        onClick={handleClickShowPassword}\r\n                                        onMouseDown={handleMouseDownPassword}\r\n                                    >\r\n                                        {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                                    </IconButton>\r\n\r\n                            }}\r\n                        />\r\n                        <div className={classes.footer}>\r\n                            <Button variant='outlined' type='submit' fullWidth>\r\n                                Iniciar Sesión\r\n                            </Button>\r\n                            <div style={{ paddingTop: 20 }}>\r\n                                <Link href='#' align='center' variant=\"body1\" onClick={recoverPassword}>\r\n                                    ¿Olvidaste tu contraseña?\r\n                                </Link>\r\n                            </div>\r\n                            <div style={{ paddingBottom: 15, paddingTop: 10 }}>\r\n                                <Link href=\"#\" variant=\"body1\" onClick={toRegister}>\r\n                                    ¿No tienes cuenta? Registrate\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                }\r\n            />\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n    Button,\r\n    TextField,\r\n    Link,\r\n} from '@material-ui/core';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { ModalFormWithImage } from 'components/ModalFormWithImage';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    form: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        marginLeft: '10%',\r\n        marginRight: '10%',\r\n        width: '80%',\r\n    },\r\n    logo: {\r\n        display: 'block',\r\n        marginLeft: 'auto',\r\n        marginRight: 'auto',\r\n        width: '30%',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    footer: {\r\n        display: 'flex',\r\n        flexDirection:'column',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: 30,\r\n        paddingBottom: 15,\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    }\r\n}));\r\n\r\nconst initialErrors = {\r\n    nameError: null,\r\n    lastnameError: null,\r\n    emailError: null,\r\n    passwordError: null,\r\n    confirmPasswordError: null,\r\n};\r\n\r\nexport const RegisterModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { register } = useAuthState();\r\n    const [ errorFromServer, setErrorFromServer ] = useState(null);\r\n    const [ formErrors, setFormErrors ] = useState(initialErrors);\r\n    const [ formData, handleInputChange, reset ] = useForm({\r\n        name: '',\r\n        lastname: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n    });\r\n    const { name, lastname, email, password, confirmPassword } = formData;\r\n    const { nameError, lastnameError, emailError, passwordError, confirmPasswordError } = formErrors;\r\n    \r\n    const handleClose = () => {\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Register'\r\n        });\r\n        reset();\r\n        setFormErrors(initialErrors);\r\n        setErrorFromServer(null);\r\n    };\r\n    \r\n    const isFormComplete = () => {\r\n        return Object.keys( formData ).map((key, index) => {\r\n            if(formData[key].trim() === ''){\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: 'Este campo es requerido.',\r\n                }));\r\n                return false;\r\n            } else {\r\n                setFormErrors((prevState)=>({\r\n                    ...prevState,\r\n                    [ key + 'Error']: null,\r\n                }));\r\n            }\r\n            return true;\r\n        }).reduce((a, b) => a && b);\r\n    }\r\n\r\n    const paswordsMatchs = () => {\r\n        if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/.test(password)){\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'La contraseña debe tener al menos un carácter en minúscula, uno en mayúscula, un número y debe tener entre 8 y 16 caractéres de longitud.',\r\n            }));\r\n            return false;\r\n        }\r\n        if (password.trim() !== confirmPassword.trim()) {\r\n            setFormErrors((prevState) => ({\r\n                ...prevState,\r\n                passwordError: 'Las contraseñas no coinciden.',\r\n                confirmPasswordError: 'Las contraseñas no coinciden.'\r\n            }));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    const handleInputFormChange = (e) => {\r\n        setErrorFromServer(null);\r\n        setFormErrors((prevState)=>({\r\n            ...prevState,\r\n            [ e.target.name + 'Error']: null,\r\n        }));\r\n        handleInputChange(e);\r\n    }\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault();\r\n        if (!isFormComplete()) return;\r\n        if (!paswordsMatchs()) return;\r\n        let resp = await register( formData );\r\n        if (!resp.ok) setErrorFromServer(resp.message);\r\n        else dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const toLogin = (e) => {\r\n        e.preventDefault();\r\n        handleClose();\r\n        dispatch({ \r\n            type: types.ui.toggleModal,\r\n            payload: 'Login'\r\n        });\r\n    };\r\n\r\n    return (\r\n        <ModalFormWithImage\r\n            isOpen={ uiState.isRegisterModalOpen }\r\n            handleClose={ handleClose }\r\n            title='¡Bienvenido!'\r\n            subtitle='Completa los campos para registrar tu cuenta'\r\n            image={<img className={classes.logo} src={Logo} alt=\"Logo\" />}\r\n            content={\r\n                <form className={classes.form} onSubmit={handleRegister} noValidate>\r\n                    { errorFromServer && <Alert severity=\"error\">{ errorFromServer }</Alert> }\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!nameError}\r\n                        helperText={ nameError } \r\n                        margin=\"dense\" \r\n                        name=\"name\" \r\n                        value={ name } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Nombres\" \r\n                        type=\"text\" \r\n                        fullWidth\r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!lastnameError}\r\n                        helperText={ lastnameError } \r\n                        margin=\"dense\" \r\n                        name=\"lastname\" \r\n                        value={ lastname } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Apellidos\" \r\n                        type=\"text\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!emailError}\r\n                        helperText={ emailError } \r\n                        margin=\"dense\" \r\n                        name=\"email\" \r\n                        value={ email } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Email\" \r\n                        type=\"email\" \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!passwordError}\r\n                        helperText={ passwordError } \r\n                        margin=\"dense\" \r\n                        name=\"password\" \r\n                        value={ password } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    <TextField\r\n                        variant='outlined'\r\n                        error={!!confirmPasswordError}\r\n                        helperText={ confirmPasswordError } \r\n                        margin=\"dense\" \r\n                        name=\"confirmPassword\" \r\n                        value={ confirmPassword } \r\n                        onChange={ handleInputFormChange } \r\n                        label=\"Repetir contraseña\" \r\n                        type='password' \r\n                        fullWidth \r\n                    />\r\n                    \r\n                    <div className={classes.footer}>\r\n                        <Button color=\"primary\" variant='outlined' type='submit' fullWidth>\r\n                            Registrarme\r\n                        </Button>\r\n                        <Link href='#' style={{paddingTop:20, paddingBottom:15}} variant=\"body1\" onClick={toLogin}>\r\n                            ¿Ya tienes cuenta?\r\n                        </Link>\r\n                    </div>\r\n                    \r\n                </form>\r\n            }\r\n        />\r\n    );\r\n});","import { makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { LoginModal } from 'pages/LandingPage/LoginModal';\r\nimport { RegisterModal } from 'pages/LandingPage/RegisterModal';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        minHeight: 'calc(100vh - 64px)',\r\n    }\r\n}));\r\n\r\nexport const LandingPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <h1>LandingPage</h1>\r\n            <hr/>\r\n            <LoginModal />\r\n            <RegisterModal />\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PublicRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( !isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/my-designs\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPublicRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({\r\n    isAuthenticated,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    localStorage.setItem('lastPath', rest.location.pathname);\r\n    return (\r\n        <Route {...rest}\r\n            component={\r\n                (props) => (\r\n                    ( isAuthenticated )\r\n                        ? <Component {...props} />\r\n                        : <Redirect to=\"/\" />\r\n                )\r\n            }\r\n        />\r\n    );\r\n};\r\n\r\nPrivateRoute.propTypes = {\r\n    isAuthenticated: PropTypes.bool.isRequired,\r\n    component: PropTypes.func.isRequired\r\n}; \r\n","export const formatName = (name, lastname) => {\r\n    const firstName = name.split(' ')[0];\r\n    const firstLastname = lastname.split(' ')[0];\r\n    return `${ firstName } ${ firstLastname }`;\r\n};\r\n\r\nexport const getUserInitials = (name, lastname) => {\r\n    return `${ name.substring(0, 1) + lastname.substring(0, 1) }`;\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getRecentDesigns = async () => {\r\n    const resp = await fetchWithToken('design/recent');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getDesignsByFolder = async ( path, pageParam ) => {\r\n    const resp = await fetchWithToken('design/user', {\r\n        path,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getPublicDesignsByUser = async ( id, pageParam ) => {\r\n    const resp = await fetchWithToken(`design/public/user/`, {\r\n        id,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const createDesign = async (path) => {\r\n    const resp = await fetchWithToken(`design`, { path }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const deleteDesignById = async ({ id }) => {\r\n    const resp = await fetchWithToken(`design/${ id }`, {}, 'DELETE');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\n\r\n","\r\nexport default class TimeFormatter {\r\n    static toHoursAndMinutes = (timeInMinutes = 0) => {\r\n        let hours = Math.floor(timeInMinutes / 60);\r\n        let minutes = Math.round((timeInMinutes / 60 - hours) * 60);\r\n        return [hours, minutes];\r\n    }\r\n\r\n    static toMinutes = (hours = 0, minutes = 0) => {\r\n        return (parseInt(hours) * 60) + parseInt(minutes);\r\n    };\r\n}","import React from 'react';\r\nimport { Avatar, Card, CardActionArea, CardActions, CardContent, IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Description, Star } from '@material-ui/icons';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { deleteDesignById } from 'services/DesignService';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport TimeFormatter from '../utils/timeFormatters';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 5,\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n    },\r\n    row: {\r\n        display: 'flex',\r\n    },\r\n    rowJustified: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n    },\r\n    col: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    ellipsis: {\r\n        width: 200,\r\n        whiteSpace: 'nowrap',\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n    },\r\n    designIcon: {\r\n        marginLeft: -12,\r\n        fontSize: 50,\r\n        alignSelf: 'center',\r\n        justifySelf: 'start',\r\n        width: '20%',\r\n    },\r\n    deleteIcon: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    }\r\n}));\r\n\r\n\r\nexport const Design = ({ _id, title, updatedAt, metadata, folder, owner, canDelete = true }) => {\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const history = useHistory();\r\n    const [hours, minutes] = TimeFormatter.toHoursAndMinutes(metadata.workingTime ?? 0);\r\n\r\n    const deleteMutation = useMutation(deleteDesignById, {\r\n        onMutate: async () => {\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', folder.path]);\r\n            await queryClient.cancelQueries([owner._id, 'user-public-designs']);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousDesigns = queryClient.getQueryData(['designs', folder.path]);\r\n            const previousPublicDesigns = queryClient.getQueryData([owner, 'user-public-designs']);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['designs', folder.path];\r\n            if (!history.location.pathname.includes('/my-designs')) keys = [owner._id, 'user-public-designs'];\r\n            queryClient.setQueryData(keys, oldData => {\r\n                const oldPage = oldData.pages.find(page => page.designs.find(design => design._id === _id));\r\n                const newDesigns = oldPage.designs.filter((design) => design._id !== _id);\r\n                const newPage = Object.assign({}, { ...oldPage, designs: newDesigns });\r\n                let newPages = oldData.pages;\r\n                newPages[oldData.pages.indexOf(oldPage)] = newPage;\r\n                return Object.assign({}, { ...oldData, pages: newPages });\r\n            });\r\n            if (folder.path === '/') {\r\n                const previousRecentDesigns = queryClient.getQueryData('recent-designs');\r\n                // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n                queryClient.setQueryData('recent-designs', oldData => oldData.filter((design) => design._id !== _id));\r\n                return { previousDesigns, previousPublicDesigns, previousRecentDesigns };\r\n            }\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousDesigns, previousPublicDesigns };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, design, context) => {\r\n            // TODO: Emitir notificación para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['designs', folder.path], context.previousDesigns);\r\n            queryClient.setQueryData([owner, 'user-public-designs'], context.previousPublicDesigns);\r\n            if (context.previousRecentDesigns) queryClient.setQueryData('recent-designs', context.previousRecentDesigns);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', folder.path]);\r\n            queryClient.invalidateQueries([owner._id, 'user-public-designs']);\r\n        },\r\n    });\r\n\r\n    const classes = useStyles();\r\n\r\n    const handleDeleteDesign = async (e) => {\r\n        e.stopPropagation();\r\n        await deleteMutation.mutate({ id: _id });\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.root} elevation={0}>\r\n            <CardActionArea component={Link} to={`/designs/${_id}`}>\r\n                <CardContent>\r\n                    <div className={classes.row} style={{ width: '100%' }}>\r\n                        <Description className={classes.designIcon} />\r\n                        <div className={classes.col}>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant='h5' component=\"h2\" >{title}</Typography>\r\n                            </div>\r\n                            <div className={classes.row}>\r\n                                <Typography className={classes.ellipsis} variant=\"body1\" component=\"p\">{metadata.category ? metadata.category.name : 'Sin categoría'}</Typography>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.rowJustified}>\r\n                        <Typography variant=\"body1\" component=\"p\">Tiempo de diseño: {`${hours}:${minutes}`} Hrs</Typography>\r\n                    </div>\r\n                    <div className={classes.rowJustified} style={{ marginTop: 10, marginBottom: -5 }}>\r\n                        <Typography color=\"textSecondary\" variant='body2'>Última modificación: {new Date(updatedAt).toLocaleDateString()}</Typography>\r\n                        <div className={classes.row} style={{ marginRight: 4 }}>\r\n                            <Star fontSize='small' />\r\n                            <Typography variant='body2'> 4.6</Typography>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </CardActionArea>\r\n            {\r\n                canDelete && authState.user.uid === owner._id && (<IconButton className={classes.deleteIcon} onClick={handleDeleteDesign}>\r\n                    <Delete />\r\n                </IconButton>)\r\n            }\r\n            <CardActionArea component={Link} to={`/profile/${owner._id}`}>\r\n\r\n                <CardActions className={classes.ownerInfo}>\r\n                    <Avatar\r\n                        alt={formatName(owner.name, owner.lastname)}\r\n                    //src='https://i.pinimg.com/400x300/d6/e6/28/d6e6281bb90621d9be0a9e53d882c2c6.jpg'\r\n                    >\r\n                        {getUserInitials(owner.name, owner.lastname)}\r\n                    </Avatar>\r\n                    <div>\r\n                        <Typography color='textPrimary'>{formatName(owner.name, owner.lastname)}</Typography>\r\n                        <Typography color=\"textSecondary\">{owner.occupation ?? 'Sin ocupación'}</Typography>\r\n                    </div>\r\n                </CardActions>\r\n            </CardActionArea>\r\n        </Card>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { Button, makeStyles } from '@material-ui/core';\r\nimport { Design } from 'components/Design';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems: 'center',\r\n    },\r\n    loadMore: {\r\n        marginBottom: 50,\r\n    }\r\n});\r\n\r\nexport const DesignsContainer = ({ data, status, isFetchingNextPage, fetchNextPage, hasNextPage }) => {\r\n    const classes = useStyles();\r\n    const { authState } = useAuthState();\r\n\r\n    const designList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.designs.map((design, i) => <Design key={'my-design' + design._id} title={design.metadata.name} {...design} />);\r\n        });\r\n    };\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            Ha ocurrido un problema al intentar obtener los diseños. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n            Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n        </Alert>\r\n    ) : (\r\n        <div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                {\r\n                    data.pages[0].designs.length > 0\r\n                        ? designList()\r\n                        : (data.pages[0].ownerId === authState.user.uid)\r\n                            ? <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                No se han encontrado diseños. Crea tu primer diseños haciendo click aquí!\r\n                            </Alert>\r\n                            : <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                Este usuario no cuenta con diseños públicos.\r\n                            </Alert>\r\n                }\r\n            </div>\r\n            {\r\n                data && data.pages[0].designs.length > 0 && hasNextPage &&\r\n                <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                    {\r\n                        isFetchingNextPage\r\n                            ? 'Cargando más...'\r\n                            : 'Cargar Más'\r\n                    }\r\n            </Button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\n\r\nexport const getfolderByPath = async ( path ) => {\r\n    const resp = await fetchWithToken('folder/user', {\r\n        path,\r\n    }, 'POST');\r\n    if (!resp.ok) {\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React from 'react';\r\nimport { Box, makeStyles, Typography } from '@material-ui/core';\r\nimport { Folder } from '@material-ui/icons';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nconst useStyles = makeStyles((theme) =>({\r\n    root: {\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        width: 325,\r\n        minWidth: 325,\r\n        borderRadius: 5,\r\n        margin: '10px 10px 10px 0px',\r\n        cursor: 'pointer',\r\n        userSelect: 'none',\r\n        backgroundColor: theme.palette.background.paper,\r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n        '&:hover': {\r\n            boxShadow: '0px 0px 10px 0 #bcc3d6',\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    folderBody: {\r\n        padding: '15px 10px 15px 20px',\r\n        display: 'flex',\r\n        justifyContent: 'start',\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n    folderName: {\r\n        paddingTop: 3,\r\n        fontSize: 20,\r\n        paddingLeft: 20,\r\n    }\r\n}));\r\n\r\nexport const DesignsFolder = ({ name, path, ...rest }) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={ classes.root } component={Link}  to={`/my-designs${path}`} { ...rest }>\r\n            <div className={ classes.folderBody }>\r\n                <Folder fontSize='large'/>\r\n                <Typography className={ classes.folderName }>\r\n                    { name }\r\n                </Typography>\r\n            </div>\r\n        </Box>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { DesignsFolder } from 'components/DesignsFolder';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        paddingTop: 15,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    designsContainer: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'flex-start',\r\n    }\r\n});\r\n\r\nexport const FoldersContainer = ({ title, data }) => {\r\n    const classes = useStyles();    \r\n\r\n    const folderList = () => {\r\n        return data.map((folder) => <DesignsFolder key={'my-folder' + folder._id} {...folder} />);\r\n    };\r\n\r\n    return data && data.length > 0 \r\n        ?(<div className={classes.root}>\r\n            <div className={classes.designsContainer}>\r\n                { folderList() }\r\n            </div>\r\n        </div>)\r\n        : (<div></div>);\r\n};\r\n","import React from 'react';\r\nimport { Button, Divider, List, ListItem, ListItemText, makeStyles } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { createDesign } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n}));\r\n\r\nexport const LeftPanel = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', '/']);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', '/']);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    const handleCreateDesign = async () => {\r\n        await createDesignMutation.mutate('/');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Button variant='contained' color='default' style={{ margin: 10 }} onClick={handleCreateDesign}>\r\n                Crear Diseño\r\n            </Button>\r\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                <ListItem button selected={location.pathname.includes('/my-designs')} component={ Link } to='/my-designs'>\r\n                    <Home className={classes.icon} />\r\n                    <ListItemText primary='Mis Diseños'/>\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/shared-with-me')} component={ Link } to='/shared-with-me'>\r\n                    <Group className={classes.icon} />\r\n                    <ListItemText primary='Compartidos Conmigo' />\r\n                </ListItem>\r\n                <Divider />\r\n                <ListItem button selected={location.pathname.includes('/public-repository')} component={ Link } to='/public-repository'>\r\n                    <Public className={classes.icon} />\r\n                    <ListItemText primary='Repositorio Público' />\r\n                </ListItem>\r\n                <Divider />\r\n            </List>\r\n        </>\r\n    )\r\n}\r\n","import { Breadcrumbs, makeStyles, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    link:{\r\n        textDecoration: 'none',\r\n        '&:hover': {\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n}));\r\n\r\nexport const DesignsBreadcrumbs = () => {\r\n    const classes = useStyles();\r\n    const { uiState } = useUiState();\r\n    const path = uiState.folderPath;\r\n\r\n    const createBreadcrumbsLinks = () => {\r\n        if (path.length !== 1) {\r\n            let newPath = '';\r\n            const folderList = path.split('/');\r\n            folderList.shift();\r\n            return folderList.map((folderName) => {\r\n                newPath += '/' + folderName;\r\n                const folderPath = newPath;\r\n                return (<div key={folderPath} style={{ display: 'flex' }}>\r\n                    {\r\n                        (path === folderPath)\r\n                            ? <Typography color=\"textPrimary\">{folderName} </Typography>\r\n                            : <Typography className={classes.link} color=\"inherit\" component={Link} to={`/my-designs${folderPath}`} >{folderName} </Typography>\r\n                    }\r\n                </div>);\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Breadcrumbs className={classes.root}>\r\n            {\r\n                path.length !== 1\r\n                    ? <Typography className={classes.link} color=\"inherit\" component={Link} to=\"/my-designs\"> Mis Diseños </Typography>\r\n                    : <Typography color=\"textPrimary\"> Mis Diseños </Typography>\r\n            }\r\n            {\r\n                createBreadcrumbsLinks()\r\n            }\r\n        </Breadcrumbs>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport { Card, CardActions, CardContent, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        //paddingTop: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'space-between',\r\n        width: 325,\r\n        minWidth: 325,\r\n        height: 198,\r\n        margin: '10px 10px 10px 0px',\r\n        borderRadius: 10,\r\n        //backgroundColor: theme.palette.divider,\r\n    },\r\n    ownerInfo: {\r\n        borderTop: `1px solid ${theme.palette.divider}`,\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        paddingTop: 10,\r\n    },\r\n    row: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    col: {\r\n        width: '80%',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    }\r\n}));\r\n\r\nexport const DesignSkeleton = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <div className={ classes.row }>\r\n                    <Skeleton variant=\"rect\" width={35} height={43} />\r\n                    <div className={ classes.col }>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={33} width={'80%'}/>\r\n                            <Skeleton variant=\"circle\" width={20} height={20} />\r\n                        </div>\r\n                        <div className={ classes.row } style={{marginLeft: -5}}>\r\n                            <Skeleton style={{marginTop: -3}} animation=\"wave\" height={23} width={'70%'}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={ classes.row }>\r\n                    <Skeleton animation=\"wave\" height={20} width={'70%'}/>  \r\n                </div>\r\n                <div className={ classes.row } >\r\n                    <div className={ classes.row } style={{marginTop:14, marginBottom:-5}}>\r\n                        <Skeleton animation=\"wave\" height={20} width={'70%'} />\r\n                        <Skeleton variant=\"circle\" width={13} height={13} style={{marginTop: 2, marginRight:5}}/>\r\n                    </div>\r\n                    <Skeleton animation=\"wave\" height={20} width={'5%'} style={{marginTop:14, marginBottom:-5}}/>\r\n                </div>\r\n            </CardContent>\r\n            <CardActions className={ classes.ownerInfo } >\r\n                <Skeleton variant=\"circle\" width={40} height={40} style={{marginBottom: 3}}/>\r\n                <div className={ classes.col } style={{marginBottom: 3}}>\r\n                    <Skeleton animation=\"wave\" height={20} width={'100%'}/>\r\n                    <Skeleton animation=\"wave\" height={20} width={'80%'}/>\r\n                </div>\r\n            </CardActions>\r\n        </Card>\r\n    );\r\n}","import React from 'react';\r\nimport { Divider, makeStyles, Typography } from '@material-ui/core';\r\nimport { useQuery } from 'react-query';\r\nimport ScrollContainer from 'react-indiana-drag-scroll';\r\nimport { Design } from 'components/Design';\r\nimport { DesignSkeleton } from 'components/DesignSkeleton';\r\nimport { getRecentDesigns } from 'services/DesignService';\r\n\r\nconst useStyles = makeStyles({\r\n    root:{\r\n        paddingTop: 15,\r\n        marginBottom: 15,\r\n        //marginLeft: -10,\r\n        //marginRight: -10,\r\n    },\r\n    recentDesigns: {\r\n        width: '100%',\r\n        display: 'flex',\r\n        flexGrow: 1,\r\n        flexWrap: 'nowrap',\r\n        justifyContent: 'flex-start',\r\n        marginTop:15,\r\n    },\r\n    title: {\r\n        //paddingLeft:10,\r\n        //paddingRight:10,\r\n    }\r\n});\r\n\r\nexport const RecentDesigns = ({ width, height }) => {\r\n    const classes = useStyles();\r\n    const n = Math.trunc(width / 345);\r\n\r\n    const { isLoading, isError, data } = useQuery(\"recent-designs\", async () => {\r\n        return getRecentDesigns();\r\n    });\r\n    \r\n\r\n    if (isError) {\r\n        return <div></div>;\r\n    }\r\n    \r\n    const createSkeletons = () => {\r\n        return Array.from(Array(n).keys()).map( i => {return(<DesignSkeleton key={`recent-design-skeleton-${ i }`}/>)});\r\n    };\r\n\r\n    const designList = () => {\r\n        return data.map((design) => <Design key={'recent' + design._id} title={design.metadata.name} {...design} canDelete={ false } />);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            {\r\n                data && data.length !== 0 \r\n                    ? <div className={classes.title}>\r\n                    <Typography variant='h4'>\r\n                        Diseños recientes\r\n                    </Typography>\r\n                    <Divider />\r\n                </div>\r\n                    : <div></div>\r\n            }\r\n            {\r\n                data && data.length > 0 \r\n                    ? data.length > n ?\r\n                        <ScrollContainer className={classes.recentDesigns} style={{ cursor: 'grab' }}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </ScrollContainer>\r\n                        :\r\n                        <div className={classes.recentDesigns}>\r\n                            {\r\n                                (isLoading) \r\n                                    ? createSkeletons()\r\n                                    : designList()\r\n                            }\r\n                        </div>\r\n                    : <div></div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Button, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { useInfiniteQuery, useMutation, useQuery, useQueryClient } from 'react-query';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport { createDesign, getDesignsByFolder } from 'services/DesignService';\r\nimport { getfolderByPath } from 'services/FolderService';\r\nimport { FoldersContainer } from 'components/FoldersContainer';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\nimport { DesignsBreadcrumbs } from 'pages/Navigation/MyDesigns/DesignsBreadcrumbs';\r\nimport { RecentDesigns } from 'pages/Navigation/MyDesigns/RecentDesigns';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    breadCrumbs: {\r\n        marginTop: 20,\r\n        marginBottom: 20,\r\n        width: '100%',\r\n        padding: '10px 15px 10px 15px',\r\n        borderRadius: 3,\r\n        backgroundColor: theme.palette.background.default\r\n    },\r\n    designsAndFoldersContainer: {\r\n        paddingTop: 15,\r\n    },\r\n    link: {\r\n        textDecoration: 'none',\r\n    }\r\n}));\r\n\r\nexport const MyDesignsPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const urlparams = useParams();\r\n    const designsRef = useRef(null);\r\n    const { uiState, dispatch } = useUiState();\r\n    const queryClient = useQueryClient();\r\n    const { authState } = useAuthState();\r\n    const [width, setWidth] = useState(0);\r\n    const [height, setHeight] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        dispatch({\r\n            type: types.ui.updateFolderPath,\r\n            payload: urlparams.urlPath ? '/' + urlparams.urlPath : '/',\r\n        });\r\n    }, [dispatch, urlparams]);\r\n\r\n    const path = uiState.folderPath;\r\n    const folderName = !urlparams.urlPath ? 'Mis Diseños' : path.split('/')[path.split('/').length - 1];\r\n\r\n    const designsQuery = useInfiniteQuery(['designs', path], async ({ pageParam = 0 }) => {\r\n        return await getDesignsByFolder(path, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const foldersQuery = useQuery(['folders', path], async () => {\r\n        return await getfolderByPath(path);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const createDesignMutation = useMutation(createDesign, {\r\n        onMutate: async () => {\r\n            await queryClient.cancelQueries('recent-designs');\r\n            await queryClient.cancelQueries(['designs', path]);\r\n            await queryClient.cancelQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onSettled: () => {\r\n            queryClient.invalidateQueries('recent-designs');\r\n            queryClient.invalidateQueries(['designs', path]);\r\n            queryClient.invalidateQueries([authState.user.id, 'user-public-designs']);\r\n        },\r\n        onError: (error) => {\r\n            // TODO: Emitir notificación o message para denotar el error.\r\n            console.log(error);\r\n        },\r\n        onSuccess: data => {\r\n            history.push(`/designs/${data.design._id}`);\r\n        }\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (designsRef.current) {\r\n            setHeight(designsRef.current.offsetHeight);\r\n            setWidth(designsRef.current.offsetWidth);\r\n        }\r\n    }, [designsRef]);\r\n\r\n    const handleCreateDesign = async ( e, path = '/' ) => {\r\n        await createDesignMutation.mutate(path);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} ref={designsRef} className={classes.workspace}>\r\n                    <DesignsBreadcrumbs />\r\n                    {\r\n                        path === '/' && <RecentDesigns id='recent' width={width} height={height} />\r\n                    }\r\n                    <div className={ classes.designsAndFoldersContainer }>\r\n                        <div style={{display:'flex', justifyContent: 'space-between', alignItems:'flex-end', paddingBottom: 5}}>\r\n                            <Typography variant='h4'>\r\n                                {path === '/' ? 'Mis Diseños' : folderName}\r\n                            </Typography>\r\n                            <Button variant='outlined' style={{height: 35}} size='large' color='default' onClick={(e)=>handleCreateDesign(e, path)}> \r\n                                Crear Diseño\r\n                            </Button>\r\n                        </div>\r\n                        <Divider />\r\n                        <FoldersContainer {...foldersQuery}/>\r\n                        <DesignsContainer {...designsQuery} />\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    );\r\n};","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getUser = async ( id ) => {\r\n    const resp = await fetchWithToken(`user/${id}`);\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const searchUsers = async ( filter, pageParam ) => {\r\n    const resp = await fetchWithToken('user/search/', {\r\n        filter,\r\n        from: pageParam,\r\n    }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n\treturn resp.data;\r\n};\r\n\r\nexport const updateContact = async(  {uid, contacts} ) => {\r\n    try {\r\n        const resp = await fetchWithToken(`user/${uid}`, { \r\n            newData: { contacts }\r\n         }, 'PUT');\r\n        if(!resp.ok){\r\n            throw new Error(resp.message);\r\n        }\r\n        return resp.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\nexport const updateProfileInformation = async(  {uid, name, lastname, occupation, institution, country, city, description} ) => {\r\n    try {\r\n        const res = await fetchWithToken(`user/${uid}`, { \r\n           newData: { uid, name, lastname, occupation, institution, country, city, description }\r\n        }, 'PUT');\r\n        const body = await res.json();\r\n        if(!body.ok){\r\n            throw new Error(body.message);\r\n        }\r\n        return body.data;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n};\r\n\r\n","\r\nimport React from 'react'\r\nimport { Avatar, Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, makeStyles, TextField, Typography, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateProfileInformation } from 'services/UserService';\r\nimport { useParams } from 'react-router';\r\nimport { useForm } from 'hooks/useForm';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Alert } from '@material-ui/lab';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n\r\n}));\r\n\r\nexport const EditProfileModal = React.memo(() => {\r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { authState } = useAuthState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { isLoading, isError, data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const [ formData, handleInputChange, reset] = useForm({\r\n        name: data.name,\r\n        lastname: data.lastname,\r\n        occupation: data.occupation,\r\n        institution: data.institution,\r\n        country: data.country,\r\n        city: data.city,\r\n        description: data.description,\r\n    });\r\n    \r\n    const { name, lastname, occupation, institution, country, city, description } = formData;\r\n\r\n    const updateProfileInformationMutation = useMutation(updateProfileInformation, {\r\n        onMutate: async () =>{\r\n            // Cancela consultas con la key especificada\r\n            await queryClient.cancelQueries(['user-profile', uid]);\r\n            // Guarda los datos antes de la eliminación por si algo sale mal\r\n            const previousUserProfile = queryClient.getQueryData(['user-profile', uid]);\r\n            // Actualiza de manera optimista (Suponiendo que el servidor responde correctamente)\r\n            let keys = ['user-profile', uid]\r\n            queryClient.setQueryData(keys, oldData =>{\r\n                const newData = Object.assign({}, { ...oldData, uid, name, lastname, occupation, institution, country, city, description});\r\n                return newData;\r\n            });\r\n            // Retorna un contexto con los datos previos a la eliminación para restaurar la consulta si es que algo sale mal\r\n            return { previousUserProfile };\r\n        },\r\n        // Si la mutación falla, usa los datos previos desde el contexto retornado en onMutate para restaurar los datos\r\n        onError: (error, context) => {\r\n            // TODO: Emitir notificación para retroalimentar\r\n            console.log(error);\r\n            queryClient.setQueryData(['user-profile', uid], context.previousUserProfile);\r\n        },\r\n        onSettled: () => {\r\n            // Invalida las queries para que todas las queries con estas keys se actualicen por cambios\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        },\r\n    });\r\n    \r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        reset();\r\n    };\r\n\r\n    const handleSaveInformation = async (e) => {\r\n        e.preventDefault();\r\n        await updateProfileInformationMutation.mutate({uid: authState.user.uid, name, lastname, occupation, institution, country, city, description});\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n        //Mensaje de guardado con exito\r\n    };\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isEditProfileModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Editar perfil\r\n                    <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    <Grid container spacing={1}>\r\n                        \r\n                        <Grid container alignItems='center' justify='center'>\r\n                            <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                variant='outlined'\r\n                                margin='dense' \r\n                                name='name' \r\n                                value={ name } \r\n                                onChange={ handleInputChange } \r\n                                label='Nombres' \r\n                                type='text' \r\n                                fullWidth \r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='lastname' \r\n                            value={ lastname } \r\n                            onChange={ handleInputChange } \r\n                            label='Apellidos' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='country' \r\n                            value={ country ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='País' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='city' \r\n                            value={ city ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ciudad' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='occupation' \r\n                            value={ occupation ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Ocupación' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            variant='outlined'\r\n                            margin='dense' \r\n                            name='institution' \r\n                            value={ institution ?? '' } \r\n                            onChange={ handleInputChange } \r\n                            label='Institución' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                        <TextField\r\n                            multiline \r\n                            variant='outlined'\r\n                            margin='dense'\r\n                            name='description'\r\n                            rows={4} \r\n                            value={ description ?? ''} \r\n                            onChange={ handleInputChange } \r\n                            label='Descripción' \r\n                            type='text' \r\n                            fullWidth \r\n                        />\r\n                        </Grid>\r\n                    </Grid>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant='contained' color='primary' onClick={handleSaveInformation}>\r\n                        Guardar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n});\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useUiState } from '../contexts/ui/UiContext';\r\nimport { Avatar, makeStyles, Typography } from '@material-ui/core';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        padding: 5,\r\n        borderRadius: 10,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n        marginTop: 10,\r\n        cursor: 'pointer',\r\n        backgroundColor: theme.palette.background.design,\r\n        '&:hover': {\r\n            zIndex: 0.5,\r\n            background: theme.palette.background.designHover,\r\n        },\r\n    },\r\n    card: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        //backgroundColor: 'grey',\r\n    },\r\n    body: {\r\n        display: 'flex',\r\n        marginLeft: 10,\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n    },\r\n    photo: {\r\n        margin: 10,\r\n        width: theme.spacing(8),\r\n        height: theme.spacing(8),\r\n    },\r\n    name: {\r\n\r\n    },\r\n    location: {\r\n\r\n    }\r\n}));\r\n\r\nexport const UserCard = ({ _id, name, lastname, city, country, scoreMean, img, occupation }) => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const { dispatch } = useUiState();\r\n\r\n    const handleViewUser = (e, id) => {\r\n        e.stopPropagation();\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n        history.push(`/profile/${id}`);\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root} onClick={ ( e ) => handleViewUser(e, _id) }>\r\n            <div className={classes.card}>\r\n                <Avatar\r\n                    className={ classes.photo }\r\n                    alt={ formatName(name, lastname) }\r\n                    src={ img ?? '' }\r\n                >\r\n                    <Typography variant='h5'>\r\n                        { getUserInitials(name, lastname) }\r\n                    </Typography>\r\n                </Avatar>\r\n                <div className={classes.body} >\r\n                    <div className={classes.name}>\r\n                        <Typography variant='h5' color='textPrimary'>\r\n                            {name + ' ' + lastname}\r\n                        </Typography>\r\n                    </div>\r\n                    <div className={classes.location}>\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                city && country \r\n                                    ? city + ', ' + country\r\n                                    : city ?? country ?? 'Sin locación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                    <div >\r\n                        <Typography variant='subtitle1' color='textSecondary'>\r\n                            {\r\n                                occupation\r\n                                    ? occupation\r\n                                    : 'Sin ocupación'\r\n                            }\r\n                        </Typography>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, } from '@material-ui/core';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { getUser } from 'services/UserService';\r\nimport { useQuery } from 'react-query';\r\nimport { useParams } from 'react-router';\r\nimport { UserCard } from 'components/UserCard';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    closeButton: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    },\r\n}));\r\n\r\nexport const ShowContactsModal = () => {\r\n    const classes = useStyles();\r\n    const { uiState, dispatch } = useUiState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { data } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n    \r\n    const contactList = () => {\r\n        return data.contacts.map(( contact ) => {\r\n            return <UserCard key={contact._id} {...contact}/>\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n    return (\r\n        <>  \r\n            <Dialog onClose={handleClose} aria-labelledby='customized-dialog-title' open={uiState.isContactsModalOpen}>\r\n                <DialogTitle id='customized-dialog-title' onClose={handleClose}>\r\n                    Contactos\r\n                <IconButton aria-label='close' className={classes.closeButton} onClick={handleClose}>\r\n                    <CloseIcon />\r\n                </IconButton>\r\n                </DialogTitle>\r\n                <DialogContent dividers>\r\n                    { contactList() }\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>\r\n                        Cerrar\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Grid, Typography, Avatar, makeStyles, Button, Divider, IconButton, } from '@material-ui/core';\r\nimport RoomIcon from '@material-ui/icons/Room';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getUser, updateContact } from 'services/UserService';\r\nimport { useQuery, useMutation, useQueryClient, useInfiniteQuery } from 'react-query';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Star, Apartment, Group, Email, PersonAdd, Edit, Close } from '@material-ui/icons';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\n\r\nimport { EditProfileModal } from 'pages/User/UserProfile/EditProfileModal';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { ShowContactsModal } from 'pages/User/UserProfile/ShowContactsModal';\r\n\r\nimport { getPublicDesignsByUser } from 'services/DesignService';\r\nimport { DesignsContainer } from 'components/DesignsContainer';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    designPanel:{\r\n        flexDirection: 'column',\r\n        borderLeft:`1px solid ${theme.palette.divider}`,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    photoProfile: {\r\n        width: theme.spacing(30),\r\n        height: theme.spacing(30),\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    spaceFirstDataFirstData:{ \r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    centerGrid:{\r\n        display: 'flex',\r\n        alignItems: 'center', \r\n        justifyItems:'center',\r\n    },\r\n    spaceSecondData:{\r\n        marginBottom: theme.spacing(2),   \r\n    },\r\n    spaceData:{\r\n        marginLeft: theme.spacing(5),\r\n        marginBottom: theme.spacing(2),\r\n        marginRight: theme.spacing(5),\r\n    },\r\n    spaceDesign:{\r\n        marginLeft: theme.spacing(7),\r\n        marginTop: theme.spacing(2),\r\n        marginRight: theme.spacing(7) \r\n    },\r\n    spaceIcons:{\r\n        marginRight: theme.spacing(1)\r\n    },\r\n    errorContainer: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        marginTop: 15,\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'justify',\r\n        alignItems:'center',\r\n    }\r\n}));\r\n\r\nexport const UserProfile = () => {\r\n    \r\n    const classes = useStyles();\r\n    const queryClient = useQueryClient();\r\n    const { authState, setAuthState } = useAuthState();\r\n    const { dispatch } = useUiState();\r\n    const urlparams = useParams();\r\n    const uid = urlparams.uid;\r\n\r\n    const { isLoading, isError, data, error, refetch } = useQuery(['user-profile', uid], async () => {\r\n        return await getUser(uid);\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    const designsQuery = useInfiniteQuery([ uid, 'user-public-designs' ], async ({ pageParam = 0 }) => {\r\n        return await getPublicDesignsByUser(uid, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n    \r\n    const updateConctactMutation = useMutation(updateContact, {\r\n        onSuccess: (data, {uid, contacts}, context) => {\r\n            setAuthState((prevState)=>({\r\n                ...prevState, \r\n                user: Object.assign({}, {...prevState.user, contacts})\r\n            }));\r\n            queryClient.invalidateQueries(['user-profile', uid]);\r\n        }\r\n    });\r\n    if(isError){\r\n        return (<div className={ classes.errorContainer }>\r\n            <Alert severity='error' className={ classes.error }>\r\n                Ha ocurrido un problema al intentar obtener el usuario en la base de datos. Esto probablemente se deba a un problema de conexión, por favor revise que su equipo tenga conexión a internet e intente más tarde.\r\n                Si el problema persiste, por favor comuníquese con el equipo de soporte.\r\n            </Alert>\r\n        </div>);\r\n    };\r\n\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    const handleEditProfile = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'EditProfile',\r\n        });\r\n    };\r\n\r\n    const handleShowContacts = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Contacts',\r\n        });\r\n    };\r\n\r\n    const handleAddContact = async (e) => {\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts:[...authState.user.contacts, uid]});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n        await refetch();\r\n    };\r\n\r\n    const handleDeleteContact = async (e) =>{\r\n        e.preventDefault();\r\n        await updateConctactMutation.mutate({uid: authState.user.uid, contacts: authState.user.contacts.filter(contact=>contact!==uid)});\r\n        queryClient.invalidateQueries(['user-profile', uid]);\r\n    };\r\n    \r\n    if(isError){\r\n        return (<Typography>Error: {error.message}</Typography>);\r\n    };\r\n    if(isLoading){\r\n        return (<Typography>Cargando...</Typography>);\r\n    };\r\n\r\n    return (\r\n        <Grid container>\r\n            <Grid item xs={12} sm={3}>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    <Avatar alt={data.name + ' ' + data.lastname} className={classes.photoProfile} src={ data.img ?? ''}/>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && <Typography  align='center' variant='h5' component='h2'>{data.name + ' ' + data.lastname}</Typography>}\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center'>\r\n                    { data && data.occupation && <Typography className={classes.spaceFirstData} color='textSecondary'>{data.occupation}</Typography>}\r\n                </Grid> \r\n                <Grid container alignItems='center' justify='center' className={classes.spaceFirstData}>\r\n                    <Grid item >\r\n                        { data.contacts.length > 0 ? \r\n                            <IconButton onClick={ handleShowContacts }>\r\n                                <Group />\r\n                            </IconButton>\r\n                            :\r\n                            <Group />\r\n                        }\r\n                    </Grid>\r\n                    <Grid item >\r\n                        <Typography style={{ marginLeft: 8 }}> {data.contacts.length}</Typography>\r\n                    </Grid>\r\n                    ・\r\n                    <Grid item >\r\n                    <Star/>\r\n                    </Grid>\r\n                    <Grid item>\r\n                        <Typography style={{ marginLeft: 8 }}> {data.scoreMean}</Typography>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid container alignItems='center' justify='center' className={classes.spaceSecondData}>\r\n                    {(authState.user.uid===uid) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleEditProfile} startIcon={<Edit />}>Editar perfil</Button> \r\n                        :\r\n                        (authState.user.contacts.includes(uid)) ? \r\n                        <Button variant ='outlined' size='small' onClick={handleDeleteContact} startIcon={<Close />}>Eliminar de mis contactos</Button> \r\n                        : \r\n                        <Button variant ='outlined' size='small' onClick={handleAddContact} startIcon={<PersonAdd />} >Agregar a mis contactos</Button>}  \r\n                </Grid>\r\n                <Divider className={classes.spaceData}/>\r\n                <Grid className={classes.spaceData}>\r\n                    { data && data.institution && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Apartment className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.institution}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && data.city && data.country &&(\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <RoomIcon className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.city + ', ' + data.country}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    { data && (\r\n                        <Grid container className={classes.spaceSecondData} >\r\n                            <Grid item >\r\n                                <Email className={classes.spaceIcons}/>\r\n                            </Grid>\r\n                            <Grid item >\r\n                            <Typography className={classes.spaceFirstData} color='textSecondary'>{data.email}</Typography>\r\n                            </Grid>\r\n                        </Grid>\r\n                    )}\r\n                    <Divider className={classes.spaceSecondData}/>\r\n                    { data && data.description &&(\r\n                        <>\r\n                            <Typography color='textSecondary' className={classes.spaceSecondData}>\r\n                                Descripción\r\n                            </Typography>\r\n                            <Typography >\r\n                                {data.description}\r\n                            </Typography> \r\n                        </>\r\n                    )}\r\n                </Grid>\r\n            </Grid>\r\n            <Grid item xs={12} sm={9} className={classes.designPanel}>\r\n               \r\n                <Grid className={classes.spaceDesign}>\r\n                    <Typography variant='h4'>\r\n                        Diseños Públicos\r\n                    </Typography>\r\n                    <Divider />\r\n                    {   \r\n                        (authState.user.uid === uid) && \r\n                            <>\r\n                                <EditProfileModal /> \r\n                            </> \r\n                    }\r\n                    <ShowContactsModal/> \r\n                    <DesignsContainer {...designsQuery}/>\r\n                </Grid>\r\n            </Grid>\r\n        </Grid>\r\n    )\r\n}\r\n","import { ThemeProvider } from '@material-ui/core';\r\nimport React, { useState, useContext, createContext, useEffect } from 'react';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { getTheme } from 'theme/theme';\r\n\r\nconst UserConfigContext = createContext();\r\n\r\nexport function useUserConfigState() {\r\n\tconst context = useContext(UserConfigContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useUserConfigState must be used within a UserConfigProvider');\r\n\t}\r\n\treturn context;\r\n}\r\n\r\nexport const UserConfigProvider = ({ children })=>{\r\n\tconst { authState } = useAuthState();\r\n    const [userConfig, setUserConfig] = useState({\r\n        darkTheme:false,\r\n        modeAdvanced: false\r\n\t});\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst darkTheme = JSON.parse(localStorage.getItem('darkTheme'));\r\n\t\tif(darkTheme !== null ){\r\n\t\t\tsetUserConfig((prevState)=>({\r\n\t\t\t\t...prevState,\r\n\t\t\t\tdarkTheme,\r\n\t\t\t}));\r\n\t\t}\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n        if(authState.user !== null){\r\n            localStorage.setItem('darkTheme', JSON.stringify(userConfig.darkTheme));\r\n        }  \r\n    }, [authState.user, userConfig.darkTheme]);\r\n\r\n\tconst theme = getTheme(userConfig.darkTheme);\r\n\r\n\treturn (\r\n\t\t<UserConfigContext.Provider value={ { userConfig, setUserConfig } }>\r\n\t\t\t<ThemeProvider theme = {theme}>\r\n\t\t\t\t{ children }\r\n\t\t\t</ThemeProvider>\r\n\t\t</UserConfigContext.Provider>\r\n\t);\r\n}","import { createMuiTheme } from '@material-ui/core';\r\nimport {\r\n  orange,\r\n  lightBlue,\r\n  deepPurple,\r\n  deepOrange\r\n} from \"@material-ui/core/colors\";\r\n\r\nexport const getTheme = ( isDarkActive ) =>{\r\n    const theme = createMuiTheme({\r\n        palette: {\r\n          type: isDarkActive ? 'dark': 'light',\r\n          primary: {\r\n            dark: orange[500], \r\n            light: lightBlue[500],\r\n            main: isDarkActive? orange[500] : lightBlue[500],\r\n          },\r\n          secondary: {\r\n            dark: deepOrange[900],\r\n            light: deepPurple[500], \r\n            main: isDarkActive? deepOrange[900]: deepPurple[500], \r\n          },\r\n          text:{\r\n            primary: isDarkActive? '#F4F4F4': '#36393F',\r\n          },\r\n          background:{\r\n            default: isDarkActive? '#36393F': '#F4F4F4', //SidePanels,\r\n            paper: isDarkActive? '#36393F': '#F4F4F4', // Menu, Login and Register Modal\r\n            workSpace: isDarkActive? '#2F3136': '#FEFEFE',\r\n            navbar: isDarkActive? '#202225': '#DCDCDC',\r\n            design: isDarkActive? '#36393F': '#F4F4F4',\r\n            designHover: isDarkActive? '#393D46': '#F6F6F6',\r\n          }\r\n        },\r\n    });\r\n    return theme;\r\n}","import React, { useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useQueryClient } from 'react-query';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Search } from '@material-ui/icons';\r\nimport Logo from 'assets/img/Logo.png';\r\nimport { Avatar, Typography, Toolbar, AppBar, Button, ButtonGroup, IconButton, Menu, MenuItem, Switch, FormControlLabel, OutlinedInput, Box } from '@material-ui/core';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { useUserConfigState } from 'contexts/UserConfigContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        color: theme.palette.text.primary\r\n    },\r\n    logo: {\r\n        width: theme.spacing(5),\r\n        height: theme.spacing(5),\r\n        margin: 'auto',\r\n    },\r\n    brand: {\r\n        display: \"flex\",\r\n        alignItems: 'center',\r\n        textDecoration: 'none',\r\n    },\r\n    navbarColor: {\r\n        background: theme.palette.background.navbar,\r\n    },\r\n    navbarLetter: {\r\n        textDecoration: 'none',\r\n        color: theme.palette.text.primary,\r\n        cursor: 'pointer'\r\n    },\r\n    menuColor: {\r\n        background: theme.palette.background.menu\r\n    }\r\n}));\r\n\r\nexport const NavBar = () => {\r\n    const queryClient = useQueryClient();\r\n    const history = useHistory();\r\n    const [isMenuOpen, setMenuOpen] = useState(null);\r\n    const { userConfig, setUserConfig } = useUserConfigState();\r\n    const { dispatch } = useUiState();\r\n    const { authState, logout } = useAuthState();\r\n    const [filter, setFilter] = useState('');\r\n\r\n    const handleLogout = () => {\r\n        queryClient.clear();\r\n        setMenuOpen(null);\r\n        logout();\r\n    };\r\n\r\n    const handleOpenLoginModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Login',\r\n        });\r\n    };\r\n\r\n    const handleOpenRegisterModal = () => {\r\n        dispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'Register',\r\n        });\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setMenuOpen(null);\r\n    };\r\n\r\n    const handleChangeUserConfig = (event) => {\r\n        setUserConfig({ ...userConfig, [event.target.name]: event.target.checked });\r\n    };\r\n\r\n    const handleInputFormChange = ({ target }) => {\r\n        setFilter(target.value);\r\n    };\r\n\r\n    const handleSearchUsers = async (e) => {\r\n        e.preventDefault();\r\n        if(filter.trim().length > 0) {\r\n            history.push(`/users/search?q=${filter.trim()}`);\r\n            setFilter('');\r\n        }\r\n    };\r\n\r\n    const handleMenu = ( e ) => {\r\n        setMenuOpen(e.currentTarget);\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"static\" className={classes.navbarColor} elevation={0}>\r\n                <Toolbar style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n                    <Box className={classes.brand} component={Link} to='/'>\r\n                        <Avatar className={classes.logo} src={Logo} alt=\"Logo\" />\r\n                        <Typography variant=\"h6\" className={classes.title}>\r\n                            LAD\r\n                        </Typography>\r\n                    </Box>\r\n                    {\r\n                        (!authState.token) ?\r\n                            <ButtonGroup variant=\"text\" aria-label=\"text primary button group\">\r\n                                <Button onClick={handleOpenLoginModal} >\r\n                                    Ingresar\r\n                                    </Button>\r\n                                <Button onClick={handleOpenRegisterModal}>\r\n                                    Registrarme\r\n                                    </Button>\r\n                            </ButtonGroup>\r\n                            :\r\n                            <>\r\n                                <div>\r\n                                    <form onSubmit={handleSearchUsers} noValidate>\r\n                                        <OutlinedInput\r\n                                            variant=\"outlined\"\r\n                                            name=\"filter\"\r\n                                            value={filter}\r\n                                            type=\"text\"\r\n                                            placeholder='Buscar usuario'\r\n                                            onChange={handleInputFormChange}\r\n                                        />\r\n                                        <IconButton type=\"submit\" className={classes.iconButton} aria-label=\"search\">\r\n                                            <Search />\r\n                                        </IconButton>\r\n                                    </form>\r\n                                </div>\r\n                                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                                    <Typography className={classes.navbarLetter}  component={Link} to={`/profile/${authState.user.uid}`} >\r\n                                        { authState.user.name }\r\n                                    </Typography>\r\n                                    <IconButton onClick={ handleMenu }>\r\n                                        <SettingsIcon />\r\n                                    </IconButton>\r\n                                </div>\r\n                                <Menu\r\n                                    anchorEl={isMenuOpen}\r\n                                    open={Boolean(isMenuOpen)}\r\n                                    anchorOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    keepMounted\r\n                                    transformOrigin={{\r\n                                        vertical: 'top',\r\n                                        horizontal: 'right',\r\n                                    }}\r\n                                    onClose={handleClose}\r\n\r\n                                >\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.darkTheme} onChange={handleChangeUserConfig} name=\"darkTheme\" />}\r\n                                            label=\"Tema Oscuro\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <FormControlLabel\r\n                                            control={<Switch checked={userConfig.modeAdvanced} onChange={handleChangeUserConfig} name=\"modeAdvanced\" />}\r\n                                            label=\"Modo Avanzado\"\r\n                                        />\r\n                                    </MenuItem>\r\n                                    <MenuItem>\r\n                                        <Button color=\"primary\" onClick={handleLogout}>\r\n                                            Cerrar sesión\r\n                                        </Button>\r\n                                    </MenuItem>\r\n\r\n                                </Menu>\r\n                            </>\r\n                    }\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n}","import {  Typography, Toolbar, AppBar, Container, makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    pos:{\r\n        width: 'fit-content',\r\n    }\r\n    \r\n  }));\r\nexport const Footer = () =>{\r\n    const classes = useStyles();\r\n    return (\r\n        <AppBar position=\"static\" color=\"default\"> \r\n          <Container maxWidth=\"md\" className={classes.pos}>\r\n            <Toolbar>\r\n              <Typography variant=\"body1\">\r\n                © 2021 Universidad Católica de Temuco\r\n              </Typography>\r\n            </Toolbar>\r\n          </Container>\r\n        </AppBar>\r\n    )\r\n};","import React from 'react';\r\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const SharedWithMePage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4'>Compartidos conmigo</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react';\r\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { LeftPanel } from 'pages/Navigation/LeftPanel';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon:{\r\n        marginRight: 10,\r\n    }\r\n}));\r\n\r\nexport const PublicRepositoryPage = () => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <LeftPanel />\r\n                </Grid>\r\n                    <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                        <Typography variant='h4'>Repositorio Público</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n                </Grid>\r\n        </>\r\n    );\r\n};","import React from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport { useInfiniteQuery } from 'react-query';\r\nimport queryString from 'query-string';\r\nimport { Button, Divider, Grid, List, ListItem, ListItemText, makeStyles, Typography } from '@material-ui/core';\r\nimport { Group, Home, Public } from '@material-ui/icons';\r\nimport { searchUsers } from 'services/UserService';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { UserCard } from 'components/UserCard';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingBottom: 50,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 128px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    icon: {\r\n        marginRight: 10,\r\n    },\r\n    usersContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        paddingTop: 15,\r\n    },\r\n    errorContainer: {\r\n        marginTop: 15,\r\n        marginBottom: 15,\r\n        display: 'flex',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    error: {\r\n        minWidth: '50%',\r\n        display:'flex',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        alignItems:'center',\r\n    },\r\n    loadMore: {\r\n        marginTop: 50,\r\n    }\r\n}));\r\n\r\nexport const SearchUsersPage = () => {\r\n    const classes = useStyles();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const { q } = queryString.parse(location.search);\r\n    \r\n    const redirectTo = (path) => {\r\n        history.push(path);\r\n    };\r\n\r\n    const { data, status, error, isFetchingNextPage, fetchNextPage, hasNextPage } = useInfiniteQuery('search-users', async ({ pageParam = 0 }) => {\r\n        return await searchUsers(q, pageParam);\r\n    }, {\r\n        refetchOnWindowFocus: false,\r\n        getNextPageParam: (lastPage, pages) => {\r\n            if(lastPage.nPages === pages.length) return undefined; \r\n            return lastPage.from;\r\n        },\r\n    });\r\n\r\n    const userList = () => {\r\n        return data.pages.map((page, index) => {\r\n            return page.users.map((user, i) => <UserCard key={user._id} {...user}/>);\r\n        });\r\n    };\r\n\r\n    if(!q){\r\n        return (\r\n            <div className={ classes.errorContainer }>\r\n                <Alert severity='error' className={classes.error}>\r\n                    No se ha ingresado filtro para la búsqueda de usuarios. Por favor ingrese información en la entrada de texto de la barra de navegación para buscar usuarios\r\n                    y presione 'enter' o el ícono de búsqueda.\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return status === 'loading' ? (\r\n        <p>Loading...</p>\r\n    ) : status === 'error' ? (\r\n        <Alert severity='error' className={classes.error}>\r\n            { error.message }\r\n        </Alert>\r\n    ) : (\r\n            <>\r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <List component=\"nav\" aria-label=\"main mailbox folders\">\r\n                        <ListItem button onClick={() => redirectTo('/my-designs')}>\r\n                            <Home className={classes.icon} />\r\n                            <ListItemText primary=\"Mis Diseños\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/shared-with-me')}>\r\n                            <Group className={classes.icon} />\r\n                            <ListItemText primary=\"Compartidos Conmigo\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                        <ListItem button onClick={() => redirectTo('/public-repository')}>\r\n                            <Public className={classes.icon} />\r\n                            <ListItemText primary=\"Repositorio Público\" />\r\n                        </ListItem>\r\n                        <Divider />\r\n                    </List>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div style={{paddingTop: 15}}>\r\n                        {\r\n                            data.pages[0].users.length > 0 \r\n                                ? (<><Typography variant='h4'>\r\n                                        Usuarios encontrados\r\n                                    </Typography>\r\n                                    <Divider />\r\n                                    <div className={ classes.usersContainer }>\r\n                                        { userList() }\r\n                                        {\r\n                                            data && hasNextPage && <Button className={classes.loadMore} color='primary' onClick={() => fetchNextPage()}>\r\n                                                    {\r\n                                                        isFetchingNextPage\r\n                                                            ? 'Cargando más...'\r\n                                                            : 'Cargar Más'\r\n                                                    }\r\n                                                </Button>\r\n                                        }\r\n                                    </div></>)\r\n                                : <Alert severity='error' className={classes.error}>\r\n                                    No se han encontrado coincidencias.\r\n                                </Alert>\r\n\r\n                        }\r\n                        \r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect } from 'react';\r\nimport { Chart } from 'chart.js';\r\nimport { Grid, makeStyles, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    spaceGraphic: {\r\n        marginTop: theme.spacing(2),\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n    spaceTasks: {\r\n        marginBottom: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nexport const DesignGraphic = ({ design }) => {\r\n    \r\n    const classes = useStyles();\r\n    //const learningtasksArray = design.data.learningtasks\r\n    //let tasksArrayNew = \"\"\r\n    //let modality = \"\"\r\n\r\n    const tasksModalityOA = 1;\r\n    const tasksModalityOS= 2;\r\n    const tasksModalityPA= 0;\r\n    const tasksModalityPS= 0;\r\n    \r\n    //const tasksArray = learningtasksArray.forEach((learningActivity) => {\r\n    //    if(learningActivity.tasks!==undefined){\r\n    //        tasksArrayNew = learningActivity.tasks\r\n    //    } \r\n    //});\r\n\r\n    //const ModalityArray = tasksArrayNew.forEach((tasks) => {\r\n    //    if(tasks.modality!==undefined){\r\n    //        modality = tasks.modality\r\n    //    } \r\n    //});\r\n\r\n\r\n    //console.log(modality)\r\n\r\n    //useEffect(() => {\r\n    //    if( modality === \"Online-Sincrono\" ){\r\n    //        tasksModalityOS = tasksModalityOS + 1\r\n    //    }\r\n    //}, [modality, tasksModalityOS])\r\n    \r\n    \r\n    const tasksFormatGroup = 2\r\n    const tasksFormatSingle = 1\r\n    const tasksFormatAllClass = 0\r\n    \r\n    useEffect(() => {\r\n        learningResultPie();\r\n        //emit socket\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        activityFormatBar();\r\n        //emit socket\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        activityModalityBar();\r\n        //emit socket\r\n    }, []);\r\n    \r\n    const learningResultPie = () =>{\r\n\r\n        const ctx = document.getElementById('analysisPie');\r\n        \r\n        new Chart(ctx, {\r\n            type: 'pie',\r\n            data: {\r\n                labels: ['Adquisición', 'Investigación', 'Colaboración', 'Discusión', 'Práctica', 'Producción'],\r\n                datasets: [{\r\n                    label: 'Análisis',\r\n                    data: [1, 1, 1, 1, 1, 1], \r\n                    backgroundColor: [\r\n                        'rgba(255, 99, 132, 0.6)',\r\n                        'rgba(54, 162, 235, 0.6)',\r\n                        'rgba(255, 206, 86, 0.6)',\r\n                        'rgba(75, 192, 192, 0.6)',\r\n                        'rgba(153, 102, 255, 0.6)',\r\n                        'rgba(255, 159, 64, 0.6)'\r\n                    ],\r\n                    borderWidth: 0\r\n                }]\r\n            },\r\n            options: {\r\n                animation: false,\r\n                legend: {\r\n                    position: 'bottom',\r\n                    labels:{\r\n                        boxWidth: 20\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    const activityFormatBar = () => {\r\n        \r\n        const ctx = document.getElementById('formatBar');\r\n\r\n        new Chart(ctx, {\r\n            type: 'horizontalBar',\r\n            data: {\r\n                labels: ['Formato'],\r\n                datasets: [{\r\n                    label: 'Grupal',\r\n                    data: [tasksFormatGroup],\r\n                    backgroundColor: [\r\n                        'rgba(61, 156, 65, 0.8)',\r\n                    ],\r\n                },{\r\n                    label: 'Individual',\r\n                    data: [tasksFormatSingle],\r\n                    backgroundColor: [\r\n                        'rgba(224, 243, 225, 0.8)',\r\n                    ],\r\n                },{\r\n                    label: 'Toda la clase',\r\n                    data: [tasksFormatAllClass],\r\n                    backgroundColor: [\r\n                        'rgba(102, 242, 108, 0.75)',\r\n                    ],\r\n                }\r\n            ]\r\n            },\r\n            options: {\r\n                animation: false,\r\n                scales: {\r\n                    xAxes: [{\r\n                        gridLines:{\r\n                            display:false,\r\n                        },\r\n                        stacked: true,\r\n                    }],\r\n                    yAxes: [{\r\n                        gridLines:{\r\n                            display:false,\r\n                        },\r\n                        stacked: true\r\n                    }]\r\n                },\r\n                legend: {\r\n                    position: 'bottom',\r\n                    labels:{\r\n                        boxWidth: 20\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    const activityModalityBar=()=>{\r\n        \r\n        const ctx = document.getElementById('modalityBar');\r\n\r\n        new Chart(ctx, {\r\n            type: 'horizontalBar',\r\n            data: {\r\n                labels: ['Modalidad'],\r\n                datasets: [{\r\n                    label: 'Online-Asincrono',\r\n                    data: [tasksModalityOA],\r\n                    backgroundColor: [\r\n                        '#A6CAF6',\r\n                    ],\r\n                },{\r\n                    label: 'Online-Sincrono',\r\n                    data: [tasksModalityOS],\r\n                    backgroundColor: [\r\n                        '#6996CD',\r\n                    ],\r\n                },{\r\n                    label: 'Presencial-Asincrono',\r\n                    data: [tasksModalityPA],\r\n                    backgroundColor: [\r\n                        '#5FA2EF',\r\n                    ],\r\n                },{\r\n                    label: 'Presencial-Sincrono',\r\n                    data: [tasksModalityPS],\r\n                    backgroundColor: [\r\n                        '#135BB3',\r\n                    ],\r\n                }\r\n            ]\r\n            },\r\n            options: {\r\n                animation: false,\r\n                scales: {\r\n                    xAxes: [{\r\n                        gridLines:{\r\n                            display:false,\r\n                        },\r\n                        stacked: true,\r\n                    }],\r\n                    yAxes: [{\r\n                        gridLines:{\r\n                            display:false,\r\n                        },\r\n                        stacked: true\r\n                    }]\r\n                },\r\n                legend: {\r\n                    position: 'bottom',\r\n                    align: 'center',\r\n                    labels:{\r\n                        boxWidth: 20,\r\n                    }\r\n                },\r\n                layout:{\r\n                    padding: {\r\n                        left: 20,\r\n                        right: 20,\r\n                        top: 0,\r\n                        bottom: 0\r\n                    }\r\n                },\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <>\r\n        <Grid className={classes.spaceGraphic}>\r\n            <Grid container alignItems='center' justify='center' >\r\n                <Typography color=\"textSecondary\"> Análisis</Typography>\r\n            </Grid>\r\n            <canvas id=\"analysisPie\"></canvas>\r\n        </Grid>\r\n        <Grid className={classes.spaceGraphic}>\r\n            <Grid container alignItems='center' justify='center' >\r\n                <Typography color=\"textSecondary\">Actividades</Typography>\r\n                \r\n                <Grid className={classes.spaceTasks}>\r\n                    <canvas id=\"formatBar\"></canvas>\r\n                </Grid>\r\n                <canvas id=\"modalityBar\"></canvas>\r\n            </Grid>\r\n        </Grid> \r\n        </>\r\n    )\r\n}\r\n","import types from \"types\";\r\n\r\n\r\nexport const designReducer = ( state, action ) => {\r\n    switch (action.type) {\r\n        case types.design.updateDesign:\r\n            return {\r\n                ...state,\r\n                design: action.payload,\r\n            };\r\n        case types.design.setCurrentLearningResultField:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    ...state.currentLearningResult,\r\n                    [action.payload.field]: action.payload.value,\r\n                }\r\n            }\r\n        case types.design.clearCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: {\r\n                    category: null,\r\n                    verb: null,\r\n                    description: null,\r\n                    editing: false,\r\n                    index: null,\r\n                }\r\n            }\r\n        case types.design.setCurrentLearningResult:\r\n            return {\r\n                ...state,\r\n                currentLearningResult: action.payload\r\n            }\r\n        case types.design.setBloomCategories:\r\n            return {\r\n                ...state,\r\n                bloomCategories: action.payload\r\n            }\r\n        case types.design.setBloomVerbs:\r\n            return {\r\n                ...state,\r\n                bloomVerbs: action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import React, { useContext, createContext, useReducer } from 'react';\r\nimport { designReducer } from 'contexts/design/designReducer';\r\n\r\nconst DesignContext = createContext();\r\n\r\nexport function useDesignState() {\r\n\tconst context = useContext(DesignContext);\r\n\tif (context === undefined) {\r\n\t\tthrow new Error('useDesignState must be used within a DesignProvider');\r\n\t}\r\n\r\n\treturn context;\r\n}\r\n\r\nconst initialState = {\r\n\tdesign: null,\r\n\tcurrentLearningResult: {\r\n\t\tcategory: null,\r\n\t\tverb: null,\r\n\t\tdescription: null,\r\n\t\tediting: false,\r\n\t\tindex: null,\r\n\t},\r\n\tbloomCategories: [],\r\n\tbloomVerbs: [],\r\n};\r\n\r\nexport const DesignProvider = ({ children }) => {\r\n\r\n\tconst [ designState, dispatch ] = useReducer(designReducer, initialState);\r\n\r\n\treturn (\r\n\t\t<DesignContext.Provider value={ { designState, dispatch } }>\r\n\t\t\t{ children }\r\n\t\t</DesignContext.Provider>\r\n\t);\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { Grid, IconButton, makeStyles, Typography, Tooltip, Paper, TextField, MenuItem, FormControl, Select } from '@material-ui/core';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useForm } from 'hooks/useForm';\r\nimport TimeFormatter from 'utils/timeFormatters';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nconst useStyles = makeStyles((theme) => ({\r\n    taskSpacing: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(1)\r\n    },\r\n    trashIcon: {\r\n        display: 'flex',\r\n    },\r\n    tasksSpacing: {\r\n        marginTop: theme.spacing(1),\r\n        background: theme.palette.background.workSpace\r\n    },\r\n    taskSpacingDescription: {\r\n        marginLeft: theme.spacing(2),\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    taskSpacingDescriptionBD: {\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    colorLearningType: {\r\n        width: '100%',\r\n        height: '100%',\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\nexport const Task = ({ learningActivityIndex, index, task }) => {\r\n    const classes = useStyles();\r\n    const { socket } = useSocketState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        description: task.description,\r\n        learningType: task.learningType ? task.learningType : 'Seleccionar',\r\n        modality: task.modality ? task.modality :'Seleccionar',\r\n        format: task.format ? task.format :'Seleccionar',\r\n        timeHours: TimeFormatter.toHoursAndMinutes(task.duration)[0],\r\n        timeMinutes: TimeFormatter.toHoursAndMinutes(task.duration)[1],\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            description: task.description,\r\n            learningType: task.learningType ? task.learningType : 'Seleccionar',\r\n            modality: task.modality ? task.modality :'Seleccionar',\r\n            format: task.format ? task.format :'Seleccionar',\r\n            timeHours: TimeFormatter.toHoursAndMinutes(task.duration)[0],\r\n            timeMinutes: TimeFormatter.toHoursAndMinutes(task.duration)[1],\r\n        });\r\n    }, [design, setValues, task]);\r\n\r\n    const { description, learningType, modality, format, timeHours, timeMinutes,  } = form;\r\n\r\n    const editTask = ({ target }) => {\r\n        if (target.name === 'timeHours' || target.name === 'timeMinutes') {\r\n            socket.emit('edit-task-field', { designId: design._id, learningActivityIndex, index, field: 'duration', value: TimeFormatter.toMinutes(timeHours, timeMinutes) });\r\n        } else {\r\n            socket.emit('edit-task-field', { designId: design._id, learningActivityIndex, index, field: target.name, value: form[target.name] });\r\n        }\r\n    };\r\n\r\n    const handleDeleteTask = () => {\r\n        socket.emit('delete-task', { designId: design._id, learningActivityIndex, index });\r\n    };\r\n\r\n    const handleChangeDropdown = (e) => {\r\n        handleInputChange(e);\r\n        socket.emit('edit-task-field', { designId: design._id, learningActivityIndex, index, field: e.target.name, value: e.target.value });\r\n    };\r\n\r\n    const listtasksArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper square className={classes.tasksSpacing}>\r\n                    <Grid container >\r\n                        <Grid item xs={1}>\r\n                            {(() => {\r\n                                if (task.learningType === 'Investigación') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#57A8E7' }}></div>\r\n                                    )\r\n                                } else if (task.learningType === 'Adquisición') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#E95D5D' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Producción') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#C8951F' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Discusión') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#087A4C' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Colaboración') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#DFDF3F' }}></div>\r\n                                    )\r\n                                }else if (task.learningType === 'Práctica') {\r\n                                    return (\r\n                                        <div className={classes.colorLearningType} style={{ backgroundColor: '#A75BCD' }}></div>\r\n                                    )\r\n                                }\r\n                            })()}\r\n                        </Grid>\r\n                        <Grid item xs={11}>\r\n                            <Grid container className={classes.taskSpacing}>\r\n                                <Grid item xs={12} sm={5}>\r\n                                    <FormControl variant='outlined' size='small' style={{width: '90%'}}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" > Aprendizaje </Typography>\r\n                                        <Select\r\n                                            name='learningType'\r\n                                            value={learningType}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Investigación'}> Investigación </MenuItem>\r\n                                            <MenuItem value={'Adquisición'}> Adquisición </MenuItem>\r\n                                            <MenuItem value={'Producción'}> Producción </MenuItem>\r\n                                            <MenuItem value={'Discusión'}> Discusión </MenuItem>\r\n                                            <MenuItem value={'Colaboración'}> Colaboración </MenuItem>\r\n                                            <MenuItem value={'Práctica'}> Práctica </MenuItem>\r\n                                            \r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Grid>\r\n                                <Grid item xs={12} sm={6} className={classes.grid} style={{justifyContent: 'space-between'}}>\r\n                                    <FormControl variant='outlined' size='small' style={{width: '90%'}}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" > Modalidad </Typography>\r\n                                        <Select\r\n                                            name='modality'\r\n                                            value={modality}\r\n                                            onChange={handleChangeDropdown}\r\n                                        >\r\n                                            <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                            <MenuItem value={'Presencial-Asincrono'}> Presencial-Asincrono</MenuItem>\r\n                                            <MenuItem value={'Presencial-Sincrono'}> Presencial-Sincrono</MenuItem>\r\n                                            <MenuItem value={'Online-Asincrono'}> Online-Asincrono</MenuItem>\r\n                                            <MenuItem value={'Online-Sincrono'}> Online-Sincrono</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <Tooltip title=\"Delete\">\r\n                                        <IconButton onClick={() => handleDeleteTask(index)}>\r\n                                            <DeleteForeverIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                    </Tooltip>\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container className={classes.taskSpacing}>\r\n                                <Grid item xs={12} sm={6} className={classes.grid}>\r\n                                    <div style={{ width: '100%' }}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\"> Tiempo de trabajo </Typography>\r\n                                        <div className={classes.timeField}>\r\n                                            <TextField\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                name=\"timeHours\"\r\n                                                value={timeHours}\r\n                                                onChange={handleInputChange}\r\n                                                label=\"Horas\"\r\n                                                type=\"number\"\r\n                                                onBlur={editTask}\r\n                                                inputProps={{\r\n                                                    min: 0,\r\n                                                    max: 59\r\n                                                }}\r\n                                                fullWidth\r\n                                            />\r\n                                            <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                            <TextField\r\n                                                margin=\"dense\"\r\n                                                variant=\"outlined\"\r\n                                                name=\"timeMinutes\"\r\n                                                value={timeMinutes}\r\n                                                onChange={handleInputChange}\r\n                                                label=\"Minutos\"\r\n                                                type=\"number\"\r\n                                                onBlur={editTask}\r\n                                                inputProps={{\r\n                                                    min: 0,\r\n                                                    max: 59\r\n                                                }}\r\n                                                fullWidth\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </Grid>\r\n                                <Grid item xs={12} sm={6} className={classes.grid}>\r\n                                        <FormControl variant='outlined' size='small' style={{width: '90%', marginRight: 5}}>\r\n                                        <Typography variant=\"body2\" color=\"textSecondary\" style={{marginBottom: 4, marginRight: 5}}> Formato </Typography>\r\n                                            <Select\r\n                                                name='format'\r\n                                                value={format}\r\n                                                onChange={handleChangeDropdown}\r\n                                            >\r\n                                                <MenuItem value={'Seleccionar'}> Seleccionar </MenuItem>\r\n                                                <MenuItem value={'Grupal'}> Grupal</MenuItem>\r\n                                                <MenuItem value={'Individual'}> Individual</MenuItem>\r\n                                                <MenuItem value={'Toda la clase'}> Toda la clase</MenuItem>\r\n                                            </Select>    \r\n                                        </FormControl>\r\n                                </Grid>\r\n                            </Grid>\r\n                            <Grid container className={classes.taskSpacingDescription}>\r\n                                <Grid item sm={11}>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" > Descripción </Typography>\r\n                                    <Grid className={classes.taskSpacingDescriptionBD}>\r\n                                        <TextField\r\n                                            multiline\r\n                                            margin='dense'\r\n                                            variant=\"outlined\"\r\n                                            name=\"description\"\r\n                                            placeholder=\"Descripción\"\r\n                                            value={description}\r\n                                            onChange={handleInputChange}\r\n                                            type=\"text\"\r\n                                            onBlur={editTask}\r\n                                            fullWidth\r\n                                        />\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n    return (\r\n        <>\r\n            {\r\n                listtasksArray()\r\n            }\r\n\r\n\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles, Tooltip } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        border: `1px solid ${theme.palette.divider}`,\r\n        borderRadius: '6px',\r\n        height: '100%',\r\n    },\r\n    title:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    colorBox: {\r\n        width: 10,\r\n        height: 10,\r\n        marginRight: 5,\r\n        border: `1px solid #dddddd`,\r\n    }\r\n}));\r\n\r\n\r\nexport const StackedBar = ({\r\n    height = 25,\r\n    items = [{\r\n        title: 'Investigación',\r\n        value: 0.33,\r\n    },{\r\n        title: 'Práctica',\r\n        value: 0.67,\r\n    }]\r\n}) => {\r\n    const classes = useStyles();\r\n    const colors = ['red', 'purple', 'green', 'yellow', 'grey', 'blue'];\r\n\r\n    return (\r\n        <div className={classes.root} style={{height}}>\r\n            {\r\n                items.map( (item, index) => (\r\n                    <Tooltip \r\n                        key={`nombreGrafico${index}`} \r\n                        title={\r\n                            <div className={classes.title}>\r\n                                <div className={classes.colorBox} style={{backgroundColor: colors[index]}}></div>\r\n                                {`${item.title}: ${item.value * 100}%`}\r\n                            </div>\r\n                        } \r\n                        arrow\r\n                    >\r\n                        <div\r\n                            style={{\r\n                                width: `${item.value * 100}%`, \r\n                                height: '100%', \r\n                                borderRadius: index === 0 \r\n                                    ? '5px 0px 0px 5px'\r\n                                    : index === items.length - 1\r\n                                        ? '0px 5px 5px 0px'\r\n                                        : 0,\r\n                                backgroundColor: colors[index]\r\n                                }}\r\n                            >\r\n                        </div>\r\n                    </Tooltip>\r\n                ))\r\n            }\r\n        </div>\r\n    );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { Button, Checkbox, Divider, FormControlLabel, Grid, IconButton, makeStyles, Paper, TextField, Tooltip, Typography } from '@material-ui/core'\r\nimport { Task } from 'pages/DesignPage/Workspace/Task';\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { StackedBar } from 'components/StackedBar';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    unitSpacing: {\r\n        marginTop: theme.spacing(3),\r\n    },\r\n    titleUnitSpacing: {\r\n        display: 'flex',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    graphicUnitSpacing: {\r\n        width: '100%',\r\n        paddingLeft: 10,\r\n        paddingRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    trashIcon: {\r\n        marginLeft: \"auto\",\r\n    },\r\n    spacingDescriptionlearningActivity: {\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    spacingDescription: {\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    spacingLinkedResults: {\r\n        marginTop: theme.spacing(2),\r\n    },\r\n    buttonPos: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: \"auto\",\r\n    },\r\n    gridTask: {\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(1),\r\n    },\r\n    learningResultList: {\r\n        display: 'flex',\r\n        flexWrap: 'nowrap',\r\n        flexDirection: 'column',\r\n        paddingLeft: 15,\r\n        maxHeight: 200,\r\n        overflow: 'auto',\r\n        overflowX: true,\r\n    }\r\n}));\r\n\r\nexport const LearningActivity = ({ index, learningActivity }) => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { socket } = useSocketState();\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        title: learningActivity.title,\r\n        description: learningActivity.description,\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            title: learningActivity.title,\r\n            description: learningActivity.description,\r\n        });\r\n    }, [design, setValues, learningActivity]);\r\n\r\n    const { title, description } = form;\r\n\r\n    const editUnit = ({target}) => {\r\n        socket.emit('edit-unit-field', { designId: design._id, index, field: target.name, value: form[target.name] });\r\n    };\r\n\r\n    const handleDeleteUnit = () => {\r\n        socket.emit('delete-learningActivity', { designId: design._id, index });\r\n    };\r\n\r\n    const handleAddTask = () => {\r\n        socket.emit('new-task', { designId: design._id, index });\r\n    };\r\n\r\n    const handleToggleLearningResult = (e, isSelected, result) => {\r\n        if(isSelected){\r\n            let indexLearningResults = 0;\r\n            learningActivity.learningResults.forEach((r, _indexLearningResults) => {\r\n                if (r.verb === result.verb && r.description === result.description) indexLearningResults = _indexLearningResults;\r\n            });\r\n\r\n            socket.emit('delete-learning-result-from-learningActivity', {\r\n                designId: design._id,\r\n                index,\r\n                indexLearningResults\r\n            });\r\n        }else{\r\n            socket.emit('add-learning-result-to-learningActivity', {\r\n                designId: design._id,\r\n                index,\r\n                result\r\n            });\r\n        }\r\n    };\r\n\r\n    const listlearningActivityArray = () => {\r\n        return (\r\n            <Grid key={index}>\r\n                <Paper className={classes.unitSpacing}>\r\n                    <Grid container>\r\n                        <Grid item xs={12} sm={5} className={classes.titleUnitSpacing}>\r\n                            <TextField\r\n                                margin='dense'\r\n                                variant=\"outlined\"\r\n                                name=\"title\"\r\n                                label='Título'\r\n                                value={title}\r\n                                onChange={handleInputChange}\r\n                                type=\"text\"\r\n                                onBlur={editUnit}\r\n                                inputProps={{ maxLength: 30 }}\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={7} className={classes.graphicUnitSpacing}>\r\n                            <StackedBar />\r\n                            <Tooltip title=\"Delete\">\r\n                                <IconButton onClick={handleDeleteUnit}>\r\n                                    <DeleteForeverIcon fontSize=\"small\" />\r\n                                </IconButton>\r\n                            </Tooltip>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Divider />\r\n                    <Grid container spacing={2} >\r\n                        <Grid item xs={12} sm={8}>\r\n                            <Grid className={classes.gridTask}>\r\n                                { \r\n                                    design.data.learningActivities[index] && design.data.learningActivities[index].tasks && design.data.learningActivities[index].tasks.map((task, i)=> <Task key={`task-${i}-learningActivity-${index}`} index={i} task={task} learningActivityIndex={index}/> ) \r\n                                }\r\n                            </Grid>\r\n                            <Grid container>\r\n                                <Grid item />\r\n                                <Grid item className={classes.buttonPos}>\r\n                                    <Button size=\"small\" variant=\"outlined\" onClick={handleAddTask}> Agregar Tarea </Button>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={4} >\r\n                            <Typography variant=\"body2\" className={classes.spacingDescriptionlearningActivity} color=\"textSecondary\"> Descripción Unidad de aprendizaje </Typography>\r\n                            <Grid className={classes.spacingDescription}>\r\n                                <TextField\r\n                                    multiline\r\n                                    margin='dense'\r\n                                    variant=\"outlined\"\r\n                                    name=\"description\"\r\n                                    placeholder='Descripción'\r\n                                    value={description}\r\n                                    onChange={handleInputChange}\r\n                                    type=\"text\"\r\n                                    onBlur={editUnit}\r\n                                    fullWidth\r\n                                />\r\n                            </Grid>\r\n                            <Typography variant=\"body2\" className={classes.spacingLinkedResults} color=\"textSecondary\"> Resultados Vinculados </Typography>\r\n                            <div className={classes.learningResultList}>\r\n                                {\r\n                                    design.metadata.results.map(result => (\r\n                                        <FormControlLabel\r\n                                            style={{width: '50%'}}\r\n                                            key={`learning-result-${result.verb}`}\r\n                                            control={\r\n                                                <Checkbox \r\n                                                    checked={!!learningActivity.learningResults.find(lr=> lr.verb === result.verb)} \r\n                                                    onChange={(e)=>handleToggleLearningResult(e, \r\n                                                        !!learningActivity.learningResults.find(lr=> lr.verb === result.verb),\r\n                                                        result\r\n                                                    )} \r\n                                                />\r\n                                            }\r\n                                            label={result.verb}\r\n                                        />\r\n                                    ))\r\n                                }\r\n                            </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Paper>\r\n            </Grid>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {\r\n                listlearningActivityArray()\r\n            }\r\n        </>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { Button, ButtonGroup, Divider, Grid, makeStyles, Typography } from '@material-ui/core';\r\nimport { DesignGraphic } from 'pages/DesignPage/Workspace/DesignGraphic';\r\nimport { LearningActivity } from 'pages/DesignPage/Workspace/LearningActivity';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 15,\r\n        paddingRight: 15,\r\n        background: theme.palette.background.workSpace,\r\n        height: 'calc(100vh - 177px)',\r\n        overflow: 'auto'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    buttonGroupWorkSpace:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    textLefPanel:{\r\n        marginTop: theme.spacing(1),\r\n        marginBottom: theme.spacing(1)\r\n    },\r\n    spaceData:{\r\n        marginBottom: theme.spacing(1),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    LeftPanelMetadata:{\r\n        marginTop: theme.spacing(1),\r\n        marginLeft: theme.spacing(2),\r\n        marginRight: theme.spacing(2)\r\n    },\r\n    textLefPanelMetadata:{\r\n        marginTop: theme.spacing(3)\r\n    },\r\n    workSpaceUnits:{\r\n    },\r\n    '@global': {\r\n        //Ancho del scrollbar    \r\n        '*::-webkit-scrollbar': {\r\n            width: '0.4em'\r\n        },\r\n        //Sombra del scrollbar\r\n        '*::-webkit-scrollbar-track': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)'\r\n            \r\n        },\r\n        //Scrollbar\r\n        '*::-webkit-scrollbar-thumb': {\r\n            '-webkit-box-shadow': 'inset 0 0 6px rgba(0,0,0,0.2)',\r\n            borderRadius: '15px',\r\n            backgroundColor: 'rgba(0,0,0,.1)',\r\n        }\r\n    },\r\n      \r\n}));\r\n\r\nexport const DesignWorkspace = () => {\r\n    const classes = useStyles();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n    const { socket } = useSocketState();\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n    };\r\n\r\n    const handleNewUA = () => {\r\n        socket.emit('new-learningActivity', { designId: design._id });    \r\n    };\r\n    \r\n    return (\r\n        <>  \r\n            <Grid container>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}>\r\n                    <Grid container alignItems='center' justify='center'>\r\n                        <Typography className={classes.textLefPanel}> INFORMACIÓN DISEÑO </Typography>\r\n                    </Grid>\r\n                    <Divider className={classes.spaceData}/>\r\n                    <Grid className={classes.LeftPanelMetadata}>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary'> Nombre </Typography>\r\n                                        <Typography variant=\"body2\">{ metadata.name }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.category &&(\r\n                                <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}>Tema</Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.category.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTime &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Tiempo de trabajo </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTime } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.workingTimeDesign &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}>Tiempo de trabajo Diseño</Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.workingTimeDesign } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.name &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Modo de entrega </Typography>\r\n                                        <Typography variant=\"body2\" > { metadata.name } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                            { metadata && metadata.classSize &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Tamaño de la clase </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.classSize } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        <Grid>\r\n                            { metadata && metadata.priorKnowledge &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Conocimiento Previo </Typography>\r\n                                        <Typography variant=\"body2\" > { metadata.priorKnowledge } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.description &&(\r\n                                    <>\r\n                                        <Typography variant=\"body2\" color='textSecondary' className={classes.textLefPanelMetadata}> Descripción </Typography>\r\n                                        <Typography variant=\"body2\"> { metadata.description } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { metadata && metadata.objective &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Objetivos </Typography>\r\n                                        <Typography> { metadata.objective } </Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )\r\n                            }\r\n                        </Grid>\r\n                        <Grid>\r\n                            { /*metadata && metadata.results &&(\r\n                                    <>\r\n                                        <Typography color='textSecondary' className={classes.textLefPanelMetadata}> Resultados </Typography>\r\n                                        <Typography>{ metadata.results }</Typography>\r\n                                        <Divider/>\r\n                                    </>\r\n                                )*/\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <ButtonGroup size=\"small\" aria-label=\"outlined primary button group\" className={classes.buttonGroupWorkSpace}>\r\n                        <Button>Nuevo</Button>\r\n                        <Button>Compartir</Button>\r\n                        <Button onClick = {handleSaveDesign}>Guardar</Button>\r\n                    </ButtonGroup>\r\n                    <Grid className={classes.workSpaceUnits}>\r\n                        <Button size=\"small\" variant = \"outlined\" onClick={handleNewUA}>Agregar Unidad de Aprendizaje</Button>\r\n                        <Grid >\r\n                            {\r\n                                design.data.learningActivities && design.data.learningActivities.map((learningActivity, index) => <LearningActivity key={`learningActivity-${index}`} index={index} learningActivity={learningActivity}/> )\r\n                            }\r\n                        </Grid>\r\n                    </Grid>\r\n                </Grid>\r\n                <Grid item xs={3} md={3} lg={2} className={classes.rightPanel}>\r\n                    <Grid >\r\n                        <DesignGraphic design = { design }/>\r\n                    </Grid>\r\n                </Grid>\r\n            </Grid>   \r\n        </>\r\n    )\r\n}\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getCategories = async () => {\r\n    const resp = await fetchWithToken('category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React from 'react';\r\nimport { IconButton, makeStyles, Typography } from '@material-ui/core';\r\nimport { Delete, Edit } from '@material-ui/icons';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        position: 'relative',\r\n        padding: 20,\r\n        width: '49%',\r\n        marginBottom: 10,\r\n        borderRadius: 5,\r\n        border: `1px solid ${ theme.palette.divider }`,\r\n    },\r\n    description: {\r\n        overflow: 'hidden',\r\n        textOverflow: 'ellipsis',\r\n        textAlign: 'justify',\r\n    },\r\n    actions: {\r\n        position: 'absolute',\r\n        top: 8,\r\n        right: 8,\r\n    }\r\n}));\r\n\r\nexport const LearningResult = ({ verb, description, index}) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { design } = designState;\r\n\r\n    const handleEdit = () => {\r\n        const { bloomVerbs, bloomCategories } = designState;\r\n        const category = bloomCategories.find((category) => category._id === bloomVerbs.find((v) => v.name === verb).category)._id;\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResult,\r\n            payload: {\r\n                category,\r\n                verb,\r\n                description,\r\n                editing: true,\r\n                index,\r\n            }\r\n        });\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        let index = 0;\r\n        design.metadata.results.forEach((result, _index) => {\r\n            if (result.verb === verb && result.description === description) index = _index;\r\n        });\r\n        socket.emit('delete-learning-result', { designId: design._id, index });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Resultado</Typography>\r\n            <Typography variant='body2'>{verb}</Typography>\r\n            <Typography color=\"textSecondary\" gutterBottom variant='caption'>Descripción</Typography>\r\n            <Typography className={classes.description} variant='body2'>{description}</Typography>\r\n            <div className={classes.actions}>\r\n                <IconButton className={classes.deleteIcon} onClick={handleEdit}>\r\n                    <Edit />\r\n                </IconButton>\r\n                <IconButton className={classes.deleteIcon} onClick={handleDelete}>\r\n                    <Delete />\r\n                </IconButton>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: '100%',\r\n        height: 300,\r\n        clipPath: 'polygon(50% 0, 0 100%, 100% 100%)',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    option: {\r\n        backgroundColor: theme.palette.primary.main,\r\n        marginBottom: 10,\r\n        width: '100%',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        '&:hover': {\r\n            transition: 'box-shadow .3s',\r\n            cursor: 'pointer',\r\n            boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)'\r\n        }\r\n    },\r\n    crear: {\r\n        paddingTop: 30,\r\n        height: '25%'\r\n    },\r\n    evaluar: {\r\n        height: '16.6%'\r\n    },\r\n    analizar: {\r\n        height: '16.6%'\r\n    },\r\n    aplicar: {\r\n        height: '16.6%'\r\n    },\r\n    comprender: {\r\n        height: '16.6%'\r\n    },\r\n    recordar: {\r\n        height: '16.6%'\r\n    },\r\n    active: {\r\n        boxShadow: '0 0px 8px 0 rgba(0, 0, 0, 0.2), 0 0px 20px 0 rgba(0, 0, 0, 0.19)',\r\n        backgroundColor: theme.palette.secondary.light,\r\n        color: 'white',\r\n    }\r\n}));\r\n\r\nexport const BloomPiramid = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const active = designState.currentLearningResult.category;\r\n    const { bloomCategories } = designState;\r\n\r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'category',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomCategories.map( option => {\r\n            const isActive = active === option._id;\r\n            return (\r\n                <div \r\n                    key={option._id}\r\n                    onClick={()=> handleSelectOption(isActive ? null : option._id)}\r\n                    className={`${classes.option} ${classes[option.name.toLowerCase()]} ${isActive && classes.active}`}\r\n                >\r\n                    { option.name }\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            { createOptionList() }\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport { FormControlLabel, makeStyles, Radio } from '@material-ui/core';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        width: '100%',\r\n        justifyContent: 'center',\r\n    },\r\n    option: {\r\n        minWidth: '25%'\r\n    }\r\n}));\r\n\r\nexport const BloomVerbList = () => {\r\n    const classes = useStyles();\r\n    const { designState, dispatch } = useDesignState();\r\n    const category = designState.currentLearningResult.category;\r\n    const active = designState.currentLearningResult.verb;\r\n    const { bloomVerbs } = designState;\r\n    \r\n    const handleSelectOption = ( value ) => {\r\n        dispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'verb',\r\n                value,\r\n            }\r\n        });\r\n    };\r\n\r\n    const createOptionList = () => {\r\n        return bloomVerbs.filter((verb) => verb.category === category).map(option => {\r\n            const isActive = active === option.name;\r\n            return (\r\n            <FormControlLabel \r\n                className={classes.option}\r\n                key={option._id}\r\n                value={option.name}\r\n                control={<Radio\r\n                    checked={isActive}\r\n                    onChange={(e)=> handleSelectOption(option.name)}\r\n                    value={option.name}\r\n                />}\r\n                label={option.name}\r\n            />\r\n        )});\r\n    }\r\n    return (\r\n        <div className={classes.root}>\r\n            {createOptionList()}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton, makeStyles, Step, StepLabel, Stepper, TextField } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport { BloomPiramid } from 'pages/DesignPage/Metadata/BloomPiramid';\r\nimport { BloomVerbList } from 'pages/DesignPage/Metadata/BloomVerbList';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport types from 'types';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between'\r\n    },\r\n    close: {\r\n        position: 'absolute',\r\n        right: theme.spacing(1),\r\n        top: theme.spacing(1),\r\n        color: theme.palette.grey[500],\r\n    }\r\n}));\r\n\r\nexport const LearningResultModal = ({ design, isOpen }) => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { designState, dispatch: designDispatch } = useDesignState();\r\n    const { dispatch: uiDispatch } = useUiState();\r\n    const { category, verb, editing, index } = designState.currentLearningResult;\r\n    const [ description, setDescription ] = useState(designState.currentLearningResult.description ?? '');\r\n    const [activeStep, setActiveStep] = useState(0);\r\n    const steps = ['Selecciona una categoría de bloom', 'Selecciona un verbo', 'Proporciona una descripción'];\r\n\r\n    useEffect(() => {\r\n        setDescription(designState.currentLearningResult.description);\r\n    }, [setDescription, designState.currentLearningResult.description]);\r\n\r\n    const handleNext = () => {\r\n        if(activeStep === 0 && category === null) return console.log('No ha seleccionado una categoría de bloom.');\r\n        else if (activeStep === 1 && verb === '') return console.log('No ha seleccionado un verbo de bloom.');\r\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n    };\r\n\r\n    const handleBack = () => {\r\n        setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n    };\r\n\r\n    const handleClose = (e) => {\r\n        uiDispatch({\r\n            type: types.ui.toggleModal,\r\n            payload: 'LearningResult',\r\n        });\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        handleClose();\r\n        setActiveStep(0);\r\n        designDispatch({ type: types.design.clearCurrentLearningResult });\r\n    };\r\n\r\n    const handleFinish = () => {\r\n        if(description.trim() === '') return console.log('No se ha ingresado una descripción.');\r\n        designDispatch({\r\n            type: types.design.setCurrentLearningResultField,\r\n            payload: {\r\n                field: 'description',\r\n                value: description,\r\n            }\r\n        });\r\n        if(!editing) socket.emit('add-learning-result', { designId: design._id, learningResult: { verb, description } });\r\n        else if (editing){\r\n            socket.emit('edit-learning-result', { designId: design._id, index, learningResult: { verb, description } });\r\n        }\r\n        handleCloseModal();\r\n    };\r\n\r\n    return (\r\n        <Dialog fullWidth open={isOpen} onClose={handleCloseModal} aria-labelledby=\"form-dialog-title\">\r\n            <div className={classes.title}>\r\n                <DialogTitle id=\"form-dialog-title\" onClose={handleCloseModal} >\r\n                    {\r\n                        !editing ? 'Nuevo resultado de aprendizaje' : 'Editar resultado de aprendizaje'\r\n                    }\r\n                </DialogTitle>\r\n                <IconButton className={classes.close} aria-label=\"close\" onClick={handleCloseModal}>\r\n                    <Close />\r\n                </IconButton>\r\n            </div>\r\n            <DialogContent>\r\n                <Stepper activeStep={activeStep} alternativeLabel>\r\n                    {steps.map((label) => (\r\n                        <Step key={label}>\r\n                            <StepLabel>{label}</StepLabel>\r\n                        </Step>\r\n                    ))}\r\n                </Stepper>\r\n                {\r\n                    (activeStep === 0)\r\n                        ? <BloomPiramid />\r\n                        : (activeStep === 1)\r\n                            ? <BloomVerbList />\r\n                            : <TextField\r\n                                multiline\r\n                                rows={6}\r\n                                variant=\"outlined\"\r\n                                name=\"description\"\r\n                                value={description ?? ''}\r\n                                onChange={({target})=> setDescription(target.value)}\r\n                                label=\"Descripción\"\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                }\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button\r\n                    disabled={activeStep === 0}\r\n                    onClick={handleBack}\r\n                >\r\n                    Volver\r\n                </Button>\r\n                {\r\n                    (activeStep === steps.length - 1)\r\n                        ? <Button variant=\"contained\" color=\"primary\" onClick={handleFinish}>\r\n                            Finalizar\r\n                        </Button>\r\n                        : <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\r\n                            Siguiente\r\n                        </Button>\r\n                }\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}","import React, { useEffect } from 'react';\r\nimport { Button, Divider, FormControl, FormControlLabel, Grid, InputLabel, makeStyles, MenuItem, Select, Switch, TextField, Typography } from '@material-ui/core'\r\nimport { useQuery } from 'react-query';\r\nimport { Alert } from '@material-ui/lab';\r\nimport { useForm } from 'hooks/useForm';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport TimeFormatter from 'utils/timeFormatters';\r\nimport { getCategories } from 'services/CategoryService';\r\nimport { LearningResult } from 'pages/DesignPage/Metadata/LearningResult';\r\nimport { LearningResultModal } from 'pages/DesignPage/Metadata/LearningResultModal';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { useUiState } from 'contexts/ui/UiContext';\r\nimport types from 'types';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingTop: 15,\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    title: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    content: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-between',\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n    },\r\n    grid: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n    category: {\r\n        width: '100%',\r\n    },\r\n    categoryPopOver: {\r\n        maxHeight: 400,\r\n    },\r\n    timeField: {\r\n        marginRight: 10,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n    },\r\n}));\r\n\r\nexport const DesignMetadata = () => {\r\n    const classes = useStyles();\r\n    const { socket/*, online*/ } = useSocketState();\r\n    const { authState } = useAuthState();\r\n    const { uiState, dispatch } = useUiState();\r\n    const { designState } = useDesignState();\r\n    const { design } = designState;\r\n    const { metadata } = design;\r\n\r\n    const [form, handleInputChange, , setValues] = useForm({\r\n        name: metadata.name,\r\n        category: metadata.category ? metadata.category.name : 'Sin categoría',\r\n        classSize: metadata.classSize,\r\n        workingTimeDesignHours: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[0],\r\n        workingTimeDesignMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[1],\r\n        workingTimeHours: TimeFormatter.toHoursAndMinutes(metadata.workingTime)[0],\r\n        workingTimeMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTime)[1],\r\n        priorKnowledge: metadata.priorKnowledge,\r\n        description: metadata.description,\r\n        objective: metadata.objective,\r\n        isPublic: metadata.isPublic\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValues({\r\n            name: metadata.name,\r\n            category: metadata.category ? metadata.category.name : 'Sin categoría',\r\n            classSize: metadata.classSize,\r\n            workingTimeDesignHours: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[0],\r\n            workingTimeDesignMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTimeDesign)[1],\r\n            workingTimeHours: TimeFormatter.toHoursAndMinutes(metadata.workingTime)[0],\r\n            workingTimeMinutes: TimeFormatter.toHoursAndMinutes(metadata.workingTime)[1],\r\n            priorKnowledge: metadata.priorKnowledge,\r\n            description: metadata.description,\r\n            objective: metadata.objective,\r\n            isPublic: metadata.isPublic\r\n        });\r\n    }, [design, setValues, metadata]);\r\n    \r\n    const { name, category, classSize, workingTimeDesignHours, workingTimeDesignMinutes, workingTimeHours, workingTimeMinutes, priorKnowledge, description, objective, isPublic } = form;\r\n\r\n    const { isLoading, isError, data, error } = useQuery('categories', async () => {\r\n        return await getCategories();\r\n    }, { refetchOnWindowFocus: false });\r\n\r\n    if (isError) {\r\n        return (<Typography>{error.message}</Typography>);\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n    const createCategoryList = () => {\r\n        if (data == null || data.categories.length === 0) return (<MenuItem value='Sin categoría'>Sin categoría</MenuItem>);\r\n        return data.categories.map(c => <MenuItem key={c._id} value={c.name}>{c.name}</MenuItem>);\r\n    };\r\n\r\n    const editDesign = ({ target }) => {\r\n        if (target.name === 'workingTimeHours' || target.name === 'workingTimeMinutes') {\r\n            socket.emit('edit-metadata-field', { designId: design._id, field: 'workingTime', value: TimeFormatter.toMinutes(workingTimeHours, workingTimeMinutes) });\r\n        } else {\r\n            socket.emit('edit-metadata-field', { designId: design._id, field: target.name, value: form[target.name] });\r\n        }\r\n    };\r\n\r\n    const handleChangeCategory = (e) => {\r\n        handleInputChange(e);\r\n        socket.emit('edit-metadata-field', { designId: design._id, field: e.target.name, value: data.categories.find(c => c.name === e.target.value) });\r\n    };\r\n\r\n    const handleTogglePublic = (e) => {\r\n        handleInputChange({ target: { value: e.target.checked, name: e.target.name } });\r\n        socket.emit('edit-metadata-field', { designId: design._id, field: e.target.name, value: e.target.checked });\r\n    };\r\n\r\n    const handleSaveDesign = (e) => {\r\n        socket.emit('save-design', { designId: design._id });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Grid container key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.leftPanel}></Grid>\r\n                <Grid item xs={12} md={6} lg={8} className={classes.workspace}>\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Información Diseño</Typography>\r\n                        <Button variant='outlined' color='default' onClick={handleSaveDesign}>Guardar Información</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <Grid container spacing={3} className={classes.content}>\r\n                        <Grid item className={classes.grid} xs={12} sm={9}  >\r\n                            <TextField\r\n                                margin=\"dense\"\r\n                                variant=\"outlined\"\r\n                                name=\"name\"\r\n                                value={name}\r\n                                onChange={handleInputChange}\r\n                                label=\"Nombre\"\r\n                                type=\"text\"\r\n                                onBlur={editDesign}\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} sm={3}>\r\n                            <div>\r\n                                <Typography variant='body2'>Visibilidad</Typography>\r\n                                <FormControlLabel\r\n                                    control={<Switch \r\n                                        name='isPublic' \r\n                                        checked={isPublic} \r\n                                        onChange={handleTogglePublic} \r\n                                        disabled={!(design.owner === authState.user.uid)}\r\n                                    />}\r\n                                    label={isPublic ? 'Público' : 'Privado'}\r\n                                />\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <FormControl className={classes.category} variant='outlined' size='small'>\r\n                                <InputLabel id=\"category-label\">Categoría</InputLabel>\r\n                                <Select\r\n                                    labelId=\"category-label\"\r\n                                    name='category'\r\n                                    label='Categoría'\r\n                                    value={category}\r\n                                    onChange={handleChangeCategory}\r\n                                    MenuProps={{ classes: { paper: classes.categoryPopOver } }}\r\n                                >\r\n                                    {createCategoryList()}\r\n                                </Select>\r\n                            </FormControl>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                margin='dense'\r\n                                variant=\"outlined\"\r\n                                name=\"classSize\"\r\n                                value={classSize ?? 0}\r\n                                onChange={handleInputChange}\r\n                                label=\"Tamaño de la clase\"\r\n                                onBlur={editDesign}\r\n                                type=\"number\"\r\n                                inputProps={{\r\n                                    min: 0\r\n                                }}\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo de trabajo </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <TextField\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeHours\"\r\n                                        value={workingTimeHours}\r\n                                        onChange={handleInputChange}\r\n                                        label=\"Horas\"\r\n                                        type=\"number\"\r\n                                        onBlur={editDesign}\r\n                                        inputProps={{\r\n                                            min: 0,\r\n                                            max: 59\r\n                                        }}\r\n                                        fullWidth\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <TextField\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeMinutes\"\r\n                                        value={workingTimeMinutes}\r\n                                        onChange={handleInputChange}\r\n                                        label=\"Minutos\"\r\n                                        type=\"number\"\r\n                                        onBlur={editDesign}\r\n                                        inputProps={{\r\n                                            min: 0,\r\n                                            max: 59\r\n                                        }}\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <div style={{ width: '100%' }}>\r\n                                <Typography > Tiempo diseñado </Typography>\r\n                                <div className={classes.timeField}>\r\n                                    <TextField\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeDesignHours\"\r\n                                        value={workingTimeDesignHours}\r\n                                        label=\"Horas\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                    <Typography style={{ marginLeft: 10, marginRight: 10 }}> : </Typography>\r\n                                    <TextField\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        name=\"workingTimeDesignMinutes\"\r\n                                        value={workingTimeDesignMinutes}\r\n                                        label=\"Minutos\"\r\n                                        type=\"number\"\r\n                                        disabled\r\n                                        fullWidth\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12}>\r\n                            <TextField\r\n                                multiline\r\n                                rows={6}\r\n                                variant=\"outlined\"\r\n                                name=\"description\"\r\n                                value={description ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label=\"Descripción\"\r\n                                onBlur={editDesign}\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                label=\"Conocimiento previo\"\r\n                                multiline\r\n                                rows={6}\r\n                                name=\"priorKnowledge\"\r\n                                value={priorKnowledge ?? ''}\r\n                                onChange={handleInputChange}\r\n                                onBlur={editDesign}\r\n                                variant=\"outlined\"\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                        <Grid item className={classes.grid} xs={12} md={12} lg={6}>\r\n                            <TextField\r\n                                multiline\r\n                                rows={6}\r\n                                variant=\"outlined\"\r\n                                name=\"objective\"\r\n                                value={objective ?? ''}\r\n                                onChange={handleInputChange}\r\n                                label=\"Objetivos\"\r\n                                onBlur={editDesign}\r\n                                type=\"text\"\r\n                                fullWidth\r\n                            />\r\n                        </Grid>\r\n                    </Grid>\r\n                    <div className={classes.title}>\r\n                        <Typography variant='h4'>Resultados de aprendizaje</Typography>\r\n                        <Button variant='outlined' color='default' onClick={() => dispatch({\r\n                                type: types.ui.toggleModal,\r\n                                payload: 'LearningResult',\r\n                            })}>Agregar</Button>\r\n                    </div>\r\n                    <Divider />\r\n                    <div className={classes.content}>\r\n                        {\r\n                            metadata.results.length === 0\r\n                                ? <Alert severity=\"info\" style={{ width: '100%', display: 'flex', justifyContent: 'center' }}>\r\n                                    Este diseño aún no tiene resultados de aprendizaje. Agrega el primer resultado de aprendizaje haciendo click aquí!\r\n                                </Alert>\r\n                                : metadata.results.map((result, index) => (\r\n                                    <LearningResult key={`learning-result-${index}`} index={index} {...result} />\r\n                                ))\r\n\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2} className={classes.rightPanel}></Grid>\r\n            </Grid>\r\n            <LearningResultModal design={design} isOpen={uiState.isLearningResultModalOpen}/>\r\n        </>\r\n    )\r\n}\r\n","import PropTypes from 'prop-types';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nexport const TabPanel = ({ children, value, index, ...other }) => {\r\n    return (\r\n      <div\r\n        role=\"tabpanel\"\r\n        hidden={value !== index}\r\n        id={`full-width-tabpanel-${index}`}\r\n        aria-labelledby={`full-width-tab-${index}`}\r\n        {...other}\r\n      >\r\n        {value === index && (\r\n            <Typography component={'span'}>{children}</Typography>\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.any.isRequired,\r\n    value: PropTypes.any.isRequired,\r\n};\r\n","import { fetchWithToken } from \"utils/fetch\";\r\n\r\nexport const getBloomCategories = async () => {\r\n    const resp = await fetchWithToken('bloom/category');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};\r\n\r\nexport const getBloomVerbs = async ( category ) => {\r\n    const resp = await fetchWithToken('bloom/verb', { category }, 'POST');\r\n    if(!resp.ok){\r\n        throw new Error(resp.message);\r\n    }\r\n    return resp.data;\r\n};","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Grid, makeStyles, Avatar, Tabs, Tab, Typography } from '@material-ui/core';\r\nimport { useSocketState } from 'contexts/SocketContext';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { formatName, getUserInitials } from 'utils/textFormatters';\r\nimport { DesignWorkspace } from 'pages/DesignPage/Workspace/DesignWorkspace';\r\nimport { DesignMetadata } from 'pages/DesignPage/Metadata/DesignMetadata';\r\nimport { TabPanel } from 'components/TabPanel';\r\nimport { useDesignState } from 'contexts/design/DesignContext';\r\nimport { getBloomCategories, getBloomVerbs } from 'services/BloomService';\r\nimport types from 'types';\r\nimport { Alert } from '@material-ui/lab';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    leftPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderRight: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    workspace: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        background: theme.palette.background.workSpace,\r\n        minHeight: 'calc(100vh - 64px)'\r\n    },\r\n    rightPanel: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        borderLeft: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menu: {\r\n        borderBottom: `1px solid ${theme.palette.divider}`,\r\n    },\r\n    menuLetters: {\r\n        marginLeft: theme.spacing(2),\r\n        marginBottom: theme.spacing(1),\r\n    },\r\n    menuLettersSelected: {\r\n        marginLeft: theme.spacing(2),\r\n        borderBottom: `2px solid ${theme.palette.divider}`\r\n    },\r\n    tabBar: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n    },\r\n    usersConnecteds: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n    },\r\n    error: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: 20,\r\n        alignItems: 'start',\r\n        minHeight: 'calc(100vh - 128px)',\r\n    },\r\n}));\r\n\r\nconst a11yProps = (index) => {\r\n    return {\r\n        id: `full-width-tab-${index}`,\r\n        'aria-controls': `full-width-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nexport const DesignPage = () => {\r\n    const classes = useStyles();\r\n    const { id } = useParams();\r\n    const isMounted = useRef(true);\r\n    const { authState } = useAuthState();\r\n    const { socket, online } = useSocketState();\r\n    const [users, setUsersList] = useState([]);\r\n    const [tabIndex, setTabIndex] = useState(0);\r\n    const { designState, dispatch } = useDesignState();\r\n    const { design } = designState;\r\n    const [error, setError] = useState(null);\r\n    \r\n    const prefetchBloomCategories = useCallback(async () => {\r\n        const data = await getBloomCategories();\r\n        dispatch({\r\n            type: types.design.setBloomCategories,\r\n            payload: data.bloomCategories,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    const prefetchBloomVerbs = useCallback(async () => {\r\n        const data = await getBloomVerbs('');\r\n        dispatch({\r\n            type: types.design.setBloomVerbs,\r\n            payload: data.bloomVerbs,\r\n        });\r\n    }, [dispatch]);\r\n\r\n    useEffect(()=>{\r\n        prefetchBloomCategories();\r\n        prefetchBloomVerbs();\r\n    }, [prefetchBloomCategories, prefetchBloomVerbs]);\r\n\r\n    useEffect(()=>{\r\n        return () => {\r\n            isMounted.current = false;\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if(online){\r\n            socket?.emit('join-to-design', { user: authState.user, designId: id }, (res) => {\r\n                if (res.ok){\r\n                    if(isMounted.current) {\r\n                        dispatch({\r\n                            type: types.design.updateDesign,\r\n                            payload: res.data.design\r\n                        });\r\n                    }\r\n                } \r\n                else setError(res.message);\r\n            });\r\n        }\r\n    }, [socket, authState.user, id, online, dispatch]);\r\n\r\n    useEffect(() => {\r\n        socket?.on('update-design', (design) => {\r\n            if(isMounted.current) {\r\n                dispatch({\r\n                    type: types.design.updateDesign,\r\n                    payload: design\r\n                });\r\n            }\r\n        });\r\n        socket?.on('users', (users) => {\r\n            if(isMounted.current) setUsersList(users);\r\n        });\r\n        return () => {\r\n            socket?.emit('leave-from-design', { user: authState.user, designId: id });\r\n            socket?.off('updateDesign');\r\n            socket?.off('users');\r\n        };\r\n    }, [socket, authState.user, id, dispatch]);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setTabIndex(newValue);\r\n    };\r\n    \r\n    if(error){\r\n        return (\r\n            <div className={classes.error}>\r\n                <Alert severity='error'>\r\n                    { error }\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!design) {\r\n        return (<Typography>Cargando...</Typography>);\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Grid container className={classes.menu} key={design._id}>\r\n                <Grid item xs={12} md={3} lg={2} />\r\n                <Grid item xs={12} md={6} lg={8} className={classes.tabBar}>\r\n                    <Tabs\r\n                        value={tabIndex}\r\n                        onChange={handleChange}\r\n                        aria-label=\"full width tabs example\"\r\n                    >\r\n                        <Tab label=\"METADATA\" {...a11yProps(0)} />\r\n                        <Tab label=\"DISEÑO\" {...a11yProps(1)} />\r\n                    </Tabs>\r\n                    <div className={classes.usersConnecteds}>\r\n                        {\r\n                            users.map((user, index) =>\r\n                                <Avatar\r\n                                    key={user.uid + index}\r\n                                    alt={formatName(user.name, user.lastname)}\r\n                                    src={user.img ?? ''}\r\n                                >\r\n                                    {getUserInitials(user.name, user.lastname)}\r\n                                </Avatar>\r\n                            )\r\n                        }\r\n                    </div>\r\n                </Grid>\r\n                <Grid item xs={12} md={3} lg={2}></Grid>\r\n            </Grid>\r\n            <TabPanel value={tabIndex} index={0}>\r\n                <DesignMetadata />\r\n            </TabPanel>\r\n            <TabPanel value={tabIndex} index={1}>\r\n                <DesignWorkspace/>\r\n            </TabPanel>\r\n        </>\r\n    )\r\n}","import React, { useEffect } from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport { LandingPage } from 'pages/LandingPage/LandingPage';\r\nimport { PublicRoute } from 'router/PublicRoute';\r\nimport { PrivateRoute } from 'router/PrivateRoute';\r\nimport { MyDesignsPage } from 'pages/Navigation/MyDesigns/MyDesignsPage';\r\nimport { UserProfile } from 'pages/User/UserProfile/UserProfile';\r\nimport { useAuthState } from 'contexts/AuthContext';\r\nimport { NavBar } from 'components/NavBar';\r\nimport { UserConfigProvider} from 'contexts/UserConfigContext';\r\nimport { Footer } from 'components/Footer';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { SharedWithMePage } from 'pages/Navigation/SharedWithMe/SharedWithMePage';\r\nimport { PublicRepositoryPage } from 'pages/Navigation/PublicRepository/PublicRepositoryPage';\r\nimport { SearchUsersPage } from 'pages/User/SearchUsersPage/SearchUsersPage';\r\nimport { DesignPage } from 'pages/DesignPage/DesignPage';\r\n\r\nexport const AppRouter = () => {\r\n    const { authState, verifyToken } = useAuthState();\r\n    const { token, checking } = authState;\r\n\r\n    useEffect(() => {\r\n        verifyToken();\r\n    }, [verifyToken]);\r\n\r\n    if (checking) {\r\n        return <h1>Espere...</h1>;\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <div>\r\n                <UserConfigProvider>\r\n                    <CssBaseline/>\r\n                    <NavBar />\r\n                    <Switch>\r\n                        <PublicRoute exact path=\"/\" component={ LandingPage } isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/profile/:uid\" component={ UserProfile } isAuthenticated={ !checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/my-designs\" component={MyDesignsPage} isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute path=\"/my-designs/:urlPath+/\" component={MyDesignsPage} isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/shared-with-me\" component={SharedWithMePage} isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/public-repository\" component={PublicRepositoryPage} isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/users/search\" component={SearchUsersPage} isAuthenticated={!checking && !!token }/>\r\n                        <PrivateRoute exact path=\"/designs/:id\" component={DesignPage} isAuthenticated={!checking && !!token }/>\r\n                        <Redirect to=\"/\" />\r\n                    </Switch>\r\n                    <Footer />\r\n                </UserConfigProvider>\r\n            </div>\r\n        </Router>\r\n    );\r\n};\r\n","import { QueryClient, QueryClientProvider } from \"react-query\";\r\n\r\nimport { AuthProvider } from \"contexts/AuthContext\";\r\nimport { SocketProvider } from \"contexts/SocketContext\";\r\nimport { UiProvider } from \"contexts/ui/UiContext\";\r\nimport { AppRouter } from \"router/AppRouter\";\r\nimport { DesignProvider } from \"contexts/design/DesignContext\";\r\n\r\nconst queryClient = new QueryClient()\r\n\r\nfunction LearningActivityDesigner() {\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            <UiProvider>\r\n                <AuthProvider>\r\n                    <DesignProvider>\r\n                        <SocketProvider>\r\n                            <AppRouter />\r\n                        </SocketProvider>\r\n                    </DesignProvider>\r\n                </AuthProvider>\r\n            </UiProvider>\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n\r\nexport default LearningActivityDesigner;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport LearningActivityDesigner from './App';\r\n\r\nReactDOM.render(\r\n    <LearningActivityDesigner />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}